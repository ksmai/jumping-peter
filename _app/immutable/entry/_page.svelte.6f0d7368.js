var Rt=Object.defineProperty;var Bt=(t,e,r)=>e in t?Rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fe=(t,e,r)=>(Bt(t,typeof e!="symbol"?e+"":e,r),r);import{S as Fe,i as Pe,n as ke,j as P,s as z,q as ae,k,l as U,c as q,r as ne,g as y,m,J as Ue,K as ye,a as ie,G as g,H as Se,L as Ie,M as Ge,u as Be,N as _t,y as me,z as de,A as ve,f as se,b as le,B as he,I as Te,O as $e,v as bt,d as wt,P as It,e as et,Q as yt,R as Mt,T as Ct,p as Ut,o as Ot,U as tt,V as Dt,w as Nt,W as Lt}from"../chunks/index.1d64faf9.js";import{b as Qe,w as We}from"../chunks/paths.166be9c2.js";function jt(t){let e,r,n,s,a,c,l,i,o,u,f,b,p;return{c(){e=P("header"),r=P("img"),s=z(),a=P("h1"),c=ae("Jumping Peter"),l=z(),i=P("p"),o=ae("generate gif emojis"),u=z(),f=P("a"),b=ae("Contribute"),this.h()},l(v){e=k(v,"HEADER",{class:!0});var _=U(e);r=k(_,"IMG",{class:!0,src:!0,alt:!0}),s=q(_),a=k(_,"H1",{class:!0});var d=U(a);c=ne(d,"Jumping Peter"),d.forEach(y),l=q(_),i=k(_,"P",{class:!0});var E=U(i);o=ne(E,"generate gif emojis"),E.forEach(y),u=q(_),f=k(_,"A",{class:!0,href:!0,target:!0,rel:!0});var A=U(f);b=ne(A,"Contribute"),A.forEach(y),_.forEach(y),this.h()},h(){m(r,"class","logo svelte-1kpylo8"),Ue(r.src,n=`${Qe}/demo-jumping.gif`)||m(r,"src",n),m(r,"alt",""),m(a,"class","title svelte-1kpylo8"),m(i,"class","subtitle svelte-1kpylo8"),m(f,"class","contribute svelte-1kpylo8"),m(f,"href","https://github.com/ksmai/jumping-peter"),m(f,"target","_blank"),m(f,"rel","noreferrer"),m(e,"class",p=ye(`header ${t[0]}`)+" svelte-1kpylo8")},m(v,_){ie(v,e,_),g(e,r),g(e,s),g(e,a),g(a,c),g(e,l),g(e,i),g(i,o),g(e,u),g(e,f),g(f,b)},p(v,[_]){_&1&&p!==(p=ye(`header ${v[0]}`)+" svelte-1kpylo8")&&m(e,"class",p)},i:Se,o:Se,d(v){v&&y(e)}}}function Gt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Vt extends Fe{constructor(e){super(),Pe(this,e,Gt,jt,ke,{class:0})}}function ze(t){return{...t,type:"slider",min:-360,max:360,step:1}}function xe(t){return{...t,type:"slider",min:0,max:1,step:.01}}function rt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function at(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Et(t){return{...t,type:"toggle"}}function Xt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}var Ne=typeof Float32Array<"u"?Float32Array:Array,zt=Math.PI/180;function qe(t){return t*zt}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Ve(){var t=new Ne(6);return Ne!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function At(t,e,r){var n=e[0],s=e[1],a=e[2],c=e[3],l=e[4],i=e[5],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*o,t[1]=s*u+c*o,t[2]=n*-o+a*u,t[3]=s*-o+c*u,t[4]=l,t[5]=i,t}function He(t,e,r){var n=e[0],s=e[1],a=e[2],c=e[3],l=e[4],i=e[5],o=r[0],u=r[1];return t[0]=n*o,t[1]=s*o,t[2]=a*u,t[3]=c*u,t[4]=l,t[5]=i,t}function Re(t,e,r){var n=e[0],s=e[1],a=e[2],c=e[3],l=e[4],i=e[5],o=r[0],u=r[1];return t[0]=n,t[1]=s,t[2]=a,t[3]=c,t[4]=n*o+a*u+l,t[5]=s*o+c*u+i,t}function Ze(){var t=new Ne(2);return Ne!=Float32Array&&(t[0]=0,t[1]=0),t}function nt(t,e){var r=new Ne(2);return r[0]=t,r[1]=e,r}function qt(t,e){return t[0]=-e[0],t[1]=-e[1],t}function xt(t,e,r,n){var s=e[0],a=e[1];return t[0]=s+n*(r[0]-s),t[1]=a+n*(r[1]-a),t}(function(){var t=Ze();return function(e,r,n,s,a,c){var l,i;for(r||(r=2),n||(n=0),s?i=Math.min(s*r+n,e.length):i=e.length,l=n;l<i;l+=r)t[0]=e[l],t[1]=e[l+1],a(t,t,c),e[l]=t[0],e[l+1]=t[1];return e}})();const Yt="spinning",Wt=[ze({name:"startAngle",label:"Start angle",default:0}),ze({name:"endAngle",label:"End angle",default:360}),Et({name:"alternate",label:"Alterate",default:!1}),xe({name:"originX",label:"Rotate origin X",default:.5}),xe({name:"originY",label:"Rotate origin Y",default:.5})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternate:a}=r;let{startAngle:c,endAngle:l,originX:i,originY:o}=r;c=qe(c),l=qe(l),i=i*2-1,o=o*2-1;const u=f=>{if(a&&f>.5)return u(1-f);const b=c+(l-c)*f*(a?2:1),p=Ve();return Re(p,p,[i,o]),At(p,p,b),Re(p,p,[-i,-o]),{u_transform:[p[0],p[1],0,p[2],p[3],0,p[4],p[5],1]}};return[{program:n,geometry:s,getUniforms:u}]}const Ht=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Wt,Name:Yt,createSprites:Tt},Symbol.toStringTag,{value:"Module"})),Jt="expanding",Qt=[rt({name:"minScale",label:"Min scale",default:1}),rt({name:"maxScale",label:"Max scale",default:2}),Et({name:"alternate",label:"Alterate",default:!1})];function $t(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternate:l}=r,i=o=>{if(l&&o>.5)return i(1-o);const u=a+(c-a)*o*(l?2:1),f=Ve();return He(f,f,[u,u]),{u_transform:[f[0],f[1],0,f[2],f[3],0,f[4],f[5],1]}};return[{program:n,geometry:s,getUniforms:i}]}const Zt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Qt,Name:Jt,createSprites:$t},Symbol.toStringTag,{value:"Module"})),Kt="extreme-speed",er=[at({name:"directionX",label:"Horizontal direction",default:-1}),at({name:"directionY",label:"Vertical direction",default:0})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("nine");let{directionX:a,directionY:c}=r;return a*=2,c*=2,[{program:n,geometry:s,getUniforms:i=>{const o=Ve();return Re(o,o,xt(Ze(),[0,0],[a,c],i)),He(o,o,[3,3]),{u_transform:[o[0],o[1],0,o[2],o[3],0,o[4],o[5],1]}}}]}const tr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:er,Name:Kt,createSprites:St},Symbol.toStringTag,{value:"Module"})),rr="excited",ar=[ze({name:"minAngle",label:"Min angle",default:15}),ze({name:"maxAngle",label:"Max angle",default:25}),xe({name:"minCenterX",label:"Min center X",default:.5}),xe({name:"maxCenterX",label:"Max center X",default:.55}),xe({name:"minCenterY",label:"Min center Y",default:.5}),xe({name:"maxCenterY",label:"Max center Y",default:.55})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full");let{minAngle:a,maxAngle:c,minCenterX:l,maxCenterX:i,minCenterY:o,maxCenterY:u}=r;return a=qe(a),c=qe(c),l=l*2-1,o=o*2-1,i=i*2-1,u=u*2-1,[{program:n,geometry:s,getUniforms:b=>{let p=a+(c-a)*Math.random();Math.random()<.5&&(p=-p);const v=xt(Ze(),[l,o],[i,u],Math.random());Math.random()<.5&&qt(v,v);const _=Math.random()<.5?nt(-1,1):nt(1,1),d=Ve();return He(d,d,_),Re(d,d,v),At(d,d,p),{u_transform:[d[0],d[1],0,d[2],d[3],0,d[4],d[5],1]}}}]}const nr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ar,Name:rr,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),sr="jumping",ir=[xe({name:"jumpHeight",label:"Jump height",default:.5}),xe({name:"compressTime",label:"Compress time",default:.4}),xe({name:"maxCompress",label:"Max compress",default:.25})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{jumpHeight:a,compressTime:c,maxCompress:l}=r,i=o=>{if(o>.5)return i(1-o);const u=Ve(),f=2*o/(1-c);if(f<1){const b=(1-f*f)*a*2;Re(u,u,[0,-b])}else{const b=(.5-o)*2/c,v=1-(1-b*b)*l;Re(u,u,[0,1]),He(u,u,[1/v,v]),Re(u,u,[0,-1])}return{u_transform:[u[0],u[1],0,u[2],u[3],0,u[4],u[5],1]}};return[{program:n,geometry:s,getUniforms:i}]}const lr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ir,Name:sr,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),Ye=[lr,tr,Ht,nr,Zt].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Xt(t.EditOptions,t.Name)}));function st(t,e,r){switch(r.name){case"spinning":return Tt(t,e,r);case"expanding":return $t(t,e,r);case"extreme-speed":return St(t,e,r);case"excited":return Ft(t,e,r);case"jumping":return Pt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class or{constructor(e){fe(this,"loadingUrl",null);fe(this,"url",null);fe(this,"texture",null);fe(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const cr=function(){var t={},e=-1,r,n,s,a,c,l,i=12,o=5003,u,f=i,b,p=1<<i,v=[],_=[],d=o,E=0,A=!1,V,C,M,I=0,X=0,J=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,O=[],N=t.LZWEncoder=function(L,$,h,F){r=L,n=$,s=h,a=Math.max(2,F)},re=function(L,$){O[Z++]=L,Z>=254&&_e($)},ue=function(L){Ee(d),E=C+2,A=!0,pe(C,L)},Ee=function(L){for(var $=0;$<L;++$)v[$]=-1},W=t.compress=function(L,$){var h,F,K,Y,oe,H,x;for(V=L,A=!1,u=V,b=be(u),C=1<<L-1,M=C+1,E=C+2,Z=0,Y=Ae(),x=0,h=d;h<65536;h*=2)++x;x=8-x,H=d,Ee(H),pe(C,$);e:for(;(K=Ae())!=e;){if(h=(K<<f)+Y,F=K<<x^Y,v[F]==h){Y=_[F];continue}else if(v[F]>=0){oe=H-F,F===0&&(oe=1);do if((F-=oe)<0&&(F+=H),v[F]==h){Y=_[F];continue e}while(v[F]>=0)}pe(Y,$),Y=K,E<p?(_[F]=E++,v[F]=h):ue($)}pe(Y,$),pe(M,$)};t.encode=function(L){L.writeByte(a),c=r*n,l=0,W(a+1,L),L.writeByte(0)};var _e=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(O,0,Z),Z=0)},be=function(L){return(1<<L)-1},Ae=function(){if(c===0)return e;--c;var L=s[l++];return L&255},pe=function(L,$){for(I&=J[X],X>0?I|=L<<X:I=L,X+=u;X>=8;)re(I&255,$),I>>=8,X-=8;if((E>b||A)&&(A?(b=be(u=V),A=!1):(++u,u==f?b=p:b=be(u))),L==M){for(;X>0;)re(I&255,$),I>>=8,X-=8;_e($)}};return N.apply(this,arguments),t},ur=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,l=e-1,i=4,o=100,u=16,f=1<<u,b=10,p=10,v=f>>p,_=f<<b-p,d=e>>3,E=6,A=1<<E,V=d*A,C=30,M=10,I=1<<M,X,J=8,Z=1<<J,O=M+J,N=1<<O,re,ue,Ee,W,_e=[],be=[],Ae=[],pe=[],te=t.NeuQuant=function(x,S,j){var R,B;for(re=x,ue=S,Ee=j,W=new Array(e),R=0;R<e;R++)W[R]=new Array(4),B=W[R],B[0]=B[1]=B[2]=(R<<i+8)/e,Ae[R]=f/e,be[R]=0},L=function(){for(var x=[],S=new Array(e),j=0;j<e;j++)S[W[j][3]]=j;for(var R=0,B=0;B<e;B++){var w=S[B];x[R++]=W[w][0],x[R++]=W[w][1],x[R++]=W[w][2]}return x},$=function(){var x,S,j,R,B,w,T,D;for(T=0,D=0,x=0;x<e;x++){for(B=W[x],j=x,R=B[1],S=x+1;S<e;S++)w=W[S],w[1]<R&&(j=S,R=w[1]);if(w=W[j],x!=j&&(S=w[0],w[0]=B[0],B[0]=S,S=w[1],w[1]=B[1],B[1]=S,S=w[2],w[2]=B[2],B[2]=S,S=w[3],w[3]=B[3],B[3]=S),R!=T){for(_e[T]=D+x>>1,S=T+1;S<R;S++)_e[S]=x;T=R,D=x}}for(_e[T]=D+l>>1,S=T+1;S<256;S++)_e[S]=l},h=function(){var x,S,j,R,B,w,T,D,G,ee,ge,Q,ce,Ke;for(ue<c&&(Ee=1),X=30+(Ee-1)/3,Q=re,ce=0,Ke=ue,ge=ue/(3*Ee),ee=ge/o|0,D=I,w=V,T=w>>E,T<=1&&(T=0),x=0;x<T;x++)pe[x]=D*((T*T-x*x)*Z/(T*T));for(ue<c?G=3:ue%r!==0?G=3*r:ue%n!==0?G=3*n:ue%s!==0?G=3*s:G=3*a,x=0;x<ge;)if(j=(Q[ce+0]&255)<<i,R=(Q[ce+1]&255)<<i,B=(Q[ce+2]&255)<<i,S=oe(j,R,B),Y(D,S,j,R,B),T!==0&&K(T,S,j,R,B),ce+=G,ce>=Ke&&(ce-=ue),x++,ee===0&&(ee=1),x%ee===0)for(D-=D/X,w-=w/C,T=w>>E,T<=1&&(T=0),S=0;S<T;S++)pe[S]=D*((T*T-S*S)*Z/(T*T))};t.map=function(x,S,j){var R,B,w,T,D,G,ee;for(D=1e3,ee=-1,R=_e[S],B=R-1;R<e||B>=0;)R<e&&(G=W[R],w=G[1]-S,w>=D?R=e:(R++,w<0&&(w=-w),T=G[0]-x,T<0&&(T=-T),w+=T,w<D&&(T=G[2]-j,T<0&&(T=-T),w+=T,w<D&&(D=w,ee=G[3])))),B>=0&&(G=W[B],w=S-G[1],w>=D?B=-1:(B--,w<0&&(w=-w),T=G[0]-x,T<0&&(T=-T),w+=T,w<D&&(T=G[2]-j,T<0&&(T=-T),w+=T,w<D&&(D=w,ee=G[3]))));return ee},t.process=function(){return h(),F(),$(),L()};var F=function(){var x;for(x=0;x<e;x++)W[x][0]>>=i,W[x][1]>>=i,W[x][2]>>=i,W[x][3]=x},K=function(x,S,j,R,B){var w,T,D,G,ee,ge,Q;for(D=S-x,D<-1&&(D=-1),G=S+x,G>e&&(G=e),w=S+1,T=S-1,ge=1;w<G||T>D;){if(ee=pe[ge++],w<G){Q=W[w++];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-R)/N,Q[2]-=ee*(Q[2]-B)/N}catch{}}if(T>D){Q=W[T--];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-R)/N,Q[2]-=ee*(Q[2]-B)/N}catch{}}}},Y=function(x,S,j,R,B){var w=W[S];w[0]-=x*(w[0]-j)/I,w[1]-=x*(w[1]-R)/I,w[2]-=x*(w[2]-B)/I},oe=function(x,S,j){var R,B,w,T,D,G,ee,ge,Q,ce;for(ge=~(1<<31),Q=ge,G=-1,ee=G,R=0;R<e;R++)ce=W[R],B=ce[0]-x,B<0&&(B=-B),w=ce[1]-S,w<0&&(w=-w),B+=w,w=ce[2]-j,w<0&&(w=-w),B+=w,B<ge&&(ge=B,G=R),T=B-(be[R]>>u-i),T<Q&&(Q=T,ee=R),D=Ae[R]>>p,Ae[R]-=D,be[R]+=D<<b;return Ae[G]+=v,be[G]-=_,ee};return te.apply(this,arguments),t},fr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var $="",h=this.bin.length,F=0;F<h;F++)$+=e[this.bin[F]];return $},r.prototype.writeByte=function($){this.bin.push($)},r.prototype.writeUTFBytes=function($){for(var h=$.length,F=0;F<h;F++)this.writeByte($.charCodeAt(F))},r.prototype.writeBytes=function($,h,F){for(var K=F||$.length,Y=h||0;Y<K;Y++)this.writeByte($[Y])};var n={},s,a,c=null,l,i=-1,o=0,u=!1,f,b,p,v,_,d,E=[],A=7,V=-1,C=!1,M=!0,I=!1,X=10,J="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(h){o=Math.round(h/10)},n.setDispose=function(h){h>=0&&(V=h)},n.setRepeat=function(h){h>=0&&(i=h)},n.setTransparent=function(h){c=h},n.setComment=function(h){J=h},n.addFrame=function(h,F){if(h===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var K=!0;try{F?h instanceof ImageData?(b=h.data,(!sizeset||s!=h.width||a!=h.height)&&O(h.width,h.height)):h instanceof Uint8ClampedArray?h.length==s*a*4?b=h:(console.log("Please set the correct size: ImageData length mismatch"),K=!1):(console.log("Please provide correct input"),K=!1):(b=h.getImageData(0,0,h.canvas.width,h.canvas.height).data,I||O(h.canvas.width,h.canvas.height)),ue(),N(),M&&(be(),pe(),i>=0&&Ae()),Ee(),J!==""&&W(),_e(),M||pe(),L(),M=!1}catch{K=!1}return K},n.download=function(h){if(f===null||C==!1)console.log("Please call start method and add frames and call finish method before calling download");else{h=h!==void 0?h.endsWith(".gif")?h:h+".gif":"download.gif";var F=document.createElement("a");F.download=h,F.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),F.click()}},n.finish=function(){if(!u)return!1;var h=!0;u=!1;try{f.writeByte(59),C=!0}catch{h=!1}return h};var Z=function(){l=0,b=null,p=null,v=null,d=null,C=!1,M=!0};n.setFrameRate=function(h){h!=15&&(o=Math.round(100/h))},n.setQuality=function(h){h<1&&(h=1),X=h};var O=n.setSize=function(h,F){u&&!M||(s=h,a=F,s<1&&(s=320),a<1&&(a=240),I=!0)};n.start=function(){Z();var h=!0;C=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{h=!1}return u=h},n.cont=function(){Z();var h=!0;return C=!1,f=new r,u=h};var N=function(){var h=p.length,F=h/3;v=[];var K=new ur(p,h,X);d=K.process();for(var Y=0,oe=0;oe<F;oe++){var H=K.map(p[Y++]&255,p[Y++]&255,p[Y++]&255);E[H]=!0,v[oe]=H}p=null,_=8,A=7,c!==null&&(l=re(c))},re=function(h){if(d===null)return-1;for(var F=(h&16711680)>>16,K=(h&65280)>>8,Y=h&255,oe=0,H=256*256*256,x=d.length,S=0;S<x;){var j=F-(d[S++]&255),R=K-(d[S++]&255),B=Y-(d[S]&255),w=j*j+R*R+B*B,T=S/3;E[T]&&w<H&&(H=w,oe=T),S++}return oe},ue=function(){var h=s,F=a;p=[];for(var K=b,Y=0,oe=0;oe<F;oe++)for(var H=0;H<h;H++){var x=oe*h*4+H*4;p[Y++]=K[x],p[Y++]=K[x+1],p[Y++]=K[x+2]}},Ee=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var h,F;c===null?(h=0,F=0):(h=1,F=2),V>=0&&(F=V&7),F<<=2,f.writeByte(0|F|0|h),te(o),f.writeByte(l),f.writeByte(0)},W=function(){f.writeByte(33),f.writeByte(254),f.writeByte(J.length),f.writeUTFBytes(J),f.writeByte(0)},_e=function(){f.writeByte(44),te(0),te(0),te(s),te(a),M?f.writeByte(0):f.writeByte(128|A)},be=function(){te(s),te(a),f.writeByte(240|A),f.writeByte(0),f.writeByte(0)},Ae=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),te(i),f.writeByte(0)},pe=function(){f.writeBytes(d);for(var h=3*256-d.length,F=0;F<h;F++)f.writeByte(0)},te=function(h){f.writeByte(h&255),f.writeByte(h>>8&255)},L=function(){var h=new cr(s,a,v,_);h.encode(f)};return n.stream=function(){return f},n.setProperties=function(h,F){u=h,M=F},n},we={a_position:0,a_texCoords:1},it={default:{vertex:`#version 300 es

layout(location = ${we.a_position}) in vec2 a_position;
layout(location = ${we.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  gl_Position = vec4((u_transform * vec3(a_position, 1.0)).xy, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class mr{constructor(e){fe(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:vr(this.gl,it[e].vertex,it[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function dr(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function vr(t,e,r){const n=lt(t,t.VERTEX_SHADER,e);let s;try{s=lt(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function lt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ot(t,e,r,n){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT);let s,a,c;for(const l of r){s!==l.program&&(t.useProgram(l.program.program),s=l.program),a!==l.geometry&&(t.bindVertexArray(l.geometry.vao),a=l.geometry),c!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),c=n);const i={u_image:n.unit,...l.getUniforms(e)};dr(t,l.program,i),t.drawArrays(l.geometry.drawMode,0,l.geometry.drawCount)}}const hr={full(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(we.a_position),t.vertexAttribPointer(we.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(we.a_texCoords),t.vertexAttribPointer(we.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}},nine(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,0,1,-1,3,0,-1,1,0,3,1,1,3,3]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(we.a_position),t.vertexAttribPointer(we.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(we.a_texCoords),t.vertexAttribPointer(we.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}};class pr{constructor(e){fe(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=hr[e](this.gl)),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class gr{constructor(e){fe(this,"gl");fe(this,"programFactory");fe(this,"geometryFactory");fe(this,"texture");fe(this,"queue",[]);fe(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new mr(this.gl),this.geometryFactory=new pr(this.gl),this.texture=new or(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new fr;if(a.setRepeat(0),a.setDelay(e.gif.delayMs),a.setSize(e.gif.width,e.gif.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:st(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:st(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let c=0;c<this.queue.length-1;++c)this.queue[c].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];if((e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.gif.imageUrl),this.canvas.width=r.gif.width,this.canvas.height=r.gif.height),e==="frame")ot(this.gl,a/r.gif.totalFrames,s,this.texture),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:c,sprites:l,callback:i}=this.queue[0];ot(this.gl,a/r.gif.totalFrames,l,this.texture),i(a);const o=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o),c.addFrame(o,!0),c.setTransparent(16777215),a===r.gif.totalFrames-1){c.finish();const u=c.stream().getData(),f="data:image/gif;base64,"+window.btoa(u);n({dataUri:f}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Le=function(){const{subscribe:t,update:e}=We(Ye[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=Ye.find(c=>c.name===n);return a||s})}}}(),Ce=function(){const t=`${Qe}/favicon.png`,{subscribe:e,update:r}=We({width:64,height:64,delayMs:50,totalFrames:20,imageUrl:t});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.imageUrl!==t&&URL.revokeObjectURL(c.imageUrl),{...c,imageUrl:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),je=function(){const{subscribe:t,update:e}=We(void 0,n=>Le.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),Oe=function(){const t=We({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(l=>{var i;return(i=l.animator)==null||i.destroy(),{animator:new gr(c),running:!1,frame:0}})}function s(){const{animator:c}=Ie(t);return c?(r(l=>({...l,running:!0,frame:0})),c.animate({gif:Ie(Ce),animation:Ie(je)},l=>r(i=>({...i,frame:l}))).finally(()=>{r(l=>({...l,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:l,frame:i}=Ie(t);if(!l)return Promise.reject("Animator has not been created");let o;typeof c>"u"?o=i:o=c;const u=Ie(Ce);return o>=u.totalFrames&&(o=u.totalFrames-1),r(f=>({...f,frame:o,running:!0})),l.renderFrame({gif:u,animation:Ie(je)},i).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ct(t){let e,r,n,s,a,c;return{c(){e=P("label"),r=ae(t[1]),n=z(),s=P("input"),this.h()},l(l){e=k(l,"LABEL",{class:!0});var i=U(e);r=ne(i,t[1]),n=q(i),s=k(i,"INPUT",{class:!0,type:!0}),i.forEach(y),this.h()},h(){m(s,"class","slider__text-input svelte-xvphrk"),m(s,"type","text"),s.value=t[0],m(e,"class","slider__label svelte-xvphrk")},m(l,i){ie(l,e,i),g(e,r),g(e,n),g(e,s),a||(c=Ge(s,"input",t[5]),a=!0)},p(l,i){i&2&&Be(r,l[1]),i&1&&s.value!==l[0]&&(s.value=l[0])},d(l){l&&y(e),a=!1,c()}}}function _r(t){let e,r,n,s,a=Xe(t[2])+"",c,l,i,o,u,f,b=Xe(t[3])+"",p,v,_,d=t[1]&&ct(t);return{c(){e=P("div"),d&&d.c(),r=z(),n=P("div"),s=P("span"),c=ae(a),l=z(),i=P("div"),o=P("input"),u=z(),f=P("span"),p=ae(b),this.h()},l(E){e=k(E,"DIV",{class:!0});var A=U(e);d&&d.l(A),r=q(A),n=k(A,"DIV",{class:!0});var V=U(n);s=k(V,"SPAN",{class:!0});var C=U(s);c=ne(C,a),C.forEach(y),l=q(V),i=k(V,"DIV",{class:!0});var M=U(i);o=k(M,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),M.forEach(y),u=q(V),f=k(V,"SPAN",{class:!0});var I=U(f);p=ne(I,b),I.forEach(y),V.forEach(y),A.forEach(y),this.h()},h(){m(s,"class","slider__range slider__range--min svelte-xvphrk"),m(o,"class","slider__input svelte-xvphrk"),m(o,"type","range"),m(o,"min",t[2]),m(o,"max",t[3]),m(o,"step",t[4]),o.value=t[0],m(i,"class","slider__input-container svelte-xvphrk"),m(f,"class","slider__range slider__range--max svelte-xvphrk"),m(n,"class","slider__container svelte-xvphrk"),m(e,"class","slider")},m(E,A){ie(E,e,A),d&&d.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,l),g(n,i),g(i,o),g(n,u),g(n,f),g(f,p),v||(_=Ge(o,"input",t[5]),v=!0)},p(E,[A]){E[1]?d?d.p(E,A):(d=ct(E),d.c(),d.m(e,r)):d&&(d.d(1),d=null),A&4&&a!==(a=Xe(E[2])+"")&&Be(c,a),A&4&&m(o,"min",E[2]),A&8&&m(o,"max",E[3]),A&16&&m(o,"step",E[4]),A&1&&(o.value=E[0]),A&8&&b!==(b=Xe(E[3])+"")&&Be(p,b)},i:Se,o:Se,d(E){E&&y(e),d&&d.d(),v=!1,_()}}}function Xe(t){return+(Math.round(t+"e+2")+"e-2")}function br(t,e,r){const n=_t();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:l=1}=e,{value:i=c<a?a:(c-a)/2}=e;function o(u){const f=u.target,b=parseFloat(f.value);Number.isNaN(b)||(r(0,i=b),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,c=u.max),"step"in u&&r(4,l=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,c,l,o]}class Me extends Fe{constructor(e){super(),Pe(this,e,br,_r,ke,{label:1,min:2,max:3,step:4,value:0})}}function wr(t){let e,r,n,s,a,c,l,i,o,u,f,b,p,v,_,d,E,A,V,C;return u=new Me({props:{label:"Output width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[3]("width")),b=new Me({props:{label:"Output height",min:1,max:1024,step:1,value:t[1].height}}),b.$on("input",t[3]("height")),v=new Me({props:{label:"Delay ms",min:20,max:1e3,step:10,value:t[1].delayMs}}),v.$on("input",t[3]("delayMs")),d=new Me({props:{label:"Total frames",min:1,max:1e3,step:1,value:t[1].totalFrames}}),d.$on("input",t[3]("totalFrames")),{c(){e=P("aside"),r=P("label"),n=ae(`Upload image

    `),s=P("input"),a=z(),c=P("div"),l=P("img"),o=z(),me(u.$$.fragment),f=z(),me(b.$$.fragment),p=z(),me(v.$$.fragment),_=z(),me(d.$$.fragment),this.h()},l(M){e=k(M,"ASIDE",{class:!0});var I=U(e);r=k(I,"LABEL",{class:!0});var X=U(r);n=ne(X,`Upload image

    `),s=k(X,"INPUT",{class:!0,type:!0,accept:!0}),a=q(X),c=k(X,"DIV",{class:!0});var J=U(c);l=k(J,"IMG",{class:!0,src:!0,alt:!0}),J.forEach(y),X.forEach(y),o=q(I),de(u.$$.fragment,I),f=q(I),de(b.$$.fragment,I),p=q(I),de(v.$$.fragment,I),_=q(I),de(d.$$.fragment,I),I.forEach(y),this.h()},h(){m(s,"class","image__input svelte-1wsjlr5"),m(s,"type","file"),m(s,"accept","image/*"),m(l,"class","image__preview svelte-1wsjlr5"),Ue(l.src,i=t[1].imageUrl)||m(l,"src",i),m(l,"alt","source"),m(c,"class","image__container svelte-1wsjlr5"),m(r,"class","image svelte-1wsjlr5"),m(e,"class",E=ye(`container ${t[0]}`)+" svelte-1wsjlr5")},m(M,I){ie(M,e,I),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,l),g(e,o),ve(u,e,null),g(e,f),ve(b,e,null),g(e,p),ve(v,e,null),g(e,_),ve(d,e,null),A=!0,V||(C=Ge(s,"input",t[2]),V=!0)},p(M,[I]){(!A||I&2&&!Ue(l.src,i=M[1].imageUrl))&&m(l,"src",i);const X={};I&2&&(X.value=M[1].width),u.$set(X);const J={};I&2&&(J.value=M[1].height),b.$set(J);const Z={};I&2&&(Z.value=M[1].delayMs),v.$set(Z);const O={};I&2&&(O.value=M[1].totalFrames),d.$set(O),(!A||I&1&&E!==(E=ye(`container ${M[0]}`)+" svelte-1wsjlr5"))&&m(e,"class",E)},i(M){A||(se(u.$$.fragment,M),se(b.$$.fragment,M),se(v.$$.fragment,M),se(d.$$.fragment,M),A=!0)},o(M){le(u.$$.fragment,M),le(b.$$.fragment,M),le(v.$$.fragment,M),le(d.$$.fragment,M),A=!1},d(M){M&&y(e),he(u),he(b),he(v),he(d),V=!1,C()}}}function yr(t,e,r){let n;Te(t,Ce,l=>r(1,n=l));let{class:s=""}=e;function a(l){var u;const o=(u=l.target.files)==null?void 0:u[0];o&&Ce.changeImage(o)}function c(l){return function(i){Ce.change({[l]:i.detail.value})}}return t.$$set=l=>{"class"in l&&r(0,s=l.class)},[s,n,a,c]}class Er extends Fe{constructor(e){super(),Pe(this,e,yr,wr,ke,{class:0})}}function Ar(t){let e,r,n,s,a,c,l;return{c(){e=P("div"),r=ae(t[1]),n=z(),s=P("label"),a=P("input"),this.h()},l(i){e=k(i,"DIV",{class:!0});var o=U(e);r=ne(o,t[1]),n=q(o),s=k(o,"LABEL",{class:!0});var u=U(s);a=k(u,"INPUT",{class:!0,type:!0}),u.forEach(y),o.forEach(y),this.h()},h(){m(a,"class","toggle__checkbox svelte-1j9rfin"),m(a,"type","checkbox"),a.checked=t[0],m(s,"class","toggle__label svelte-1j9rfin"),$e(s,"toggle__label--active",t[0]),m(e,"class","toggle svelte-1j9rfin")},m(i,o){ie(i,e,o),g(e,r),g(e,n),g(e,s),g(s,a),c||(l=Ge(a,"change",t[2]),c=!0)},p(i,[o]){o&2&&Be(r,i[1]),o&1&&(a.checked=i[0]),o&1&&$e(s,"toggle__label--active",i[0])},i:Se,o:Se,d(i){i&&y(e),c=!1,l()}}}function xr(t,e,r){const n=_t();let{label:s=""}=e,{value:a=!1}=e;function c(l){const i=l.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=l=>{"label"in l&&r(1,s=l.label),"value"in l&&r(0,a=l.value)},[a,s,c]}class kt extends Fe{constructor(e){super(),Pe(this,e,xr,Ar,ke,{label:1,value:0})}}function ut(t,e,r){const n=t.slice();return n[5]=e[r],n}function Tr(t){let e,r;return e=new kt({props:{label:t[5].label,value:t[1][t[5].name]}}),e.$on("change",function(){yt(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].label),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){le(e.$$.fragment,n),r=!1},d(n){he(e,n)}}}function $r(t){let e,r;return e=new Me({props:{label:t[5].label,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){yt(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].label),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){le(e.$$.fragment,n),r=!1},d(n){he(e,n)}}}function ft(t){let e,r,n,s;const a=[$r,Tr],c=[];function l(i,o){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=l(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,o){~e&&c[e].m(i,o),ie(i,n,o),s=!0},p(i,o){let u=e;e=l(i),e===u?~e&&c[e].p(i,o):(r&&(bt(),le(c[u],1,1,()=>{c[u]=null}),wt()),~e?(r=c[e],r?r.p(i,o):(r=c[e]=a[e](i),r.c()),se(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(se(r),s=!0)},o(i){le(r),s=!1},d(i){~e&&c[e].d(i),i&&y(n)}}}function Sr(t){let e,r,n,s=t[2].editOptions,a=[];for(let l=0;l<s.length;l+=1)a[l]=ft(ut(t,s,l));const c=l=>le(a[l],1,1,()=>{a[l]=null});return{c(){e=P("aside");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=k(l,"ASIDE",{class:!0});var i=U(e);for(let o=0;o<a.length;o+=1)a[o].l(i);i.forEach(y),this.h()},h(){m(e,"class",r=ye(`container ${t[0]}`)+" svelte-1solget")},m(l,i){ie(l,e,i);for(let o=0;o<a.length;o+=1)a[o].m(e,null);n=!0},p(l,[i]){if(i&14){s=l[2].editOptions;let o;for(o=0;o<s.length;o+=1){const u=ut(l,s,o);a[o]?(a[o].p(u,i),se(a[o],1)):(a[o]=ft(u),a[o].c(),se(a[o],1),a[o].m(e,null))}for(bt(),o=s.length;o<a.length;o+=1)c(o);wt()}(!n||i&1&&r!==(r=ye(`container ${l[0]}`)+" svelte-1solget"))&&m(e,"class",r)},i(l){if(!n){for(let i=0;i<s.length;i+=1)se(a[i]);n=!0}},o(l){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)le(a[i]);n=!1},d(l){l&&y(e),It(a,l)}}}function Fr(t,e,r){let n,s,a;Te(t,je,i=>r(4,s=i)),Te(t,Le,i=>r(2,a=i));let{class:c=""}=e;function l(i){return function(o){je.change({[i]:o.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,l,s]}class Pr extends Fe{constructor(e){super(),Pe(this,e,Fr,Sr,ke,{class:0})}}function mt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function dt(t,e){let r,n,s,a,c,l=e[4]+"",i,o,u,f;function b(){return e[3](e[4])}return{key:t,first:null,c(){r=P("button"),n=P("img"),a=z(),c=P("span"),i=ae(l),o=z(),this.h()},l(p){r=k(p,"BUTTON",{type:!0,class:!0});var v=U(r);n=k(v,"IMG",{class:!0,src:!0,alt:!0}),a=q(v),c=k(v,"SPAN",{});var _=U(c);i=ne(_,l),_.forEach(y),o=q(v),v.forEach(y),this.h()},h(){m(n,"class","image svelte-18ktnr0"),Ue(n.src,s=`${Qe}/demo-${e[4]}.gif`)||m(n,"src",s),m(n,"alt",e[4]),m(r,"type","button"),m(r,"class","option svelte-18ktnr0"),$e(r,"option--selected",e[4]===e[1].name),this.first=r},m(p,v){ie(p,r,v),g(r,n),g(r,a),g(r,c),g(c,i),g(r,o),u||(f=Ge(r,"click",b),u=!0)},p(p,v){e=p,v&2&&$e(r,"option--selected",e[4]===e[1].name)},d(p){p&&y(r),u=!1,f()}}}function kr(t){let e,r=[],n=new Map,s,a=Ye;const c=l=>l[4];for(let l=0;l<a.length;l+=1){let i=mt(t,a,l),o=c(i);n.set(o,r[l]=dt(o,i))}return{c(){e=P("aside");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=k(l,"ASIDE",{class:!0});var i=U(e);for(let o=0;o<r.length;o+=1)r[o].l(i);i.forEach(y),this.h()},h(){m(e,"class",s=ye(`container ${t[0]}`)+" svelte-18ktnr0")},m(l,i){ie(l,e,i);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(l,[i]){i&6&&(a=Ye,r=Mt(r,i,c,1,l,a,n,e,Ct,dt,null,mt)),i&1&&s!==(s=ye(`container ${l[0]}`)+" svelte-18ktnr0")&&m(e,"class",s)},i:Se,o:Se,d(l){l&&y(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Rr(t,e,r){let n;Te(t,Le,l=>r(1,n=l));let{class:s=""}=e;function a(l){l!==n.name&&Le.change(l)}const c=l=>a(l);return t.$$set=l=>{"class"in l&&r(0,s=l.class)},[s,n,a,c]}class Br extends Fe{constructor(e){super(),Pe(this,e,Rr,kr,ke,{class:0})}}function vt(t){t[13]=t[14].dataUri}function ht(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Cr,then:Mr,catch:Ir,value:14,error:15};return tt(r=t[4],n),{c(){e=P("div"),n.block.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var a=U(e);n.block.l(a),a.forEach(y),this.h()},h(){m(e,"class","preview__container preview__container--no-debug svelte-4d3008")},m(s,a){ie(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||Dt(n,t,a)},d(s){s&&y(e),n.block.d(),n.token=null,n=null}}}function Ir(t){let e,r,n=t[15]+"",s;return{c(){e=P("p"),r=ae("An error has occurred: "),s=ae(n),this.h()},l(a){e=k(a,"P",{class:!0});var c=U(e);r=ne(c,"An error has occurred: "),s=ne(c,n),c.forEach(y),this.h()},h(){m(e,"class","preview__error svelte-4d3008")},m(a,c){ie(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[15]+"")&&Be(s,n)},d(a){a&&y(e)}}}function Mr(t){vt(t);let e,r,n,s,a,c,l;return{c(){e=P("div"),r=P("img"),s=z(),a=P("a"),c=ae("Download"),this.h()},l(i){e=k(i,"DIV",{class:!0});var o=U(e);r=k(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach(y),s=q(i),a=k(i,"A",{class:!0,download:!0,href:!0});var u=U(a);c=ne(u,"Download"),u.forEach(y),this.h()},h(){m(r,"class","preview__image svelte-4d3008"),Ue(r.src,n=t[13])||m(r,"src",n),m(r,"alt","generated gif"),m(e,"class","preview__image-container svelte-4d3008"),m(a,"class","preview__download-button svelte-4d3008"),m(a,"download","jumping_peter.gif"),m(a,"href",l=t[13])},m(i,o){ie(i,e,o),g(e,r),ie(i,s,o),ie(i,a,o),g(a,c)},p(i,o){vt(i),o&16&&!Ue(r.src,n=i[13])&&m(r,"src",n),o&16&&l!==(l=i[13])&&m(a,"href",l)},d(i){i&&y(e),i&&y(s),i&&y(a)}}}function Cr(t){let e,r,n,s,a,c,l=t[5].frame+"",i,o,u=t[2].totalFrames+"",f,b,p,v,_,d;return{c(){e=P("div"),r=P("p"),n=ae("Generating..."),s=z(),a=P("p"),c=ae("["),i=ae(l),o=ae(" / "),f=ae(u),b=ae("]"),p=z(),v=P("progress"),this.h()},l(E){e=k(E,"DIV",{class:!0});var A=U(e);r=k(A,"P",{});var V=U(r);n=ne(V,"Generating..."),V.forEach(y),s=q(A),a=k(A,"P",{});var C=U(a);c=ne(C,"["),i=ne(C,l),o=ne(C," / "),f=ne(C,u),b=ne(C,"]"),C.forEach(y),p=q(A),v=k(A,"PROGRESS",{class:!0,max:!0}),U(v).forEach(y),A.forEach(y),this.h()},h(){m(v,"class","preview__progress svelte-4d3008"),m(v,"max",_=t[2].totalFrames),v.value=d=t[5].frame,m(e,"class","preview__loading svelte-4d3008")},m(E,A){ie(E,e,A),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,o),g(a,f),g(a,b),g(e,p),g(e,v)},p(E,A){A&32&&l!==(l=E[5].frame+"")&&Be(i,l),A&4&&u!==(u=E[2].totalFrames+"")&&Be(f,u),A&4&&_!==(_=E[2].totalFrames)&&m(v,"max",_),A&32&&d!==(d=E[5].frame)&&(v.value=d)},d(E){E&&y(e)}}}function Ur(t){let e,r,n,s,a,c,l,i,o,u,f,b;n=new kt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[4]&&ht(t);return u=new Me({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=P("main"),r=P("div"),me(n.$$.fragment),s=z(),p&&p.c(),a=z(),c=P("div"),l=P("div"),i=P("canvas"),o=z(),me(u.$$.fragment),this.h()},l(v){e=k(v,"MAIN",{class:!0});var _=U(e);r=k(_,"DIV",{class:!0});var d=U(r);de(n.$$.fragment,d),d.forEach(y),s=q(_),p&&p.l(_),a=q(_),c=k(_,"DIV",{class:!0});var E=U(c);l=k(E,"DIV",{class:!0});var A=U(l);i=k(A,"CANVAS",{class:!0,style:!0}),U(i).forEach(y),A.forEach(y),o=q(E),de(u.$$.fragment,E),E.forEach(y),_.forEach(y),this.h()},h(){m(r,"class","preview__debug-input svelte-4d3008"),m(i,"class","preview__image svelte-4d3008"),Ut(i,"transform","scaleY(-1)"),m(l,"class","preview__image-container svelte-4d3008"),m(c,"class","preview__container preview__container--debug svelte-4d3008"),m(e,"class",f=ye(`preview ${t[0]}`)+" svelte-4d3008"),$e(e,"preview--debug",t[1]),$e(e,"preview--no-debug",!t[1])},m(v,_){ie(v,e,_),g(e,r),ve(n,r,null),g(e,s),p&&p.m(e,null),g(e,a),g(e,c),g(c,l),g(l,i),t[10](i),g(c,o),ve(u,c,null),b=!0},p(v,[_]){const d={};_&2&&(d.value=v[1]),n.$set(d),!v[1]&&v[4]?p?p.p(v,_):(p=ht(v),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const E={};_&4&&(E.max=v[2].totalFrames-1),_&32&&(E.value=v[5].frame),u.$set(E),(!b||_&1&&f!==(f=ye(`preview ${v[0]}`)+" svelte-4d3008"))&&m(e,"class",f),(!b||_&3)&&$e(e,"preview--debug",v[1]),(!b||_&3)&&$e(e,"preview--no-debug",!v[1])},i(v){b||(se(n.$$.fragment,v),se(u.$$.fragment,v),b=!0)},o(v){le(n.$$.fragment,v),le(u.$$.fragment,v),b=!1},d(v){v&&y(e),he(n),p&&p.d(),t[10](null),he(u)}}}function Or(t,e,r){let n,s,a,c;Te(t,Le,d=>r(8,n=d)),Te(t,je,d=>r(9,s=d)),Te(t,Ce,d=>r(2,a=d)),Te(t,Oe,d=>r(5,c=d));let l,{class:i=""}=e,o=!1,u=null;function f(){Oe.renderFrame().catch(d=>{throw console.error(`renderFrame failed: ${d}`),d})}function b(){r(4,u=Oe.animate().catch(d=>{throw console.error(`animate failed: ${d}`),d}))}Ot(()=>{Oe.changeCanvas(l),b()});function p(d){Oe.renderFrame(d.detail.value).catch(E=>console.error(`Animation failed: ${E}`))}function v(d){r(1,o=d.detail.value)}function _(d){Nt[d?"unshift":"push"](()=>{l=d,r(3,l)})}return t.$$set=d=>{"class"in d&&r(0,i=d.class)},t.$$.update=()=>{t.$$.dirty&774&&(o?f():b())},[i,o,a,l,u,c,p,v,n,s,_]}class Dr extends Fe{constructor(e){super(),Pe(this,e,Or,Ur,ke,{class:0})}}function Nr(t){let e,r,n,s,a,c,l,i,o,u,f,b,p,v,_,d,E,A,V,C,M,I,X,J,Z;return document.title=e=De,d=new Vt({props:{class:"header"}}),A=new Br({props:{class:"animations"}}),C=new Er({props:{class:"gif-options"}}),I=new Pr({props:{class:"animation-options"}}),J=new Dr({props:{class:"preview"}}),{c(){r=P("meta"),n=P("meta"),s=P("meta"),a=P("meta"),c=P("meta"),l=P("meta"),i=P("meta"),o=P("meta"),u=P("meta"),f=P("meta"),b=P("meta"),p=P("meta"),v=z(),_=P("div"),me(d.$$.fragment),E=z(),me(A.$$.fragment),V=z(),me(C.$$.fragment),M=z(),me(I.$$.fragment),X=z(),me(J.$$.fragment),this.h()},l(O){const N=Lt("svelte-2dqrj",document.head);r=k(N,"META",{name:!0,content:!0,class:!0}),n=k(N,"META",{name:!0,content:!0,class:!0}),s=k(N,"META",{property:!0,content:!0,class:!0}),a=k(N,"META",{property:!0,content:!0,class:!0}),c=k(N,"META",{property:!0,content:!0,class:!0}),l=k(N,"META",{property:!0,content:!0,class:!0}),i=k(N,"META",{property:!0,content:!0,class:!0}),o=k(N,"META",{property:!0,content:!0,class:!0}),u=k(N,"META",{property:!0,content:!0,class:!0}),f=k(N,"META",{property:!0,content:!0,class:!0}),b=k(N,"META",{property:!0,content:!0,class:!0}),p=k(N,"META",{property:!0,content:!0,class:!0}),N.forEach(y),v=q(O),_=k(O,"DIV",{class:!0});var re=U(_);de(d.$$.fragment,re),E=q(re),de(A.$$.fragment,re),V=q(re),de(C.$$.fragment,re),M=q(re),de(I.$$.fragment,re),X=q(re),de(J.$$.fragment,re),re.forEach(y),this.h()},h(){m(r,"name","title"),m(r,"content",De),m(r,"class","svelte-vglu9v"),m(n,"name","description"),m(n,"content",Je),m(n,"class","svelte-vglu9v"),m(s,"property","og:type"),m(s,"content","website"),m(s,"class","svelte-vglu9v"),m(a,"property","og:url"),m(a,"content",pt),m(a,"class","svelte-vglu9v"),m(c,"property","og:title"),m(c,"content",De),m(c,"class","svelte-vglu9v"),m(l,"property","og:description"),m(l,"content",Je),m(l,"class","svelte-vglu9v"),m(i,"property","og:image"),m(i,"content",gt),m(i,"class","svelte-vglu9v"),m(o,"property","twitter:card"),m(o,"content","summary_large_image"),m(o,"class","svelte-vglu9v"),m(u,"property","twitter:url"),m(u,"content",pt),m(u,"class","svelte-vglu9v"),m(f,"property","twitter:title"),m(f,"content",De),m(f,"class","svelte-vglu9v"),m(b,"property","twitter:description"),m(b,"content",Je),m(b,"class","svelte-vglu9v"),m(p,"property","twitter:image"),m(p,"content",gt),m(p,"class","svelte-vglu9v"),m(_,"class","grid svelte-vglu9v")},m(O,N){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,l),g(document.head,i),g(document.head,o),g(document.head,u),g(document.head,f),g(document.head,b),g(document.head,p),ie(O,v,N),ie(O,_,N),ve(d,_,null),g(_,E),ve(A,_,null),g(_,V),ve(C,_,null),g(_,M),ve(I,_,null),g(_,X),ve(J,_,null),Z=!0},p(O,[N]){(!Z||N&0)&&e!==(e=De)&&(document.title=e)},i(O){Z||(se(d.$$.fragment,O),se(A.$$.fragment,O),se(C.$$.fragment,O),se(I.$$.fragment,O),se(J.$$.fragment,O),Z=!0)},o(O){le(d.$$.fragment,O),le(A.$$.fragment,O),le(C.$$.fragment,O),le(I.$$.fragment,O),le(J.$$.fragment,O),Z=!1},d(O){y(r),y(n),y(s),y(a),y(c),y(l),y(i),y(o),y(u),y(f),y(b),y(p),O&&y(v),O&&y(_),he(d),he(A),he(C),he(I),he(J)}}}const De="Jumping Peter",Je="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",pt="https://ksmai.github.io/jumping-peter",gt="https://ksmai.github.io/jumping-peter/favicon.png";class Vr extends Fe{constructor(e){super(),Pe(this,e,null,Nr,ke,{})}}export{Vr as default};
