var Ft=Object.defineProperty;var Bt=(t,e,r)=>e in t?Ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var be=(t,e,r)=>(Bt(t,typeof e!="symbol"?e+"":e,r),r);import{S as Be,i as Me,n as Ie,j as F,s as q,q as ie,k as B,l as C,c as X,r as oe,g as $,m as d,J as Re,K as Ae,a as le,G as g,H as Pe,L as Ue,M as Ge,u as Fe,N as _t,y as ue,z as fe,A as me,f as ae,b as se,B as de,I as ke,O as Oe,v as bt,d as wt,P as Mt,e as Ze,Q as It,R as kt,p as Rt,o as Ut,T as Ke,U as Ct,w as Dt,V as jt}from"../chunks/index.adf49e6c.js";import{b as Ve,w as He}from"../chunks/paths.0369b5b2.js";function Nt(t){let e,r,n,s,a,l,o,i,c,u,f,_,p;return{c(){e=F("header"),r=F("img"),s=q(),a=F("h1"),l=ie("Jumping Peter"),o=q(),i=F("p"),c=ie("generate gif emojis"),u=q(),f=F("a"),_=ie("Contribute"),this.h()},l(m){e=B(m,"HEADER",{class:!0});var h=C(e);r=B(h,"IMG",{class:!0,src:!0,alt:!0}),s=X(h),a=B(h,"H1",{class:!0});var b=C(a);l=oe(b,"Jumping Peter"),b.forEach($),o=X(h),i=B(h,"P",{class:!0});var E=C(i);c=oe(E,"generate gif emojis"),E.forEach($),u=X(h),f=B(h,"A",{class:!0,href:!0,target:!0,rel:!0});var w=C(f);_=oe(w,"Contribute"),w.forEach($),h.forEach($),this.h()},h(){d(r,"class","logo svelte-bal6b7"),Re(r.src,n=`${Ve}/demo-jumping.gif`)||d(r,"src",n),d(r,"alt",""),d(a,"class","title svelte-bal6b7"),d(i,"class","subtitle svelte-bal6b7"),d(f,"class","contribute svelte-bal6b7"),d(f,"href","https://github.com/ksmai/jumping-peter"),d(f,"target","_blank"),d(f,"rel","noreferrer"),d(e,"class",p=Ae(`header ${t[0]}`)+" svelte-bal6b7")},m(m,h){le(m,e,h),g(e,r),g(e,s),g(e,a),g(a,l),g(e,o),g(e,i),g(i,c),g(e,u),g(e,f),g(f,_)},p(m,[h]){h&1&&p!==(p=Ae(`header ${m[0]}`)+" svelte-bal6b7")&&d(e,"class",p)},i:Pe,o:Pe,d(m){m&&$(e)}}}function zt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Lt extends Be{constructor(e){super(),Me(this,e,zt,Nt,Ie,{class:0})}}function Le(t){return{...t,type:"slider",min:-360,max:360,step:1}}function et(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Xe(t){return{...t,type:"slider",min:0,max:1,step:.01}}function tt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function rt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function at(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Gt(t){return{...t,type:"slider",min:1,max:100,step:1}}function yt(t){return{...t,type:"toggle"}}function qt(t){return t.reduce((e,r)=>(Object.assign(e,{[r.name]:r.value}),e),{})}function De(){return[1,0,0,1,0,0]}function Qe(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function We(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,l,o,i,c,u]=t;t[0]=a*n-l*s,t[1]=a*s+l*n,t[2]=o*n-i*s,t[3]=o*s+i*n,t[4]=c*n-u*s,t[5]=c*s+u*n}function Se(t,e,r){t[4]+=e,t[5]+=r}function je(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Te(t,e,r){return t+(e-t)*r}function Et(t){return t*Math.PI/180}const Xt="spinning",Vt={delayMs:50,totalFrames:15},Wt=[Le({name:"startAngle",value:0}),Le({name:"endAngle",value:360}),et({name:"originX",value:0}),et({name:"originY",value:0}),yt({name:"alternates",value:!1})];function $t(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:l,endAngle:o,originX:i,originY:c}=r;return[{program:n,geometry:s,getUniforms:f=>{const _=a?Math.min(f,1-f)*2:f,p=Te(l,o,_),m=De();return Se(m,-i,-c),We(m,p),Se(m,i,c),{u_transform:je(m)}}}]}const Yt=Object.freeze(Object.defineProperty({__proto__:null,createSprites:$t,editOptions:Wt,frameOptions:Vt,name:Xt},Symbol.toStringTag,{value:"Module"})),Ht="expanding",Qt={delayMs:50,totalFrames:20},Jt=[rt({name:"minScale",value:1}),rt({name:"maxScale",value:2}),yt({name:"alternates",value:!1})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:l,alternates:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const u=o?Math.min(c,1-c)*2:c,f=Te(a,l,u),_=De();return Qe(_,f,f),{u_transform:je(_)}}}]}const Zt=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Tt,editOptions:Jt,frameOptions:Qt,name:Ht},Symbol.toStringTag,{value:"Module"})),Kt="extreme-speed",er={delayMs:20,totalFrames:10},tr=[at({name:"directionX",value:-1}),at({name:"directionY",value:0})];function At(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:a,directionY:l}=r,o=a*2,i=l*2;return[{program:n,geometry:s,getUniforms:u=>{const f=De(),_=Te(0,o,u),p=Te(0,i,u);return Se(f,_,p),{u_transform:je(f)}}}]}const rr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:At,editOptions:tr,frameOptions:er,name:Kt},Symbol.toStringTag,{value:"Module"})),ar="excited",nr={delayMs:50,totalFrames:25},sr=[Le({name:"angle",value:15}),tt({name:"startOffset",value:-.1}),tt({name:"endOffset",value:.1}),Gt({name:"cycles",value:3})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:l}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const c=Et(a),u=Math.cos(c),f=Math.sin(c);return[{program:n,geometry:s,getUniforms:p=>{const m=p*2*l%1,h=Math.min(m,1-m)*2,b=Te(-o*f,-i*f,h),E=Te(o*u,i*u,h),w=De();return We(w,a),Se(w,b,E),Qe(w,p>.5?-1:1,1),{u_transform:je(w)}}}]}const ir=Object.freeze(Object.defineProperty({__proto__:null,createSprites:xt,editOptions:sr,frameOptions:nr,name:ar},Symbol.toStringTag,{value:"Module"})),or="jumping",lr={delayMs:50,totalFrames:20},cr=[Xe({name:"maxOffset",value:.6}),Xe({name:"compressTime",value:.4}),Xe({name:"maxCompress",value:.3})];function Ot(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:l,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const u=Math.min(c,1-c)*2,f=De(),_=u/(1-l);if(_<1){const p=(1-_*_)*a*2;Se(f,0,p)}else{const p=(1-u)/l,h=1-(1-p*p)*o;Se(f,0,1),Qe(f,1/h,h),Se(f,0,-1)}return{u_transform:je(f)}}}]}const ur=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ot,editOptions:cr,frameOptions:lr,name:or},Symbol.toStringTag,{value:"Module"})),fr="tower",mr={delayMs:40,totalFrames:20},dr=[Le({name:"startAngle",value:20}),Le({name:"endAngle",value:-45}),Xe({name:"startTime",value:.5})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("tower"),{startAngle:a,endAngle:l,startTime:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const u=De();if(c<o){const f=c/o,_=Math.min(f,1-f)*2,p=Te(0,a,_);We(u,p)}else{const f=(c-o)/(1-o),_=Math.min(f,1-f)*2,p=Te(0,l,_);if(We(u,p),f>.5){const m=Et(p),h=Math.cos(m),b=Math.sin(m),E=(f-.5)*2,w=Te(0,-2*b,E),N=Te(0,2*h,E);Se(u,w,N)}}return{u_transform:je(u)}}}]}const hr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:St,editOptions:dr,frameOptions:mr,name:fr},Symbol.toStringTag,{value:"Module"})),nt=[ur,rr,Yt,ir,Zt,hr];function st(t,e,r){const n=qt(r.editOptions);switch(r.name){case"spinning":return $t(t,e,n);case"expanding":return Tt(t,e,n);case"extreme-speed":return At(t,e,n);case"excited":return xt(t,e,n);case"jumping":return Ot(t,e,n);case"tower":return St(t,e,n);default:(s=>{throw new Error(`Unknown animation: ${JSON.stringify(s)}`)})(r)}}const vr=function(){var t={},e=-1,r,n,s,a,l,o,i=12,c=5003,u,f=i,_,p=1<<i,m=[],h=[],b=c,E=0,w=!1,N,R,W,U=0,J=0,H=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,D=[],T=t.LZWEncoder=function(z,O,v,P){r=z,n=O,s=v,a=Math.max(2,P)},k=function(z,O){D[Z++]=z,Z>=254&&ge(O)},ee=function(z){he(b),E=R+2,w=!0,ve(R,z)},he=function(z){for(var O=0;O<z;++O)m[O]=-1},V=t.compress=function(z,O){var v,P,te,Y,ce,Q,A;for(N=z,w=!1,u=N,_=_e(u),R=1<<z-1,W=R+1,E=R+2,Z=0,Y=we(),A=0,v=b;v<65536;v*=2)++A;A=8-A,Q=b,he(Q),ve(R,O);e:for(;(te=we())!=e;){if(v=(te<<f)+Y,P=te<<A^Y,m[P]==v){Y=h[P];continue}else if(m[P]>=0){ce=Q-P,P===0&&(ce=1);do if((P-=ce)<0&&(P+=Q),m[P]==v){Y=h[P];continue e}while(m[P]>=0)}ve(Y,O),Y=te,E<p?(h[P]=E++,m[P]=v):ee(O)}ve(Y,O),ve(W,O)};t.encode=function(z){z.writeByte(a),l=r*n,o=0,V(a+1,z),z.writeByte(0)};var ge=function(z){Z>0&&(z.writeByte(Z),z.writeBytes(D,0,Z),Z=0)},_e=function(z){return(1<<z)-1},we=function(){if(l===0)return e;--l;var z=s[o++];return z&255},ve=function(z,O){for(U&=H[J],J>0?U|=z<<J:U=z,J+=u;J>=8;)k(U&255,O),U>>=8,J-=8;if((E>_||w)&&(w?(_=_e(u=N),w=!1):(++u,u==f?_=p:_=_e(u))),z==W){for(;J>0;)k(U&255,O),U>>=8,J-=8;ge(O)}};return T.apply(this,arguments),t},pr=function(){var t={},e=256,r=499,n=491,s=487,a=503,l=3*a,o=e-1,i=4,c=100,u=16,f=1<<u,_=10,p=10,m=f>>p,h=f<<_-p,b=e>>3,E=6,w=1<<E,N=b*w,R=30,W=10,U=1<<W,J,H=8,Z=1<<H,D=W+H,T=1<<D,k,ee,he,V,ge=[],_e=[],we=[],ve=[],ne=t.NeuQuant=function(A,S,L){var M,I;for(k=A,ee=S,he=L,V=new Array(e),M=0;M<e;M++)V[M]=new Array(4),I=V[M],I[0]=I[1]=I[2]=(M<<i+8)/e,we[M]=f/e,_e[M]=0},z=function(){for(var A=[],S=new Array(e),L=0;L<e;L++)S[V[L][3]]=L;for(var M=0,I=0;I<e;I++){var y=S[I];A[M++]=V[y][0],A[M++]=V[y][1],A[M++]=V[y][2]}return A},O=function(){var A,S,L,M,I,y,x,j;for(x=0,j=0,A=0;A<e;A++){for(I=V[A],L=A,M=I[1],S=A+1;S<e;S++)y=V[S],y[1]<M&&(L=S,M=y[1]);if(y=V[L],A!=L&&(S=y[0],y[0]=I[0],I[0]=S,S=y[1],y[1]=I[1],I[1]=S,S=y[2],y[2]=I[2],I[2]=S,S=y[3],y[3]=I[3],I[3]=S),M!=x){for(ge[x]=j+A>>1,S=x+1;S<M;S++)ge[S]=A;x=M,j=A}}for(ge[x]=j+o>>1,S=x+1;S<256;S++)ge[S]=o},v=function(){var A,S,L,M,I,y,x,j,G,re,ye,K,pe,Je;for(ee<l&&(he=1),J=30+(he-1)/3,K=k,pe=0,Je=ee,ye=ee/(3*he),re=ye/c|0,j=U,y=N,x=y>>E,x<=1&&(x=0),A=0;A<x;A++)ve[A]=j*((x*x-A*A)*Z/(x*x));for(ee<l?G=3:ee%r!==0?G=3*r:ee%n!==0?G=3*n:ee%s!==0?G=3*s:G=3*a,A=0;A<ye;)if(L=(K[pe+0]&255)<<i,M=(K[pe+1]&255)<<i,I=(K[pe+2]&255)<<i,S=ce(L,M,I),Y(j,S,L,M,I),x!==0&&te(x,S,L,M,I),pe+=G,pe>=Je&&(pe-=ee),A++,re===0&&(re=1),A%re===0)for(j-=j/J,y-=y/R,x=y>>E,x<=1&&(x=0),S=0;S<x;S++)ve[S]=j*((x*x-S*S)*Z/(x*x))};t.map=function(A,S,L){var M,I,y,x,j,G,re;for(j=1e3,re=-1,M=ge[S],I=M-1;M<e||I>=0;)M<e&&(G=V[M],y=G[1]-S,y>=j?M=e:(M++,y<0&&(y=-y),x=G[0]-A,x<0&&(x=-x),y+=x,y<j&&(x=G[2]-L,x<0&&(x=-x),y+=x,y<j&&(j=y,re=G[3])))),I>=0&&(G=V[I],y=S-G[1],y>=j?I=-1:(I--,y<0&&(y=-y),x=G[0]-A,x<0&&(x=-x),y+=x,y<j&&(x=G[2]-L,x<0&&(x=-x),y+=x,y<j&&(j=y,re=G[3]))));return re},t.process=function(){return v(),P(),O(),z()};var P=function(){var A;for(A=0;A<e;A++)V[A][0]>>=i,V[A][1]>>=i,V[A][2]>>=i,V[A][3]=A},te=function(A,S,L,M,I){var y,x,j,G,re,ye,K;for(j=S-A,j<-1&&(j=-1),G=S+A,G>e&&(G=e),y=S+1,x=S-1,ye=1;y<G||x>j;){if(re=ve[ye++],y<G){K=V[y++];try{K[0]-=re*(K[0]-L)/T,K[1]-=re*(K[1]-M)/T,K[2]-=re*(K[2]-I)/T}catch{}}if(x>j){K=V[x--];try{K[0]-=re*(K[0]-L)/T,K[1]-=re*(K[1]-M)/T,K[2]-=re*(K[2]-I)/T}catch{}}}},Y=function(A,S,L,M,I){var y=V[S];y[0]-=A*(y[0]-L)/U,y[1]-=A*(y[1]-M)/U,y[2]-=A*(y[2]-I)/U},ce=function(A,S,L){var M,I,y,x,j,G,re,ye,K,pe;for(ye=~(1<<31),K=ye,G=-1,re=G,M=0;M<e;M++)pe=V[M],I=pe[0]-A,I<0&&(I=-I),y=pe[1]-S,y<0&&(y=-y),I+=y,y=pe[2]-L,y<0&&(y=-y),I+=y,I<ye&&(ye=I,G=M),x=I-(_e[M]>>u-i),x<K&&(K=x,re=M),j=we[M]>>p,we[M]-=j,_e[M]+=j<<_;return we[G]+=m,_e[G]-=h,re};return ne.apply(this,arguments),t},gr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var O="",v=this.bin.length,P=0;P<v;P++)O+=e[this.bin[P]];return O},r.prototype.writeByte=function(O){this.bin.push(O)},r.prototype.writeUTFBytes=function(O){for(var v=O.length,P=0;P<v;P++)this.writeByte(O.charCodeAt(P))},r.prototype.writeBytes=function(O,v,P){for(var te=P||O.length,Y=v||0;Y<te;Y++)this.writeByte(O[Y])};var n={},s,a,l=null,o,i=-1,c=0,u=!1,f,_,p,m,h,b,E=[],w=7,N=-1,R=!1,W=!0,U=!1,J=10,H="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(v){c=Math.round(v/10)},n.setDispose=function(v){v>=0&&(N=v)},n.setRepeat=function(v){v>=0&&(i=v)},n.setTransparent=function(v){l=v},n.setComment=function(v){H=v},n.addFrame=function(v,P){if(v===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?v instanceof ImageData?(_=v.data,(!sizeset||s!=v.width||a!=v.height)&&D(v.width,v.height)):v instanceof Uint8ClampedArray?v.length==s*a*4?_=v:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(_=v.getImageData(0,0,v.canvas.width,v.canvas.height).data,U||D(v.canvas.width,v.canvas.height)),ee(),T(),W&&(_e(),ve(),i>=0&&we()),he(),H!==""&&V(),ge(),W||ve(),z(),W=!1}catch{te=!1}return te},n.download=function(v){if(f===null||R==!1)console.log("Please call start method and add frames and call finish method before calling download");else{v=v!==void 0?v.endsWith(".gif")?v:v+".gif":"download.gif";var P=document.createElement("a");P.download=v,P.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!u)return!1;var v=!0;u=!1;try{f.writeByte(59),R=!0}catch{v=!1}return v};var Z=function(){o=0,_=null,p=null,m=null,b=null,R=!1,W=!0};n.setFrameRate=function(v){v!=15&&(c=Math.round(100/v))},n.setQuality=function(v){v<1&&(v=1),J=v};var D=n.setSize=function(v,P){u&&!W||(s=v,a=P,s<1&&(s=320),a<1&&(a=240),U=!0)};n.start=function(){Z();var v=!0;R=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{v=!1}return u=v},n.cont=function(){Z();var v=!0;return R=!1,f=new r,u=v};var T=function(){var v=p.length,P=v/3;m=[];var te=new pr(p,v,J);b=te.process();for(var Y=0,ce=0;ce<P;ce++){var Q=te.map(p[Y++]&255,p[Y++]&255,p[Y++]&255);E[Q]=!0,m[ce]=Q}p=null,h=8,w=7,l!==null&&(o=k(l))},k=function(v){if(b===null)return-1;for(var P=(v&16711680)>>16,te=(v&65280)>>8,Y=v&255,ce=0,Q=256*256*256,A=b.length,S=0;S<A;){var L=P-(b[S++]&255),M=te-(b[S++]&255),I=Y-(b[S]&255),y=L*L+M*M+I*I,x=S/3;E[x]&&y<Q&&(Q=y,ce=x),S++}return ce},ee=function(){var v=s,P=a;p=[];for(var te=_,Y=0,ce=0;ce<P;ce++)for(var Q=0;Q<v;Q++){var A=ce*v*4+Q*4;p[Y++]=te[A],p[Y++]=te[A+1],p[Y++]=te[A+2]}},he=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var v,P;l===null?(v=0,P=0):(v=1,P=2),N>=0&&(P=N&7),P<<=2,f.writeByte(0|P|0|v),ne(c),f.writeByte(o),f.writeByte(0)},V=function(){f.writeByte(33),f.writeByte(254),f.writeByte(H.length),f.writeUTFBytes(H),f.writeByte(0)},ge=function(){f.writeByte(44),ne(0),ne(0),ne(s),ne(a),W?f.writeByte(0):f.writeByte(128|w)},_e=function(){ne(s),ne(a),f.writeByte(240|w),f.writeByte(0),f.writeByte(0)},we=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),ne(i),f.writeByte(0)},ve=function(){f.writeBytes(b);for(var v=3*256-b.length,P=0;P<v;P++)f.writeByte(0)},ne=function(v){f.writeByte(v&255),f.writeByte(v>>8&255)},z=function(){var v=new vr(s,a,m,h);v.encode(f)};return n.stream=function(){return f},n.setProperties=function(v,P){u=v,W=P},n};class _r{constructor(e){be(this,"loadingUrl",null);be(this,"url",null);be(this,"texture",null);be(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const l=a.createTexture();if(!l)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,l),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=l,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const Ce={a_position:0,a_texCoords:1},it={default:{vertex:`#version 300 es

layout(location = ${Ce.a_position}) in vec2 a_position;
layout(location = ${Ce.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class br{constructor(e){be(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:yr(this.gl,it[e].vertex,it[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function wr(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function yr(t,e,r){const n=ot(t,t.VERTEX_SHADER,e);let s;try{s=ot(t,t.FRAGMENT_SHADER,r)}catch(l){throw t.deleteShader(n),l}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const l=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${l}`)}return a}function ot(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function lt(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,l,o;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),l!==i.geometry&&(t.bindVertexArray(i.geometry.vao),l=i.geometry),o!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),o=n);const c={u_image:n.unit,...i.getUniforms(e)};wr(t,i.program,c),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}function Er(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(Ce.a_position),t.vertexAttribPointer(Ce.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(Ce.a_texCoords),t.vertexAttribPointer(Ce.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const $r={full:[-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0],sudoku:[-3,-3,-1,2,3,-3,2,2,-3,3,-1,-1,3,3,2,-1],tower:[-1,-3,0,2,1,-3,1,2,-1,3,0,-1,1,3,1,-1]};class Tr{constructor(e){be(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=Er(this.gl,$r[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class Ar{constructor(e){be(this,"gl");be(this,"programFactory");be(this,"geometryFactory");be(this,"texture");be(this,"queue",[]);be(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new br(this.gl),this.geometryFactory=new Tr(this.gl),this.texture=new _r(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new gr;if(a.setRepeat(0),a.setDelay(e.animation.frameOptions.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:st(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:st(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let o=0;o<this.queue.length-1;++o)this.queue[o].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const l=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")lt(this.gl,a/r.animation.frameOptions.totalFrames,s,this.texture,l),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:o,sprites:i,callback:c}=this.queue[0];lt(this.gl,a/r.animation.frameOptions.totalFrames,i,this.texture,l),c(a);const u=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,u),o.addFrame(u,!0),o.setTransparent(16777215),a===r.animation.frameOptions.totalFrames-1){o.finish();const f=o.stream().getData(),_="data:image/gif;base64,"+window.btoa(f);n({dataUri:_}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ee=function(){const{subscribe:t,update:e}=He({animations:nt,current:nt[0]}),r=a=>{e(l=>l.current===a||!l.animations.find(i=>i===a)?l:{animations:l.animations,current:a})};function n(a){e(({animations:l,current:o})=>{const i={...o.frameOptions,...a},c={...o,frameOptions:i};return{animations:l.map(u=>u===o?c:u),current:c}})}function s(a,l){e(({animations:o,current:i})=>{const c={...i,editOptions:i.editOptions.map(u=>u===a?{...a,value:l}:u)};return{animations:o.map(u=>u===i?c:u),current:c}})}return{subscribe:t,changeCurrentAnimation:r,changeFrameOptions:n,changeEditOptions:s}}(),$e=function(){const t=`${Ve}/favicon.png`,{subscribe:e,update:r}=He({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(l=>({...l,...a}))}function s(a){r(l=>(l.url!==t&&URL.revokeObjectURL(l.url),{...l,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Ne=function(){const t=He({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(l){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new Ar(l),running:!1,frame:0}})}function s(){const{animator:l}=Ue(t);return l?(r(o=>({...o,running:!0,frame:0})),l.animate({image:Ue($e),animation:Ue(Ee).current},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(l){const{animator:o,frame:i}=Ue(t);if(!o)return Promise.reject("Animator has not been created");let c;typeof l>"u"?c=i:c=l;const u=Ue(Ee).current;return c>=u.frameOptions.totalFrames&&(c=u.frameOptions.totalFrames-1),r(f=>({...f,frame:c,running:!0})),o.renderFrame({image:Ue($e),animation:u},c).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ct(t){let e,r,n,s,a,l;return{c(){e=F("label"),r=ie(t[1]),n=q(),s=F("input"),this.h()},l(o){e=B(o,"LABEL",{class:!0});var i=C(e);r=oe(i,t[1]),n=X(i),s=B(i,"INPUT",{class:!0,type:!0}),i.forEach($),this.h()},h(){d(s,"class","slider__text-input svelte-1h0gcvd"),d(s,"type","text"),s.value=t[0],d(e,"class","slider__label svelte-1h0gcvd")},m(o,i){le(o,e,i),g(e,r),g(e,n),g(e,s),a||(l=Ge(s,"input",t[5]),a=!0)},p(o,i){i&2&&Fe(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&$(e),a=!1,l()}}}function xr(t){let e,r,n,s,a=qe(t[2])+"",l,o,i,c,u,f,_=qe(t[3])+"",p,m,h,b=t[1]&&ct(t);return{c(){e=F("div"),b&&b.c(),r=q(),n=F("div"),s=F("span"),l=ie(a),o=q(),i=F("div"),c=F("input"),u=q(),f=F("span"),p=ie(_),this.h()},l(E){e=B(E,"DIV",{class:!0});var w=C(e);b&&b.l(w),r=X(w),n=B(w,"DIV",{class:!0});var N=C(n);s=B(N,"SPAN",{class:!0});var R=C(s);l=oe(R,a),R.forEach($),o=X(N),i=B(N,"DIV",{class:!0});var W=C(i);c=B(W,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),W.forEach($),u=X(N),f=B(N,"SPAN",{class:!0});var U=C(f);p=oe(U,_),U.forEach($),N.forEach($),w.forEach($),this.h()},h(){d(s,"class","slider__range slider__range--min svelte-1h0gcvd"),d(c,"class","slider__input svelte-1h0gcvd"),d(c,"type","range"),d(c,"min",t[2]),d(c,"max",t[3]),d(c,"step",t[4]),c.value=t[0],d(i,"class","slider__input-container svelte-1h0gcvd"),d(f,"class","slider__range slider__range--max"),d(n,"class","slider__container svelte-1h0gcvd"),d(e,"class","slider")},m(E,w){le(E,e,w),b&&b.m(e,null),g(e,r),g(e,n),g(n,s),g(s,l),g(n,o),g(n,i),g(i,c),g(n,u),g(n,f),g(f,p),m||(h=Ge(c,"input",t[5]),m=!0)},p(E,[w]){E[1]?b?b.p(E,w):(b=ct(E),b.c(),b.m(e,r)):b&&(b.d(1),b=null),w&4&&a!==(a=qe(E[2])+"")&&Fe(l,a),w&4&&d(c,"min",E[2]),w&8&&d(c,"max",E[3]),w&16&&d(c,"step",E[4]),w&1&&(c.value=E[0]),w&8&&_!==(_=qe(E[3])+"")&&Fe(p,_)},i:Pe,o:Pe,d(E){E&&$(e),b&&b.d(),m=!1,h()}}}function qe(t){return t.toFixed(2).replace(/\.?0+$/,"")}function Or(t,e,r){const n=_t();let{label:s=""}=e,{min:a=0}=e,{max:l=100}=e,{step:o=1}=e,{value:i=l<a?a:(l-a)/2}=e;function c(u){const f=u.target,_=parseFloat(f.value);Number.isNaN(_)||(r(0,i=_),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,l=u.max),"step"in u&&r(4,o=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,l,o,c]}class xe extends Be{constructor(e){super(),Me(this,e,Or,xr,Ie,{label:1,min:2,max:3,step:4,value:0})}}function Sr(t){let e,r,n,s,a,l,o,i,c,u,f,_,p,m,h,b,E,w,N,R,W,U,J,H,Z,D;return u=new xe({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]),_=new xe({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),_.$on("input",t[5]),m=new xe({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),b=new xe({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),b.$on("input",t[7]),w=new xe({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),w.$on("input",t[8]),R=new xe({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].current.frameOptions.delayMs}}),R.$on("input",t[9]),U=new xe({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].current.frameOptions.totalFrames}}),U.$on("input",t[10]),{c(){e=F("aside"),r=F("label"),n=ie(`Select image

    `),s=F("input"),a=q(),l=F("div"),o=F("img"),c=q(),ue(u.$$.fragment),f=q(),ue(_.$$.fragment),p=q(),ue(m.$$.fragment),h=q(),ue(b.$$.fragment),E=q(),ue(w.$$.fragment),N=q(),ue(R.$$.fragment),W=q(),ue(U.$$.fragment),this.h()},l(T){e=B(T,"ASIDE",{class:!0});var k=C(e);r=B(k,"LABEL",{class:!0});var ee=C(r);n=oe(ee,`Select image

    `),s=B(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=X(ee),l=B(ee,"DIV",{class:!0});var he=C(l);o=B(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach($),ee.forEach($),c=X(k),fe(u.$$.fragment,k),f=X(k),fe(_.$$.fragment,k),p=X(k),fe(m.$$.fragment,k),h=X(k),fe(b.$$.fragment,k),E=X(k),fe(w.$$.fragment,k),N=X(k),fe(R.$$.fragment,k),W=X(k),fe(U.$$.fragment,k),k.forEach($),this.h()},h(){d(s,"class","image__input svelte-843oxz"),d(s,"type","file"),d(s,"accept","image/*"),d(o,"class","image__preview svelte-843oxz"),Re(o.src,i=t[1].url)||d(o,"src",i),d(o,"alt","source"),d(l,"class","image__container svelte-843oxz"),d(r,"class","image svelte-843oxz"),d(e,"class",J=Ae(`container ${t[0]}`)+" svelte-843oxz")},m(T,k){le(T,e,k),g(e,r),g(r,n),g(r,s),g(r,a),g(r,l),g(l,o),g(e,c),me(u,e,null),g(e,f),me(_,e,null),g(e,p),me(m,e,null),g(e,h),me(b,e,null),g(e,E),me(w,e,null),g(e,N),me(R,e,null),g(e,W),me(U,e,null),H=!0,Z||(D=Ge(s,"input",t[3]),Z=!0)},p(T,[k]){(!H||k&2&&!Re(o.src,i=T[1].url))&&d(o,"src",i);const ee={};k&2&&(ee.value=T[1].width),u.$set(ee);const he={};k&2&&(he.value=T[1].height),_.$set(he);const V={};k&2&&(V.value=T[1].clearRed),m.$set(V);const ge={};k&2&&(ge.value=T[1].clearGreen),b.$set(ge);const _e={};k&2&&(_e.value=T[1].clearBlue),w.$set(_e);const we={};k&4&&(we.value=T[2].current.frameOptions.delayMs),R.$set(we);const ve={};k&4&&(ve.value=T[2].current.frameOptions.totalFrames),U.$set(ve),(!H||k&1&&J!==(J=Ae(`container ${T[0]}`)+" svelte-843oxz"))&&d(e,"class",J)},i(T){H||(ae(u.$$.fragment,T),ae(_.$$.fragment,T),ae(m.$$.fragment,T),ae(b.$$.fragment,T),ae(w.$$.fragment,T),ae(R.$$.fragment,T),ae(U.$$.fragment,T),H=!0)},o(T){se(u.$$.fragment,T),se(_.$$.fragment,T),se(m.$$.fragment,T),se(b.$$.fragment,T),se(w.$$.fragment,T),se(R.$$.fragment,T),se(U.$$.fragment,T),H=!1},d(T){T&&$(e),de(u),de(_),de(m),de(b),de(w),de(R),de(U),Z=!1,D()}}}function Pr(t,e,r){let n,s;ke(t,$e,m=>r(1,n=m)),ke(t,Ee,m=>r(2,s=m));let{class:a=""}=e;function l(m){var E;const b=(E=m.target.files)==null?void 0:E[0];b&&$e.changeImage(b)}const o=m=>$e.change({width:m.detail.value}),i=m=>$e.change({height:m.detail.value}),c=m=>$e.change({clearRed:m.detail.value}),u=m=>$e.change({clearGreen:m.detail.value}),f=m=>$e.change({clearBlue:m.detail.value}),_=m=>Ee.changeFrameOptions({delayMs:m.detail.value}),p=m=>Ee.changeFrameOptions({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,l,o,i,c,u,f,_,p]}class Fr extends Be{constructor(e){super(),Me(this,e,Pr,Sr,Ie,{class:0})}}function Br(t){let e,r,n,s,a,l,o;return{c(){e=F("div"),r=ie(t[1]),n=q(),s=F("label"),a=F("input"),this.h()},l(i){e=B(i,"DIV",{class:!0});var c=C(e);r=oe(c,t[1]),n=X(c),s=B(c,"LABEL",{class:!0});var u=C(s);a=B(u,"INPUT",{class:!0,type:!0}),u.forEach($),c.forEach($),this.h()},h(){d(a,"class","toggle__checkbox svelte-1j9rfin"),d(a,"type","checkbox"),a.checked=t[0],d(s,"class","toggle__label svelte-1j9rfin"),Oe(s,"toggle__label--active",t[0]),d(e,"class","toggle svelte-1j9rfin")},m(i,c){le(i,e,c),g(e,r),g(e,n),g(e,s),g(s,a),l||(o=Ge(a,"change",t[2]),l=!0)},p(i,[c]){c&2&&Fe(r,i[1]),c&1&&(a.checked=i[0]),c&1&&Oe(s,"toggle__label--active",i[0])},i:Pe,o:Pe,d(i){i&&$(e),l=!1,o()}}}function Mr(t,e,r){const n=_t();let{label:s=""}=e,{value:a=!1}=e;function l(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,l]}class Pt extends Be{constructor(e){super(),Me(this,e,Mr,Br,Ie,{label:1,value:0})}}function ut(t,e,r){const n=t.slice();return n[4]=e[r],n}function Ir(t){let e,r;function n(...s){return t[3](t[4],...s)}return e=new Pt({props:{label:t[4].name,value:t[4].value}}),e.$on("change",n),{c(){ue(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,a){me(e,s,a),r=!0},p(s,a){t=s;const l={};a&2&&(l.label=t[4].name),a&2&&(l.value=t[4].value),e.$set(l)},i(s){r||(ae(e.$$.fragment,s),r=!0)},o(s){se(e.$$.fragment,s),r=!1},d(s){de(e,s)}}}function kr(t){let e,r;function n(...s){return t[2](t[4],...s)}return e=new xe({props:{label:t[4].name,min:t[4].min,max:t[4].max,step:t[4].step,value:t[4].value}}),e.$on("input",n),{c(){ue(e.$$.fragment)},l(s){fe(e.$$.fragment,s)},m(s,a){me(e,s,a),r=!0},p(s,a){t=s;const l={};a&2&&(l.label=t[4].name),a&2&&(l.min=t[4].min),a&2&&(l.max=t[4].max),a&2&&(l.step=t[4].step),a&2&&(l.value=t[4].value),e.$set(l)},i(s){r||(ae(e.$$.fragment,s),r=!0)},o(s){se(e.$$.fragment,s),r=!1},d(s){de(e,s)}}}function ft(t){let e,r,n,s;const a=[kr,Ir],l=[];function o(i,c){return i[4].type==="slider"?0:i[4].type==="toggle"?1:-1}return~(e=o(t))&&(r=l[e]=a[e](t)),{c(){r&&r.c(),n=Ze()},l(i){r&&r.l(i),n=Ze()},m(i,c){~e&&l[e].m(i,c),le(i,n,c),s=!0},p(i,c){let u=e;e=o(i),e===u?~e&&l[e].p(i,c):(r&&(bt(),se(l[u],1,1,()=>{l[u]=null}),wt()),~e?(r=l[e],r?r.p(i,c):(r=l[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&l[e].d(i),i&&$(n)}}}function Rr(t){let e,r,n,s=t[1].current.editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=ft(ut(t,s,o));const l=o=>se(a[o],1,1,()=>{a[o]=null});return{c(){e=F("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=B(o,"ASIDE",{class:!0});var i=C(e);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach($),this.h()},h(){d(e,"class",r=Ae(`container ${t[0]}`)+" svelte-1solget")},m(o,i){le(o,e,i);for(let c=0;c<a.length;c+=1)a[c].m(e,null);n=!0},p(o,[i]){if(i&2){s=o[1].current.editOptions;let c;for(c=0;c<s.length;c+=1){const u=ut(o,s,c);a[c]?(a[c].p(u,i),ae(a[c],1)):(a[c]=ft(u),a[c].c(),ae(a[c],1),a[c].m(e,null))}for(bt(),c=s.length;c<a.length;c+=1)l(c);wt()}(!n||i&1&&r!==(r=Ae(`container ${o[0]}`)+" svelte-1solget"))&&d(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(o){o&&$(e),Mt(a,o)}}}function Ur(t,e,r){let n;ke(t,Ee,o=>r(1,n=o));let{class:s=""}=e;const a=(o,i)=>Ee.changeEditOptions(o,i.detail.value),l=(o,i)=>Ee.changeEditOptions(o,i.detail.value);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,l]}class Cr extends Be{constructor(e){super(),Me(this,e,Ur,Rr,Ie,{class:0})}}function mt(t,e,r){const n=t.slice();return n[3]=e[r],n}function dt(t,e){let r,n,s,a,l,o,i=e[3].name+"",c,u,f,_;function p(){return e[2](e[3])}return{key:t,first:null,c(){r=F("button"),n=F("img"),l=q(),o=F("span"),c=ie(i),u=q(),this.h()},l(m){r=B(m,"BUTTON",{type:!0,class:!0});var h=C(r);n=B(h,"IMG",{class:!0,src:!0,alt:!0}),l=X(h),o=B(h,"SPAN",{});var b=C(o);c=oe(b,i),b.forEach($),u=X(h),h.forEach($),this.h()},h(){d(n,"class","image svelte-1l1v01j"),Re(n.src,s=`${Ve}/demo-${e[3].name}.gif`)||d(n,"src",s),d(n,"alt",a=e[3].name),d(r,"type","button"),d(r,"class","option svelte-1l1v01j"),Oe(r,"option--selected",e[3]===e[1].current),this.first=r},m(m,h){le(m,r,h),g(r,n),g(r,l),g(r,o),g(o,c),g(r,u),f||(_=Ge(r,"click",p),f=!0)},p(m,h){e=m,h&2&&!Re(n.src,s=`${Ve}/demo-${e[3].name}.gif`)&&d(n,"src",s),h&2&&a!==(a=e[3].name)&&d(n,"alt",a),h&2&&i!==(i=e[3].name+"")&&Fe(c,i),h&2&&Oe(r,"option--selected",e[3]===e[1].current)},d(m){m&&$(r),f=!1,_()}}}function Dr(t){let e,r=[],n=new Map,s,a=t[1].animations;const l=o=>o[3].name;for(let o=0;o<a.length;o+=1){let i=mt(t,a,o),c=l(i);n.set(c,r[o]=dt(c,i))}return{c(){e=F("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=B(o,"ASIDE",{class:!0});var i=C(e);for(let c=0;c<r.length;c+=1)r[c].l(i);i.forEach($),this.h()},h(){d(e,"class",s=Ae(`container ${t[0]}`)+" svelte-1l1v01j")},m(o,i){le(o,e,i);for(let c=0;c<r.length;c+=1)r[c].m(e,null)},p(o,[i]){i&2&&(a=o[1].animations,r=It(r,i,l,1,o,a,n,e,kt,dt,null,mt)),i&1&&s!==(s=Ae(`container ${o[0]}`)+" svelte-1l1v01j")&&d(e,"class",s)},i:Pe,o:Pe,d(o){o&&$(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function jr(t,e,r){let n;ke(t,Ee,l=>r(1,n=l));let{class:s=""}=e;const a=l=>Ee.changeCurrentAnimation(l);return t.$$set=l=>{"class"in l&&r(0,s=l.class)},[s,n,a]}class Nr extends Be{constructor(e){super(),Me(this,e,jr,Dr,Ie,{class:0})}}function ht(t){t[12]=t[13].dataUri}function vt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Gr,then:Lr,catch:zr,value:13,error:14};return Ke(r=t[4],n),{c(){e=F("div"),n.block.c(),this.h()},l(s){e=B(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach($),this.h()},h(){d(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(s,a){le(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&Ke(r,n)||Ct(n,t,a)},d(s){s&&$(e),n.block.d(),n.token=null,n=null}}}function zr(t){let e,r,n=t[14]+"",s;return{c(){e=F("p"),r=ie("An error has occurred: "),s=ie(n),this.h()},l(a){e=B(a,"P",{class:!0});var l=C(e);r=oe(l,"An error has occurred: "),s=oe(l,n),l.forEach($),this.h()},h(){d(e,"class","preview__error svelte-13qbjon")},m(a,l){le(a,e,l),g(e,r),g(e,s)},p(a,l){l&16&&n!==(n=a[14]+"")&&Fe(s,n)},d(a){a&&$(e)}}}function Lr(t){ht(t);let e,r,n,s,a,l,o;return{c(){e=F("div"),r=F("img"),s=q(),a=F("a"),l=ie("Download"),this.h()},l(i){e=B(i,"DIV",{class:!0});var c=C(e);r=B(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach($),s=X(i),a=B(i,"A",{class:!0,download:!0,href:!0});var u=C(a);l=oe(u,"Download"),u.forEach($),this.h()},h(){d(r,"class","preview__image svelte-13qbjon"),Re(r.src,n=t[12])||d(r,"src",n),d(r,"alt","generated gif"),d(e,"class","preview__image-container svelte-13qbjon"),d(a,"class","preview__download-button svelte-13qbjon"),d(a,"download","jumping_peter.gif"),d(a,"href",o=t[12])},m(i,c){le(i,e,c),g(e,r),le(i,s,c),le(i,a,c),g(a,l)},p(i,c){ht(i),c&16&&!Re(r.src,n=i[12])&&d(r,"src",n),c&16&&o!==(o=i[12])&&d(a,"href",o)},d(i){i&&$(e),i&&$(s),i&&$(a)}}}function Gr(t){let e,r,n,s,a,l,o=t[5].frame+"",i,c,u=t[2].current.frameOptions.totalFrames+"",f,_,p,m,h,b;return{c(){e=F("div"),r=F("p"),n=ie("Generating..."),s=q(),a=F("p"),l=ie("["),i=ie(o),c=ie(" / "),f=ie(u),_=ie("]"),p=q(),m=F("progress"),this.h()},l(E){e=B(E,"DIV",{class:!0});var w=C(e);r=B(w,"P",{});var N=C(r);n=oe(N,"Generating..."),N.forEach($),s=X(w),a=B(w,"P",{});var R=C(a);l=oe(R,"["),i=oe(R,o),c=oe(R," / "),f=oe(R,u),_=oe(R,"]"),R.forEach($),p=X(w),m=B(w,"PROGRESS",{class:!0,max:!0}),C(m).forEach($),w.forEach($),this.h()},h(){d(m,"class","preview__progress svelte-13qbjon"),d(m,"max",h=t[2].current.frameOptions.totalFrames),m.value=b=t[5].frame,d(e,"class","preview__loading svelte-13qbjon")},m(E,w){le(E,e,w),g(e,r),g(r,n),g(e,s),g(e,a),g(a,l),g(a,i),g(a,c),g(a,f),g(a,_),g(e,p),g(e,m)},p(E,w){w&32&&o!==(o=E[5].frame+"")&&Fe(i,o),w&4&&u!==(u=E[2].current.frameOptions.totalFrames+"")&&Fe(f,u),w&4&&h!==(h=E[2].current.frameOptions.totalFrames)&&d(m,"max",h),w&32&&b!==(b=E[5].frame)&&(m.value=b)},d(E){E&&$(e)}}}function qr(t){let e,r,n,s,a,l,o,i,c,u,f,_;n=new Pt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[4]&&vt(t);return u=new xe({props:{min:0,max:t[2].current.frameOptions.totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=F("main"),r=F("div"),ue(n.$$.fragment),s=q(),p&&p.c(),a=q(),l=F("div"),o=F("div"),i=F("canvas"),c=q(),ue(u.$$.fragment),this.h()},l(m){e=B(m,"MAIN",{class:!0});var h=C(e);r=B(h,"DIV",{class:!0});var b=C(r);fe(n.$$.fragment,b),b.forEach($),s=X(h),p&&p.l(h),a=X(h),l=B(h,"DIV",{class:!0});var E=C(l);o=B(E,"DIV",{class:!0});var w=C(o);i=B(w,"CANVAS",{class:!0,style:!0}),C(i).forEach($),w.forEach($),c=X(E),fe(u.$$.fragment,E),E.forEach($),h.forEach($),this.h()},h(){d(r,"class","preview__debug-input svelte-13qbjon"),d(i,"class","preview__image svelte-13qbjon"),Rt(i,"transform","scaleY(-1)"),d(o,"class","preview__image-container svelte-13qbjon"),d(l,"class","preview__container preview__container--debug svelte-13qbjon"),d(e,"class",f=Ae(`preview ${t[0]}`)+" svelte-13qbjon"),Oe(e,"preview--debug",t[1]),Oe(e,"preview--no-debug",!t[1])},m(m,h){le(m,e,h),g(e,r),me(n,r,null),g(e,s),p&&p.m(e,null),g(e,a),g(e,l),g(l,o),g(o,i),t[9](i),g(l,c),me(u,l,null),_=!0},p(m,[h]){const b={};h&2&&(b.value=m[1]),n.$set(b),!m[1]&&m[4]?p?p.p(m,h):(p=vt(m),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const E={};h&4&&(E.max=m[2].current.frameOptions.totalFrames-1),h&32&&(E.value=m[5].frame),u.$set(E),(!_||h&1&&f!==(f=Ae(`preview ${m[0]}`)+" svelte-13qbjon"))&&d(e,"class",f),(!_||h&3)&&Oe(e,"preview--debug",m[1]),(!_||h&3)&&Oe(e,"preview--no-debug",!m[1])},i(m){_||(ae(n.$$.fragment,m),ae(u.$$.fragment,m),_=!0)},o(m){se(n.$$.fragment,m),se(u.$$.fragment,m),_=!1},d(m){m&&$(e),de(n),p&&p.d(),t[9](null),de(u)}}}function Xr(t,e,r){let n,s,a;ke(t,Ee,h=>r(2,n=h)),ke(t,$e,h=>r(8,s=h)),ke(t,Ne,h=>r(5,a=h));let l,{class:o=""}=e,i=!1,c=null;function u(){Ne.renderFrame().catch(h=>{throw console.error(`renderFrame failed: ${h}`),h})}function f(){r(4,c=Ne.animate().catch(h=>{throw console.error(`animate failed: ${h}`),h}))}Ut(()=>{Ne.changeCanvas(l),f()});function _(h){Ne.renderFrame(h.detail.value).catch(b=>console.error(`Animation failed: ${b}`))}function p(h){r(1,i=h.detail.value)}function m(h){Dt[h?"unshift":"push"](()=>{l=h,r(3,l)})}return t.$$set=h=>{"class"in h&&r(0,o=h.class)},t.$$.update=()=>{t.$$.dirty&262&&(i?u():f())},[o,i,n,l,c,a,_,p,s,m]}class Vr extends Be{constructor(e){super(),Me(this,e,Xr,qr,Ie,{class:0})}}function Wr(t){let e,r,n,s,a,l,o,i,c,u,f,_,p,m,h,b,E,w,N,R,W,U,J,H,Z;return document.title=e=ze,b=new Lt({props:{class:"header"}}),w=new Nr({props:{class:"animations"}}),R=new Fr({props:{class:"common-options"}}),U=new Cr({props:{class:"animation-options"}}),H=new Vr({props:{class:"preview"}}),{c(){r=F("meta"),n=F("meta"),s=F("meta"),a=F("meta"),l=F("meta"),o=F("meta"),i=F("meta"),c=F("meta"),u=F("meta"),f=F("meta"),_=F("meta"),p=F("meta"),m=q(),h=F("div"),ue(b.$$.fragment),E=q(),ue(w.$$.fragment),N=q(),ue(R.$$.fragment),W=q(),ue(U.$$.fragment),J=q(),ue(H.$$.fragment),this.h()},l(D){const T=jt("svelte-2dqrj",document.head);r=B(T,"META",{name:!0,content:!0,class:!0}),n=B(T,"META",{name:!0,content:!0,class:!0}),s=B(T,"META",{property:!0,content:!0,class:!0}),a=B(T,"META",{property:!0,content:!0,class:!0}),l=B(T,"META",{property:!0,content:!0,class:!0}),o=B(T,"META",{property:!0,content:!0,class:!0}),i=B(T,"META",{property:!0,content:!0,class:!0}),c=B(T,"META",{property:!0,content:!0,class:!0}),u=B(T,"META",{property:!0,content:!0,class:!0}),f=B(T,"META",{property:!0,content:!0,class:!0}),_=B(T,"META",{property:!0,content:!0,class:!0}),p=B(T,"META",{property:!0,content:!0,class:!0}),T.forEach($),m=X(D),h=B(D,"DIV",{class:!0});var k=C(h);fe(b.$$.fragment,k),E=X(k),fe(w.$$.fragment,k),N=X(k),fe(R.$$.fragment,k),W=X(k),fe(U.$$.fragment,k),J=X(k),fe(H.$$.fragment,k),k.forEach($),this.h()},h(){d(r,"name","title"),d(r,"content",ze),d(r,"class","svelte-z7ouxl"),d(n,"name","description"),d(n,"content",Ye),d(n,"class","svelte-z7ouxl"),d(s,"property","og:type"),d(s,"content","website"),d(s,"class","svelte-z7ouxl"),d(a,"property","og:url"),d(a,"content",pt),d(a,"class","svelte-z7ouxl"),d(l,"property","og:title"),d(l,"content",ze),d(l,"class","svelte-z7ouxl"),d(o,"property","og:description"),d(o,"content",Ye),d(o,"class","svelte-z7ouxl"),d(i,"property","og:image"),d(i,"content",gt),d(i,"class","svelte-z7ouxl"),d(c,"property","twitter:card"),d(c,"content","summary_large_image"),d(c,"class","svelte-z7ouxl"),d(u,"property","twitter:url"),d(u,"content",pt),d(u,"class","svelte-z7ouxl"),d(f,"property","twitter:title"),d(f,"content",ze),d(f,"class","svelte-z7ouxl"),d(_,"property","twitter:description"),d(_,"content",Ye),d(_,"class","svelte-z7ouxl"),d(p,"property","twitter:image"),d(p,"content",gt),d(p,"class","svelte-z7ouxl"),d(h,"class","grid svelte-z7ouxl")},m(D,T){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,l),g(document.head,o),g(document.head,i),g(document.head,c),g(document.head,u),g(document.head,f),g(document.head,_),g(document.head,p),le(D,m,T),le(D,h,T),me(b,h,null),g(h,E),me(w,h,null),g(h,N),me(R,h,null),g(h,W),me(U,h,null),g(h,J),me(H,h,null),Z=!0},p(D,[T]){(!Z||T&0)&&e!==(e=ze)&&(document.title=e)},i(D){Z||(ae(b.$$.fragment,D),ae(w.$$.fragment,D),ae(R.$$.fragment,D),ae(U.$$.fragment,D),ae(H.$$.fragment,D),Z=!0)},o(D){se(b.$$.fragment,D),se(w.$$.fragment,D),se(R.$$.fragment,D),se(U.$$.fragment,D),se(H.$$.fragment,D),Z=!1},d(D){$(r),$(n),$(s),$(a),$(l),$(o),$(i),$(c),$(u),$(f),$(_),$(p),D&&$(m),D&&$(h),de(b),de(w),de(R),de(U),de(H)}}}const ze="Jumping Peter",Ye="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",pt="https://ksmai.github.io/jumping-peter",gt="https://ksmai.github.io/jumping-peter/favicon.png";class Jr extends Be{constructor(e){super(),Me(this,e,null,Wr,Ie,{})}}export{Jr as default};
