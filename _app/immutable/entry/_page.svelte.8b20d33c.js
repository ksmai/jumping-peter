var It=Object.defineProperty;var Rt=(t,e,r)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var be=(t,e,r)=>(Rt(t,typeof e!="symbol"?e+"":e,r),r);import{S as Be,i as Me,n as Ie,j as O,s as q,q as ie,k as B,l as C,c as V,r as oe,g as $,m as d,J as Ce,K as Ae,a as le,G as g,H as Oe,L as Fe,M as Ve,u as Re,N as wt,y as ue,z as fe,A as me,f as ae,b as se,B as de,I as $e,O as Se,v as yt,d as Et,P as kt,e as tt,Q as $t,R as Ut,T as Ct,p as Dt,o as jt,U as rt,V as Nt,w as zt,W as Lt}from"../chunks/index.1d64faf9.js";import{b as Ze,w as Xe}from"../chunks/paths.2ad3638e.js";function Gt(t){let e,r,n,s,a,c,o,i,l,f,u,_,v;return{c(){e=O("header"),r=O("img"),s=q(),a=O("h1"),c=ie("Jumping Peter"),o=q(),i=O("p"),l=ie("generate gif emojis"),f=q(),u=O("a"),_=ie("Contribute"),this.h()},l(m){e=B(m,"HEADER",{class:!0});var b=C(e);r=B(b,"IMG",{class:!0,src:!0,alt:!0}),s=V(b),a=B(b,"H1",{class:!0});var w=C(a);c=oe(w,"Jumping Peter"),w.forEach($),o=V(b),i=B(b,"P",{class:!0});var h=C(i);l=oe(h,"generate gif emojis"),h.forEach($),f=V(b),u=B(b,"A",{class:!0,href:!0,target:!0,rel:!0});var y=C(u);_=oe(y,"Contribute"),y.forEach($),b.forEach($),this.h()},h(){d(r,"class","logo svelte-bal6b7"),Ce(r.src,n=`${Ze}/demo-jumping.gif`)||d(r,"src",n),d(r,"alt",""),d(a,"class","title svelte-bal6b7"),d(i,"class","subtitle svelte-bal6b7"),d(u,"class","contribute svelte-bal6b7"),d(u,"href","https://github.com/ksmai/jumping-peter"),d(u,"target","_blank"),d(u,"rel","noreferrer"),d(e,"class",v=Ae(`header ${t[0]}`)+" svelte-bal6b7")},m(m,b){le(m,e,b),g(e,r),g(e,s),g(e,a),g(a,c),g(e,o),g(e,i),g(i,l),g(e,f),g(e,u),g(u,_)},p(m,[b]){b&1&&v!==(v=Ae(`header ${m[0]}`)+" svelte-bal6b7")&&d(e,"class",v)},i:Oe,o:Oe,d(m){m&&$(e)}}}function qt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Vt extends Be{constructor(e){super(),Me(this,e,qt,Gt,Ie,{class:0})}}function Ge(t){return{...t,type:"slider",min:-360,max:360,step:1}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Ye(t){return{...t,type:"slider",min:0,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function st(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function it(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Xt(t){return{...t,type:"slider",min:1,max:100,step:1}}function Tt(t){return{...t,type:"toggle"}}function Wt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function je(){return[1,0,0,1,0,0]}function Ke(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function He(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,c,o,i,l,f]=t;t[0]=a*n-c*s,t[1]=a*s+c*n,t[2]=o*n-i*s,t[3]=o*s+i*n,t[4]=l*n-f*s,t[5]=l*s+f*n}function Pe(t,e,r){t[4]+=e,t[5]+=r}function Ne(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Te(t,e,r){return t+(e-t)*r}function At(t){return t*Math.PI/180}const Yt="spinning",Ht={delayMs:50,totalFrames:15},Qt=[Ge({name:"startAngle",default:0}),Ge({name:"endAngle",default:360}),at({name:"originX",default:0}),at({name:"originY",default:0}),Tt({name:"alternates",default:!1})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:c,endAngle:o,originX:i,originY:l}=r;return[{program:n,geometry:s,getUniforms:u=>{const _=a?Math.min(u,1-u)*2:u,v=Te(c,o,_),m=je();return Pe(m,-i,-l),He(m,v),Pe(m,i,l),{u_transform:Ne(m)}}}]}const Jt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Qt,FrameOptions:Ht,Name:Yt,createSprites:xt},Symbol.toStringTag,{value:"Module"})),Zt="expanding",Kt={delayMs:50,totalFrames:20},er=[st({name:"minScale",default:1}),st({name:"maxScale",default:2}),Tt({name:"alternates",default:!1})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternates:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const f=o?Math.min(l,1-l)*2:l,u=Te(a,c,f),_=je();return Ke(_,u,u),{u_transform:Ne(_)}}}]}const tr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:er,FrameOptions:Kt,Name:Zt,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),rr="extreme-speed",ar={delayMs:20,totalFrames:10},nr=[it({name:"directionX",default:-1}),it({name:"directionY",default:0})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:a,directionY:c}=r,o=a*2,i=c*2;return[{program:n,geometry:s,getUniforms:f=>{const u=je(),_=Te(0,o,f),v=Te(0,i,f);return Pe(u,_,v),{u_transform:Ne(u)}}}]}const sr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:nr,FrameOptions:ar,Name:rr,createSprites:St},Symbol.toStringTag,{value:"Module"})),ir="excited",or={delayMs:50,totalFrames:25},lr=[Ge({name:"angle",default:15}),nt({name:"startOffset",default:-.1}),nt({name:"endOffset",default:.1}),Xt({name:"cycles",default:3})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:c}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const l=At(a),f=Math.cos(l),u=Math.sin(l);return[{program:n,geometry:s,getUniforms:v=>{const m=v*2*c%1,b=Math.min(m,1-m)*2,w=Te(-o*u,-i*u,b),h=Te(o*f,i*f,b),y=je();return He(y,a),Pe(y,w,h),Ke(y,v>.5?-1:1,1),{u_transform:Ne(y)}}}]}const cr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:lr,FrameOptions:or,Name:ir,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),ur="jumping",fr={delayMs:50,totalFrames:20},mr=[Ye({name:"maxOffset",default:.6}),Ye({name:"compressTime",default:.4}),Ye({name:"maxCompress",default:.3})];function Ot(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:c,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const f=Math.min(l,1-l)*2,u=je(),_=f/(1-c);if(_<1){const v=(1-_*_)*a*2;Pe(u,0,v)}else{const v=(1-f)/c,b=1-(1-v*v)*o;Pe(u,0,1),Ke(u,1/b,b),Pe(u,0,-1)}return{u_transform:Ne(u)}}}]}const dr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:mr,FrameOptions:fr,Name:ur,createSprites:Ot},Symbol.toStringTag,{value:"Module"})),hr="tower",pr={delayMs:40,totalFrames:20},vr=[Ge({name:"startAngle",default:20}),Ge({name:"endAngle",default:-45}),Ye({name:"startTime",default:.5})];function Bt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("tower"),{startAngle:a,endAngle:c,startTime:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const f=je();if(l<o){const u=l/o,_=Math.min(u,1-u)*2,v=Te(0,a,_);He(f,v)}else{const u=(l-o)/(1-o),_=Math.min(u,1-u)*2,v=Te(0,c,_);if(He(f,v),u>.5){const m=At(v),b=Math.cos(m),w=Math.sin(m),h=(u-.5)*2,y=Te(0,-2*w,h),N=Te(0,2*b,h);Pe(f,y,N)}}return{u_transform:Ne(f)}}}]}const gr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:vr,FrameOptions:pr,Name:hr,createSprites:Bt},Symbol.toStringTag,{value:"Module"})),Qe=[dr,sr,Jt,cr,tr,gr].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Wt(t.EditOptions,t.Name),defaultFrameOptions:t.FrameOptions}));function ot(t,e,r){switch(r.name){case"spinning":return xt(t,e,r);case"expanding":return Ft(t,e,r);case"extreme-speed":return St(t,e,r);case"excited":return Pt(t,e,r);case"jumping":return Ot(t,e,r);case"tower":return Bt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class _r{constructor(e){be(this,"loadingUrl",null);be(this,"url",null);be(this,"texture",null);be(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const br=function(){var t={},e=-1,r,n,s,a,c,o,i=12,l=5003,f,u=i,_,v=1<<i,m=[],b=[],w=l,h=0,y=!1,N,k,W,U=0,J=0,H=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,D=[],T=t.LZWEncoder=function(z,F,p,P){r=z,n=F,s=p,a=Math.max(2,P)},R=function(z,F){D[Z++]=z,Z>=254&&ge(F)},ee=function(z){he(w),h=k+2,y=!0,pe(k,z)},he=function(z){for(var F=0;F<z;++F)m[F]=-1},X=t.compress=function(z,F){var p,P,te,Y,ce,Q,A;for(N=z,y=!1,f=N,_=_e(f),k=1<<z-1,W=k+1,h=k+2,Z=0,Y=we(),A=0,p=w;p<65536;p*=2)++A;A=8-A,Q=w,he(Q),pe(k,F);e:for(;(te=we())!=e;){if(p=(te<<u)+Y,P=te<<A^Y,m[P]==p){Y=b[P];continue}else if(m[P]>=0){ce=Q-P,P===0&&(ce=1);do if((P-=ce)<0&&(P+=Q),m[P]==p){Y=b[P];continue e}while(m[P]>=0)}pe(Y,F),Y=te,h<v?(b[P]=h++,m[P]=p):ee(F)}pe(Y,F),pe(W,F)};t.encode=function(z){z.writeByte(a),c=r*n,o=0,X(a+1,z),z.writeByte(0)};var ge=function(z){Z>0&&(z.writeByte(Z),z.writeBytes(D,0,Z),Z=0)},_e=function(z){return(1<<z)-1},we=function(){if(c===0)return e;--c;var z=s[o++];return z&255},pe=function(z,F){for(U&=H[J],J>0?U|=z<<J:U=z,J+=f;J>=8;)R(U&255,F),U>>=8,J-=8;if((h>_||y)&&(y?(_=_e(f=N),y=!1):(++f,f==u?_=v:_=_e(f))),z==W){for(;J>0;)R(U&255,F),U>>=8,J-=8;ge(F)}};return T.apply(this,arguments),t},wr=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,o=e-1,i=4,l=100,f=16,u=1<<f,_=10,v=10,m=u>>v,b=u<<_-v,w=e>>3,h=6,y=1<<h,N=w*y,k=30,W=10,U=1<<W,J,H=8,Z=1<<H,D=W+H,T=1<<D,R,ee,he,X,ge=[],_e=[],we=[],pe=[],ne=t.NeuQuant=function(A,S,L){var M,I;for(R=A,ee=S,he=L,X=new Array(e),M=0;M<e;M++)X[M]=new Array(4),I=X[M],I[0]=I[1]=I[2]=(M<<i+8)/e,we[M]=u/e,_e[M]=0},z=function(){for(var A=[],S=new Array(e),L=0;L<e;L++)S[X[L][3]]=L;for(var M=0,I=0;I<e;I++){var E=S[I];A[M++]=X[E][0],A[M++]=X[E][1],A[M++]=X[E][2]}return A},F=function(){var A,S,L,M,I,E,x,j;for(x=0,j=0,A=0;A<e;A++){for(I=X[A],L=A,M=I[1],S=A+1;S<e;S++)E=X[S],E[1]<M&&(L=S,M=E[1]);if(E=X[L],A!=L&&(S=E[0],E[0]=I[0],I[0]=S,S=E[1],E[1]=I[1],I[1]=S,S=E[2],E[2]=I[2],I[2]=S,S=E[3],E[3]=I[3],I[3]=S),M!=x){for(ge[x]=j+A>>1,S=x+1;S<M;S++)ge[S]=A;x=M,j=A}}for(ge[x]=j+o>>1,S=x+1;S<256;S++)ge[S]=o},p=function(){var A,S,L,M,I,E,x,j,G,re,ye,K,ve,et;for(ee<c&&(he=1),J=30+(he-1)/3,K=R,ve=0,et=ee,ye=ee/(3*he),re=ye/l|0,j=U,E=N,x=E>>h,x<=1&&(x=0),A=0;A<x;A++)pe[A]=j*((x*x-A*A)*Z/(x*x));for(ee<c?G=3:ee%r!==0?G=3*r:ee%n!==0?G=3*n:ee%s!==0?G=3*s:G=3*a,A=0;A<ye;)if(L=(K[ve+0]&255)<<i,M=(K[ve+1]&255)<<i,I=(K[ve+2]&255)<<i,S=ce(L,M,I),Y(j,S,L,M,I),x!==0&&te(x,S,L,M,I),ve+=G,ve>=et&&(ve-=ee),A++,re===0&&(re=1),A%re===0)for(j-=j/J,E-=E/k,x=E>>h,x<=1&&(x=0),S=0;S<x;S++)pe[S]=j*((x*x-S*S)*Z/(x*x))};t.map=function(A,S,L){var M,I,E,x,j,G,re;for(j=1e3,re=-1,M=ge[S],I=M-1;M<e||I>=0;)M<e&&(G=X[M],E=G[1]-S,E>=j?M=e:(M++,E<0&&(E=-E),x=G[0]-A,x<0&&(x=-x),E+=x,E<j&&(x=G[2]-L,x<0&&(x=-x),E+=x,E<j&&(j=E,re=G[3])))),I>=0&&(G=X[I],E=S-G[1],E>=j?I=-1:(I--,E<0&&(E=-E),x=G[0]-A,x<0&&(x=-x),E+=x,E<j&&(x=G[2]-L,x<0&&(x=-x),E+=x,E<j&&(j=E,re=G[3]))));return re},t.process=function(){return p(),P(),F(),z()};var P=function(){var A;for(A=0;A<e;A++)X[A][0]>>=i,X[A][1]>>=i,X[A][2]>>=i,X[A][3]=A},te=function(A,S,L,M,I){var E,x,j,G,re,ye,K;for(j=S-A,j<-1&&(j=-1),G=S+A,G>e&&(G=e),E=S+1,x=S-1,ye=1;E<G||x>j;){if(re=pe[ye++],E<G){K=X[E++];try{K[0]-=re*(K[0]-L)/T,K[1]-=re*(K[1]-M)/T,K[2]-=re*(K[2]-I)/T}catch{}}if(x>j){K=X[x--];try{K[0]-=re*(K[0]-L)/T,K[1]-=re*(K[1]-M)/T,K[2]-=re*(K[2]-I)/T}catch{}}}},Y=function(A,S,L,M,I){var E=X[S];E[0]-=A*(E[0]-L)/U,E[1]-=A*(E[1]-M)/U,E[2]-=A*(E[2]-I)/U},ce=function(A,S,L){var M,I,E,x,j,G,re,ye,K,ve;for(ye=~(1<<31),K=ye,G=-1,re=G,M=0;M<e;M++)ve=X[M],I=ve[0]-A,I<0&&(I=-I),E=ve[1]-S,E<0&&(E=-E),I+=E,E=ve[2]-L,E<0&&(E=-E),I+=E,I<ye&&(ye=I,G=M),x=I-(_e[M]>>f-i),x<K&&(K=x,re=M),j=we[M]>>v,we[M]-=j,_e[M]+=j<<_;return we[G]+=m,_e[G]-=b,re};return ne.apply(this,arguments),t},yr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var F="",p=this.bin.length,P=0;P<p;P++)F+=e[this.bin[P]];return F},r.prototype.writeByte=function(F){this.bin.push(F)},r.prototype.writeUTFBytes=function(F){for(var p=F.length,P=0;P<p;P++)this.writeByte(F.charCodeAt(P))},r.prototype.writeBytes=function(F,p,P){for(var te=P||F.length,Y=p||0;Y<te;Y++)this.writeByte(F[Y])};var n={},s,a,c=null,o,i=-1,l=0,f=!1,u,_,v,m,b,w,h=[],y=7,N=-1,k=!1,W=!0,U=!1,J=10,H="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(p){l=Math.round(p/10)},n.setDispose=function(p){p>=0&&(N=p)},n.setRepeat=function(p){p>=0&&(i=p)},n.setTransparent=function(p){c=p},n.setComment=function(p){H=p},n.addFrame=function(p,P){if(p===null||!f||u===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?p instanceof ImageData?(_=p.data,(!sizeset||s!=p.width||a!=p.height)&&D(p.width,p.height)):p instanceof Uint8ClampedArray?p.length==s*a*4?_=p:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(_=p.getImageData(0,0,p.canvas.width,p.canvas.height).data,U||D(p.canvas.width,p.canvas.height)),ee(),T(),W&&(_e(),pe(),i>=0&&we()),he(),H!==""&&X(),ge(),W||pe(),z(),W=!1}catch{te=!1}return te},n.download=function(p){if(u===null||k==!1)console.log("Please call start method and add frames and call finish method before calling download");else{p=p!==void 0?p.endsWith(".gif")?p:p+".gif":"download.gif";var P=document.createElement("a");P.download=p,P.href=URL.createObjectURL(new Blob([new Uint8Array(u.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!f)return!1;var p=!0;f=!1;try{u.writeByte(59),k=!0}catch{p=!1}return p};var Z=function(){o=0,_=null,v=null,m=null,w=null,k=!1,W=!0};n.setFrameRate=function(p){p!=15&&(l=Math.round(100/p))},n.setQuality=function(p){p<1&&(p=1),J=p};var D=n.setSize=function(p,P){f&&!W||(s=p,a=P,s<1&&(s=320),a<1&&(a=240),U=!0)};n.start=function(){Z();var p=!0;k=!1,u=new r;try{u.writeUTFBytes("GIF89a")}catch{p=!1}return f=p},n.cont=function(){Z();var p=!0;return k=!1,u=new r,f=p};var T=function(){var p=v.length,P=p/3;m=[];var te=new wr(v,p,J);w=te.process();for(var Y=0,ce=0;ce<P;ce++){var Q=te.map(v[Y++]&255,v[Y++]&255,v[Y++]&255);h[Q]=!0,m[ce]=Q}v=null,b=8,y=7,c!==null&&(o=R(c))},R=function(p){if(w===null)return-1;for(var P=(p&16711680)>>16,te=(p&65280)>>8,Y=p&255,ce=0,Q=256*256*256,A=w.length,S=0;S<A;){var L=P-(w[S++]&255),M=te-(w[S++]&255),I=Y-(w[S]&255),E=L*L+M*M+I*I,x=S/3;h[x]&&E<Q&&(Q=E,ce=x),S++}return ce},ee=function(){var p=s,P=a;v=[];for(var te=_,Y=0,ce=0;ce<P;ce++)for(var Q=0;Q<p;Q++){var A=ce*p*4+Q*4;v[Y++]=te[A],v[Y++]=te[A+1],v[Y++]=te[A+2]}},he=function(){u.writeByte(33),u.writeByte(249),u.writeByte(4);var p,P;c===null?(p=0,P=0):(p=1,P=2),N>=0&&(P=N&7),P<<=2,u.writeByte(0|P|0|p),ne(l),u.writeByte(o),u.writeByte(0)},X=function(){u.writeByte(33),u.writeByte(254),u.writeByte(H.length),u.writeUTFBytes(H),u.writeByte(0)},ge=function(){u.writeByte(44),ne(0),ne(0),ne(s),ne(a),W?u.writeByte(0):u.writeByte(128|y)},_e=function(){ne(s),ne(a),u.writeByte(240|y),u.writeByte(0),u.writeByte(0)},we=function(){u.writeByte(33),u.writeByte(255),u.writeByte(11),u.writeUTFBytes("NETSCAPE2.0"),u.writeByte(3),u.writeByte(1),ne(i),u.writeByte(0)},pe=function(){u.writeBytes(w);for(var p=3*256-w.length,P=0;P<p;P++)u.writeByte(0)},ne=function(p){u.writeByte(p&255),u.writeByte(p>>8&255)},z=function(){var p=new br(s,a,m,b);p.encode(u)};return n.stream=function(){return u},n.setProperties=function(p,P){f=p,W=P},n},ke={a_position:0,a_texCoords:1},lt={default:{vertex:`#version 300 es

layout(location = ${ke.a_position}) in vec2 a_position;
layout(location = ${ke.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class Er{constructor(e){be(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:Tr(this.gl,lt[e].vertex,lt[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function $r(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function Tr(t,e,r){const n=ct(t,t.VERTEX_SHADER,e);let s;try{s=ct(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function ct(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ut(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,c,o;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),c!==i.geometry&&(t.bindVertexArray(i.geometry.vao),c=i.geometry),o!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),o=n);const l={u_image:n.unit,...i.getUniforms(e)};$r(t,i.program,l),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}function Ar(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(ke.a_position),t.vertexAttribPointer(ke.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(ke.a_texCoords),t.vertexAttribPointer(ke.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const xr={full:[-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0],sudoku:[-3,-3,-1,2,3,-3,2,2,-3,3,-1,-1,3,3,2,-1],tower:[-1,-3,0,2,1,-3,1,2,-1,3,0,-1,1,3,1,-1]};class Fr{constructor(e){be(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=Ar(this.gl,xr[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class Sr{constructor(e){be(this,"gl");be(this,"programFactory");be(this,"geometryFactory");be(this,"texture");be(this,"queue",[]);be(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new Er(this.gl),this.geometryFactory=new Fr(this.gl),this.texture=new _r(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new yr;if(a.setRepeat(0),a.setDelay(e.frame.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:ot(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:ot(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let o=0;o<this.queue.length-1;++o)this.queue[o].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const c=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")ut(this.gl,a/r.frame.totalFrames,s,this.texture,c),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:o,sprites:i,callback:l}=this.queue[0];ut(this.gl,a/r.frame.totalFrames,i,this.texture,c),l(a);const f=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,f),o.addFrame(f,!0),o.setTransparent(16777215),a===r.frame.totalFrames-1){o.finish();const u=o.stream().getData(),_="data:image/gif;base64,"+window.btoa(u);n({dataUri:_}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const De=function(){const{subscribe:t,update:e}=Xe(Qe[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=Qe.find(c=>c.name===n);return a||s})}}}(),Ee=function(){const t=`${Ze}/favicon.png`,{subscribe:e,update:r}=Xe({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.url!==t&&URL.revokeObjectURL(c.url),{...c,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Ue=function(){const{subscribe:t,update:e}=Xe(void 0,n=>De.subscribe(a=>{n(a.defaultFrameOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),qe=function(){const{subscribe:t,update:e}=Xe(void 0,n=>De.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),ze=function(){const t=Xe({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new Sr(c),running:!1,frame:0}})}function s(){const{animator:c}=Fe(t);return c?(r(o=>({...o,running:!0,frame:0})),c.animate({image:Fe(Ee),frame:Fe(Ue),animation:Fe(qe)},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:o,frame:i}=Fe(t);if(!o)return Promise.reject("Animator has not been created");let l;typeof c>"u"?l=i:l=c;const f=Fe(Ue);return l>=f.totalFrames&&(l=f.totalFrames-1),r(u=>({...u,frame:l,running:!0})),o.renderFrame({image:Fe(Ee),frame:f,animation:Fe(qe)},l).finally(()=>{r(u=>({...u,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ft(t){let e,r,n,s,a,c;return{c(){e=O("label"),r=ie(t[1]),n=q(),s=O("input"),this.h()},l(o){e=B(o,"LABEL",{class:!0});var i=C(e);r=oe(i,t[1]),n=V(i),s=B(i,"INPUT",{class:!0,type:!0}),i.forEach($),this.h()},h(){d(s,"class","slider__text-input svelte-1h0gcvd"),d(s,"type","text"),s.value=t[0],d(e,"class","slider__label svelte-1h0gcvd")},m(o,i){le(o,e,i),g(e,r),g(e,n),g(e,s),a||(c=Ve(s,"input",t[5]),a=!0)},p(o,i){i&2&&Re(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&$(e),a=!1,c()}}}function Pr(t){let e,r,n,s,a=We(t[2])+"",c,o,i,l,f,u,_=We(t[3])+"",v,m,b,w=t[1]&&ft(t);return{c(){e=O("div"),w&&w.c(),r=q(),n=O("div"),s=O("span"),c=ie(a),o=q(),i=O("div"),l=O("input"),f=q(),u=O("span"),v=ie(_),this.h()},l(h){e=B(h,"DIV",{class:!0});var y=C(e);w&&w.l(y),r=V(y),n=B(y,"DIV",{class:!0});var N=C(n);s=B(N,"SPAN",{class:!0});var k=C(s);c=oe(k,a),k.forEach($),o=V(N),i=B(N,"DIV",{class:!0});var W=C(i);l=B(W,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),W.forEach($),f=V(N),u=B(N,"SPAN",{class:!0});var U=C(u);v=oe(U,_),U.forEach($),N.forEach($),y.forEach($),this.h()},h(){d(s,"class","slider__range slider__range--min svelte-1h0gcvd"),d(l,"class","slider__input svelte-1h0gcvd"),d(l,"type","range"),d(l,"min",t[2]),d(l,"max",t[3]),d(l,"step",t[4]),l.value=t[0],d(i,"class","slider__input-container svelte-1h0gcvd"),d(u,"class","slider__range slider__range--max"),d(n,"class","slider__container svelte-1h0gcvd"),d(e,"class","slider")},m(h,y){le(h,e,y),w&&w.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,o),g(n,i),g(i,l),g(n,f),g(n,u),g(u,v),m||(b=Ve(l,"input",t[5]),m=!0)},p(h,[y]){h[1]?w?w.p(h,y):(w=ft(h),w.c(),w.m(e,r)):w&&(w.d(1),w=null),y&4&&a!==(a=We(h[2])+"")&&Re(c,a),y&4&&d(l,"min",h[2]),y&8&&d(l,"max",h[3]),y&16&&d(l,"step",h[4]),y&1&&(l.value=h[0]),y&8&&_!==(_=We(h[3])+"")&&Re(v,_)},i:Oe,o:Oe,d(h){h&&$(e),w&&w.d(),m=!1,b()}}}function We(t){return t.toFixed(2).replace(/\.?0+$/,"")}function Or(t,e,r){const n=wt();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:o=1}=e,{value:i=c<a?a:(c-a)/2}=e;function l(f){const u=f.target,_=parseFloat(u.value);Number.isNaN(_)||(r(0,i=_),n("input",{value:i}))}return t.$$set=f=>{"label"in f&&r(1,s=f.label),"min"in f&&r(2,a=f.min),"max"in f&&r(3,c=f.max),"step"in f&&r(4,o=f.step),"value"in f&&r(0,i=f.value)},[i,s,a,c,o,l]}class xe extends Be{constructor(e){super(),Me(this,e,Or,Pr,Ie,{label:1,min:2,max:3,step:4,value:0})}}function Br(t){let e,r,n,s,a,c,o,i,l,f,u,_,v,m,b,w,h,y,N,k,W,U,J,H,Z,D;return f=new xe({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),f.$on("input",t[4]),_=new xe({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),_.$on("input",t[5]),m=new xe({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),w=new xe({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),w.$on("input",t[7]),y=new xe({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),y.$on("input",t[8]),k=new xe({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].delayMs}}),k.$on("input",t[9]),U=new xe({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].totalFrames}}),U.$on("input",t[10]),{c(){e=O("aside"),r=O("label"),n=ie(`Select image

    `),s=O("input"),a=q(),c=O("div"),o=O("img"),l=q(),ue(f.$$.fragment),u=q(),ue(_.$$.fragment),v=q(),ue(m.$$.fragment),b=q(),ue(w.$$.fragment),h=q(),ue(y.$$.fragment),N=q(),ue(k.$$.fragment),W=q(),ue(U.$$.fragment),this.h()},l(T){e=B(T,"ASIDE",{class:!0});var R=C(e);r=B(R,"LABEL",{class:!0});var ee=C(r);n=oe(ee,`Select image

    `),s=B(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=V(ee),c=B(ee,"DIV",{class:!0});var he=C(c);o=B(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach($),ee.forEach($),l=V(R),fe(f.$$.fragment,R),u=V(R),fe(_.$$.fragment,R),v=V(R),fe(m.$$.fragment,R),b=V(R),fe(w.$$.fragment,R),h=V(R),fe(y.$$.fragment,R),N=V(R),fe(k.$$.fragment,R),W=V(R),fe(U.$$.fragment,R),R.forEach($),this.h()},h(){d(s,"class","image__input svelte-843oxz"),d(s,"type","file"),d(s,"accept","image/*"),d(o,"class","image__preview svelte-843oxz"),Ce(o.src,i=t[1].url)||d(o,"src",i),d(o,"alt","source"),d(c,"class","image__container svelte-843oxz"),d(r,"class","image svelte-843oxz"),d(e,"class",J=Ae(`container ${t[0]}`)+" svelte-843oxz")},m(T,R){le(T,e,R),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,o),g(e,l),me(f,e,null),g(e,u),me(_,e,null),g(e,v),me(m,e,null),g(e,b),me(w,e,null),g(e,h),me(y,e,null),g(e,N),me(k,e,null),g(e,W),me(U,e,null),H=!0,Z||(D=Ve(s,"input",t[3]),Z=!0)},p(T,[R]){(!H||R&2&&!Ce(o.src,i=T[1].url))&&d(o,"src",i);const ee={};R&2&&(ee.value=T[1].width),f.$set(ee);const he={};R&2&&(he.value=T[1].height),_.$set(he);const X={};R&2&&(X.value=T[1].clearRed),m.$set(X);const ge={};R&2&&(ge.value=T[1].clearGreen),w.$set(ge);const _e={};R&2&&(_e.value=T[1].clearBlue),y.$set(_e);const we={};R&4&&(we.value=T[2].delayMs),k.$set(we);const pe={};R&4&&(pe.value=T[2].totalFrames),U.$set(pe),(!H||R&1&&J!==(J=Ae(`container ${T[0]}`)+" svelte-843oxz"))&&d(e,"class",J)},i(T){H||(ae(f.$$.fragment,T),ae(_.$$.fragment,T),ae(m.$$.fragment,T),ae(w.$$.fragment,T),ae(y.$$.fragment,T),ae(k.$$.fragment,T),ae(U.$$.fragment,T),H=!0)},o(T){se(f.$$.fragment,T),se(_.$$.fragment,T),se(m.$$.fragment,T),se(w.$$.fragment,T),se(y.$$.fragment,T),se(k.$$.fragment,T),se(U.$$.fragment,T),H=!1},d(T){T&&$(e),de(f),de(_),de(m),de(w),de(y),de(k),de(U),Z=!1,D()}}}function Mr(t,e,r){let n,s;$e(t,Ee,m=>r(1,n=m)),$e(t,Ue,m=>r(2,s=m));let{class:a=""}=e;function c(m){var h;const w=(h=m.target.files)==null?void 0:h[0];w&&Ee.changeImage(w)}const o=m=>Ee.change({width:m.detail.value}),i=m=>Ee.change({height:m.detail.value}),l=m=>Ee.change({clearRed:m.detail.value}),f=m=>Ee.change({clearGreen:m.detail.value}),u=m=>Ee.change({clearBlue:m.detail.value}),_=m=>Ue.change({delayMs:m.detail.value}),v=m=>Ue.change({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,c,o,i,l,f,u,_,v]}class Ir extends Be{constructor(e){super(),Me(this,e,Mr,Br,Ie,{class:0})}}function Rr(t){let e,r,n,s,a,c,o;return{c(){e=O("div"),r=ie(t[1]),n=q(),s=O("label"),a=O("input"),this.h()},l(i){e=B(i,"DIV",{class:!0});var l=C(e);r=oe(l,t[1]),n=V(l),s=B(l,"LABEL",{class:!0});var f=C(s);a=B(f,"INPUT",{class:!0,type:!0}),f.forEach($),l.forEach($),this.h()},h(){d(a,"class","toggle__checkbox svelte-1j9rfin"),d(a,"type","checkbox"),a.checked=t[0],d(s,"class","toggle__label svelte-1j9rfin"),Se(s,"toggle__label--active",t[0]),d(e,"class","toggle svelte-1j9rfin")},m(i,l){le(i,e,l),g(e,r),g(e,n),g(e,s),g(s,a),c||(o=Ve(a,"change",t[2]),c=!0)},p(i,[l]){l&2&&Re(r,i[1]),l&1&&(a.checked=i[0]),l&1&&Se(s,"toggle__label--active",i[0])},i:Oe,o:Oe,d(i){i&&$(e),c=!1,o()}}}function kr(t,e,r){const n=wt();let{label:s=""}=e,{value:a=!1}=e;function c(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,c]}class Mt extends Be{constructor(e){super(),Me(this,e,kr,Rr,Ie,{label:1,value:0})}}function mt(t,e,r){const n=t.slice();return n[5]=e[r],n}function Ur(t){let e,r;return e=new Mt({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){$t(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Cr(t){let e,r;return e=new xe({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){$t(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function dt(t){let e,r,n,s;const a=[Cr,Ur],c=[];function o(i,l){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=o(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=tt()},l(i){r&&r.l(i),n=tt()},m(i,l){~e&&c[e].m(i,l),le(i,n,l),s=!0},p(i,l){let f=e;e=o(i),e===f?~e&&c[e].p(i,l):(r&&(yt(),se(c[f],1,1,()=>{c[f]=null}),Et()),~e?(r=c[e],r?r.p(i,l):(r=c[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&c[e].d(i),i&&$(n)}}}function Dr(t){let e,r,n,s=t[2].editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=dt(mt(t,s,o));const c=o=>se(a[o],1,1,()=>{a[o]=null});return{c(){e=O("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=B(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<a.length;l+=1)a[l].l(i);i.forEach($),this.h()},h(){d(e,"class",r=Ae(`container ${t[0]}`)+" svelte-1solget")},m(o,i){le(o,e,i);for(let l=0;l<a.length;l+=1)a[l].m(e,null);n=!0},p(o,[i]){if(i&14){s=o[2].editOptions;let l;for(l=0;l<s.length;l+=1){const f=mt(o,s,l);a[l]?(a[l].p(f,i),ae(a[l],1)):(a[l]=dt(f),a[l].c(),ae(a[l],1),a[l].m(e,null))}for(yt(),l=s.length;l<a.length;l+=1)c(l);Et()}(!n||i&1&&r!==(r=Ae(`container ${o[0]}`)+" svelte-1solget"))&&d(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(o){o&&$(e),kt(a,o)}}}function jr(t,e,r){let n,s,a;$e(t,qe,i=>r(4,s=i)),$e(t,De,i=>r(2,a=i));let{class:c=""}=e;function o(i){return function(l){qe.change({[i]:l.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,o,s]}class Nr extends Be{constructor(e){super(),Me(this,e,jr,Dr,Ie,{class:0})}}function ht(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function pt(t,e){let r,n,s,a,c,o=e[4]+"",i,l,f,u;function _(){return e[3](e[4])}return{key:t,first:null,c(){r=O("button"),n=O("img"),a=q(),c=O("span"),i=ie(o),l=q(),this.h()},l(v){r=B(v,"BUTTON",{type:!0,class:!0});var m=C(r);n=B(m,"IMG",{class:!0,src:!0,alt:!0}),a=V(m),c=B(m,"SPAN",{});var b=C(c);i=oe(b,o),b.forEach($),l=V(m),m.forEach($),this.h()},h(){d(n,"class","image svelte-1l1v01j"),Ce(n.src,s=`${Ze}/demo-${e[4]}.gif`)||d(n,"src",s),d(n,"alt",e[4]),d(r,"type","button"),d(r,"class","option svelte-1l1v01j"),Se(r,"option--selected",e[4]===e[1].name),this.first=r},m(v,m){le(v,r,m),g(r,n),g(r,a),g(r,c),g(c,i),g(r,l),f||(u=Ve(r,"click",_),f=!0)},p(v,m){e=v,m&2&&Se(r,"option--selected",e[4]===e[1].name)},d(v){v&&$(r),f=!1,u()}}}function zr(t){let e,r=[],n=new Map,s,a=Qe;const c=o=>o[4];for(let o=0;o<a.length;o+=1){let i=ht(t,a,o),l=c(i);n.set(l,r[o]=pt(l,i))}return{c(){e=O("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=B(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach($),this.h()},h(){d(e,"class",s=Ae(`container ${t[0]}`)+" svelte-1l1v01j")},m(o,i){le(o,e,i);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,[i]){i&6&&(a=Qe,r=Ut(r,i,c,1,o,a,n,e,Ct,pt,null,ht)),i&1&&s!==(s=Ae(`container ${o[0]}`)+" svelte-1l1v01j")&&d(e,"class",s)},i:Oe,o:Oe,d(o){o&&$(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Lr(t,e,r){let n;$e(t,De,o=>r(1,n=o));let{class:s=""}=e;function a(o){o!==n.name&&De.change(o)}const c=o=>a(o);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,c]}class Gr extends Be{constructor(e){super(),Me(this,e,Lr,zr,Ie,{class:0})}}function vt(t){t[14]=t[15].dataUri}function gt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Xr,then:Vr,catch:qr,value:15,error:16};return rt(r=t[4],n),{c(){e=O("div"),n.block.c(),this.h()},l(s){e=B(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach($),this.h()},h(){d(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(s,a){le(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&rt(r,n)||Nt(n,t,a)},d(s){s&&$(e),n.block.d(),n.token=null,n=null}}}function qr(t){let e,r,n=t[16]+"",s;return{c(){e=O("p"),r=ie("An error has occurred: "),s=ie(n),this.h()},l(a){e=B(a,"P",{class:!0});var c=C(e);r=oe(c,"An error has occurred: "),s=oe(c,n),c.forEach($),this.h()},h(){d(e,"class","preview__error svelte-13qbjon")},m(a,c){le(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[16]+"")&&Re(s,n)},d(a){a&&$(e)}}}function Vr(t){vt(t);let e,r,n,s,a,c,o;return{c(){e=O("div"),r=O("img"),s=q(),a=O("a"),c=ie("Download"),this.h()},l(i){e=B(i,"DIV",{class:!0});var l=C(e);r=B(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach($),s=V(i),a=B(i,"A",{class:!0,download:!0,href:!0});var f=C(a);c=oe(f,"Download"),f.forEach($),this.h()},h(){d(r,"class","preview__image svelte-13qbjon"),Ce(r.src,n=t[14])||d(r,"src",n),d(r,"alt","generated gif"),d(e,"class","preview__image-container svelte-13qbjon"),d(a,"class","preview__download-button svelte-13qbjon"),d(a,"download","jumping_peter.gif"),d(a,"href",o=t[14])},m(i,l){le(i,e,l),g(e,r),le(i,s,l),le(i,a,l),g(a,c)},p(i,l){vt(i),l&16&&!Ce(r.src,n=i[14])&&d(r,"src",n),l&16&&o!==(o=i[14])&&d(a,"href",o)},d(i){i&&$(e),i&&$(s),i&&$(a)}}}function Xr(t){let e,r,n,s,a,c,o=t[5].frame+"",i,l,f=t[2].totalFrames+"",u,_,v,m,b,w;return{c(){e=O("div"),r=O("p"),n=ie("Generating..."),s=q(),a=O("p"),c=ie("["),i=ie(o),l=ie(" / "),u=ie(f),_=ie("]"),v=q(),m=O("progress"),this.h()},l(h){e=B(h,"DIV",{class:!0});var y=C(e);r=B(y,"P",{});var N=C(r);n=oe(N,"Generating..."),N.forEach($),s=V(y),a=B(y,"P",{});var k=C(a);c=oe(k,"["),i=oe(k,o),l=oe(k," / "),u=oe(k,f),_=oe(k,"]"),k.forEach($),v=V(y),m=B(y,"PROGRESS",{class:!0,max:!0}),C(m).forEach($),y.forEach($),this.h()},h(){d(m,"class","preview__progress svelte-13qbjon"),d(m,"max",b=t[2].totalFrames),m.value=w=t[5].frame,d(e,"class","preview__loading svelte-13qbjon")},m(h,y){le(h,e,y),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,l),g(a,u),g(a,_),g(e,v),g(e,m)},p(h,y){y&32&&o!==(o=h[5].frame+"")&&Re(i,o),y&4&&f!==(f=h[2].totalFrames+"")&&Re(u,f),y&4&&b!==(b=h[2].totalFrames)&&d(m,"max",b),y&32&&w!==(w=h[5].frame)&&(m.value=w)},d(h){h&&$(e)}}}function Wr(t){let e,r,n,s,a,c,o,i,l,f,u,_;n=new Mt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let v=!t[1]&&t[4]&&gt(t);return f=new xe({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),f.$on("input",t[6]),{c(){e=O("main"),r=O("div"),ue(n.$$.fragment),s=q(),v&&v.c(),a=q(),c=O("div"),o=O("div"),i=O("canvas"),l=q(),ue(f.$$.fragment),this.h()},l(m){e=B(m,"MAIN",{class:!0});var b=C(e);r=B(b,"DIV",{class:!0});var w=C(r);fe(n.$$.fragment,w),w.forEach($),s=V(b),v&&v.l(b),a=V(b),c=B(b,"DIV",{class:!0});var h=C(c);o=B(h,"DIV",{class:!0});var y=C(o);i=B(y,"CANVAS",{class:!0,style:!0}),C(i).forEach($),y.forEach($),l=V(h),fe(f.$$.fragment,h),h.forEach($),b.forEach($),this.h()},h(){d(r,"class","preview__debug-input svelte-13qbjon"),d(i,"class","preview__image svelte-13qbjon"),Dt(i,"transform","scaleY(-1)"),d(o,"class","preview__image-container svelte-13qbjon"),d(c,"class","preview__container preview__container--debug svelte-13qbjon"),d(e,"class",u=Ae(`preview ${t[0]}`)+" svelte-13qbjon"),Se(e,"preview--debug",t[1]),Se(e,"preview--no-debug",!t[1])},m(m,b){le(m,e,b),g(e,r),me(n,r,null),g(e,s),v&&v.m(e,null),g(e,a),g(e,c),g(c,o),g(o,i),t[11](i),g(c,l),me(f,c,null),_=!0},p(m,[b]){const w={};b&2&&(w.value=m[1]),n.$set(w),!m[1]&&m[4]?v?v.p(m,b):(v=gt(m),v.c(),v.m(e,a)):v&&(v.d(1),v=null);const h={};b&4&&(h.max=m[2].totalFrames-1),b&32&&(h.value=m[5].frame),f.$set(h),(!_||b&1&&u!==(u=Ae(`preview ${m[0]}`)+" svelte-13qbjon"))&&d(e,"class",u),(!_||b&3)&&Se(e,"preview--debug",m[1]),(!_||b&3)&&Se(e,"preview--no-debug",!m[1])},i(m){_||(ae(n.$$.fragment,m),ae(f.$$.fragment,m),_=!0)},o(m){se(n.$$.fragment,m),se(f.$$.fragment,m),_=!1},d(m){m&&$(e),de(n),v&&v.d(),t[11](null),de(f)}}}function Yr(t,e,r){let n,s,a,c,o;$e(t,De,h=>r(8,n=h)),$e(t,qe,h=>r(9,s=h)),$e(t,Ue,h=>r(2,a=h)),$e(t,Ee,h=>r(10,c=h)),$e(t,ze,h=>r(5,o=h));let i,{class:l=""}=e,f=!1,u=null;function _(){ze.renderFrame().catch(h=>{throw console.error(`renderFrame failed: ${h}`),h})}function v(){r(4,u=ze.animate().catch(h=>{throw console.error(`animate failed: ${h}`),h}))}jt(()=>{ze.changeCanvas(i),v()});function m(h){ze.renderFrame(h.detail.value).catch(y=>console.error(`Animation failed: ${y}`))}function b(h){r(1,f=h.detail.value)}function w(h){zt[h?"unshift":"push"](()=>{i=h,r(3,i)})}return t.$$set=h=>{"class"in h&&r(0,l=h.class)},t.$$.update=()=>{t.$$.dirty&1798&&(f?_():v())},[l,f,a,i,u,o,m,b,n,s,c,w]}class Hr extends Be{constructor(e){super(),Me(this,e,Yr,Wr,Ie,{class:0})}}function Qr(t){let e,r,n,s,a,c,o,i,l,f,u,_,v,m,b,w,h,y,N,k,W,U,J,H,Z;return document.title=e=Le,w=new Vt({props:{class:"header"}}),y=new Gr({props:{class:"animations"}}),k=new Ir({props:{class:"common-options"}}),U=new Nr({props:{class:"animation-options"}}),H=new Hr({props:{class:"preview"}}),{c(){r=O("meta"),n=O("meta"),s=O("meta"),a=O("meta"),c=O("meta"),o=O("meta"),i=O("meta"),l=O("meta"),f=O("meta"),u=O("meta"),_=O("meta"),v=O("meta"),m=q(),b=O("div"),ue(w.$$.fragment),h=q(),ue(y.$$.fragment),N=q(),ue(k.$$.fragment),W=q(),ue(U.$$.fragment),J=q(),ue(H.$$.fragment),this.h()},l(D){const T=Lt("svelte-2dqrj",document.head);r=B(T,"META",{name:!0,content:!0,class:!0}),n=B(T,"META",{name:!0,content:!0,class:!0}),s=B(T,"META",{property:!0,content:!0,class:!0}),a=B(T,"META",{property:!0,content:!0,class:!0}),c=B(T,"META",{property:!0,content:!0,class:!0}),o=B(T,"META",{property:!0,content:!0,class:!0}),i=B(T,"META",{property:!0,content:!0,class:!0}),l=B(T,"META",{property:!0,content:!0,class:!0}),f=B(T,"META",{property:!0,content:!0,class:!0}),u=B(T,"META",{property:!0,content:!0,class:!0}),_=B(T,"META",{property:!0,content:!0,class:!0}),v=B(T,"META",{property:!0,content:!0,class:!0}),T.forEach($),m=V(D),b=B(D,"DIV",{class:!0});var R=C(b);fe(w.$$.fragment,R),h=V(R),fe(y.$$.fragment,R),N=V(R),fe(k.$$.fragment,R),W=V(R),fe(U.$$.fragment,R),J=V(R),fe(H.$$.fragment,R),R.forEach($),this.h()},h(){d(r,"name","title"),d(r,"content",Le),d(r,"class","svelte-z7ouxl"),d(n,"name","description"),d(n,"content",Je),d(n,"class","svelte-z7ouxl"),d(s,"property","og:type"),d(s,"content","website"),d(s,"class","svelte-z7ouxl"),d(a,"property","og:url"),d(a,"content",_t),d(a,"class","svelte-z7ouxl"),d(c,"property","og:title"),d(c,"content",Le),d(c,"class","svelte-z7ouxl"),d(o,"property","og:description"),d(o,"content",Je),d(o,"class","svelte-z7ouxl"),d(i,"property","og:image"),d(i,"content",bt),d(i,"class","svelte-z7ouxl"),d(l,"property","twitter:card"),d(l,"content","summary_large_image"),d(l,"class","svelte-z7ouxl"),d(f,"property","twitter:url"),d(f,"content",_t),d(f,"class","svelte-z7ouxl"),d(u,"property","twitter:title"),d(u,"content",Le),d(u,"class","svelte-z7ouxl"),d(_,"property","twitter:description"),d(_,"content",Je),d(_,"class","svelte-z7ouxl"),d(v,"property","twitter:image"),d(v,"content",bt),d(v,"class","svelte-z7ouxl"),d(b,"class","grid svelte-z7ouxl")},m(D,T){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,o),g(document.head,i),g(document.head,l),g(document.head,f),g(document.head,u),g(document.head,_),g(document.head,v),le(D,m,T),le(D,b,T),me(w,b,null),g(b,h),me(y,b,null),g(b,N),me(k,b,null),g(b,W),me(U,b,null),g(b,J),me(H,b,null),Z=!0},p(D,[T]){(!Z||T&0)&&e!==(e=Le)&&(document.title=e)},i(D){Z||(ae(w.$$.fragment,D),ae(y.$$.fragment,D),ae(k.$$.fragment,D),ae(U.$$.fragment,D),ae(H.$$.fragment,D),Z=!0)},o(D){se(w.$$.fragment,D),se(y.$$.fragment,D),se(k.$$.fragment,D),se(U.$$.fragment,D),se(H.$$.fragment,D),Z=!1},d(D){$(r),$(n),$(s),$(a),$(c),$(o),$(i),$(l),$(f),$(u),$(_),$(v),D&&$(m),D&&$(b),de(w),de(y),de(k),de(U),de(H)}}}const Le="Jumping Peter",Je="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",_t="https://ksmai.github.io/jumping-peter",bt="https://ksmai.github.io/jumping-peter/favicon.png";class ea extends Be{constructor(e){super(),Me(this,e,null,Qr,Ie,{})}}export{ea as default};
