var qn=Object.defineProperty;var Hn=(t,e,r)=>e in t?qn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var he=(t,e,r)=>(Hn(t,typeof e!="symbol"?e+"":e,r),r);import{S as de,i as _e,n as ve,j as I,s as P,q as oe,k as D,l as H,c as F,r as le,g as $,m as v,J as We,K as Ie,a as B,G as y,H as De,L as st,M as Xn,N as Le,u as Ae,f as C,v as Et,b as S,d as Tt,O as zn,P as ct,C as Vn,D as Yn,E as Wn,F as Zn,Q as Jn,R as qt,y as x,z as k,A,B as M,I as Te,T as He,e as Je,U as yn,V as Qn,W as Kn,p as er,o as tr,X as Ht,Y as nr,w as rr,Z as ar}from"../chunks/index.a9aa9141.js";import{b as dt,w as Ct,d as ir}from"../chunks/paths.5b451a4b.js";function sr(t){let e,r,n,i,a,o,s,l,u,f,c,d,p;return{c(){e=I("header"),r=I("img"),i=P(),a=I("h1"),o=oe("Jumping Peter"),s=P(),l=I("p"),u=oe("generate gif emojis"),f=P(),c=I("a"),d=oe("Contribute"),this.h()},l(h){e=D(h,"HEADER",{class:!0});var m=H(e);r=D(m,"IMG",{class:!0,src:!0,alt:!0}),i=F(m),a=D(m,"H1",{class:!0});var _=H(a);o=le(_,"Jumping Peter"),_.forEach($),s=F(m),l=D(m,"P",{class:!0});var E=H(l);u=le(E,"generate gif emojis"),E.forEach($),f=F(m),c=D(m,"A",{class:!0,href:!0,target:!0,rel:!0});var b=H(c);d=le(b,"Contribute"),b.forEach($),m.forEach($),this.h()},h(){v(r,"class","logo svelte-bal6b7"),We(r.src,n=`${dt}/demo-jumping.gif`)||v(r,"src",n),v(r,"alt",""),v(a,"class","title svelte-bal6b7"),v(l,"class","subtitle svelte-bal6b7"),v(c,"class","contribute svelte-bal6b7"),v(c,"href","https://github.com/ksmai/jumping-peter"),v(c,"target","_blank"),v(c,"rel","noreferrer"),v(e,"class",p=Ie(`header ${t[0]}`)+" svelte-bal6b7")},m(h,m){B(h,e,m),y(e,r),y(e,i),y(e,a),y(a,o),y(e,s),y(e,l),y(l,u),y(e,f),y(e,c),y(c,d)},p(h,[m]){m&1&&p!==(p=Ie(`header ${h[0]}`)+" svelte-bal6b7")&&v(e,"class",p)},i:De,o:De,d(h){h&&$(e)}}}function or(t,e,r){let{class:n=""}=e;return t.$$set=i=>{"class"in i&&r(0,n=i.class)},[n]}class lr extends de{constructor(e){super(),_e(this,e,or,sr,ve,{class:0})}}function Qe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function ze(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Rt(t){return{...t,type:"slider",min:0,max:1,step:.01}}function lt(t){return{...t,type:"slider",min:0,max:2,step:.01}}function _t(t){return{...t,type:"slider",min:-2,max:2,step:.01}}function vt(t){return{...t,type:"slider",min:.01,max:10,step:.01}}function Xt(t){return{...t,type:"slider",min:-1,max:1,step:1}}function En(t){return{...t,type:"slider",min:1,max:100,step:1}}function ur(t){return{...t,type:"slider",min:1,max:5,step:1}}function ft(t){return{...t,type:"toggle"}}function cr(t){return t.reduce((e,r)=>(Object.assign(e,{[r.name]:r.value}),e),{})}const ee={image:{url:`${dt}/favicon.png`},output:{width:64,height:64,clear:[1,1,1],delayMs:50,totalFrames:20},material:{specular:[0,0,0],shininess:32},directionalLight:{ambient:[1,1,1],diffuse:[0,0,0],specular:[0,0,0],direction:[0,-1,-1]},pointLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],attenuation1:.2,attenuation2:.1},spotLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],direction:[0,0,-1],innerDegrees:5,outerDegrees:15,attenuation1:.2,attenuation2:.1},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!1,left:-1,right:1,bottom:-1,top:1,near:.1,far:10}};function $e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ke(t,e,r){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=r,t[5]*=r,t[9]*=r,t[13]*=r}function be(t,e,r){Tn(t,e,r,0)}function fr(t,e,r){const n=t[0],i=t[4],a=t[8],o=t[12];t[0]+=e*t[1],t[4]+=e*t[5],t[8]+=e*t[9],t[12]+=e*t[13],t[1]+=r*n,t[5]+=r*i,t[9]+=r*a,t[13]+=r*o}function Tn(t,e,r,n){t[12]+=e,t[13]+=r,t[14]+=n}function ut(t,e){Bt(t,e,[0,0,1])}function Bt(t,e,r){const n=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(n===0)return;const i=r[0]/n,a=r[1]/n,o=r[2]/n,s=e/180*Math.PI,l=Math.cos(s),u=Math.sin(s),f=[(1-l)*i*i+l,(1-l)*i*a+u*o,(1-l)*i*o-u*a,0,(1-l)*i*a-u*o,(1-l)*a*a+l,(1-l)*a*o-u*i,0,(1-l)*i*o+u*a,(1-l)*a*o-u*i,(1-l)*o*o+l,0,0,0,0,1];St(t,f)}function mr(t,e,r,n){Tn(t,-e[0],-e[1],-e[2]);const i=[-r[0],-r[1],-r[2]];zt(i);const a=Vt(n,i);zt(a);const o=Vt(i,a),s=[a[0],o[0],i[0],0,a[1],o[1],i[1],0,a[2],o[2],i[2],0,0,0,0,1];St(t,s)}function pr(t,e,r,n,i,a,o){const s=[2*a/(r-e),0,0,0,0,2*a/(i-n),0,0,(r+e)/(r-e),(i+n)/(i-n),-(o+a)/(o-a),-1,0,0,-2*o*a/(o-a),0];St(t,s)}function gr(t,e,r,n,i,a,o){const s=[2/(r-e),0,0,0,0,2/(i-n),0,0,0,0,-2/(o-a),0,-(r+e)/(r-e),-(i+n)/(i-n),-(o+a)/(o-a),1];St(t,s)}function St(t,e){const r=t.slice();for(let n=0;n<=3;++n)for(let i=0;i<=3;++i){const a=4*n+i;t[a]=0;for(let o=0;o<=3;++o)t[a]+=e[4*o+i]*r[4*n+o]}}function zt(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?t:[t[0]/e,t[1]/e,t[2]/e]}function Vt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ne(t,e,r){return t+(e-t)*r}function $t(t){return t*Math.PI/180}function Yt(t){const e=new Float32Array([t]),[r]=new Int32Array(e.buffer);let n=Math.abs(r)|0;return n=(n>>16^n)*73244475,n=(n>>16^n)*73244475,n=n>>16^n,n/(Math.pow(2,31)-1)}function hr(t){return e=>1-Math.pow(1-e,t)}function Cn(t){const e=Math.pow(2,t-1);return r=>r<.5?e*Math.pow(r,t):1-Math.pow(2*(1-r),t)/2}const ht=Cn(3),dr=hr(2);function Wt(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const _r="spinning",vr={...ee,output:{...ee.output,delayMs:50,totalFrames:15}},$r=[Qe({name:"startAngle",value:0}),Qe({name:"endAngle",value:360}),ze({name:"originX",value:0}),ze({name:"originY",value:0}),ft({name:"alternates",value:!1})];function Sn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{alternates:a,startAngle:o,endAngle:s,originX:l,originY:u}=r;return[{program:n,geometry:i,getUniforms:c=>{const d=a?Math.min(c,1-c)*2:c,p=ne(o,s,d),h=$e();return be(h,-l,-u),ut(h,p),be(h,l,u),{u_model:h}}}]}const br=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Sn,defaultOptions:vr,editOptions:$r,name:_r},Symbol.toStringTag,{value:"Module"})),wr="expanding",yr={...ee,output:{...ee.output,delayMs:50,totalFrames:20}},Er=[vt({name:"minScale",value:1}),vt({name:"maxScale",value:2}),ft({name:"alternates",value:!1})];function On(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{minScale:a,maxScale:o,alternates:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const f=s?Math.min(u,1-u)*2:u,c=ne(a,o,f),d=$e();return Ke(d,c,c),{u_model:d}}}]}const Tr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:On,defaultOptions:yr,editOptions:Er,name:wr},Symbol.toStringTag,{value:"Module"})),Cr="extreme-speed",Sr={...ee,output:{...ee.output,delayMs:20,totalFrames:10}},Or=[Xt({name:"directionX",value:-1}),Xt({name:"directionY",value:0})];function xn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("sudoku"),{directionX:a,directionY:o}=r,s=a*2,l=o*2;return[{program:n,geometry:i,getUniforms:f=>{const c=$e(),d=ne(0,s,f),p=ne(0,l,f);return be(c,d,p),{u_model:c}}}]}const xr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:xn,defaultOptions:Sr,editOptions:Or,name:Cr},Symbol.toStringTag,{value:"Module"})),kr="excited",Ar={...ee,output:{...ee.output,delayMs:50,totalFrames:25}},Mr=[Qe({name:"angle",value:15}),_t({name:"startOffset",value:-.2}),_t({name:"endOffset",value:.2}),En({name:"cycles",value:3})];function kn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{angle:a,cycles:o,startOffset:s,endOffset:l}=r,u=$t(a),f=Math.cos(u),c=Math.sin(u);return[{program:n,geometry:i,getUniforms:p=>{const h=p*2*o%1,m=Math.min(h,1-h)*2,_=ne(-s*c,-l*c,m),E=ne(s*f,l*f,m),b=$e();return ut(b,a),be(b,_,E),Ke(b,p>.5?-1:1,1),{u_model:b}}}]}const Pr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:kn,defaultOptions:Ar,editOptions:Mr,name:kr},Symbol.toStringTag,{value:"Module"})),Fr="jumping",Lr={...ee,output:{...ee.output,delayMs:50,totalFrames:20}},Ir=[lt({name:"maxOffset",value:1.2}),Rt({name:"compressTime",value:.4}),Rt({name:"maxCompress",value:.3})];function An(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{maxOffset:a,compressTime:o,maxCompress:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const f=Math.min(u,1-u)*2,c=$e(),d=f/(1-o);if(d<1){const p=(1-d*d)*a;be(c,0,p)}else{const p=(1-f)/o,m=1-(1-p*p)*s;be(c,0,1),Ke(c,1/m,m),be(c,0,-1)}return{u_model:c}}}]}const Dr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:An,defaultOptions:Lr,editOptions:Ir,name:Fr},Symbol.toStringTag,{value:"Module"})),Rr="tower",jr={...ee,output:{...ee.output,delayMs:40,totalFrames:20}},Ur=[Qe({name:"startAngle",value:20}),Qe({name:"endAngle",value:-45}),Rt({name:"startTime",value:.5})];function Mn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("tower"),{startAngle:a,endAngle:o,startTime:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const f=$e();if(u<s){const c=u/s,d=Math.min(c,1-c)*2,p=ne(0,a,d);ut(f,p)}else{const c=(u-s)/(1-s),d=Math.min(c,1-c)*2,p=ne(0,o,d);if(ut(f,p),c>.5){const h=$t(p),m=Math.cos(h),_=Math.sin(h),E=(c-.5)*2,b=ne(0,-2*_,E),g=ne(0,2*m,E);be(f,b,g)}}return{u_model:f}}}]}const Br=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Mn,defaultOptions:jr,editOptions:Ur,name:Rr},Symbol.toStringTag,{value:"Module"})),Nr="repeated",Gr={...ee,output:{...ee.output,delayMs:60,totalFrames:15}},qr=[vt({name:"initialScale",value:.1}),ft({name:"horizontal",value:!1})];function Pn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{initialScale:a,horizontal:o}=r,s=o?{geometry:e.createGeometry("leftHalf"),endX:-1,endY:0}:{geometry:e.createGeometry("topHalf"),endX:0,endY:1},l=o?{geometry:e.createGeometry("rightHalf"),endX:1,endY:0}:{geometry:e.createGeometry("bottomHalf"),endX:0,endY:-1},u=d=>{const p=$e(),h=ht(d),m=ne(a,1,h);return Ke(p,m,m),{u_model:p}},f=d=>{const p=$e(),h=ht(d),m=ne(0,s.endX,h),_=ne(0,s.endY,h);return be(p,m,_),{u_model:p}},c=d=>{const p=$e(),h=ht(d),m=ne(0,l.endX,h),_=ne(0,l.endY,h);return be(p,m,_),{u_model:p}};return[{program:n,geometry:i,getUniforms:u},{program:n,geometry:s.geometry,getUniforms:f},{program:n,geometry:l.geometry,getUniforms:c}]}const Hr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Pn,defaultOptions:Gr,editOptions:qr,name:Nr},Symbol.toStringTag,{value:"Module"})),Xr="mirror",zr={...ee,output:{...ee.output,delayMs:50,totalFrames:16}},Vr=[ft({name:"rightHalf",value:!1})];function Fn(t,e,r){const n=t.createProgram("default"),{rightHalf:i}=r,a=e.createGeometry(i?"rightHalf":"leftHalf");return[{program:n,geometry:a,getUniforms:l=>{const u=Math.min(l,1-l)*2,f=$e(),c=Wt(u),d=ne(-2,-1,c);return i||Ke(f,-1,1),be(f,d,0),{u_model:f}}},{program:n,geometry:a,getUniforms:l=>{const u=Math.min(l,1-l)*2,f=$e(),c=Wt(u),d=ne(2,1,c);return i&&Ke(f,-1,1),be(f,d,0),{u_model:f}}}]}const Yr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Fn,defaultOptions:zr,editOptions:Vr,name:Xr},Symbol.toStringTag,{value:"Module"})),Wr="panic",Zr={...ee,output:{...ee.output,delayMs:30,totalFrames:16}},Jr=[lt({name:"maxOffsetX",value:.15}),lt({name:"maxOffsetY",value:.15})];function Ln(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{maxOffsetX:a,maxOffsetY:o}=r;return[{program:n,geometry:i,getUniforms:l=>{const u=Yt(l+.123),f=Yt(l*2+1),c=ne(-a,a,u),d=ne(-o,o,f),p=$e();return be(p,c,d),{u_model:p}}}]}const Qr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ln,defaultOptions:Zr,editOptions:Jr,name:Wr},Symbol.toStringTag,{value:"Module"})),Kr="rotating",ea={...ee,output:{...ee.output,delayMs:40,totalFrames:25},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6},material:{specular:[1,1,1],shininess:100},directionalLight:{ambient:[.6,.6,.6],diffuse:[1,1,1],specular:[1,1,1],direction:[-1,-1,-5]}},ta=[ze({name:"axisX",value:0}),ze({name:"axisY",value:1}),ze({name:"axisZ",value:0}),ze({name:"originX",value:0}),ze({name:"originY",value:0}),ur({name:"easing",value:1}),ft({name:"alternates",value:!1})];function In(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{axisX:a,axisY:o,axisZ:s,originX:l,originY:u,easing:f,alternates:c}=r,d=[a,o,s],p=Cn(f);return[{program:n,geometry:i,getUniforms:m=>{const _=c?Math.min(m,1-m)*2:m,E=p(_),b=ne(0,360,E),g=$e();return be(g,-l,-u),Bt(g,b,d),be(g,l,u),{u_model:g}}}]}const na=Object.freeze(Object.defineProperty({__proto__:null,createSprites:In,defaultOptions:ea,editOptions:ta,name:Kr},Symbol.toStringTag,{value:"Module"})),ra="party",aa={...ee,output:{...ee.output,delayMs:40,totalFrames:15},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6}},ia=[Qe({name:"angle",value:10}),_t({name:"startOffset",value:-.3}),_t({name:"endOffset",value:.5})];function Dn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{angle:a,startOffset:o,endOffset:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const f=2*u%1,c=Math.min(f,1-f)*2,d=ht(f),p=dr(c),h=u<.5?ne(0,180,d):ne(180,360,d),m=ne(o,s,p),_=$e();return ut(_,a),be(_,0,m),Bt(_,h,[0,1,0]),{u_model:_}}}]}const sa=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Dn,defaultOptions:aa,editOptions:ia,name:ra},Symbol.toStringTag,{value:"Module"})),oa="parrot",la={...ee,output:{...ee.output,delayMs:20,totalFrames:18}},ua=[vt({name:"amplitudeX",value:.6}),lt({name:"amplitudeY",value:.5})];function Rn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{amplitudeX:a,amplitudeY:o}=r;return[{program:n,geometry:i,getUniforms:l=>{const u=Math.cos(l*2*Math.PI)*.5+.5,f=ne(-a,a,u),c=Math.sin(l*2*Math.PI)*.5+.5,d=ne(-o,0,c),p=$e();return be(p,0,1),fr(p,f,0),be(p,0,-1+d),{u_model:p}}}]}const ca=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Rn,defaultOptions:la,editOptions:ua,name:oa},Symbol.toStringTag,{value:"Module"})),fa="wiggling",ma={...ee,output:{...ee.output,delayMs:50,totalFrames:15}},pa=[En({name:"frequency",value:3}),lt({name:"amplitude",value:.05})];function jn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{frequency:a,amplitude:o}=r;return[{program:n,geometry:i,getUniforms:l=>({u_model:$e(),u_time:l,u_amplitude:o,u_frequency:a})}]}const ga=Object.freeze(Object.defineProperty({__proto__:null,createSprites:jn,defaultOptions:ma,editOptions:pa,name:fa},Symbol.toStringTag,{value:"Module"})),Pt=[Dr,xr,br,Pr,Tr,Br,Hr,Yr,Qr,na,sa,ca,ga];function Zt(t,e,r){const n=cr(r.editOptions);switch(r.name){case"spinning":return Sn(t,e,n);case"expanding":return On(t,e,n);case"extreme-speed":return xn(t,e,n);case"excited":return kn(t,e,n);case"jumping":return An(t,e,n);case"tower":return Mn(t,e,n);case"repeated":return Pn(t,e,n);case"mirror":return Fn(t,e,n);case"panic":return Ln(t,e,n);case"rotating":return In(t,e,n);case"party":return Dn(t,e,n);case"parrot":return Rn(t,e,n);case"wiggling":return jn(t,e,n);default:(i=>{throw new Error(`Unknown animation: ${JSON.stringify(i)}`)})(r)}}var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ha=typeof mt=="object"&&mt&&mt.Object===Object&&mt,da=ha,_a=da,va=typeof self=="object"&&self&&self.Object===Object&&self,$a=_a||va||Function("return this")(),Ot=$a,ba=Ot,wa=ba.Symbol,Un=wa,Jt=Un,Bn=Object.prototype,ya=Bn.hasOwnProperty,Ea=Bn.toString,rt=Jt?Jt.toStringTag:void 0;function Ta(t){var e=ya.call(t,rt),r=t[rt];try{t[rt]=void 0;var n=!0}catch{}var i=Ea.call(t);return n&&(e?t[rt]=r:delete t[rt]),i}var Ca=Ta,Sa=Object.prototype,Oa=Sa.toString;function xa(t){return Oa.call(t)}var ka=xa,Qt=Un,Aa=Ca,Ma=ka,Pa="[object Null]",Fa="[object Undefined]",Kt=Qt?Qt.toStringTag:void 0;function La(t){return t==null?t===void 0?Fa:Pa:Kt&&Kt in Object(t)?Aa(t):Ma(t)}var Ia=La;function Da(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Nn=Da,Ra=Ia,ja=Nn,Ua="[object AsyncFunction]",Ba="[object Function]",Na="[object GeneratorFunction]",Ga="[object Proxy]";function qa(t){if(!ja(t))return!1;var e=Ra(t);return e==Ba||e==Na||e==Ua||e==Ga}var Ha=qa,Xa=Ot,za=Xa["__core-js_shared__"],Va=za,Ft=Va,en=function(){var t=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ya(t){return!!en&&en in t}var Wa=Ya,Za=Function.prototype,Ja=Za.toString;function Qa(t){if(t!=null){try{return Ja.call(t)}catch{}try{return t+""}catch{}}return""}var Ka=Qa,ei=Ha,ti=Wa,ni=Nn,ri=Ka,ai=/[\\^$.*+?()[\]{}|]/g,ii=/^\[object .+?Constructor\]$/,si=Function.prototype,oi=Object.prototype,li=si.toString,ui=oi.hasOwnProperty,ci=RegExp("^"+li.call(ui).replace(ai,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fi(t){if(!ni(t)||ti(t))return!1;var e=ei(t)?ci:ii;return e.test(ri(t))}var mi=fi;function pi(t,e){return t==null?void 0:t[e]}var gi=pi,hi=mi,di=gi;function _i(t,e){var r=di(t,e);return hi(r)?r:void 0}var Nt=_i,vi=Nt,$i=vi(Object,"create"),xt=$i,tn=xt;function bi(){this.__data__=tn?tn(null):{},this.size=0}var wi=bi;function yi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ei=yi,Ti=xt,Ci="__lodash_hash_undefined__",Si=Object.prototype,Oi=Si.hasOwnProperty;function xi(t){var e=this.__data__;if(Ti){var r=e[t];return r===Ci?void 0:r}return Oi.call(e,t)?e[t]:void 0}var ki=xi,Ai=xt,Mi=Object.prototype,Pi=Mi.hasOwnProperty;function Fi(t){var e=this.__data__;return Ai?e[t]!==void 0:Pi.call(e,t)}var Li=Fi,Ii=xt,Di="__lodash_hash_undefined__";function Ri(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ii&&e===void 0?Di:e,this}var ji=Ri,Ui=wi,Bi=Ei,Ni=ki,Gi=Li,qi=ji;function et(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}et.prototype.clear=Ui;et.prototype.delete=Bi;et.prototype.get=Ni;et.prototype.has=Gi;et.prototype.set=qi;var Hi=et;function Xi(){this.__data__=[],this.size=0}var zi=Xi;function Vi(t,e){return t===e||t!==t&&e!==e}var Yi=Vi,Wi=Yi;function Zi(t,e){for(var r=t.length;r--;)if(Wi(t[r][0],e))return r;return-1}var kt=Zi,Ji=kt,Qi=Array.prototype,Ki=Qi.splice;function es(t){var e=this.__data__,r=Ji(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ki.call(e,r,1),--this.size,!0}var ts=es,ns=kt;function rs(t){var e=this.__data__,r=ns(e,t);return r<0?void 0:e[r][1]}var as=rs,is=kt;function ss(t){return is(this.__data__,t)>-1}var os=ss,ls=kt;function us(t,e){var r=this.__data__,n=ls(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var cs=us,fs=zi,ms=ts,ps=as,gs=os,hs=cs;function tt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=fs;tt.prototype.delete=ms;tt.prototype.get=ps;tt.prototype.has=gs;tt.prototype.set=hs;var ds=tt,_s=Nt,vs=Ot,$s=_s(vs,"Map"),bs=$s,nn=Hi,ws=ds,ys=bs;function Es(){this.size=0,this.__data__={hash:new nn,map:new(ys||ws),string:new nn}}var Ts=Es;function Cs(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Ss=Cs,Os=Ss;function xs(t,e){var r=t.__data__;return Os(e)?r[typeof e=="string"?"string":"hash"]:r.map}var At=xs,ks=At;function As(t){var e=ks(this,t).delete(t);return this.size-=e?1:0,e}var Ms=As,Ps=At;function Fs(t){return Ps(this,t).get(t)}var Ls=Fs,Is=At;function Ds(t){return Is(this,t).has(t)}var Rs=Ds,js=At;function Us(t,e){var r=js(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Bs=Us,Ns=Ts,Gs=Ms,qs=Ls,Hs=Rs,Xs=Bs;function nt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nt.prototype.clear=Ns;nt.prototype.delete=Gs;nt.prototype.get=qs;nt.prototype.has=Hs;nt.prototype.set=Xs;var zs=nt,Vs="__lodash_hash_undefined__";function Ys(t){return this.__data__.set(t,Vs),this}var Ws=Ys;function Zs(t){return this.__data__.has(t)}var Js=Zs,Qs=zs,Ks=Ws,eo=Js;function bt(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Qs;++e<r;)this.add(t[e])}bt.prototype.add=bt.prototype.push=Ks;bt.prototype.has=eo;var to=bt;function no(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var ro=no;function ao(t){return t!==t}var io=ao;function so(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var oo=so,lo=ro,uo=io,co=oo;function fo(t,e,r){return e===e?co(t,e,r):lo(t,uo,r)}var mo=fo,po=mo;function go(t,e){var r=t==null?0:t.length;return!!r&&po(t,e,0)>-1}var ho=go;function _o(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var vo=_o;function $o(t,e){return t.has(e)}var bo=$o,wo=Nt,yo=Ot,Eo=wo(yo,"Set"),To=Eo;function Co(){}var So=Co;function Oo(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Gn=Oo,Lt=To,xo=So,ko=Gn,Ao=1/0,Mo=Lt&&1/ko(new Lt([,-0]))[1]==Ao?function(t){return new Lt(t)}:xo,Po=Mo,Fo=to,Lo=ho,Io=vo,Do=bo,Ro=Po,jo=Gn,Uo=200;function Bo(t,e,r){var n=-1,i=Lo,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=Io;else if(a>=Uo){var u=e?null:Ro(t);if(u)return jo(u);o=!1,i=Do,l=new Fo}else l=e?[]:s;e:for(;++n<a;){var f=t[n],c=e?e(f):f;if(f=r||f!==0?f:0,o&&c===c){for(var d=l.length;d--;)if(l[d]===c)continue e;e&&l.push(c),s.push(f)}else i(l,c,r)||(l!==s&&l.push(c),s.push(f))}return s}var No=Bo,Go=No;function qo(t){return t&&t.length?Go(t):[]}var Ho=qo;const Xo=function(){var t={},e=-1,r,n,i,a,o,s,l=12,u=5003,f,c=l,d,p=1<<l,h=[],m=[],_=u,E=0,b=!1,g,w,X,z=0,K=0,ie=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ue,V=[],Y=t.LZWEncoder=function(Z,j,T,N){r=Z,n=j,i=T,a=Math.max(2,N)},me=function(Z,j){V[ue++]=Z,ue>=254&&Me(j)},we=function(Z){je(_),E=w+2,b=!0,Ce(w,Z)},je=function(Z){for(var j=0;j<Z;++j)h[j]=-1},re=t.compress=function(Z,j){var T,N,ce,te,ye,ae,L;for(g=Z,b=!1,f=g,d=Pe(f),w=1<<Z-1,X=w+1,E=w+2,ue=0,te=Ue(),L=0,T=_;T<65536;T*=2)++L;L=8-L,ae=_,je(ae),Ce(w,j);e:for(;(ce=Ue())!=e;){if(T=(ce<<c)+te,N=ce<<L^te,h[N]==T){te=m[N];continue}else if(h[N]>=0){ye=ae-N,N===0&&(ye=1);do if((N-=ye)<0&&(N+=ae),h[N]==T){te=m[N];continue e}while(h[N]>=0)}Ce(te,j),te=ce,E<p?(m[N]=E++,h[N]=T):we(j)}Ce(te,j),Ce(X,j)};t.encode=function(Z){Z.writeByte(a),o=r*n,s=0,re(a+1,Z),Z.writeByte(0)};var Me=function(Z){ue>0&&(Z.writeByte(ue),Z.writeBytes(V,0,ue),ue=0)},Pe=function(Z){return(1<<Z)-1},Ue=function(){if(o===0)return e;--o;var Z=i[s++];return Z&255},Ce=function(Z,j){for(z&=ie[K],K>0?z|=Z<<K:z=Z,K+=f;K>=8;)me(z&255,j),z>>=8,K-=8;if((E>d||b)&&(b?(d=Pe(f=g),b=!1):(++f,f==c?d=p:d=Pe(f))),Z==X){for(;K>0;)me(z&255,j),z>>=8,K-=8;Me(j)}};return Y.apply(this,arguments),t},zo=function(){var t={},e=256,r=499,n=491,i=487,a=503,o=3*a,s=e-1,l=4,u=100,f=16,c=1<<f,d=10,p=10,h=c>>p,m=c<<d-p,_=e>>3,E=6,b=1<<E,g=_*b,w=30,X=10,z=1<<X,K,ie=8,ue=1<<ie,V=X+ie,Y=1<<V,me,we,je,re,Me=[],Pe=[],Ue=[],Ce=[],ge=t.NeuQuant=function(L,U,J){var G,q;for(me=L,we=U,je=J,re=new Array(e),G=0;G<e;G++)re[G]=new Array(4),q=re[G],q[0]=q[1]=q[2]=(G<<l+8)/e,Ue[G]=c/e,Pe[G]=0},Z=function(){for(var L=[],U=new Array(e),J=0;J<e;J++)U[re[J][3]]=J;for(var G=0,q=0;q<e;q++){var O=U[q];L[G++]=re[O][0],L[G++]=re[O][1],L[G++]=re[O][2]}return L},j=function(){var L,U,J,G,q,O,R,W;for(R=0,W=0,L=0;L<e;L++){for(q=re[L],J=L,G=q[1],U=L+1;U<e;U++)O=re[U],O[1]<G&&(J=U,G=O[1]);if(O=re[J],L!=J&&(U=O[0],O[0]=q[0],q[0]=U,U=O[1],O[1]=q[1],q[1]=U,U=O[2],O[2]=q[2],q[2]=U,U=O[3],O[3]=q[3],q[3]=U),G!=R){for(Me[R]=W+L>>1,U=R+1;U<G;U++)Me[U]=L;R=G,W=L}}for(Me[R]=W+s>>1,U=R+1;U<256;U++)Me[U]=s},T=function(){var L,U,J,G,q,O,R,W,Q,pe,Oe,se,Ee,Gt;for(we<o&&(je=1),K=30+(je-1)/3,se=me,Ee=0,Gt=we,Oe=we/(3*je),pe=Oe/u|0,W=z,O=g,R=O>>E,R<=1&&(R=0),L=0;L<R;L++)Ce[L]=W*((R*R-L*L)*ue/(R*R));for(we<o?Q=3:we%r!==0?Q=3*r:we%n!==0?Q=3*n:we%i!==0?Q=3*i:Q=3*a,L=0;L<Oe;)if(J=(se[Ee+0]&255)<<l,G=(se[Ee+1]&255)<<l,q=(se[Ee+2]&255)<<l,U=ye(J,G,q),te(W,U,J,G,q),R!==0&&ce(R,U,J,G,q),Ee+=Q,Ee>=Gt&&(Ee-=we),L++,pe===0&&(pe=1),L%pe===0)for(W-=W/K,O-=O/w,R=O>>E,R<=1&&(R=0),U=0;U<R;U++)Ce[U]=W*((R*R-U*U)*ue/(R*R))};t.map=function(L,U,J){var G,q,O,R,W,Q,pe;for(W=1e3,pe=-1,G=Me[U],q=G-1;G<e||q>=0;)G<e&&(Q=re[G],O=Q[1]-U,O>=W?G=e:(G++,O<0&&(O=-O),R=Q[0]-L,R<0&&(R=-R),O+=R,O<W&&(R=Q[2]-J,R<0&&(R=-R),O+=R,O<W&&(W=O,pe=Q[3])))),q>=0&&(Q=re[q],O=U-Q[1],O>=W?q=-1:(q--,O<0&&(O=-O),R=Q[0]-L,R<0&&(R=-R),O+=R,O<W&&(R=Q[2]-J,R<0&&(R=-R),O+=R,O<W&&(W=O,pe=Q[3]))));return pe},t.process=function(){return T(),N(),j(),Z()};var N=function(){var L;for(L=0;L<e;L++)re[L][0]>>=l,re[L][1]>>=l,re[L][2]>>=l,re[L][3]=L},ce=function(L,U,J,G,q){var O,R,W,Q,pe,Oe,se;for(W=U-L,W<-1&&(W=-1),Q=U+L,Q>e&&(Q=e),O=U+1,R=U-1,Oe=1;O<Q||R>W;){if(pe=Ce[Oe++],O<Q){se=re[O++];try{se[0]-=pe*(se[0]-J)/Y,se[1]-=pe*(se[1]-G)/Y,se[2]-=pe*(se[2]-q)/Y}catch{}}if(R>W){se=re[R--];try{se[0]-=pe*(se[0]-J)/Y,se[1]-=pe*(se[1]-G)/Y,se[2]-=pe*(se[2]-q)/Y}catch{}}}},te=function(L,U,J,G,q){var O=re[U];O[0]-=L*(O[0]-J)/z,O[1]-=L*(O[1]-G)/z,O[2]-=L*(O[2]-q)/z},ye=function(L,U,J){var G,q,O,R,W,Q,pe,Oe,se,Ee;for(Oe=~(1<<31),se=Oe,Q=-1,pe=Q,G=0;G<e;G++)Ee=re[G],q=Ee[0]-L,q<0&&(q=-q),O=Ee[1]-U,O<0&&(O=-O),q+=O,O=Ee[2]-J,O<0&&(O=-O),q+=O,q<Oe&&(Oe=q,Q=G),R=q-(Pe[G]>>f-l),R<se&&(se=R,pe=G),W=Ue[G]>>p,Ue[G]-=W,Pe[G]+=W<<d;return Ue[Q]+=h,Pe[Q]-=m,pe};return ge.apply(this,arguments),t},Vo=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var j="",T=this.bin.length,N=0;N<T;N++)j+=e[this.bin[N]];return j},r.prototype.writeByte=function(j){this.bin.push(j)},r.prototype.writeUTFBytes=function(j){for(var T=j.length,N=0;N<T;N++)this.writeByte(j.charCodeAt(N))},r.prototype.writeBytes=function(j,T,N){for(var ce=N||j.length,te=T||0;te<ce;te++)this.writeByte(j[te])};var n={},i,a,o=null,s,l=-1,u=0,f=!1,c,d,p,h,m,_,E=[],b=7,g=-1,w=!1,X=!0,z=!1,K=10,ie="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(T){u=Math.round(T/10)},n.setDispose=function(T){T>=0&&(g=T)},n.setRepeat=function(T){T>=0&&(l=T)},n.setTransparent=function(T){o=T},n.setComment=function(T){ie=T},n.addFrame=function(T,N){if(T===null||!f||c===null)throw new Error("Please call start method before calling addFrame");var ce=!0;try{N?T instanceof ImageData?(d=T.data,(!sizeset||i!=T.width||a!=T.height)&&V(T.width,T.height)):T instanceof Uint8ClampedArray?T.length==i*a*4?d=T:(console.log("Please set the correct size: ImageData length mismatch"),ce=!1):(console.log("Please provide correct input"),ce=!1):(d=T.getImageData(0,0,T.canvas.width,T.canvas.height).data,z||V(T.canvas.width,T.canvas.height)),we(),Y(),X&&(Pe(),Ce(),l>=0&&Ue()),je(),ie!==""&&re(),Me(),X||Ce(),Z(),X=!1}catch{ce=!1}return ce},n.download=function(T){if(c===null||w==!1)console.log("Please call start method and add frames and call finish method before calling download");else{T=T!==void 0?T.endsWith(".gif")?T:T+".gif":"download.gif";var N=document.createElement("a");N.download=T,N.href=URL.createObjectURL(new Blob([new Uint8Array(c.bin)],{type:"image/gif"})),N.click()}},n.finish=function(){if(!f)return!1;var T=!0;f=!1;try{c.writeByte(59),w=!0}catch{T=!1}return T};var ue=function(){s=0,d=null,p=null,h=null,_=null,w=!1,X=!0};n.setFrameRate=function(T){T!=15&&(u=Math.round(100/T))},n.setQuality=function(T){T<1&&(T=1),K=T};var V=n.setSize=function(T,N){f&&!X||(i=T,a=N,i<1&&(i=320),a<1&&(a=240),z=!0)};n.start=function(){ue();var T=!0;w=!1,c=new r;try{c.writeUTFBytes("GIF89a")}catch{T=!1}return f=T},n.cont=function(){ue();var T=!0;return w=!1,c=new r,f=T};var Y=function(){var T=p.length,N=T/3;h=[];var ce=new zo(p,T,K);_=ce.process();for(var te=0,ye=0;ye<N;ye++){var ae=ce.map(p[te++]&255,p[te++]&255,p[te++]&255);E[ae]=!0,h[ye]=ae}p=null,m=8,b=7,o!==null&&(s=me(o))},me=function(T){if(_===null)return-1;for(var N=(T&16711680)>>16,ce=(T&65280)>>8,te=T&255,ye=0,ae=256*256*256,L=_.length,U=0;U<L;){var J=N-(_[U++]&255),G=ce-(_[U++]&255),q=te-(_[U]&255),O=J*J+G*G+q*q,R=U/3;E[R]&&O<ae&&(ae=O,ye=R),U++}return ye},we=function(){var T=i,N=a;p=[];for(var ce=d,te=0,ye=0;ye<N;ye++)for(var ae=0;ae<T;ae++){var L=ye*T*4+ae*4;p[te++]=ce[L],p[te++]=ce[L+1],p[te++]=ce[L+2]}},je=function(){c.writeByte(33),c.writeByte(249),c.writeByte(4);var T,N;o===null?(T=0,N=0):(T=1,N=2),g>=0&&(N=g&7),N<<=2,c.writeByte(0|N|0|T),ge(u),c.writeByte(s),c.writeByte(0)},re=function(){c.writeByte(33),c.writeByte(254),c.writeByte(ie.length),c.writeUTFBytes(ie),c.writeByte(0)},Me=function(){c.writeByte(44),ge(0),ge(0),ge(i),ge(a),X?c.writeByte(0):c.writeByte(128|b)},Pe=function(){ge(i),ge(a),c.writeByte(240|b),c.writeByte(0),c.writeByte(0)},Ue=function(){c.writeByte(33),c.writeByte(255),c.writeByte(11),c.writeUTFBytes("NETSCAPE2.0"),c.writeByte(3),c.writeByte(1),ge(l),c.writeByte(0)},Ce=function(){c.writeBytes(_);for(var T=3*256-_.length,N=0;N<T;N++)c.writeByte(0)},ge=function(T){c.writeByte(T&255),c.writeByte(T>>8&255)},Z=function(){var T=new Xo(i,a,h,m);T.encode(c)};return n.stream=function(){return c},n.setProperties=function(T,N){f=T,X=N},n};class Yo{constructor(e){he(this,"loadingUrl",null);he(this,"url",null);he(this,"texture",null);he(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),i=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const o=a.createTexture();if(!o)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,o),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=o,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}class rn{constructor(e,r){he(this,"texture",null);he(this,"framebuffer");he(this,"width",null);he(this,"height",null);this.gl=e,this.unit=r;const n=e.createFramebuffer();if(!n)throw new Error("Failed to create framebuffer");this.framebuffer=n}bindAsInput(){return this.gl.activeTexture(this.gl.TEXTURE0+this.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.unit}bindAsOutput(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer)}setSize(e,r){if(e===this.width&&r===this.height)return;if(this.texture!==null&&this.gl.deleteTexture(this.texture),this.texture=this.gl.createTexture(),!this.texture)throw new Error("Failed to create texture");if(this.width=e,this.height=r,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error("Failed to attach to framebuffer");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}destroy(){this.texture&&this.gl.deleteTexture(this.texture),this.gl.deleteFramebuffer(this.framebuffer)}}const xe={a_position:0,a_texCoords:1,a_normal:2},qe=`#version 300 es

layout(location = ${xe.a_position}) in vec2 a_position;
layout(location = ${xe.a_texCoords}) in vec2 a_texCoords;

out vec2 v_texCoords;

void main() {
  gl_Position = vec4(a_position, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
`,pt=`vec3 getColor(vec2 offset, sampler2D image, vec2 texCoords) {
  vec2 coords = texCoords + offset / vec2(textureSize(image, 0));
  float inRange = float(coords.x >= 0.0 && coords.x <= 1.0 && coords.y >= 0.0 && coords.y <= 1.0);
  return texture(image, coords).rgb * inRange;
}

vec3 kernalMultiply(mat3 kernel, sampler2D image, vec2 texCoords) {
  vec3 result = vec3(0.0, 0.0, 0.0);

  result += kernel[0][0] * getColor(vec2(-1.0,  1.0), image, texCoords);
  result += kernel[0][1] * getColor(vec2(-1.0,  0.0), image, texCoords);
  result += kernel[0][2] * getColor(vec2(-1.0, -1.0), image, texCoords);
  result += kernel[1][0] * getColor(vec2( 0.0,  1.0), image, texCoords);
  result += kernel[1][1] * getColor(vec2( 0.0,  0.0), image, texCoords);
  result += kernel[1][2] * getColor(vec2( 0.0, -1.0), image, texCoords);
  result += kernel[2][0] * getColor(vec2( 1.0,  1.0), image, texCoords);
  result += kernel[2][1] * getColor(vec2( 1.0,  0.0), image, texCoords);
  result += kernel[2][2] * getColor(vec2( 1.0, -1.0), image, texCoords);

  return result;
}`,an={default:{vertex:`#version 300 es

layout(location = ${xe.a_position}) in vec3 a_position;
layout(location = ${xe.a_texCoords}) in vec2 a_texCoords;
layout(location = ${xe.a_normal}) in vec3 a_normal;

uniform mat4 u_model;
uniform mat4 u_view;
uniform mat4 u_projection;

out vec2 v_texCoords;
out vec3 v_normal;
out vec3 v_position;

void main() {
  mat4 modelView = u_view * u_model;
  v_position = vec3(modelView * vec4(a_position, 1.0));
  gl_Position = u_projection * vec4(v_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position.y *= -1.0;
  v_texCoords = a_texCoords;
  v_normal = (transpose(inverse(modelView)) * vec4(a_normal, 0)).xyz;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
in vec3 v_normal;
in vec3 v_position;

struct Material {
  sampler2D diffuse;
  vec3 specular;
  float shininess;
};

struct DirectionalLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 direction;
};

struct PointLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  float attenuation1;
  float attenuation2;
};

struct SpotLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  vec3 direction;
  float innerCos;
  float outerCos;
  float attenuation1;
  float attenuation2;
};

uniform Material u_material;
uniform DirectionalLight u_directionalLight;
uniform PointLight u_pointLight;
uniform SpotLight u_spotLight;

uniform float u_time;
uniform float u_amplitude;
uniform float u_frequency;

out vec4 outColor;

vec3 computeLight(SpotLight light, vec3 normal, vec3 fragToCamera, vec3 texel) {
  float dist = length(light.position - v_position);
  float attenuation = 1.0 / (1.0 + light.attenuation1 * dist + light.attenuation2 * dist * dist);
  vec3 dir = normalize(light.position - v_position);
  float angle = dot(normalize(-light.direction), dir);
  float intensity = smoothstep(light.outerCos, light.innerCos, angle);

  float diff = max(dot(dir, normal), 0.0);

  vec3 halfVec = normalize(dir + fragToCamera);
  float spec = pow(max(dot(halfVec, normal), 0.0), u_material.shininess);

  vec3 ambient = light.ambient * texel * attenuation * intensity;
  vec3 diffuse = light.diffuse * texel * diff * attenuation * intensity;
  vec3 specular = light.specular * u_material.specular * spec * attenuation * intensity;

  return ambient + diffuse + specular;
}

void main() {
  vec2 texCoords = v_texCoords + vec2(sin((v_texCoords.y * u_frequency + u_time) * radians(360.0)) * u_amplitude, 0.0);
  vec3 texel = texture(u_material.diffuse, texCoords).xyz;
  vec3 color = vec3(0.0, 0.0, 0.0);
  // front facing is actually the back face since we flipped y-axis in the vertex shader
  vec3 normal = normalize(v_normal) * (1.0 - 2.0 * float(gl_FrontFacing));
  vec3 fragToCamera = normalize(-v_position);

  color += computeLight(SpotLight(
    u_directionalLight.ambient,
    u_directionalLight.diffuse,
    u_directionalLight.specular,
    -u_directionalLight.direction + v_position,
    u_directionalLight.direction,
    // disable intensity
    -2.0, -3.0,
    // disable attenuation
    0.0, 0.0
  ), normal, fragToCamera, texel);

  color += computeLight(SpotLight(
    u_pointLight.ambient,
    u_pointLight.diffuse,
    u_pointLight.specular,
    u_pointLight.position,
    -u_pointLight.position + v_position,
    // disable intensity
    -2.0, -3.0,
    u_pointLight.attenuation1,
    u_pointLight.attenuation2
  ), normal, fragToCamera, texel);

  color += computeLight(u_spotLight, normal, fragToCamera, texel);

  outColor = vec4(color, float(texCoords.x >= 0.0 && texCoords.x <= 1.0 || u_amplitude < 0.000001));
}
    `},invert:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = vec4(1.0 - texture(u_image, v_texCoords).rgb, 1.0);
}
    `},kernel:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel;

out vec4 outColor;

${pt}

void main() {
  vec3 color = kernalMultiply(u_kernel, u_image, v_texCoords);
  outColor = vec4(color, 1.0);
}
    `},gradient2:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel1;
uniform mat3 u_kernel2;

out vec4 outColor;

${pt}

void main() {
  vec3 color1 = kernalMultiply(u_kernel1, u_image, v_texCoords);
  vec3 color2 = kernalMultiply(u_kernel2, u_image, v_texCoords);
  outColor = vec4(
    length(vec2(color1.r, color2.r)),
    length(vec2(color1.g, color2.g)),
    length(vec2(color1.b, color2.b)),
    1.0);
}
    `},gradient8:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel[8];

out vec4 outColor;

${pt}

void main() {
  vec3 result = vec3(0.0);
  for (int i = 0; i < 8; ++i) {
    result = max(result, kernalMultiply(u_kernel[i], u_image, v_texCoords));
  }
  outColor = vec4(result, 1.0);
}
    `},contrast:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_contrast;

out vec4 outColor;

void main() {
  outColor = vec4(texture(u_image, v_texCoords).rgb, 1.0);
  outColor.rgb = (outColor.rgb - 0.5) * u_contrast + 0.5;
}
    `},bloom:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_luminance;

out vec4 outColor;

${pt}

void main() {
  vec3 sum = vec3(0.0);

  vec2 offsets[8] = vec2[](
    vec2(-1, -1),
    vec2(-1,  0),
    vec2(-1,  1),
    vec2( 0, -1),
    vec2( 0,  1),
    vec2( 1, -1),
    vec2( 1,  0),
    vec2( 1,  1)
  );

  for (int i = 0; i < 8; ++i) {
    vec3 color = getColor(offsets[i], u_image, v_texCoords);
    float luminance = dot(color, vec3(1.0/3.0));
    if (luminance >= u_luminance) {
      sum += color;
    }
  }

  vec3 result = texture(u_image, v_texCoords).rgb + sum / 8.0;
  outColor = vec4(result, 1.0);
}
    `},mix:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_weights;

out vec4 outColor;

void main() {
  outColor = vec4(u_weights * texture(u_image, v_texCoords).rgb, 1.0);
}
    `},vignette:{vertex:qe,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_inner;
uniform float u_outer;

out vec4 outColor;

void main() {
  float dist = length(v_texCoords - vec2(0.5, 0.5));
  float factor = 1.0 - smoothstep(u_inner, u_outer, dist);
  outColor = vec4(factor * texture(u_image, v_texCoords).rgb, 1.0);
}
    `}};class Wo{constructor(e){he(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:Zo(this.gl,an[e].vertex,an[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function jt(t,e,r){for(const[n,i]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];["u_image","u_material.diffuse"].includes(n)&&typeof i=="number"?t.uniform1i(a,i):Array.isArray(i)?i.length===2?t.uniform2fv(a,i):i.length===3?t.uniform3fv(a,i):i.length===4?t.uniform4fv(a,i):i.length===9?t.uniformMatrix3fv(a,!1,i):i.length===16&&t.uniformMatrix4fv(a,!1,i):typeof i=="number"?t.uniform1f(a,i):typeof i=="boolean"&&t.uniform1i(a,i?1:0)}}function Zo(t,e,r){const n=sn(t,t.VERTEX_SHADER,e);let i;try{i=sn(t,t.FRAGMENT_SHADER,r)}catch(o){throw t.deleteShader(n),o}const a=t.createProgram();if(a===null)throw t.deleteShader(i),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.detachShader(a,i),t.detachShader(a,n),t.deleteShader(i),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const o=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${o}`)}return a}function sn(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${i}`)}return n}function Jo(t,e,r,n){n.effects.length>0?n.renderTextures[0].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT);let i,a;for(const o of r){i!==o.program&&(t.useProgram(o.program.program),i=o.program),a!==o.geometry&&(t.bindVertexArray(o.geometry.vao),a=o.geometry);const s=o.getUniforms(e);jt(t,o.program,s),t.drawArrays(o.geometry.drawMode,0,o.geometry.drawCount)}if(n.effects.length!==0){t.bindVertexArray(n.quad.vao);for(let o=0;o<n.effects.length;++o){const{program:s,uniforms:l}=n.effects[o],u=o%2,f=1-u;o<n.effects.length-1?n.renderTextures[f].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(s.program);const c=n.renderTextures[u].bindAsInput();jt(t,s,{u_image:c,...l}),t.drawArrays(n.quad.drawMode,0,n.quad.drawCount)}}}function Qo(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(xe.a_position),t.vertexAttribPointer(xe.a_position,3,t.FLOAT,!1,8*4,0),t.enableVertexAttribArray(xe.a_texCoords),t.vertexAttribPointer(xe.a_texCoords,2,t.FLOAT,!1,8*4,3*4),t.enableVertexAttribArray(xe.a_normal),t.vertexAttribPointer(xe.a_normal,3,t.FLOAT,!1,8*4,5*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const Ko={full:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],sudoku:[-3,-3,0,-1,2,0,0,1,3,-3,0,2,2,0,0,1,-3,3,0,-1,-1,0,0,1,3,3,0,2,-1,0,0,1],tower:[-1,-3,0,0,2,0,0,1,1,-3,0,1,2,0,0,1,-1,3,0,0,-1,0,0,1,1,3,0,1,-1,0,0,1],topHalf:[-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],bottomHalf:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1],leftHalf:[-1,-1,0,0,1,0,0,1,0,-1,0,.5,1,0,0,1,-1,1,0,0,0,0,0,1,0,1,0,.5,0,0,0,1],rightHalf:[0,-1,0,.5,1,0,0,1,1,-1,0,1,1,0,0,1,0,1,0,.5,0,0,0,1,1,1,0,1,0,0,0,1],quad:[-1,-1,0,0,0,0,0,1,1,-1,0,1,0,0,0,1,-1,1,0,0,1,0,0,1,1,1,0,1,1,0,0,1]};class el{constructor(e){he(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=Qo(this.gl,Ko[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}const tl=["grayscale","sepia","boxBlur","guassian","sharpen1","sharpen2","emboss","laplacian1","laplacian2","prewitt","sobel","kirsch","darken","lighten","highContrast","bloom","invert","grb","rbg","bgr","gbr","brg","0gb","r0b","rg0","vignette"],on={grayscale:{program:"mix",uniforms:{u_weights:[.2126,.2126,.2126,.7152,.7152,.7152,.0722,.0722,.0722]}},sepia:{program:"mix",uniforms:{u_weights:[.393,.349,.272,.769,.686,.534,.189,.168,.131]}},boxBlur:{program:"kernel",uniforms:{u_kernel:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]}},guassian:{program:"kernel",uniforms:{u_kernel:[1/16,2/16,1/16,2/16,4/16,2/16,1/16,2/16,1/16]}},sharpen1:{program:"kernel",uniforms:{u_kernel:[-.0023,-.0432,-.0023,-.0432,1.182,-.0432,-.0023,-.0432,-.0023]}},sharpen2:{program:"kernel",uniforms:{u_kernel:[-1/9,-1/9,-1/9,-1/9,17/9,-1/9,-1/9,-1/9,-1/9]}},emboss:{program:"kernel",uniforms:{u_kernel:[-2,-1,0,-1,1,1,0,1,2]}},laplacian1:{program:"kernel",uniforms:{u_kernel:[0,-1,0,-1,4,-1,0,-1,0]}},laplacian2:{program:"kernel",uniforms:{u_kernel:[-1,-1,-1,-1,8,-1,-1,-1,-1]}},prewitt:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,1,0,-1,1,0,-1],u_kernel2:[1,1,1,0,0,0,-1,-1,-1]}},sobel:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,2,0,-2,1,0,-1],u_kernel2:[1,2,1,0,0,0,-1,-2,-1]}},kirsch:{program:"gradient8",uniforms:{"u_kernel[0]":[5,5,5,-3,0,-3,-3,-3,-3],"u_kernel[1]":[-3,5,5,-3,0,5,-3,-3,-3],"u_kernel[2]":[-3,-3,5,-3,0,5,-3,-3,5],"u_kernel[3]":[-3,-3,-3,-3,0,5,-3,5,5],"u_kernel[4]":[-3,-3,-3,-3,0,-3,5,5,5],"u_kernel[5]":[-3,-3,-3,5,0,-3,5,5,-3],"u_kernel[6]":[5,-3,-3,5,0,-3,5,-3,-3],"u_kernel[7]":[5,5,-3,5,0,-3,-3,-3,-3]}},darken:{program:"mix",uniforms:{u_kernel:[.5,0,0,0,.5,0,0,0,.5]}},lighten:{program:"kernel",uniforms:{u_kernel:[2,0,0,0,2,0,0,0,2]}},highContrast:{program:"contrast",uniforms:{u_contrast:2}},bloom:{program:"bloom",uniforms:{u_luminance:.6}},invert:{program:"invert",uniforms:{}},grb:{program:"mix",uniforms:{u_weights:[0,1,0,1,0,0,0,0,1]}},rbg:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,1,0,1,0]}},bgr:{program:"mix",uniforms:{u_weights:[0,0,1,0,1,0,1,0,0]}},gbr:{program:"mix",uniforms:{u_weights:[0,0,1,1,0,0,0,1,0]}},brg:{program:"mix",uniforms:{u_weights:[0,1,0,0,0,1,1,0,0]}},"0gb":{program:"mix",uniforms:{u_weights:[0,0,0,0,1,0,0,0,1]}},r0b:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,0,0,0,1]}},rg0:{program:"mix",uniforms:{u_weights:[1,0,0,0,1,0,0,0,0]}},vignette:{program:"vignette",uniforms:{u_inner:.4,u_outer:.6}}};function ln(t,e){return e.map(r=>({program:t.createProgram(on[r].program),uniforms:on[r].uniforms}))}class nl{constructor(e){he(this,"gl");he(this,"programFactory");he(this,"geometryFactory");he(this,"texture");he(this,"renderTextures");he(this,"quad");he(this,"queue",[]);he(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new Wo(this.gl),this.geometryFactory=new el(this.gl),this.texture=new Yo(this.gl),this.renderTextures=[new rn(this.gl,1),new rn(this.gl,2)],this.quad=this.geometryFactory.createGeometry("quad")}animate(e,r){return new Promise((n,i)=>{const a=new Vo;if(a.setRepeat(0),a.setDelay(e.output.delayMs),a.setSize(e.output.width,e.output.height),!a.start()){i("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:i,frame:0,sprites:Zt(this.programFactory,this.geometryFactory,e.animation),effects:ln(this.programFactory,e.effects.filter(s=>s.enabled).map(s=>s.type)),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,i)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:i,frame:r,sprites:Zt(this.programFactory,this.geometryFactory,e.animation),effects:ln(this.programFactory,e.effects.filter(a=>a.enabled).map(a=>a.type))}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let m=0;m<this.queue.length-1;++m)this.queue[m].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:i,effects:a,frame:o}=this.queue[0],{image:s,output:l,camera:u,projection:f,material:c,directionalLight:d,pointLight:p,spotLight:h}=r;if(e==="frame"||e==="gif"&&this.queue[0].frame===0){await this.texture.loadImage(s.url);const{width:m,height:_,clear:E}=l;this.renderTextures.forEach(X=>X.setSize(m,_)),this.canvas.width=m,this.canvas.height=_,this.gl.viewport(0,0,m,_),this.gl.clearColor(...E,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.activeTexture(this.gl.TEXTURE0+this.texture.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture.texture);const b=$e();mr(b,u.position,u.lookAt,u.up);const g=$e();f.perspective?pr(g,f.left,f.right,f.bottom,f.top,f.near,f.far):gr(g,f.left,f.right,f.bottom,f.top,f.near,f.far);const w={u_view:b,u_projection:g,"u_material.diffuse":this.texture.unit,"u_material.specular":c.specular,"u_material.shininess":c.shininess,"u_directionalLight.ambient":d.ambient,"u_directionalLight.diffuse":d.diffuse,"u_directionalLight.specular":d.specular,"u_directionalLight.direction":d.direction,"u_pointLight.ambient":p.ambient,"u_pointLight.diffuse":p.diffuse,"u_pointLight.specular":p.specular,"u_pointLight.position":p.position,"u_pointLight.attenuation1":p.attenuation1,"u_pointLight.attenuation2":p.attenuation2,"u_spotLight.ambient":h.ambient,"u_spotLight.diffuse":h.diffuse,"u_spotLight.specular":h.specular,"u_spotLight.position":h.position,"u_spotLight.direction":h.direction,"u_spotLight.innerCos":Math.cos($t(h.innerDegrees)),"u_spotLight.outerCos":Math.cos($t(h.outerDegrees)),"u_spotLight.attenuation1":h.attenuation1,"u_spotLight.attenuation2":h.attenuation2};for(const X of Ho(i.map(z=>z.program)))this.gl.useProgram(X.program),jt(this.gl,X,w)}if(Jo(this.gl,o/r.output.totalFrames,i,{renderTextures:this.renderTextures,quad:this.quad,effects:a}),e==="frame")n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:m,callback:_}=this.queue[0];_(o);const E=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,E),m.addFrame(E,!0),m.setTransparent(16777215),o===l.totalFrames-1){m.finish();const b=m.stream().getData(),g="data:image/gif;base64,"+window.btoa(b);n({dataUri:g}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.renderTextures.forEach(e=>e.destroy()),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ge=function(){const{subscribe:t,update:e}=Ct({animations:Pt,current:Pt[0]}),r=a=>{e(o=>o.current===a||!o.animations.find(l=>l===a)?o:{animations:o.animations,current:a})};function n(a,o){e(({animations:s,current:l})=>{const u={...l,editOptions:l.editOptions.map(f=>f===a?{...a,value:o}:f)};return{animations:s.map(f=>f===l?u:f),current:u}})}function i(){e(({animations:a,current:o})=>{const s=Pt.find(l=>l.name===o.name);return{animations:a.map(l=>l===o?s:l),current:s}})}return{subscribe:t,changeCurrentAnimation:r,changeEditOptions:n,resetEditOptions:i}}(),wt=function(){const{subscribe:t,update:e}=Ct(tl.map(i=>({type:i,enabled:!1})));function r(i,a){e(o=>o.map(s=>s.type===i?{type:i,enabled:a}:s))}function n(){e(i=>i.map(a=>({...a,enabled:!1})))}return{subscribe:t,change:r,reset:n}}();function Xe(t){let e=!0;const{subscribe:r,update:n}=Ct(void 0,o=>Ge.subscribe(({current:s})=>{e&&o(s.defaultOptions[t])}));function i(o){n(s=>(e=!1,{...s,...o}))}function a(){n(()=>(e=!0,st(Ge).current.defaultOptions[t]))}return{subscribe:r,change:i,reset:a}}const yt=Xe("image"),Ne=Xe("output"),Ze=Xe("camera"),Fe=Xe("projection"),ot=Xe("material"),Ve=Xe("directionalLight"),Be=Xe("pointLight"),Se=Xe("spotLight"),Ut=ir([yt,Ne,Ze,Fe,ot,Ve,Be,Se,Ge,wt],([t,e,r,n,i,a,o,s,l,u])=>({image:t,output:e,camera:r,projection:n,material:i,directionalLight:a,pointLight:o,spotLight:s,animation:l.current,effects:u})),at=function(){const t=Ct({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(o){r(s=>{var l;return(l=s.animator)==null||l.destroy(),{animator:new nl(o),running:!1,frame:0}})}function i(){const{animator:o}=st(t);return o?(r(s=>({...s,running:!0,frame:0})),o.animate(st(Ut),s=>r(l=>({...l,frame:s}))).finally(()=>{r(s=>({...s,running:!1}))})):Promise.reject("Animator has not been created")}function a(o){const{animator:s,frame:l}=st(t);if(!s)return Promise.reject("Animator has not been created");let u;typeof o>"u"?u=l:u=o;const f=st(Ut);return u>=f.output.totalFrames&&(u=f.output.totalFrames-1),r(c=>({...c,frame:u,running:!0})),s.renderFrame(f,u).finally(()=>{r(c=>({...c,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:i,renderFrame:a}}();function un(t,{delay:e=0,duration:r=400,easing:n=Xn}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:a=>`opacity: ${a*i}`}}function cn(t){let e,r,n;const i=t[5].default,a=Vn(i,t,t[4],null);return{c(){e=I("div"),a&&a.c(),this.h()},l(o){e=D(o,"DIV",{class:!0});var s=H(e);a&&a.l(s),s.forEach($),this.h()},h(){v(e,"class","section__content svelte-v2pn2e")},m(o,s){B(o,e,s),a&&a.m(e,null),n=!0},p(o,s){a&&a.p&&(!n||s&16)&&Yn(a,i,o,o[4],n?Zn(i,o[4],s,null):Wn(o[4]),null)},i(o){n||(C(a,o),Jn(()=>{r||(r=qt(e,un,{duration:250},!0)),r.run(1)}),n=!0)},o(o){S(a,o),r||(r=qt(e,un,{duration:250},!1)),r.run(0),n=!1},d(o){o&&$(e),a&&a.d(o),o&&r&&r.end()}}}function rl(t){let e,r,n,i,a=t[0]?"-":"+",o,s,l,u,f,c,d,p,h,m,_,E,b=t[0]&&cn(t);return{c(){e=I("section"),r=I("header"),n=I("button"),i=oe("["),o=oe(a),s=oe("]"),l=P(),u=I("h2"),f=oe(t[1]),c=P(),d=I("button"),p=oe("Reset"),h=P(),b&&b.c(),this.h()},l(g){e=D(g,"SECTION",{class:!0});var w=H(e);r=D(w,"HEADER",{class:!0});var X=H(r);n=D(X,"BUTTON",{class:!0,type:!0});var z=H(n);i=le(z,"["),o=le(z,a),s=le(z,"]"),z.forEach($),l=F(X),u=D(X,"H2",{class:!0});var K=H(u);f=le(K,t[1]),K.forEach($),c=F(X),d=D(X,"BUTTON",{class:!0,type:!0});var ie=H(d);p=le(ie,"Reset"),ie.forEach($),X.forEach($),h=F(w),b&&b.l(w),w.forEach($),this.h()},h(){v(n,"class","section__expand svelte-v2pn2e"),v(n,"type","button"),v(u,"class","section__heading svelte-v2pn2e"),v(d,"class","section__reset svelte-v2pn2e"),v(d,"type","button"),v(r,"class","section__header svelte-v2pn2e"),v(e,"class","section svelte-v2pn2e")},m(g,w){B(g,e,w),y(e,r),y(r,n),y(n,i),y(n,o),y(n,s),y(r,l),y(r,u),y(u,f),y(r,c),y(r,d),y(d,p),y(e,h),b&&b.m(e,null),m=!0,_||(E=[Le(n,"click",t[3]),Le(u,"click",t[3]),Le(u,"keypress",t[3]),Le(d,"click",t[6])],_=!0)},p(g,[w]){(!m||w&1)&&a!==(a=g[0]?"-":"+")&&Ae(o,a),(!m||w&2)&&Ae(f,g[1]),g[0]?b?(b.p(g,w),w&1&&C(b,1)):(b=cn(g),b.c(),C(b,1),b.m(e,null)):b&&(Et(),S(b,1,1,()=>{b=null}),Tt())},i(g){m||(C(b),m=!0)},o(g){S(b),m=!1},d(g){g&&$(e),b&&b.d(),_=!1,zn(E)}}}function al(t,e,r){let{$$slots:n={},$$scope:i}=e,{title:a=""}=e,{expanded:o=!0}=e;const s=ct();function l(){r(0,o=!o)}const u=()=>s("reset");return t.$$set=f=>{"title"in f&&r(1,a=f.title),"expanded"in f&&r(0,o=f.expanded),"$$scope"in f&&r(4,i=f.$$scope)},[o,a,s,l,i,n,u]}class Re extends de{constructor(e){super(),_e(this,e,al,rl,ve,{title:1,expanded:0})}}function il(t){let e,r,n,i,a,o,s,l;return{c(){e=I("label"),r=I("input"),n=P(),i=I("div"),a=I("img"),this.h()},l(u){e=D(u,"LABEL",{class:!0});var f=H(e);r=D(f,"INPUT",{class:!0,type:!0,accept:!0}),n=F(f),i=D(f,"DIV",{class:!0});var c=H(i);a=D(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach($),f.forEach($),this.h()},h(){v(r,"class","image__input svelte-1me35do"),v(r,"type","file"),v(r,"accept","image/*"),v(a,"class","image__preview svelte-1me35do"),We(a.src,o=t[0].url)||v(a,"src",o),v(a,"alt","source"),v(i,"class","image__container svelte-1me35do"),v(e,"class","image svelte-1me35do")},m(u,f){B(u,e,f),y(e,r),y(e,n),y(e,i),y(i,a),s||(l=Le(r,"input",t[1]),s=!0)},p(u,f){f&1&&!We(a.src,o=u[0].url)&&v(a,"src",o)},d(u){u&&$(e),s=!1,l()}}}function sl(t){let e,r;return e=new Re({props:{title:"Image",expanded:!0,$$slots:{default:[il]},$$scope:{ctx:t}}}),e.$on("reset",yt.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&5&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function ol(t,e,r){let n;Te(t,yt,a=>r(0,n=a));function i(a){var l;const s=(l=a.target.files)==null?void 0:l[0];s&&yt.change({url:URL.createObjectURL(s)})}return[n,i]}class ll extends de{constructor(e){super(),_e(this,e,ol,sl,ve,{})}}function ul(t){let e,r,n,i,a,o;return{c(){e=I("label"),r=oe(t[0]),n=P(),i=I("input"),this.h()},l(s){e=D(s,"LABEL",{class:!0});var l=H(e);r=le(l,t[0]),n=F(l),i=D(l,"INPUT",{type:!0}),l.forEach($),this.h()},h(){v(i,"type","color"),i.value=t[1],v(e,"class","color-picker svelte-nq6a5t")},m(s,l){B(s,e,l),y(e,r),y(e,n),y(e,i),a||(o=Le(i,"change",t[2]),a=!0)},p(s,[l]){l&1&&Ae(r,s[0]),l&2&&(i.value=s[1])},i:De,o:De,d(s){s&&$(e),a=!1,o()}}}function cl(t){return Math.floor(t*255).toString(16).padStart(2,"0")}function fl(t){return`#${t.map(cl).join("")}`}function It(t){return parseInt(t,16)/255}function ml(t){return[It(t.slice(1,3)),It(t.slice(3,5)),It(t.slice(5,7))]}function pl(t,e,r){let n,{label:i=""}=e,{value:a=[1,1,1]}=e;const o=ct();function s(l){const u=l.target;r(3,a=ml(u.value)),o("input",{value:a})}return t.$$set=l=>{"label"in l&&r(0,i=l.label),"value"in l&&r(3,a=l.value)},t.$$.update=()=>{t.$$.dirty&8&&r(1,n=fl(a))},[i,n,s,a]}class ke extends de{constructor(e){super(),_e(this,e,pl,ul,ve,{label:0,value:3})}}function fn(t){let e,r,n,i,a,o;return{c(){e=I("label"),r=oe(t[1]),n=P(),i=I("input"),this.h()},l(s){e=D(s,"LABEL",{class:!0});var l=H(e);r=le(l,t[1]),n=F(l),i=D(l,"INPUT",{class:!0,type:!0}),l.forEach($),this.h()},h(){v(i,"class","slider__text-input svelte-1h0gcvd"),v(i,"type","text"),i.value=t[0],v(e,"class","slider__label svelte-1h0gcvd")},m(s,l){B(s,e,l),y(e,r),y(e,n),y(e,i),a||(o=Le(i,"input",t[5]),a=!0)},p(s,l){l&2&&Ae(r,s[1]),l&1&&i.value!==s[0]&&(i.value=s[0])},d(s){s&&$(e),a=!1,o()}}}function gl(t){let e,r,n,i,a=gt(t[2])+"",o,s,l,u,f,c,d=gt(t[3])+"",p,h,m,_=t[1]&&fn(t);return{c(){e=I("div"),_&&_.c(),r=P(),n=I("div"),i=I("span"),o=oe(a),s=P(),l=I("div"),u=I("input"),f=P(),c=I("span"),p=oe(d),this.h()},l(E){e=D(E,"DIV",{class:!0});var b=H(e);_&&_.l(b),r=F(b),n=D(b,"DIV",{class:!0});var g=H(n);i=D(g,"SPAN",{class:!0});var w=H(i);o=le(w,a),w.forEach($),s=F(g),l=D(g,"DIV",{class:!0});var X=H(l);u=D(X,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),X.forEach($),f=F(g),c=D(g,"SPAN",{class:!0});var z=H(c);p=le(z,d),z.forEach($),g.forEach($),b.forEach($),this.h()},h(){v(i,"class","slider__range slider__range--min svelte-1h0gcvd"),v(u,"class","slider__input svelte-1h0gcvd"),v(u,"type","range"),v(u,"min",t[2]),v(u,"max",t[3]),v(u,"step",t[4]),u.value=t[0],v(l,"class","slider__input-container svelte-1h0gcvd"),v(c,"class","slider__range slider__range--max"),v(n,"class","slider__container svelte-1h0gcvd"),v(e,"class","slider")},m(E,b){B(E,e,b),_&&_.m(e,null),y(e,r),y(e,n),y(n,i),y(i,o),y(n,s),y(n,l),y(l,u),y(n,f),y(n,c),y(c,p),h||(m=Le(u,"input",t[5]),h=!0)},p(E,[b]){E[1]?_?_.p(E,b):(_=fn(E),_.c(),_.m(e,r)):_&&(_.d(1),_=null),b&4&&a!==(a=gt(E[2])+"")&&Ae(o,a),b&4&&v(u,"min",E[2]),b&8&&v(u,"max",E[3]),b&16&&v(u,"step",E[4]),b&1&&(u.value=E[0]),b&8&&d!==(d=gt(E[3])+"")&&Ae(p,d)},i:De,o:De,d(E){E&&$(e),_&&_.d(),h=!1,m()}}}function gt(t){return t.toFixed(2).replace(/\.?0+$/,"")}function hl(t,e,r){const n=ct();let{label:i=""}=e,{min:a=0}=e,{max:o=100}=e,{step:s=1}=e,{value:l=o<a?a:(o-a)/2}=e;function u(f){const c=f.target,d=parseFloat(c.value);Number.isNaN(d)||(r(0,l=d),n("input",{value:l}))}return t.$$set=f=>{"label"in f&&r(1,i=f.label),"min"in f&&r(2,a=f.min),"max"in f&&r(3,o=f.max),"step"in f&&r(4,s=f.step),"value"in f&&r(0,l=f.value)},[l,i,a,o,s,u]}class fe extends de{constructor(e){super(),_e(this,e,hl,gl,ve,{label:1,min:2,max:3,step:4,value:0})}}function dl(t){let e,r,n,i,a,o,s,l,u,f;return e=new fe({props:{label:"width",min:1,max:1024,step:1,value:t[0].width}}),e.$on("input",t[1]),n=new fe({props:{label:"height",min:1,max:1024,step:1,value:t[0].height}}),n.$on("input",t[2]),a=new fe({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[0].delayMs}}),a.$on("input",t[3]),s=new fe({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[0].totalFrames}}),s.$on("input",t[4]),u=new ke({props:{label:"clear",value:t[0].clear}}),u.$on("input",t[5]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment),o=P(),x(s.$$.fragment),l=P(),x(u.$$.fragment)},l(c){k(e.$$.fragment,c),r=F(c),k(n.$$.fragment,c),i=F(c),k(a.$$.fragment,c),o=F(c),k(s.$$.fragment,c),l=F(c),k(u.$$.fragment,c)},m(c,d){A(e,c,d),B(c,r,d),A(n,c,d),B(c,i,d),A(a,c,d),B(c,o,d),A(s,c,d),B(c,l,d),A(u,c,d),f=!0},p(c,d){const p={};d&1&&(p.value=c[0].width),e.$set(p);const h={};d&1&&(h.value=c[0].height),n.$set(h);const m={};d&1&&(m.value=c[0].delayMs),a.$set(m);const _={};d&1&&(_.value=c[0].totalFrames),s.$set(_);const E={};d&1&&(E.value=c[0].clear),u.$set(E)},i(c){f||(C(e.$$.fragment,c),C(n.$$.fragment,c),C(a.$$.fragment,c),C(s.$$.fragment,c),C(u.$$.fragment,c),f=!0)},o(c){S(e.$$.fragment,c),S(n.$$.fragment,c),S(a.$$.fragment,c),S(s.$$.fragment,c),S(u.$$.fragment,c),f=!1},d(c){M(e,c),c&&$(r),M(n,c),c&&$(i),M(a,c),c&&$(o),M(s,c),c&&$(l),M(u,c)}}}function _l(t){let e,r;return e=new Re({props:{title:"Output",expanded:!0,$$slots:{default:[dl]},$$scope:{ctx:t}}}),e.$on("reset",Ne.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&65&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function vl(t,e,r){let n;return Te(t,Ne,u=>r(0,n=u)),[n,u=>Ne.change({width:u.detail.value}),u=>Ne.change({height:u.detail.value}),u=>Ne.change({delayMs:u.detail.value}),u=>Ne.change({totalFrames:u.detail.value}),u=>Ne.change({clear:u.detail.value})]}class $l extends de{constructor(e){super(),_e(this,e,vl,_l,ve,{})}}function bl(t){let e,r,n,i,a,o;return e=new fe({props:{label:`${t[0]}X`,min:-10,max:10,step:.01,value:t[1][0]}}),e.$on("input",t[3]),n=new fe({props:{label:`${t[0]}Y`,min:-10,max:10,step:.01,value:t[1][1]}}),n.$on("input",t[4]),a=new fe({props:{label:`${t[0]}Z`,min:-10,max:10,step:.01,value:t[1][2]}}),a.$on("input",t[5]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment)},l(s){k(e.$$.fragment,s),r=F(s),k(n.$$.fragment,s),i=F(s),k(a.$$.fragment,s)},m(s,l){A(e,s,l),B(s,r,l),A(n,s,l),B(s,i,l),A(a,s,l),o=!0},p(s,[l]){const u={};l&1&&(u.label=`${s[0]}X`),l&2&&(u.value=s[1][0]),e.$set(u);const f={};l&1&&(f.label=`${s[0]}Y`),l&2&&(f.value=s[1][1]),n.$set(f);const c={};l&1&&(c.label=`${s[0]}Z`),l&2&&(c.value=s[1][2]),a.$set(c)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){M(e,s),s&&$(r),M(n,s),s&&$(i),M(a,s)}}}function wl(t,e,r){let{label:n=""}=e,{value:i=[0,0,-1]}=e;const a=ct();function o(f,c){const d=[...i];d[f]=c,a("input",{value:d})}const s=f=>o(0,f.detail.value),l=f=>o(1,f.detail.value),u=f=>o(2,f.detail.value);return t.$$set=f=>{"label"in f&&r(0,n=f.label),"value"in f&&r(1,i=f.value)},[n,i,o,s,l,u]}class Ye extends de{constructor(e){super(),_e(this,e,wl,bl,ve,{label:0,value:1})}}function yl(t){let e,r,n,i,a,o;return e=new Ye({props:{label:"position",value:t[0].position}}),e.$on("input",t[1]),n=new Ye({props:{label:"lookAt",value:t[0].lookAt}}),n.$on("input",t[2]),a=new Ye({props:{label:"up",value:t[0].up}}),a.$on("input",t[3]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment)},l(s){k(e.$$.fragment,s),r=F(s),k(n.$$.fragment,s),i=F(s),k(a.$$.fragment,s)},m(s,l){A(e,s,l),B(s,r,l),A(n,s,l),B(s,i,l),A(a,s,l),o=!0},p(s,l){const u={};l&1&&(u.value=s[0].position),e.$set(u);const f={};l&1&&(f.value=s[0].lookAt),n.$set(f);const c={};l&1&&(c.value=s[0].up),a.$set(c)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){M(e,s),s&&$(r),M(n,s),s&&$(i),M(a,s)}}}function El(t){let e,r;return e=new Re({props:{title:"Camera",expanded:!1,$$slots:{default:[yl]},$$scope:{ctx:t}}}),e.$on("reset",Ze.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&17&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function Tl(t,e,r){let n;return Te(t,Ze,s=>r(0,n=s)),[n,s=>Ze.change({position:s.detail.value}),s=>Ze.change({lookAt:s.detail.value}),s=>Ze.change({up:s.detail.value})]}class Cl extends de{constructor(e){super(),_e(this,e,Tl,El,ve,{})}}function Sl(t){let e,r,n,i,a,o,s;return{c(){e=I("div"),r=oe(t[1]),n=P(),i=I("label"),a=I("input"),this.h()},l(l){e=D(l,"DIV",{class:!0});var u=H(e);r=le(u,t[1]),n=F(u),i=D(u,"LABEL",{class:!0});var f=H(i);a=D(f,"INPUT",{class:!0,type:!0}),f.forEach($),u.forEach($),this.h()},h(){v(a,"class","toggle__checkbox svelte-1j9rfin"),v(a,"type","checkbox"),a.checked=t[0],v(i,"class","toggle__label svelte-1j9rfin"),He(i,"toggle__label--active",t[0]),v(e,"class","toggle svelte-1j9rfin")},m(l,u){B(l,e,u),y(e,r),y(e,n),y(e,i),y(i,a),o||(s=Le(a,"change",t[2]),o=!0)},p(l,[u]){u&2&&Ae(r,l[1]),u&1&&(a.checked=l[0]),u&1&&He(i,"toggle__label--active",l[0])},i:De,o:De,d(l){l&&$(e),o=!1,s()}}}function Ol(t,e,r){const n=ct();let{label:i=""}=e,{value:a=!1}=e;function o(s){const l=s.target;r(0,a=Boolean(l.checked)),n("change",{value:a})}return t.$$set=s=>{"label"in s&&r(1,i=s.label),"value"in s&&r(0,a=s.value)},[a,i,o]}class Mt extends de{constructor(e){super(),_e(this,e,Ol,Sl,ve,{label:1,value:0})}}function xl(t){let e,r,n,i,a,o,s,l,u,f,c,d,p,h;return e=new Mt({props:{label:"perspective",value:t[0].perspective}}),e.$on("change",t[1]),n=new fe({props:{label:"left",min:-10,max:10,step:.01,value:t[0].left}}),n.$on("input",t[2]),a=new fe({props:{label:"right",min:-10,max:10,step:.01,value:t[0].right}}),a.$on("input",t[3]),s=new fe({props:{label:"bottom",min:-10,max:10,step:.01,value:t[0].bottom}}),s.$on("input",t[4]),u=new fe({props:{label:"top",min:-10,max:10,step:.01,value:t[0].top}}),u.$on("input",t[5]),c=new fe({props:{label:"near",min:.01,max:10,step:.01,value:t[0].near}}),c.$on("input",t[6]),p=new fe({props:{label:"far",min:.01,max:10,step:.01,value:t[0].far}}),p.$on("input",t[7]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment),o=P(),x(s.$$.fragment),l=P(),x(u.$$.fragment),f=P(),x(c.$$.fragment),d=P(),x(p.$$.fragment)},l(m){k(e.$$.fragment,m),r=F(m),k(n.$$.fragment,m),i=F(m),k(a.$$.fragment,m),o=F(m),k(s.$$.fragment,m),l=F(m),k(u.$$.fragment,m),f=F(m),k(c.$$.fragment,m),d=F(m),k(p.$$.fragment,m)},m(m,_){A(e,m,_),B(m,r,_),A(n,m,_),B(m,i,_),A(a,m,_),B(m,o,_),A(s,m,_),B(m,l,_),A(u,m,_),B(m,f,_),A(c,m,_),B(m,d,_),A(p,m,_),h=!0},p(m,_){const E={};_&1&&(E.value=m[0].perspective),e.$set(E);const b={};_&1&&(b.value=m[0].left),n.$set(b);const g={};_&1&&(g.value=m[0].right),a.$set(g);const w={};_&1&&(w.value=m[0].bottom),s.$set(w);const X={};_&1&&(X.value=m[0].top),u.$set(X);const z={};_&1&&(z.value=m[0].near),c.$set(z);const K={};_&1&&(K.value=m[0].far),p.$set(K)},i(m){h||(C(e.$$.fragment,m),C(n.$$.fragment,m),C(a.$$.fragment,m),C(s.$$.fragment,m),C(u.$$.fragment,m),C(c.$$.fragment,m),C(p.$$.fragment,m),h=!0)},o(m){S(e.$$.fragment,m),S(n.$$.fragment,m),S(a.$$.fragment,m),S(s.$$.fragment,m),S(u.$$.fragment,m),S(c.$$.fragment,m),S(p.$$.fragment,m),h=!1},d(m){M(e,m),m&&$(r),M(n,m),m&&$(i),M(a,m),m&&$(o),M(s,m),m&&$(l),M(u,m),m&&$(f),M(c,m),m&&$(d),M(p,m)}}}function kl(t){let e,r;return e=new Re({props:{title:"Projection",expanded:!1,$$slots:{default:[xl]},$$scope:{ctx:t}}}),e.$on("reset",Fe.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&257&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function Al(t,e,r){let n;return Te(t,Fe,c=>r(0,n=c)),[n,c=>Fe.change({perspective:c.detail.value}),c=>Fe.change({left:c.detail.value}),c=>Fe.change({right:c.detail.value}),c=>Fe.change({bottom:c.detail.value}),c=>Fe.change({top:c.detail.value}),c=>Fe.change({near:c.detail.value}),c=>Fe.change({far:c.detail.value})]}class Ml extends de{constructor(e){super(),_e(this,e,Al,kl,ve,{})}}function Pl(t){let e,r,n,i;return e=new ke({props:{label:"specular",value:t[0].specular}}),e.$on("input",t[1]),n=new fe({props:{label:"shininess",min:0,max:100,step:.1,value:t[0].shininess}}),n.$on("input",t[2]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment)},l(a){k(e.$$.fragment,a),r=F(a),k(n.$$.fragment,a)},m(a,o){A(e,a,o),B(a,r,o),A(n,a,o),i=!0},p(a,o){const s={};o&1&&(s.value=a[0].specular),e.$set(s);const l={};o&1&&(l.value=a[0].shininess),n.$set(l)},i(a){i||(C(e.$$.fragment,a),C(n.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),i=!1},d(a){M(e,a),a&&$(r),M(n,a)}}}function Fl(t){let e,r;return e=new Re({props:{title:"Material",expanded:!1,$$slots:{default:[Pl]},$$scope:{ctx:t}}}),e.$on("reset",ot.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&9&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function Ll(t,e,r){let n;return Te(t,ot,o=>r(0,n=o)),[n,o=>ot.change({specular:o.detail.value}),o=>ot.change({shininess:o.detail.value})]}class Il extends de{constructor(e){super(),_e(this,e,Ll,Fl,ve,{})}}function Dl(t){let e,r,n,i,a,o,s,l;return e=new ke({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new ke({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),a=new ke({props:{label:"specular",value:t[0].specular}}),a.$on("input",t[3]),s=new Ye({props:{label:"direction",value:t[0].direction}}),s.$on("input",t[4]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment),o=P(),x(s.$$.fragment)},l(u){k(e.$$.fragment,u),r=F(u),k(n.$$.fragment,u),i=F(u),k(a.$$.fragment,u),o=F(u),k(s.$$.fragment,u)},m(u,f){A(e,u,f),B(u,r,f),A(n,u,f),B(u,i,f),A(a,u,f),B(u,o,f),A(s,u,f),l=!0},p(u,f){const c={};f&1&&(c.value=u[0].ambient),e.$set(c);const d={};f&1&&(d.value=u[0].diffuse),n.$set(d);const p={};f&1&&(p.value=u[0].specular),a.$set(p);const h={};f&1&&(h.value=u[0].direction),s.$set(h)},i(u){l||(C(e.$$.fragment,u),C(n.$$.fragment,u),C(a.$$.fragment,u),C(s.$$.fragment,u),l=!0)},o(u){S(e.$$.fragment,u),S(n.$$.fragment,u),S(a.$$.fragment,u),S(s.$$.fragment,u),l=!1},d(u){M(e,u),u&&$(r),M(n,u),u&&$(i),M(a,u),u&&$(o),M(s,u)}}}function Rl(t){let e,r;return e=new Re({props:{title:"Directional light",expanded:!1,$$slots:{default:[Dl]},$$scope:{ctx:t}}}),e.$on("reset",Ve.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&33&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function jl(t,e,r){let n;return Te(t,Ve,l=>r(0,n=l)),[n,l=>Ve.change({ambient:l.detail.value}),l=>Ve.change({diffuse:l.detail.value}),l=>Ve.change({specular:l.detail.value}),l=>Ve.change({direction:l.detail.value})]}class Ul extends de{constructor(e){super(),_e(this,e,jl,Rl,ve,{})}}function Bl(t){let e,r,n,i,a,o,s,l,u,f,c,d;return e=new ke({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new ke({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),a=new ke({props:{label:"specular",value:t[0].specular}}),a.$on("input",t[3]),s=new Ye({props:{label:"position",value:t[0].position}}),s.$on("input",t[4]),u=new fe({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),u.$on("input",t[5]),c=new fe({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),c.$on("input",t[6]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment),o=P(),x(s.$$.fragment),l=P(),x(u.$$.fragment),f=P(),x(c.$$.fragment)},l(p){k(e.$$.fragment,p),r=F(p),k(n.$$.fragment,p),i=F(p),k(a.$$.fragment,p),o=F(p),k(s.$$.fragment,p),l=F(p),k(u.$$.fragment,p),f=F(p),k(c.$$.fragment,p)},m(p,h){A(e,p,h),B(p,r,h),A(n,p,h),B(p,i,h),A(a,p,h),B(p,o,h),A(s,p,h),B(p,l,h),A(u,p,h),B(p,f,h),A(c,p,h),d=!0},p(p,h){const m={};h&1&&(m.value=p[0].ambient),e.$set(m);const _={};h&1&&(_.value=p[0].diffuse),n.$set(_);const E={};h&1&&(E.value=p[0].specular),a.$set(E);const b={};h&1&&(b.value=p[0].position),s.$set(b);const g={};h&1&&(g.value=p[0].attenuation1),u.$set(g);const w={};h&1&&(w.value=p[0].attenuation2),c.$set(w)},i(p){d||(C(e.$$.fragment,p),C(n.$$.fragment,p),C(a.$$.fragment,p),C(s.$$.fragment,p),C(u.$$.fragment,p),C(c.$$.fragment,p),d=!0)},o(p){S(e.$$.fragment,p),S(n.$$.fragment,p),S(a.$$.fragment,p),S(s.$$.fragment,p),S(u.$$.fragment,p),S(c.$$.fragment,p),d=!1},d(p){M(e,p),p&&$(r),M(n,p),p&&$(i),M(a,p),p&&$(o),M(s,p),p&&$(l),M(u,p),p&&$(f),M(c,p)}}}function Nl(t){let e,r;return e=new Re({props:{title:"Point light",expanded:!1,$$slots:{default:[Bl]},$$scope:{ctx:t}}}),e.$on("reset",Be.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&129&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function Gl(t,e,r){let n;return Te(t,Be,f=>r(0,n=f)),[n,f=>Be.change({ambient:f.detail.value}),f=>Be.change({diffuse:f.detail.value}),f=>Be.change({specular:f.detail.value}),f=>Be.change({position:f.detail.value}),f=>Be.change({attenuation1:f.detail.value}),f=>Be.change({attenuation2:f.detail.value})]}class ql extends de{constructor(e){super(),_e(this,e,Gl,Nl,ve,{})}}function Hl(t){let e,r,n,i,a,o,s,l,u,f,c,d,p,h,m,_,E,b;return e=new ke({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new ke({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),a=new ke({props:{label:"specular",value:t[0].specular}}),a.$on("input",t[3]),s=new Ye({props:{label:"position",value:t[0].position}}),s.$on("input",t[4]),u=new Ye({props:{label:"direction",value:t[0].direction}}),u.$on("input",t[5]),c=new fe({props:{label:"innerDegrees",min:0,max:360,step:1,value:t[0].innerDegrees}}),c.$on("input",t[6]),p=new fe({props:{label:"outerDegrees",min:0,max:360,step:1,value:t[0].outerDegrees}}),p.$on("input",t[7]),m=new fe({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),m.$on("input",t[8]),E=new fe({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),E.$on("input",t[9]),{c(){x(e.$$.fragment),r=P(),x(n.$$.fragment),i=P(),x(a.$$.fragment),o=P(),x(s.$$.fragment),l=P(),x(u.$$.fragment),f=P(),x(c.$$.fragment),d=P(),x(p.$$.fragment),h=P(),x(m.$$.fragment),_=P(),x(E.$$.fragment)},l(g){k(e.$$.fragment,g),r=F(g),k(n.$$.fragment,g),i=F(g),k(a.$$.fragment,g),o=F(g),k(s.$$.fragment,g),l=F(g),k(u.$$.fragment,g),f=F(g),k(c.$$.fragment,g),d=F(g),k(p.$$.fragment,g),h=F(g),k(m.$$.fragment,g),_=F(g),k(E.$$.fragment,g)},m(g,w){A(e,g,w),B(g,r,w),A(n,g,w),B(g,i,w),A(a,g,w),B(g,o,w),A(s,g,w),B(g,l,w),A(u,g,w),B(g,f,w),A(c,g,w),B(g,d,w),A(p,g,w),B(g,h,w),A(m,g,w),B(g,_,w),A(E,g,w),b=!0},p(g,w){const X={};w&1&&(X.value=g[0].ambient),e.$set(X);const z={};w&1&&(z.value=g[0].diffuse),n.$set(z);const K={};w&1&&(K.value=g[0].specular),a.$set(K);const ie={};w&1&&(ie.value=g[0].position),s.$set(ie);const ue={};w&1&&(ue.value=g[0].direction),u.$set(ue);const V={};w&1&&(V.value=g[0].innerDegrees),c.$set(V);const Y={};w&1&&(Y.value=g[0].outerDegrees),p.$set(Y);const me={};w&1&&(me.value=g[0].attenuation1),m.$set(me);const we={};w&1&&(we.value=g[0].attenuation2),E.$set(we)},i(g){b||(C(e.$$.fragment,g),C(n.$$.fragment,g),C(a.$$.fragment,g),C(s.$$.fragment,g),C(u.$$.fragment,g),C(c.$$.fragment,g),C(p.$$.fragment,g),C(m.$$.fragment,g),C(E.$$.fragment,g),b=!0)},o(g){S(e.$$.fragment,g),S(n.$$.fragment,g),S(a.$$.fragment,g),S(s.$$.fragment,g),S(u.$$.fragment,g),S(c.$$.fragment,g),S(p.$$.fragment,g),S(m.$$.fragment,g),S(E.$$.fragment,g),b=!1},d(g){M(e,g),g&&$(r),M(n,g),g&&$(i),M(a,g),g&&$(o),M(s,g),g&&$(l),M(u,g),g&&$(f),M(c,g),g&&$(d),M(p,g),g&&$(h),M(m,g),g&&$(_),M(E,g)}}}function Xl(t){let e,r;return e=new Re({props:{title:"Spot light",expanded:!1,$$slots:{default:[Hl]},$$scope:{ctx:t}}}),e.$on("reset",Se.reset),{c(){x(e.$$.fragment)},l(n){k(e.$$.fragment,n)},m(n,i){A(e,n,i),r=!0},p(n,[i]){const a={};i&1025&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){M(e,n)}}}function zl(t,e,r){let n;return Te(t,Se,p=>r(0,n=p)),[n,p=>Se.change({ambient:p.detail.value}),p=>Se.change({diffuse:p.detail.value}),p=>Se.change({specular:p.detail.value}),p=>Se.change({position:p.detail.value}),p=>Se.change({direction:p.detail.value}),p=>Se.change({innerDegrees:p.detail.value}),p=>Se.change({outerDegrees:p.detail.value}),p=>Se.change({attenuation1:p.detail.value}),p=>Se.change({attenuation2:p.detail.value})]}class Vl extends de{constructor(e){super(),_e(this,e,zl,Xl,ve,{})}}function Yl(t){let e,r,n,i,a,o,s,l,u,f,c,d,p,h,m,_,E,b;return r=new ll({}),i=new $l({}),o=new Cl({}),l=new Ml({}),f=new Il({}),d=new Ul({}),h=new ql({}),_=new Vl({}),{c(){e=I("aside"),x(r.$$.fragment),n=P(),x(i.$$.fragment),a=P(),x(o.$$.fragment),s=P(),x(l.$$.fragment),u=P(),x(f.$$.fragment),c=P(),x(d.$$.fragment),p=P(),x(h.$$.fragment),m=P(),x(_.$$.fragment),this.h()},l(g){e=D(g,"ASIDE",{class:!0});var w=H(e);k(r.$$.fragment,w),n=F(w),k(i.$$.fragment,w),a=F(w),k(o.$$.fragment,w),s=F(w),k(l.$$.fragment,w),u=F(w),k(f.$$.fragment,w),c=F(w),k(d.$$.fragment,w),p=F(w),k(h.$$.fragment,w),m=F(w),k(_.$$.fragment,w),w.forEach($),this.h()},h(){v(e,"class",E=Ie(`container ${t[0]}`)+" svelte-7v3svs")},m(g,w){B(g,e,w),A(r,e,null),y(e,n),A(i,e,null),y(e,a),A(o,e,null),y(e,s),A(l,e,null),y(e,u),A(f,e,null),y(e,c),A(d,e,null),y(e,p),A(h,e,null),y(e,m),A(_,e,null),b=!0},p(g,[w]){(!b||w&1&&E!==(E=Ie(`container ${g[0]}`)+" svelte-7v3svs"))&&v(e,"class",E)},i(g){b||(C(r.$$.fragment,g),C(i.$$.fragment,g),C(o.$$.fragment,g),C(l.$$.fragment,g),C(f.$$.fragment,g),C(d.$$.fragment,g),C(h.$$.fragment,g),C(_.$$.fragment,g),b=!0)},o(g){S(r.$$.fragment,g),S(i.$$.fragment,g),S(o.$$.fragment,g),S(l.$$.fragment,g),S(f.$$.fragment,g),S(d.$$.fragment,g),S(h.$$.fragment,g),S(_.$$.fragment,g),b=!1},d(g){g&&$(e),M(r),M(i),M(o),M(l),M(f),M(d),M(h),M(_)}}}function Wl(t,e,r){let{class:n=""}=e;return t.$$set=i=>{"class"in i&&r(0,n=i.class)},[n]}class Zl extends de{constructor(e){super(),_e(this,e,Wl,Yl,ve,{class:0})}}function mn(t,e,r){const n=t.slice();return n[6]=e[r],n}function pn(t,e,r){const n=t.slice();return n[9]=e[r],n}function Jl(t){let e,r;function n(...i){return t[4](t[9],...i)}return e=new Mt({props:{label:t[9].name,value:t[9].value}}),e.$on("change",n),{c(){x(e.$$.fragment)},l(i){k(e.$$.fragment,i)},m(i,a){A(e,i,a),r=!0},p(i,a){t=i;const o={};a&2&&(o.label=t[9].name),a&2&&(o.value=t[9].value),e.$set(o)},i(i){r||(C(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){M(e,i)}}}function Ql(t){let e,r;function n(...i){return t[3](t[9],...i)}return e=new fe({props:{label:t[9].name,min:t[9].min,max:t[9].max,step:t[9].step,value:t[9].value}}),e.$on("input",n),{c(){x(e.$$.fragment)},l(i){k(e.$$.fragment,i)},m(i,a){A(e,i,a),r=!0},p(i,a){t=i;const o={};a&2&&(o.label=t[9].name),a&2&&(o.min=t[9].min),a&2&&(o.max=t[9].max),a&2&&(o.step=t[9].step),a&2&&(o.value=t[9].value),e.$set(o)},i(i){r||(C(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){M(e,i)}}}function gn(t){let e,r,n,i;const a=[Ql,Jl],o=[];function s(l,u){return l[9].type==="slider"?0:l[9].type==="toggle"?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=Je()},l(l){r&&r.l(l),n=Je()},m(l,u){~e&&o[e].m(l,u),B(l,n,u),i=!0},p(l,u){let f=e;e=s(l),e===f?~e&&o[e].p(l,u):(r&&(Et(),S(o[f],1,1,()=>{o[f]=null}),Tt()),~e?(r=o[e],r?r.p(l,u):(r=o[e]=a[e](l),r.c()),C(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(C(r),i=!0)},o(l){S(r),i=!1},d(l){~e&&o[e].d(l),l&&$(n)}}}function Kl(t){let e,r,n=t[1].current.editOptions,i=[];for(let o=0;o<n.length;o+=1)i[o]=gn(pn(t,n,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Je()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=Je()},m(o,s){for(let l=0;l<i.length;l+=1)i[l].m(o,s);B(o,e,s),r=!0},p(o,s){if(s&2){n=o[1].current.editOptions;let l;for(l=0;l<n.length;l+=1){const u=pn(o,n,l);i[l]?(i[l].p(u,s),C(i[l],1)):(i[l]=gn(u),i[l].c(),C(i[l],1),i[l].m(e.parentNode,e))}for(Et(),l=n.length;l<i.length;l+=1)a(l);Tt()}},i(o){if(!r){for(let s=0;s<n.length;s+=1)C(i[s]);r=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)S(i[s]);r=!1},d(o){yn(i,o),o&&$(e)}}}function hn(t){let e,r;function n(...i){return t[5](t[6],...i)}return e=new Mt({props:{label:t[6].type,value:t[6].enabled}}),e.$on("change",n),{c(){x(e.$$.fragment)},l(i){k(e.$$.fragment,i)},m(i,a){A(e,i,a),r=!0},p(i,a){t=i;const o={};a&4&&(o.label=t[6].type),a&4&&(o.value=t[6].enabled),e.$set(o)},i(i){r||(C(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){M(e,i)}}}function eu(t){let e,r,n=t[2],i=[];for(let o=0;o<n.length;o+=1)i[o]=hn(mn(t,n,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Je()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=Je()},m(o,s){for(let l=0;l<i.length;l+=1)i[l].m(o,s);B(o,e,s),r=!0},p(o,s){if(s&4){n=o[2];let l;for(l=0;l<n.length;l+=1){const u=mn(o,n,l);i[l]?(i[l].p(u,s),C(i[l],1)):(i[l]=hn(u),i[l].c(),C(i[l],1),i[l].m(e.parentNode,e))}for(Et(),l=n.length;l<i.length;l+=1)a(l);Tt()}},i(o){if(!r){for(let s=0;s<n.length;s+=1)C(i[s]);r=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)S(i[s]);r=!1},d(o){yn(i,o),o&&$(e)}}}function tu(t){let e,r,n,i,a,o;return r=new Re({props:{title:t[1].current.name,expanded:!0,$$slots:{default:[Kl]},$$scope:{ctx:t}}}),r.$on("reset",Ge.resetEditOptions),i=new Re({props:{title:"Effects",expanded:!1,$$slots:{default:[eu]},$$scope:{ctx:t}}}),i.$on("reset",wt.reset),{c(){e=I("aside"),x(r.$$.fragment),n=P(),x(i.$$.fragment),this.h()},l(s){e=D(s,"ASIDE",{class:!0});var l=H(e);k(r.$$.fragment,l),n=F(l),k(i.$$.fragment,l),l.forEach($),this.h()},h(){v(e,"class",a=Ie(`container ${t[0]}`)+" svelte-7v3svs")},m(s,l){B(s,e,l),A(r,e,null),y(e,n),A(i,e,null),o=!0},p(s,[l]){const u={};l&2&&(u.title=s[1].current.name),l&4098&&(u.$$scope={dirty:l,ctx:s}),r.$set(u);const f={};l&4100&&(f.$$scope={dirty:l,ctx:s}),i.$set(f),(!o||l&1&&a!==(a=Ie(`container ${s[0]}`)+" svelte-7v3svs"))&&v(e,"class",a)},i(s){o||(C(r.$$.fragment,s),C(i.$$.fragment,s),o=!0)},o(s){S(r.$$.fragment,s),S(i.$$.fragment,s),o=!1},d(s){s&&$(e),M(r),M(i)}}}function nu(t,e,r){let n,i;Te(t,Ge,u=>r(1,n=u)),Te(t,wt,u=>r(2,i=u));let{class:a=""}=e;const o=(u,f)=>Ge.changeEditOptions(u,f.detail.value),s=(u,f)=>Ge.changeEditOptions(u,f.detail.value),l=(u,f)=>wt.change(u.type,f.detail.value);return t.$$set=u=>{"class"in u&&r(0,a=u.class)},[a,n,i,o,s,l]}class ru extends de{constructor(e){super(),_e(this,e,nu,tu,ve,{class:0})}}function dn(t,e,r){const n=t.slice();return n[3]=e[r],n}function _n(t,e){let r,n,i,a,o,s,l=e[3].name+"",u,f,c,d;function p(){return e[2](e[3])}return{key:t,first:null,c(){r=I("button"),n=I("img"),o=P(),s=I("span"),u=oe(l),f=P(),this.h()},l(h){r=D(h,"BUTTON",{type:!0,class:!0});var m=H(r);n=D(m,"IMG",{class:!0,src:!0,alt:!0}),o=F(m),s=D(m,"SPAN",{});var _=H(s);u=le(_,l),_.forEach($),f=F(m),m.forEach($),this.h()},h(){v(n,"class","image svelte-1l1v01j"),We(n.src,i=`${dt}/demo-${e[3].name}.gif`)||v(n,"src",i),v(n,"alt",a=e[3].name),v(r,"type","button"),v(r,"class","option svelte-1l1v01j"),He(r,"option--selected",e[3]===e[1].current),this.first=r},m(h,m){B(h,r,m),y(r,n),y(r,o),y(r,s),y(s,u),y(r,f),c||(d=Le(r,"click",p),c=!0)},p(h,m){e=h,m&2&&!We(n.src,i=`${dt}/demo-${e[3].name}.gif`)&&v(n,"src",i),m&2&&a!==(a=e[3].name)&&v(n,"alt",a),m&2&&l!==(l=e[3].name+"")&&Ae(u,l),m&2&&He(r,"option--selected",e[3]===e[1].current)},d(h){h&&$(r),c=!1,d()}}}function au(t){let e,r=[],n=new Map,i,a=t[1].animations;const o=s=>s[3].name;for(let s=0;s<a.length;s+=1){let l=dn(t,a,s),u=o(l);n.set(u,r[s]=_n(u,l))}return{c(){e=I("aside");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=D(s,"ASIDE",{class:!0});var l=H(e);for(let u=0;u<r.length;u+=1)r[u].l(l);l.forEach($),this.h()},h(){v(e,"class",i=Ie(`container ${t[0]}`)+" svelte-1l1v01j")},m(s,l){B(s,e,l);for(let u=0;u<r.length;u+=1)r[u].m(e,null)},p(s,[l]){l&2&&(a=s[1].animations,r=Qn(r,l,o,1,s,a,n,e,Kn,_n,null,dn)),l&1&&i!==(i=Ie(`container ${s[0]}`)+" svelte-1l1v01j")&&v(e,"class",i)},i:De,o:De,d(s){s&&$(e);for(let l=0;l<r.length;l+=1)r[l].d()}}}function iu(t,e,r){let n;Te(t,Ge,o=>r(1,n=o));let{class:i=""}=e;const a=o=>Ge.changeCurrentAnimation(o);return t.$$set=o=>{"class"in o&&r(0,i=o.class)},[i,n,a]}class su extends de{constructor(e){super(),_e(this,e,iu,au,ve,{class:0})}}function vn(t){t[12]=t[13].dataUri}function $n(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:uu,then:lu,catch:ou,value:13,error:14};return Ht(r=t[3],n),{c(){e=I("div"),n.block.c(),this.h()},l(i){e=D(i,"DIV",{class:!0});var a=H(e);n.block.l(a),a.forEach($),this.h()},h(){v(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(i,a){B(i,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(i,a){t=i,n.ctx=t,a&8&&r!==(r=t[3])&&Ht(r,n)||nr(n,t,a)},d(i){i&&$(e),n.block.d(),n.token=null,n=null}}}function ou(t){let e,r,n=t[14]+"",i;return{c(){e=I("p"),r=oe("An error has occurred: "),i=oe(n),this.h()},l(a){e=D(a,"P",{class:!0});var o=H(e);r=le(o,"An error has occurred: "),i=le(o,n),o.forEach($),this.h()},h(){v(e,"class","preview__error svelte-13qbjon")},m(a,o){B(a,e,o),y(e,r),y(e,i)},p(a,o){o&8&&n!==(n=a[14]+"")&&Ae(i,n)},d(a){a&&$(e)}}}function lu(t){vn(t);let e,r,n,i,a,o,s;return{c(){e=I("div"),r=I("img"),i=P(),a=I("a"),o=oe("Download"),this.h()},l(l){e=D(l,"DIV",{class:!0});var u=H(e);r=D(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach($),i=F(l),a=D(l,"A",{class:!0,download:!0,href:!0});var f=H(a);o=le(f,"Download"),f.forEach($),this.h()},h(){v(r,"class","preview__image svelte-13qbjon"),We(r.src,n=t[12])||v(r,"src",n),v(r,"alt","generated gif"),v(e,"class","preview__image-container svelte-13qbjon"),v(a,"class","preview__download-button svelte-13qbjon"),v(a,"download","jumping_peter.gif"),v(a,"href",s=t[12])},m(l,u){B(l,e,u),y(e,r),B(l,i,u),B(l,a,u),y(a,o)},p(l,u){vn(l),u&8&&!We(r.src,n=l[12])&&v(r,"src",n),u&8&&s!==(s=l[12])&&v(a,"href",s)},d(l){l&&$(e),l&&$(i),l&&$(a)}}}function uu(t){let e,r,n,i,a,o,s=t[4].frame+"",l,u,f=t[5].totalFrames+"",c,d,p,h,m,_;return{c(){e=I("div"),r=I("p"),n=oe("Generating..."),i=P(),a=I("p"),o=oe("["),l=oe(s),u=oe(" / "),c=oe(f),d=oe("]"),p=P(),h=I("progress"),this.h()},l(E){e=D(E,"DIV",{class:!0});var b=H(e);r=D(b,"P",{});var g=H(r);n=le(g,"Generating..."),g.forEach($),i=F(b),a=D(b,"P",{});var w=H(a);o=le(w,"["),l=le(w,s),u=le(w," / "),c=le(w,f),d=le(w,"]"),w.forEach($),p=F(b),h=D(b,"PROGRESS",{class:!0,max:!0}),H(h).forEach($),b.forEach($),this.h()},h(){v(h,"class","preview__progress svelte-13qbjon"),v(h,"max",m=t[5].totalFrames),h.value=_=t[4].frame,v(e,"class","preview__loading svelte-13qbjon")},m(E,b){B(E,e,b),y(e,r),y(r,n),y(e,i),y(e,a),y(a,o),y(a,l),y(a,u),y(a,c),y(a,d),y(e,p),y(e,h)},p(E,b){b&16&&s!==(s=E[4].frame+"")&&Ae(l,s),b&32&&f!==(f=E[5].totalFrames+"")&&Ae(c,f),b&32&&m!==(m=E[5].totalFrames)&&v(h,"max",m),b&16&&_!==(_=E[4].frame)&&(h.value=_)},d(E){E&&$(e)}}}function cu(t){let e,r,n,i,a,o,s,l,u,f,c,d;n=new Mt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[3]&&$n(t);return f=new fe({props:{min:0,max:t[5].totalFrames-1,step:1,value:t[4].frame}}),f.$on("input",t[6]),{c(){e=I("main"),r=I("div"),x(n.$$.fragment),i=P(),p&&p.c(),a=P(),o=I("div"),s=I("div"),l=I("canvas"),u=P(),x(f.$$.fragment),this.h()},l(h){e=D(h,"MAIN",{class:!0});var m=H(e);r=D(m,"DIV",{class:!0});var _=H(r);k(n.$$.fragment,_),_.forEach($),i=F(m),p&&p.l(m),a=F(m),o=D(m,"DIV",{class:!0});var E=H(o);s=D(E,"DIV",{class:!0});var b=H(s);l=D(b,"CANVAS",{class:!0,style:!0}),H(l).forEach($),b.forEach($),u=F(E),k(f.$$.fragment,E),E.forEach($),m.forEach($),this.h()},h(){v(r,"class","preview__debug-input svelte-13qbjon"),v(l,"class","preview__image svelte-13qbjon"),er(l,"transform","scaleY(-1)"),v(s,"class","preview__image-container svelte-13qbjon"),v(o,"class","preview__container preview__container--debug svelte-13qbjon"),v(e,"class",c=Ie(`preview ${t[0]}`)+" svelte-13qbjon"),He(e,"preview--debug",t[1]),He(e,"preview--no-debug",!t[1])},m(h,m){B(h,e,m),y(e,r),A(n,r,null),y(e,i),p&&p.m(e,null),y(e,a),y(e,o),y(o,s),y(s,l),t[9](l),y(o,u),A(f,o,null),d=!0},p(h,[m]){const _={};m&2&&(_.value=h[1]),n.$set(_),!h[1]&&h[3]?p?p.p(h,m):(p=$n(h),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const E={};m&32&&(E.max=h[5].totalFrames-1),m&16&&(E.value=h[4].frame),f.$set(E),(!d||m&1&&c!==(c=Ie(`preview ${h[0]}`)+" svelte-13qbjon"))&&v(e,"class",c),(!d||m&3)&&He(e,"preview--debug",h[1]),(!d||m&3)&&He(e,"preview--no-debug",!h[1])},i(h){d||(C(n.$$.fragment,h),C(f.$$.fragment,h),d=!0)},o(h){S(n.$$.fragment,h),S(f.$$.fragment,h),d=!1},d(h){h&&$(e),M(n),p&&p.d(),t[9](null),M(f)}}}function fu(t,e,r){let n,i,a;Te(t,Ut,m=>r(8,n=m)),Te(t,at,m=>r(4,i=m)),Te(t,Ne,m=>r(5,a=m));let o,{class:s=""}=e,l=!1,u=null;function f(){at.renderFrame().catch(m=>{throw console.error(`renderFrame failed: ${m}`),m})}function c(){r(3,u=at.animate().catch(m=>{throw console.error(`animate failed: ${m}`),m}))}tr(()=>{at.changeCanvas(o),c()});function d(m){at.renderFrame(m.detail.value).catch(_=>console.error(`Animation failed: ${_}`))}function p(m){r(1,l=m.detail.value)}function h(m){rr[m?"unshift":"push"](()=>{o=m,r(2,o)})}return t.$$set=m=>{"class"in m&&r(0,s=m.class)},t.$$.update=()=>{t.$$.dirty&258&&(l?f():c())},[s,l,o,u,i,a,d,p,n,h]}class mu extends de{constructor(e){super(),_e(this,e,fu,cu,ve,{class:0})}}function pu(t){let e,r,n,i,a,o,s,l,u,f,c,d,p,h,m,_,E,b,g,w,X,z,K,ie,ue;return document.title=e=it,_=new lr({props:{class:"header"}}),b=new su({props:{class:"animations"}}),w=new Zl({props:{class:"common-options"}}),z=new ru({props:{class:"animation-options"}}),ie=new mu({props:{class:"preview"}}),{c(){r=I("meta"),n=I("meta"),i=I("meta"),a=I("meta"),o=I("meta"),s=I("meta"),l=I("meta"),u=I("meta"),f=I("meta"),c=I("meta"),d=I("meta"),p=I("meta"),h=P(),m=I("div"),x(_.$$.fragment),E=P(),x(b.$$.fragment),g=P(),x(w.$$.fragment),X=P(),x(z.$$.fragment),K=P(),x(ie.$$.fragment),this.h()},l(V){const Y=ar("svelte-2dqrj",document.head);r=D(Y,"META",{name:!0,content:!0,class:!0}),n=D(Y,"META",{name:!0,content:!0,class:!0}),i=D(Y,"META",{property:!0,content:!0,class:!0}),a=D(Y,"META",{property:!0,content:!0,class:!0}),o=D(Y,"META",{property:!0,content:!0,class:!0}),s=D(Y,"META",{property:!0,content:!0,class:!0}),l=D(Y,"META",{property:!0,content:!0,class:!0}),u=D(Y,"META",{property:!0,content:!0,class:!0}),f=D(Y,"META",{property:!0,content:!0,class:!0}),c=D(Y,"META",{property:!0,content:!0,class:!0}),d=D(Y,"META",{property:!0,content:!0,class:!0}),p=D(Y,"META",{property:!0,content:!0,class:!0}),Y.forEach($),h=F(V),m=D(V,"DIV",{class:!0});var me=H(m);k(_.$$.fragment,me),E=F(me),k(b.$$.fragment,me),g=F(me),k(w.$$.fragment,me),X=F(me),k(z.$$.fragment,me),K=F(me),k(ie.$$.fragment,me),me.forEach($),this.h()},h(){v(r,"name","title"),v(r,"content",it),v(r,"class","svelte-14fuh2n"),v(n,"name","description"),v(n,"content",Dt),v(n,"class","svelte-14fuh2n"),v(i,"property","og:type"),v(i,"content","website"),v(i,"class","svelte-14fuh2n"),v(a,"property","og:url"),v(a,"content",bn),v(a,"class","svelte-14fuh2n"),v(o,"property","og:title"),v(o,"content",it),v(o,"class","svelte-14fuh2n"),v(s,"property","og:description"),v(s,"content",Dt),v(s,"class","svelte-14fuh2n"),v(l,"property","og:image"),v(l,"content",wn),v(l,"class","svelte-14fuh2n"),v(u,"property","twitter:card"),v(u,"content","summary_large_image"),v(u,"class","svelte-14fuh2n"),v(f,"property","twitter:url"),v(f,"content",bn),v(f,"class","svelte-14fuh2n"),v(c,"property","twitter:title"),v(c,"content",it),v(c,"class","svelte-14fuh2n"),v(d,"property","twitter:description"),v(d,"content",Dt),v(d,"class","svelte-14fuh2n"),v(p,"property","twitter:image"),v(p,"content",wn),v(p,"class","svelte-14fuh2n"),v(m,"class","grid svelte-14fuh2n")},m(V,Y){y(document.head,r),y(document.head,n),y(document.head,i),y(document.head,a),y(document.head,o),y(document.head,s),y(document.head,l),y(document.head,u),y(document.head,f),y(document.head,c),y(document.head,d),y(document.head,p),B(V,h,Y),B(V,m,Y),A(_,m,null),y(m,E),A(b,m,null),y(m,g),A(w,m,null),y(m,X),A(z,m,null),y(m,K),A(ie,m,null),ue=!0},p(V,[Y]){(!ue||Y&0)&&e!==(e=it)&&(document.title=e)},i(V){ue||(C(_.$$.fragment,V),C(b.$$.fragment,V),C(w.$$.fragment,V),C(z.$$.fragment,V),C(ie.$$.fragment,V),ue=!0)},o(V){S(_.$$.fragment,V),S(b.$$.fragment,V),S(w.$$.fragment,V),S(z.$$.fragment,V),S(ie.$$.fragment,V),ue=!1},d(V){$(r),$(n),$(i),$(a),$(o),$(s),$(l),$(u),$(f),$(c),$(d),$(p),V&&$(h),V&&$(m),M(_),M(b),M(w),M(z),M(ie)}}}const it="Jumping Peter",Dt="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",bn="https://ksmai.github.io/jumping-peter",wn="https://ksmai.github.io/jumping-peter/favicon.png";class _u extends de{constructor(e){super(),_e(this,e,null,pu,ve,{})}}export{_u as default};
