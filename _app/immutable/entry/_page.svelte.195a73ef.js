var kt=Object.defineProperty;var It=(t,e,r)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ue=(t,e,r)=>(It(t,typeof e!="symbol"?e+"":e,r),r);import{S as Se,i as Pe,n as Fe,j as F,s as z,q as ae,k,l as M,c as q,r as ne,g as A,m,J as Oe,K as ye,a as ie,G as g,H as $e,L as Be,M as je,u as Ie,N as _t,y as me,z as de,A as ve,f as se,b as oe,B as he,I as Te,O as xe,v as bt,d as wt,P as Bt,e as Ke,Q as yt,R as Rt,T as Ut,p as Ot,o as Mt,U as et,V as Ct,w as Dt,W as Nt}from"../chunks/index.1d64faf9.js";import{b as Je,w as qe}from"../chunks/paths.acc043bd.js";function Lt(t){let e,r,n,s,a,l,i,o,c,f,u,b,p;return{c(){e=F("header"),r=F("img"),s=z(),a=F("h1"),l=ae("Jumping Peter"),i=z(),o=F("p"),c=ae("generate gif emojis"),f=z(),u=F("a"),b=ae("Contribute"),this.h()},l(d){e=k(d,"HEADER",{class:!0});var _=M(e);r=k(_,"IMG",{class:!0,src:!0,alt:!0}),s=q(_),a=k(_,"H1",{class:!0});var h=M(a);l=ne(h,"Jumping Peter"),h.forEach(A),i=q(_),o=k(_,"P",{class:!0});var E=M(o);c=ne(E,"generate gif emojis"),E.forEach(A),f=q(_),u=k(_,"A",{class:!0,href:!0,target:!0,rel:!0});var y=M(u);b=ne(y,"Contribute"),y.forEach(A),_.forEach(A),this.h()},h(){m(r,"class","logo svelte-1kpylo8"),Oe(r.src,n=`${Je}/demo-jumping.gif`)||m(r,"src",n),m(r,"alt",""),m(a,"class","title svelte-1kpylo8"),m(o,"class","subtitle svelte-1kpylo8"),m(u,"class","contribute svelte-1kpylo8"),m(u,"href","https://github.com/ksmai/jumping-peter"),m(u,"target","_blank"),m(u,"rel","noreferrer"),m(e,"class",p=ye(`header ${t[0]}`)+" svelte-1kpylo8")},m(d,_){ie(d,e,_),g(e,r),g(e,s),g(e,a),g(a,l),g(e,i),g(e,o),g(o,c),g(e,f),g(e,u),g(u,b)},p(d,[_]){_&1&&p!==(p=ye(`header ${d[0]}`)+" svelte-1kpylo8")&&m(e,"class",p)},i:$e,o:$e,d(d){d&&A(e)}}}function jt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Gt extends Se{constructor(e){super(),Pe(this,e,jt,Lt,Fe,{class:0})}}function He(t){return{...t,type:"slider",min:-360,max:360,step:1}}function tt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function We(t){return{...t,type:"slider",min:0,max:1,step:.01}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function at(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function nt(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Vt(t){return{...t,type:"slider",min:1,max:100,step:1}}function Et(t){return{...t,type:"toggle"}}function Xt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function Ge(){return[1,0,0,1,0,0]}function Qe(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function At(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,l,i,o,c,f]=t;t[0]=a*n-l*s,t[1]=a*s+l*n,t[2]=i*n-o*s,t[3]=i*s+o*n,t[4]=c*n-f*s,t[5]=c*s+f*n}function ke(t,e,r){t[4]+=e,t[5]+=r}function Ve(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Me(t,e,r){return t+(e-t)*r}function zt(t){return t*Math.PI/180}const qt="spinning",Wt=[He({name:"startAngle",default:0}),He({name:"endAngle",default:360}),tt({name:"originX",default:0}),tt({name:"originY",default:0}),Et({name:"alternates",default:!1})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:l,endAngle:i,originX:o,originY:c}=r;return[{program:n,geometry:s,getUniforms:u=>{const b=a?Math.min(u,1-u)*2:u,p=Me(l,i,b),d=Ge();return ke(d,-o,-c),At(d,p),ke(d,o,c),{u_transform:Ve(d)}}}]}const Yt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Wt,Name:qt,createSprites:Tt},Symbol.toStringTag,{value:"Module"})),Ht="expanding",Jt=[at({name:"minScale",default:1}),at({name:"maxScale",default:2}),Et({name:"alternates",default:!1})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:l,alternates:i}=r;return[{program:n,geometry:s,getUniforms:c=>{const f=i?Math.min(c,1-c)*2:c,u=Me(a,l,f),b=Ge();return Qe(b,u,u),{u_transform:Ve(b)}}}]}const Qt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Jt,Name:Ht,createSprites:xt},Symbol.toStringTag,{value:"Module"})),Zt="extreme-speed",Kt=[nt({name:"directionX",default:-1}),nt({name:"directionY",default:0})];function $t(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("nine"),{directionX:a,directionY:l}=r,i=a*2,o=l*2;return[{program:n,geometry:s,getUniforms:f=>{const u=Ge(),b=Me(0,i,f),p=Me(0,o,f);return ke(u,b,p),{u_transform:Ve(u)}}}]}const er=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Kt,Name:Zt,createSprites:$t},Symbol.toStringTag,{value:"Module"})),tr="excited",rr=[He({name:"angle",default:15}),rt({name:"startOffset",default:-.1}),rt({name:"endOffset",default:.1}),Vt({name:"cycles",default:2})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,startOffset:l,endOffset:i,cycles:o}=r,c=zt(a),f=Math.cos(c),u=Math.sin(c);return[{program:n,geometry:s,getUniforms:p=>{const d=p*2*o%1,_=Math.min(d,1-d)*2,h=Me(-l*u,-i*u,_),E=Me(l*f,i*f,_),y=Ge();return At(y,a),ke(y,h,E),Qe(y,p>.5?-1:1,1),{u_transform:Ve(y)}}}]}const ar=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:rr,Name:tr,createSprites:St},Symbol.toStringTag,{value:"Module"})),nr="jumping",sr=[We({name:"maxOffset",default:.5}),We({name:"compressTime",default:.4}),We({name:"maxCompress",default:.25})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:l,maxCompress:i}=r;return[{program:n,geometry:s,getUniforms:c=>{const f=Math.min(c,1-c)*2,u=Ge(),b=f/(1-l);if(b<1){const p=(1-b*b)*a*2;ke(u,0,p)}else{const p=(1-f)/l,_=1-(1-p*p)*i;ke(u,0,1),Qe(u,1/_,_),ke(u,0,-1)}return{u_transform:Ve(u)}}}]}const ir=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:sr,Name:nr,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),ze=[ir,er,Yt,ar,Qt].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Xt(t.EditOptions,t.Name)}));function st(t,e,r){switch(r.name){case"spinning":return Tt(t,e,r);case"expanding":return xt(t,e,r);case"extreme-speed":return $t(t,e,r);case"excited":return St(t,e,r);case"jumping":return Pt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class or{constructor(e){ue(this,"loadingUrl",null);ue(this,"url",null);ue(this,"texture",null);ue(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const l=a.createTexture();if(!l)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,l),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=l,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const lr=function(){var t={},e=-1,r,n,s,a,l,i,o=12,c=5003,f,u=o,b,p=1<<o,d=[],_=[],h=c,E=0,y=!1,V,O,U,R=0,X=0,J=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,C=[],N=t.LZWEncoder=function(L,$,v,P){r=L,n=$,s=v,a=Math.max(2,P)},re=function(L,$){C[Z++]=L,Z>=254&&_e($)},fe=function(L){Ee(h),E=O+2,y=!0,pe(O,L)},Ee=function(L){for(var $=0;$<L;++$)d[$]=-1},Y=t.compress=function(L,$){var v,P,K,W,le,H,T;for(V=L,y=!1,f=V,b=be(f),O=1<<L-1,U=O+1,E=O+2,Z=0,W=Ae(),T=0,v=h;v<65536;v*=2)++T;T=8-T,H=h,Ee(H),pe(O,$);e:for(;(K=Ae())!=e;){if(v=(K<<u)+W,P=K<<T^W,d[P]==v){W=_[P];continue}else if(d[P]>=0){le=H-P,P===0&&(le=1);do if((P-=le)<0&&(P+=H),d[P]==v){W=_[P];continue e}while(d[P]>=0)}pe(W,$),W=K,E<p?(_[P]=E++,d[P]=v):fe($)}pe(W,$),pe(U,$)};t.encode=function(L){L.writeByte(a),l=r*n,i=0,Y(a+1,L),L.writeByte(0)};var _e=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(C,0,Z),Z=0)},be=function(L){return(1<<L)-1},Ae=function(){if(l===0)return e;--l;var L=s[i++];return L&255},pe=function(L,$){for(R&=J[X],X>0?R|=L<<X:R=L,X+=f;X>=8;)re(R&255,$),R>>=8,X-=8;if((E>b||y)&&(y?(b=be(f=V),y=!1):(++f,f==u?b=p:b=be(f))),L==U){for(;X>0;)re(R&255,$),R>>=8,X-=8;_e($)}};return N.apply(this,arguments),t},cr=function(){var t={},e=256,r=499,n=491,s=487,a=503,l=3*a,i=e-1,o=4,c=100,f=16,u=1<<f,b=10,p=10,d=u>>p,_=u<<b-p,h=e>>3,E=6,y=1<<E,V=h*y,O=30,U=10,R=1<<U,X,J=8,Z=1<<J,C=U+J,N=1<<C,re,fe,Ee,Y,_e=[],be=[],Ae=[],pe=[],te=t.NeuQuant=function(T,S,j){var I,B;for(re=T,fe=S,Ee=j,Y=new Array(e),I=0;I<e;I++)Y[I]=new Array(4),B=Y[I],B[0]=B[1]=B[2]=(I<<o+8)/e,Ae[I]=u/e,be[I]=0},L=function(){for(var T=[],S=new Array(e),j=0;j<e;j++)S[Y[j][3]]=j;for(var I=0,B=0;B<e;B++){var w=S[B];T[I++]=Y[w][0],T[I++]=Y[w][1],T[I++]=Y[w][2]}return T},$=function(){var T,S,j,I,B,w,x,D;for(x=0,D=0,T=0;T<e;T++){for(B=Y[T],j=T,I=B[1],S=T+1;S<e;S++)w=Y[S],w[1]<I&&(j=S,I=w[1]);if(w=Y[j],T!=j&&(S=w[0],w[0]=B[0],B[0]=S,S=w[1],w[1]=B[1],B[1]=S,S=w[2],w[2]=B[2],B[2]=S,S=w[3],w[3]=B[3],B[3]=S),I!=x){for(_e[x]=D+T>>1,S=x+1;S<I;S++)_e[S]=T;x=I,D=T}}for(_e[x]=D+i>>1,S=x+1;S<256;S++)_e[S]=i},v=function(){var T,S,j,I,B,w,x,D,G,ee,ge,Q,ce,Ze;for(fe<l&&(Ee=1),X=30+(Ee-1)/3,Q=re,ce=0,Ze=fe,ge=fe/(3*Ee),ee=ge/c|0,D=R,w=V,x=w>>E,x<=1&&(x=0),T=0;T<x;T++)pe[T]=D*((x*x-T*T)*Z/(x*x));for(fe<l?G=3:fe%r!==0?G=3*r:fe%n!==0?G=3*n:fe%s!==0?G=3*s:G=3*a,T=0;T<ge;)if(j=(Q[ce+0]&255)<<o,I=(Q[ce+1]&255)<<o,B=(Q[ce+2]&255)<<o,S=le(j,I,B),W(D,S,j,I,B),x!==0&&K(x,S,j,I,B),ce+=G,ce>=Ze&&(ce-=fe),T++,ee===0&&(ee=1),T%ee===0)for(D-=D/X,w-=w/O,x=w>>E,x<=1&&(x=0),S=0;S<x;S++)pe[S]=D*((x*x-S*S)*Z/(x*x))};t.map=function(T,S,j){var I,B,w,x,D,G,ee;for(D=1e3,ee=-1,I=_e[S],B=I-1;I<e||B>=0;)I<e&&(G=Y[I],w=G[1]-S,w>=D?I=e:(I++,w<0&&(w=-w),x=G[0]-T,x<0&&(x=-x),w+=x,w<D&&(x=G[2]-j,x<0&&(x=-x),w+=x,w<D&&(D=w,ee=G[3])))),B>=0&&(G=Y[B],w=S-G[1],w>=D?B=-1:(B--,w<0&&(w=-w),x=G[0]-T,x<0&&(x=-x),w+=x,w<D&&(x=G[2]-j,x<0&&(x=-x),w+=x,w<D&&(D=w,ee=G[3]))));return ee},t.process=function(){return v(),P(),$(),L()};var P=function(){var T;for(T=0;T<e;T++)Y[T][0]>>=o,Y[T][1]>>=o,Y[T][2]>>=o,Y[T][3]=T},K=function(T,S,j,I,B){var w,x,D,G,ee,ge,Q;for(D=S-T,D<-1&&(D=-1),G=S+T,G>e&&(G=e),w=S+1,x=S-1,ge=1;w<G||x>D;){if(ee=pe[ge++],w<G){Q=Y[w++];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-I)/N,Q[2]-=ee*(Q[2]-B)/N}catch{}}if(x>D){Q=Y[x--];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-I)/N,Q[2]-=ee*(Q[2]-B)/N}catch{}}}},W=function(T,S,j,I,B){var w=Y[S];w[0]-=T*(w[0]-j)/R,w[1]-=T*(w[1]-I)/R,w[2]-=T*(w[2]-B)/R},le=function(T,S,j){var I,B,w,x,D,G,ee,ge,Q,ce;for(ge=~(1<<31),Q=ge,G=-1,ee=G,I=0;I<e;I++)ce=Y[I],B=ce[0]-T,B<0&&(B=-B),w=ce[1]-S,w<0&&(w=-w),B+=w,w=ce[2]-j,w<0&&(w=-w),B+=w,B<ge&&(ge=B,G=I),x=B-(be[I]>>f-o),x<Q&&(Q=x,ee=I),D=Ae[I]>>p,Ae[I]-=D,be[I]+=D<<b;return Ae[G]+=d,be[G]-=_,ee};return te.apply(this,arguments),t},fr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var $="",v=this.bin.length,P=0;P<v;P++)$+=e[this.bin[P]];return $},r.prototype.writeByte=function($){this.bin.push($)},r.prototype.writeUTFBytes=function($){for(var v=$.length,P=0;P<v;P++)this.writeByte($.charCodeAt(P))},r.prototype.writeBytes=function($,v,P){for(var K=P||$.length,W=v||0;W<K;W++)this.writeByte($[W])};var n={},s,a,l=null,i,o=-1,c=0,f=!1,u,b,p,d,_,h,E=[],y=7,V=-1,O=!1,U=!0,R=!1,X=10,J="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(v){c=Math.round(v/10)},n.setDispose=function(v){v>=0&&(V=v)},n.setRepeat=function(v){v>=0&&(o=v)},n.setTransparent=function(v){l=v},n.setComment=function(v){J=v},n.addFrame=function(v,P){if(v===null||!f||u===null)throw new Error("Please call start method before calling addFrame");var K=!0;try{P?v instanceof ImageData?(b=v.data,(!sizeset||s!=v.width||a!=v.height)&&C(v.width,v.height)):v instanceof Uint8ClampedArray?v.length==s*a*4?b=v:(console.log("Please set the correct size: ImageData length mismatch"),K=!1):(console.log("Please provide correct input"),K=!1):(b=v.getImageData(0,0,v.canvas.width,v.canvas.height).data,R||C(v.canvas.width,v.canvas.height)),fe(),N(),U&&(be(),pe(),o>=0&&Ae()),Ee(),J!==""&&Y(),_e(),U||pe(),L(),U=!1}catch{K=!1}return K},n.download=function(v){if(u===null||O==!1)console.log("Please call start method and add frames and call finish method before calling download");else{v=v!==void 0?v.endsWith(".gif")?v:v+".gif":"download.gif";var P=document.createElement("a");P.download=v,P.href=URL.createObjectURL(new Blob([new Uint8Array(u.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!f)return!1;var v=!0;f=!1;try{u.writeByte(59),O=!0}catch{v=!1}return v};var Z=function(){i=0,b=null,p=null,d=null,h=null,O=!1,U=!0};n.setFrameRate=function(v){v!=15&&(c=Math.round(100/v))},n.setQuality=function(v){v<1&&(v=1),X=v};var C=n.setSize=function(v,P){f&&!U||(s=v,a=P,s<1&&(s=320),a<1&&(a=240),R=!0)};n.start=function(){Z();var v=!0;O=!1,u=new r;try{u.writeUTFBytes("GIF89a")}catch{v=!1}return f=v},n.cont=function(){Z();var v=!0;return O=!1,u=new r,f=v};var N=function(){var v=p.length,P=v/3;d=[];var K=new cr(p,v,X);h=K.process();for(var W=0,le=0;le<P;le++){var H=K.map(p[W++]&255,p[W++]&255,p[W++]&255);E[H]=!0,d[le]=H}p=null,_=8,y=7,l!==null&&(i=re(l))},re=function(v){if(h===null)return-1;for(var P=(v&16711680)>>16,K=(v&65280)>>8,W=v&255,le=0,H=256*256*256,T=h.length,S=0;S<T;){var j=P-(h[S++]&255),I=K-(h[S++]&255),B=W-(h[S]&255),w=j*j+I*I+B*B,x=S/3;E[x]&&w<H&&(H=w,le=x),S++}return le},fe=function(){var v=s,P=a;p=[];for(var K=b,W=0,le=0;le<P;le++)for(var H=0;H<v;H++){var T=le*v*4+H*4;p[W++]=K[T],p[W++]=K[T+1],p[W++]=K[T+2]}},Ee=function(){u.writeByte(33),u.writeByte(249),u.writeByte(4);var v,P;l===null?(v=0,P=0):(v=1,P=2),V>=0&&(P=V&7),P<<=2,u.writeByte(0|P|0|v),te(c),u.writeByte(i),u.writeByte(0)},Y=function(){u.writeByte(33),u.writeByte(254),u.writeByte(J.length),u.writeUTFBytes(J),u.writeByte(0)},_e=function(){u.writeByte(44),te(0),te(0),te(s),te(a),U?u.writeByte(0):u.writeByte(128|y)},be=function(){te(s),te(a),u.writeByte(240|y),u.writeByte(0),u.writeByte(0)},Ae=function(){u.writeByte(33),u.writeByte(255),u.writeByte(11),u.writeUTFBytes("NETSCAPE2.0"),u.writeByte(3),u.writeByte(1),te(o),u.writeByte(0)},pe=function(){u.writeBytes(h);for(var v=3*256-h.length,P=0;P<v;P++)u.writeByte(0)},te=function(v){u.writeByte(v&255),u.writeByte(v>>8&255)},L=function(){var v=new lr(s,a,d,_);v.encode(u)};return n.stream=function(){return u},n.setProperties=function(v,P){f=v,U=P},n},we={a_position:0,a_texCoords:1},it={default:{vertex:`#version 300 es

layout(location = ${we.a_position}) in vec2 a_position;
layout(location = ${we.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class ur{constructor(e){ue(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:dr(this.gl,it[e].vertex,it[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function mr(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function dr(t,e,r){const n=ot(t,t.VERTEX_SHADER,e);let s;try{s=ot(t,t.FRAGMENT_SHADER,r)}catch(l){throw t.deleteShader(n),l}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const l=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${l}`)}return a}function ot(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function lt(t,e,r,n){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT);let s,a,l;for(const i of r){s!==i.program&&(t.useProgram(i.program.program),s=i.program),a!==i.geometry&&(t.bindVertexArray(i.geometry.vao),a=i.geometry),l!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),l=n);const o={u_image:n.unit,...i.getUniforms(e)};mr(t,i.program,o),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}const vr={full(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(we.a_position),t.vertexAttribPointer(we.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(we.a_texCoords),t.vertexAttribPointer(we.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}},nine(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-3,-3,0,3,3,-3,3,3,-3,3,0,0,3,3,3,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(we.a_position),t.vertexAttribPointer(we.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(we.a_texCoords),t.vertexAttribPointer(we.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}};class hr{constructor(e){ue(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=vr[e](this.gl)),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class pr{constructor(e){ue(this,"gl");ue(this,"programFactory");ue(this,"geometryFactory");ue(this,"texture");ue(this,"queue",[]);ue(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new ur(this.gl),this.geometryFactory=new hr(this.gl),this.texture=new or(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new fr;if(a.setRepeat(0),a.setDelay(e.gif.delayMs),a.setSize(e.gif.width,e.gif.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:st(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:st(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let l=0;l<this.queue.length-1;++l)this.queue[l].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];if((e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.gif.imageUrl),this.canvas.width=r.gif.width,this.canvas.height=r.gif.height),e==="frame")lt(this.gl,a/r.gif.totalFrames,s,this.texture),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:l,sprites:i,callback:o}=this.queue[0];lt(this.gl,a/r.gif.totalFrames,i,this.texture),o(a);const c=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,c),l.addFrame(c,!0),l.setTransparent(16777215),a===r.gif.totalFrames-1){l.finish();const f=l.stream().getData(),u="data:image/gif;base64,"+window.btoa(f);n({dataUri:u}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ne=function(){const{subscribe:t,update:e}=qe(ze[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=ze.find(l=>l.name===n);return a||s})}}}(),Ue=function(){const t=`${Je}/favicon.png`,{subscribe:e,update:r}=qe({width:64,height:64,delayMs:50,totalFrames:20,imageUrl:t});function n(a){r(l=>({...l,...a}))}function s(a){r(l=>(l.imageUrl!==t&&URL.revokeObjectURL(l.imageUrl),{...l,imageUrl:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Le=function(){const{subscribe:t,update:e}=qe(void 0,n=>Ne.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),Ce=function(){const t=qe({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(l){r(i=>{var o;return(o=i.animator)==null||o.destroy(),{animator:new pr(l),running:!1,frame:0}})}function s(){const{animator:l}=Be(t);return l?(r(i=>({...i,running:!0,frame:0})),l.animate({gif:Be(Ue),animation:Be(Le)},i=>r(o=>({...o,frame:i}))).finally(()=>{r(i=>({...i,running:!1}))})):Promise.reject("Animator has not been created")}function a(l){const{animator:i,frame:o}=Be(t);if(!i)return Promise.reject("Animator has not been created");let c;typeof l>"u"?c=o:c=l;const f=Be(Ue);return c>=f.totalFrames&&(c=f.totalFrames-1),r(u=>({...u,frame:c,running:!0})),i.renderFrame({gif:f,animation:Be(Le)},c).finally(()=>{r(u=>({...u,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ct(t){let e,r,n,s,a,l;return{c(){e=F("label"),r=ae(t[1]),n=z(),s=F("input"),this.h()},l(i){e=k(i,"LABEL",{class:!0});var o=M(e);r=ne(o,t[1]),n=q(o),s=k(o,"INPUT",{class:!0,type:!0}),o.forEach(A),this.h()},h(){m(s,"class","slider__text-input svelte-xvphrk"),m(s,"type","text"),s.value=t[0],m(e,"class","slider__label svelte-xvphrk")},m(i,o){ie(i,e,o),g(e,r),g(e,n),g(e,s),a||(l=je(s,"input",t[5]),a=!0)},p(i,o){o&2&&Ie(r,i[1]),o&1&&s.value!==i[0]&&(s.value=i[0])},d(i){i&&A(e),a=!1,l()}}}function gr(t){let e,r,n,s,a=Xe(t[2])+"",l,i,o,c,f,u,b=Xe(t[3])+"",p,d,_,h=t[1]&&ct(t);return{c(){e=F("div"),h&&h.c(),r=z(),n=F("div"),s=F("span"),l=ae(a),i=z(),o=F("div"),c=F("input"),f=z(),u=F("span"),p=ae(b),this.h()},l(E){e=k(E,"DIV",{class:!0});var y=M(e);h&&h.l(y),r=q(y),n=k(y,"DIV",{class:!0});var V=M(n);s=k(V,"SPAN",{class:!0});var O=M(s);l=ne(O,a),O.forEach(A),i=q(V),o=k(V,"DIV",{class:!0});var U=M(o);c=k(U,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),U.forEach(A),f=q(V),u=k(V,"SPAN",{class:!0});var R=M(u);p=ne(R,b),R.forEach(A),V.forEach(A),y.forEach(A),this.h()},h(){m(s,"class","slider__range slider__range--min svelte-xvphrk"),m(c,"class","slider__input svelte-xvphrk"),m(c,"type","range"),m(c,"min",t[2]),m(c,"max",t[3]),m(c,"step",t[4]),c.value=t[0],m(o,"class","slider__input-container svelte-xvphrk"),m(u,"class","slider__range slider__range--max svelte-xvphrk"),m(n,"class","slider__container svelte-xvphrk"),m(e,"class","slider")},m(E,y){ie(E,e,y),h&&h.m(e,null),g(e,r),g(e,n),g(n,s),g(s,l),g(n,i),g(n,o),g(o,c),g(n,f),g(n,u),g(u,p),d||(_=je(c,"input",t[5]),d=!0)},p(E,[y]){E[1]?h?h.p(E,y):(h=ct(E),h.c(),h.m(e,r)):h&&(h.d(1),h=null),y&4&&a!==(a=Xe(E[2])+"")&&Ie(l,a),y&4&&m(c,"min",E[2]),y&8&&m(c,"max",E[3]),y&16&&m(c,"step",E[4]),y&1&&(c.value=E[0]),y&8&&b!==(b=Xe(E[3])+"")&&Ie(p,b)},i:$e,o:$e,d(E){E&&A(e),h&&h.d(),d=!1,_()}}}function Xe(t){return+(Math.round(t+"e+2")+"e-2")}function _r(t,e,r){const n=_t();let{label:s=""}=e,{min:a=0}=e,{max:l=100}=e,{step:i=1}=e,{value:o=l<a?a:(l-a)/2}=e;function c(f){const u=f.target,b=parseFloat(u.value);Number.isNaN(b)||(r(0,o=b),n("input",{value:o}))}return t.$$set=f=>{"label"in f&&r(1,s=f.label),"min"in f&&r(2,a=f.min),"max"in f&&r(3,l=f.max),"step"in f&&r(4,i=f.step),"value"in f&&r(0,o=f.value)},[o,s,a,l,i,c]}class Re extends Se{constructor(e){super(),Pe(this,e,_r,gr,Fe,{label:1,min:2,max:3,step:4,value:0})}}function br(t){let e,r,n,s,a,l,i,o,c,f,u,b,p,d,_,h,E,y,V,O;return f=new Re({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),f.$on("input",t[3]("width")),b=new Re({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),b.$on("input",t[3]("height")),d=new Re({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[1].delayMs}}),d.$on("input",t[3]("delayMs")),h=new Re({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[1].totalFrames}}),h.$on("input",t[3]("totalFrames")),{c(){e=F("aside"),r=F("label"),n=ae(`Upload image

    `),s=F("input"),a=z(),l=F("div"),i=F("img"),c=z(),me(f.$$.fragment),u=z(),me(b.$$.fragment),p=z(),me(d.$$.fragment),_=z(),me(h.$$.fragment),this.h()},l(U){e=k(U,"ASIDE",{class:!0});var R=M(e);r=k(R,"LABEL",{class:!0});var X=M(r);n=ne(X,`Upload image

    `),s=k(X,"INPUT",{class:!0,type:!0,accept:!0}),a=q(X),l=k(X,"DIV",{class:!0});var J=M(l);i=k(J,"IMG",{class:!0,src:!0,alt:!0}),J.forEach(A),X.forEach(A),c=q(R),de(f.$$.fragment,R),u=q(R),de(b.$$.fragment,R),p=q(R),de(d.$$.fragment,R),_=q(R),de(h.$$.fragment,R),R.forEach(A),this.h()},h(){m(s,"class","image__input svelte-1wsjlr5"),m(s,"type","file"),m(s,"accept","image/*"),m(i,"class","image__preview svelte-1wsjlr5"),Oe(i.src,o=t[1].imageUrl)||m(i,"src",o),m(i,"alt","source"),m(l,"class","image__container svelte-1wsjlr5"),m(r,"class","image svelte-1wsjlr5"),m(e,"class",E=ye(`container ${t[0]}`)+" svelte-1wsjlr5")},m(U,R){ie(U,e,R),g(e,r),g(r,n),g(r,s),g(r,a),g(r,l),g(l,i),g(e,c),ve(f,e,null),g(e,u),ve(b,e,null),g(e,p),ve(d,e,null),g(e,_),ve(h,e,null),y=!0,V||(O=je(s,"input",t[2]),V=!0)},p(U,[R]){(!y||R&2&&!Oe(i.src,o=U[1].imageUrl))&&m(i,"src",o);const X={};R&2&&(X.value=U[1].width),f.$set(X);const J={};R&2&&(J.value=U[1].height),b.$set(J);const Z={};R&2&&(Z.value=U[1].delayMs),d.$set(Z);const C={};R&2&&(C.value=U[1].totalFrames),h.$set(C),(!y||R&1&&E!==(E=ye(`container ${U[0]}`)+" svelte-1wsjlr5"))&&m(e,"class",E)},i(U){y||(se(f.$$.fragment,U),se(b.$$.fragment,U),se(d.$$.fragment,U),se(h.$$.fragment,U),y=!0)},o(U){oe(f.$$.fragment,U),oe(b.$$.fragment,U),oe(d.$$.fragment,U),oe(h.$$.fragment,U),y=!1},d(U){U&&A(e),he(f),he(b),he(d),he(h),V=!1,O()}}}function wr(t,e,r){let n;Te(t,Ue,i=>r(1,n=i));let{class:s=""}=e;function a(i){var f;const c=(f=i.target.files)==null?void 0:f[0];c&&Ue.changeImage(c)}function l(i){return function(o){Ue.change({[i]:o.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,s=i.class)},[s,n,a,l]}class yr extends Se{constructor(e){super(),Pe(this,e,wr,br,Fe,{class:0})}}function Er(t){let e,r,n,s,a,l,i;return{c(){e=F("div"),r=ae(t[1]),n=z(),s=F("label"),a=F("input"),this.h()},l(o){e=k(o,"DIV",{class:!0});var c=M(e);r=ne(c,t[1]),n=q(c),s=k(c,"LABEL",{class:!0});var f=M(s);a=k(f,"INPUT",{class:!0,type:!0}),f.forEach(A),c.forEach(A),this.h()},h(){m(a,"class","toggle__checkbox svelte-1j9rfin"),m(a,"type","checkbox"),a.checked=t[0],m(s,"class","toggle__label svelte-1j9rfin"),xe(s,"toggle__label--active",t[0]),m(e,"class","toggle svelte-1j9rfin")},m(o,c){ie(o,e,c),g(e,r),g(e,n),g(e,s),g(s,a),l||(i=je(a,"change",t[2]),l=!0)},p(o,[c]){c&2&&Ie(r,o[1]),c&1&&(a.checked=o[0]),c&1&&xe(s,"toggle__label--active",o[0])},i:$e,o:$e,d(o){o&&A(e),l=!1,i()}}}function Ar(t,e,r){const n=_t();let{label:s=""}=e,{value:a=!1}=e;function l(i){const o=i.target;r(0,a=Boolean(o.checked)),n("change",{value:a})}return t.$$set=i=>{"label"in i&&r(1,s=i.label),"value"in i&&r(0,a=i.value)},[a,s,l]}class Ft extends Se{constructor(e){super(),Pe(this,e,Ar,Er,Fe,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[5]=e[r],n}function Tr(t){let e,r;return e=new Ft({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){yt(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){oe(e.$$.fragment,n),r=!1},d(n){he(e,n)}}}function xr(t){let e,r;return e=new Re({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){yt(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){ve(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){oe(e.$$.fragment,n),r=!1},d(n){he(e,n)}}}function ut(t){let e,r,n,s;const a=[xr,Tr],l=[];function i(o,c){return o[5].type==="slider"?0:o[5].type==="toggle"?1:-1}return~(e=i(t))&&(r=l[e]=a[e](t)),{c(){r&&r.c(),n=Ke()},l(o){r&&r.l(o),n=Ke()},m(o,c){~e&&l[e].m(o,c),ie(o,n,c),s=!0},p(o,c){let f=e;e=i(o),e===f?~e&&l[e].p(o,c):(r&&(bt(),oe(l[f],1,1,()=>{l[f]=null}),wt()),~e?(r=l[e],r?r.p(o,c):(r=l[e]=a[e](o),r.c()),se(r,1),r.m(n.parentNode,n)):r=null)},i(o){s||(se(r),s=!0)},o(o){oe(r),s=!1},d(o){~e&&l[e].d(o),o&&A(n)}}}function $r(t){let e,r,n,s=t[2].editOptions,a=[];for(let i=0;i<s.length;i+=1)a[i]=ut(ft(t,s,i));const l=i=>oe(a[i],1,1,()=>{a[i]=null});return{c(){e=F("aside");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=k(i,"ASIDE",{class:!0});var o=M(e);for(let c=0;c<a.length;c+=1)a[c].l(o);o.forEach(A),this.h()},h(){m(e,"class",r=ye(`container ${t[0]}`)+" svelte-1solget")},m(i,o){ie(i,e,o);for(let c=0;c<a.length;c+=1)a[c].m(e,null);n=!0},p(i,[o]){if(o&14){s=i[2].editOptions;let c;for(c=0;c<s.length;c+=1){const f=ft(i,s,c);a[c]?(a[c].p(f,o),se(a[c],1)):(a[c]=ut(f),a[c].c(),se(a[c],1),a[c].m(e,null))}for(bt(),c=s.length;c<a.length;c+=1)l(c);wt()}(!n||o&1&&r!==(r=ye(`container ${i[0]}`)+" svelte-1solget"))&&m(e,"class",r)},i(i){if(!n){for(let o=0;o<s.length;o+=1)se(a[o]);n=!0}},o(i){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)oe(a[o]);n=!1},d(i){i&&A(e),Bt(a,i)}}}function Sr(t,e,r){let n,s,a;Te(t,Le,o=>r(4,s=o)),Te(t,Ne,o=>r(2,a=o));let{class:l=""}=e;function i(o){return function(c){Le.change({[o]:c.detail.value})}}return t.$$set=o=>{"class"in o&&r(0,l=o.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[l,n,a,i,s]}class Pr extends Se{constructor(e){super(),Pe(this,e,Sr,$r,Fe,{class:0})}}function mt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function dt(t,e){let r,n,s,a,l,i=e[4]+"",o,c,f,u;function b(){return e[3](e[4])}return{key:t,first:null,c(){r=F("button"),n=F("img"),a=z(),l=F("span"),o=ae(i),c=z(),this.h()},l(p){r=k(p,"BUTTON",{type:!0,class:!0});var d=M(r);n=k(d,"IMG",{class:!0,src:!0,alt:!0}),a=q(d),l=k(d,"SPAN",{});var _=M(l);o=ne(_,i),_.forEach(A),c=q(d),d.forEach(A),this.h()},h(){m(n,"class","image svelte-18ktnr0"),Oe(n.src,s=`${Je}/demo-${e[4]}.gif`)||m(n,"src",s),m(n,"alt",e[4]),m(r,"type","button"),m(r,"class","option svelte-18ktnr0"),xe(r,"option--selected",e[4]===e[1].name),this.first=r},m(p,d){ie(p,r,d),g(r,n),g(r,a),g(r,l),g(l,o),g(r,c),f||(u=je(r,"click",b),f=!0)},p(p,d){e=p,d&2&&xe(r,"option--selected",e[4]===e[1].name)},d(p){p&&A(r),f=!1,u()}}}function Fr(t){let e,r=[],n=new Map,s,a=ze;const l=i=>i[4];for(let i=0;i<a.length;i+=1){let o=mt(t,a,i),c=l(o);n.set(c,r[i]=dt(c,o))}return{c(){e=F("aside");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=k(i,"ASIDE",{class:!0});var o=M(e);for(let c=0;c<r.length;c+=1)r[c].l(o);o.forEach(A),this.h()},h(){m(e,"class",s=ye(`container ${t[0]}`)+" svelte-18ktnr0")},m(i,o){ie(i,e,o);for(let c=0;c<r.length;c+=1)r[c].m(e,null)},p(i,[o]){o&6&&(a=ze,r=Rt(r,o,l,1,i,a,n,e,Ut,dt,null,mt)),o&1&&s!==(s=ye(`container ${i[0]}`)+" svelte-18ktnr0")&&m(e,"class",s)},i:$e,o:$e,d(i){i&&A(e);for(let o=0;o<r.length;o+=1)r[o].d()}}}function kr(t,e,r){let n;Te(t,Ne,i=>r(1,n=i));let{class:s=""}=e;function a(i){i!==n.name&&Ne.change(i)}const l=i=>a(i);return t.$$set=i=>{"class"in i&&r(0,s=i.class)},[s,n,a,l]}class Ir extends Se{constructor(e){super(),Pe(this,e,kr,Fr,Fe,{class:0})}}function vt(t){t[13]=t[14].dataUri}function ht(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Ur,then:Rr,catch:Br,value:14,error:15};return et(r=t[4],n),{c(){e=F("div"),n.block.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var a=M(e);n.block.l(a),a.forEach(A),this.h()},h(){m(e,"class","preview__container preview__container--no-debug svelte-4d3008")},m(s,a){ie(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&et(r,n)||Ct(n,t,a)},d(s){s&&A(e),n.block.d(),n.token=null,n=null}}}function Br(t){let e,r,n=t[15]+"",s;return{c(){e=F("p"),r=ae("An error has occurred: "),s=ae(n),this.h()},l(a){e=k(a,"P",{class:!0});var l=M(e);r=ne(l,"An error has occurred: "),s=ne(l,n),l.forEach(A),this.h()},h(){m(e,"class","preview__error svelte-4d3008")},m(a,l){ie(a,e,l),g(e,r),g(e,s)},p(a,l){l&16&&n!==(n=a[15]+"")&&Ie(s,n)},d(a){a&&A(e)}}}function Rr(t){vt(t);let e,r,n,s,a,l,i;return{c(){e=F("div"),r=F("img"),s=z(),a=F("a"),l=ae("Download"),this.h()},l(o){e=k(o,"DIV",{class:!0});var c=M(e);r=k(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach(A),s=q(o),a=k(o,"A",{class:!0,download:!0,href:!0});var f=M(a);l=ne(f,"Download"),f.forEach(A),this.h()},h(){m(r,"class","preview__image svelte-4d3008"),Oe(r.src,n=t[13])||m(r,"src",n),m(r,"alt","generated gif"),m(e,"class","preview__image-container svelte-4d3008"),m(a,"class","preview__download-button svelte-4d3008"),m(a,"download","jumping_peter.gif"),m(a,"href",i=t[13])},m(o,c){ie(o,e,c),g(e,r),ie(o,s,c),ie(o,a,c),g(a,l)},p(o,c){vt(o),c&16&&!Oe(r.src,n=o[13])&&m(r,"src",n),c&16&&i!==(i=o[13])&&m(a,"href",i)},d(o){o&&A(e),o&&A(s),o&&A(a)}}}function Ur(t){let e,r,n,s,a,l,i=t[5].frame+"",o,c,f=t[2].totalFrames+"",u,b,p,d,_,h;return{c(){e=F("div"),r=F("p"),n=ae("Generating..."),s=z(),a=F("p"),l=ae("["),o=ae(i),c=ae(" / "),u=ae(f),b=ae("]"),p=z(),d=F("progress"),this.h()},l(E){e=k(E,"DIV",{class:!0});var y=M(e);r=k(y,"P",{});var V=M(r);n=ne(V,"Generating..."),V.forEach(A),s=q(y),a=k(y,"P",{});var O=M(a);l=ne(O,"["),o=ne(O,i),c=ne(O," / "),u=ne(O,f),b=ne(O,"]"),O.forEach(A),p=q(y),d=k(y,"PROGRESS",{class:!0,max:!0}),M(d).forEach(A),y.forEach(A),this.h()},h(){m(d,"class","preview__progress svelte-4d3008"),m(d,"max",_=t[2].totalFrames),d.value=h=t[5].frame,m(e,"class","preview__loading svelte-4d3008")},m(E,y){ie(E,e,y),g(e,r),g(r,n),g(e,s),g(e,a),g(a,l),g(a,o),g(a,c),g(a,u),g(a,b),g(e,p),g(e,d)},p(E,y){y&32&&i!==(i=E[5].frame+"")&&Ie(o,i),y&4&&f!==(f=E[2].totalFrames+"")&&Ie(u,f),y&4&&_!==(_=E[2].totalFrames)&&m(d,"max",_),y&32&&h!==(h=E[5].frame)&&(d.value=h)},d(E){E&&A(e)}}}function Or(t){let e,r,n,s,a,l,i,o,c,f,u,b;n=new Ft({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[4]&&ht(t);return f=new Re({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),f.$on("input",t[6]),{c(){e=F("main"),r=F("div"),me(n.$$.fragment),s=z(),p&&p.c(),a=z(),l=F("div"),i=F("div"),o=F("canvas"),c=z(),me(f.$$.fragment),this.h()},l(d){e=k(d,"MAIN",{class:!0});var _=M(e);r=k(_,"DIV",{class:!0});var h=M(r);de(n.$$.fragment,h),h.forEach(A),s=q(_),p&&p.l(_),a=q(_),l=k(_,"DIV",{class:!0});var E=M(l);i=k(E,"DIV",{class:!0});var y=M(i);o=k(y,"CANVAS",{class:!0,style:!0}),M(o).forEach(A),y.forEach(A),c=q(E),de(f.$$.fragment,E),E.forEach(A),_.forEach(A),this.h()},h(){m(r,"class","preview__debug-input svelte-4d3008"),m(o,"class","preview__image svelte-4d3008"),Ot(o,"transform","scaleY(-1)"),m(i,"class","preview__image-container svelte-4d3008"),m(l,"class","preview__container preview__container--debug svelte-4d3008"),m(e,"class",u=ye(`preview ${t[0]}`)+" svelte-4d3008"),xe(e,"preview--debug",t[1]),xe(e,"preview--no-debug",!t[1])},m(d,_){ie(d,e,_),g(e,r),ve(n,r,null),g(e,s),p&&p.m(e,null),g(e,a),g(e,l),g(l,i),g(i,o),t[10](o),g(l,c),ve(f,l,null),b=!0},p(d,[_]){const h={};_&2&&(h.value=d[1]),n.$set(h),!d[1]&&d[4]?p?p.p(d,_):(p=ht(d),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const E={};_&4&&(E.max=d[2].totalFrames-1),_&32&&(E.value=d[5].frame),f.$set(E),(!b||_&1&&u!==(u=ye(`preview ${d[0]}`)+" svelte-4d3008"))&&m(e,"class",u),(!b||_&3)&&xe(e,"preview--debug",d[1]),(!b||_&3)&&xe(e,"preview--no-debug",!d[1])},i(d){b||(se(n.$$.fragment,d),se(f.$$.fragment,d),b=!0)},o(d){oe(n.$$.fragment,d),oe(f.$$.fragment,d),b=!1},d(d){d&&A(e),he(n),p&&p.d(),t[10](null),he(f)}}}function Mr(t,e,r){let n,s,a,l;Te(t,Ne,h=>r(8,n=h)),Te(t,Le,h=>r(9,s=h)),Te(t,Ue,h=>r(2,a=h)),Te(t,Ce,h=>r(5,l=h));let i,{class:o=""}=e,c=!1,f=null;function u(){Ce.renderFrame().catch(h=>{throw console.error(`renderFrame failed: ${h}`),h})}function b(){r(4,f=Ce.animate().catch(h=>{throw console.error(`animate failed: ${h}`),h}))}Mt(()=>{Ce.changeCanvas(i),b()});function p(h){Ce.renderFrame(h.detail.value).catch(E=>console.error(`Animation failed: ${E}`))}function d(h){r(1,c=h.detail.value)}function _(h){Dt[h?"unshift":"push"](()=>{i=h,r(3,i)})}return t.$$set=h=>{"class"in h&&r(0,o=h.class)},t.$$.update=()=>{t.$$.dirty&774&&(c?u():b())},[o,c,a,i,f,l,p,d,n,s,_]}class Cr extends Se{constructor(e){super(),Pe(this,e,Mr,Or,Fe,{class:0})}}function Dr(t){let e,r,n,s,a,l,i,o,c,f,u,b,p,d,_,h,E,y,V,O,U,R,X,J,Z;return document.title=e=De,h=new Gt({props:{class:"header"}}),y=new Ir({props:{class:"animations"}}),O=new yr({props:{class:"gif-options"}}),R=new Pr({props:{class:"animation-options"}}),J=new Cr({props:{class:"preview"}}),{c(){r=F("meta"),n=F("meta"),s=F("meta"),a=F("meta"),l=F("meta"),i=F("meta"),o=F("meta"),c=F("meta"),f=F("meta"),u=F("meta"),b=F("meta"),p=F("meta"),d=z(),_=F("div"),me(h.$$.fragment),E=z(),me(y.$$.fragment),V=z(),me(O.$$.fragment),U=z(),me(R.$$.fragment),X=z(),me(J.$$.fragment),this.h()},l(C){const N=Nt("svelte-2dqrj",document.head);r=k(N,"META",{name:!0,content:!0,class:!0}),n=k(N,"META",{name:!0,content:!0,class:!0}),s=k(N,"META",{property:!0,content:!0,class:!0}),a=k(N,"META",{property:!0,content:!0,class:!0}),l=k(N,"META",{property:!0,content:!0,class:!0}),i=k(N,"META",{property:!0,content:!0,class:!0}),o=k(N,"META",{property:!0,content:!0,class:!0}),c=k(N,"META",{property:!0,content:!0,class:!0}),f=k(N,"META",{property:!0,content:!0,class:!0}),u=k(N,"META",{property:!0,content:!0,class:!0}),b=k(N,"META",{property:!0,content:!0,class:!0}),p=k(N,"META",{property:!0,content:!0,class:!0}),N.forEach(A),d=q(C),_=k(C,"DIV",{class:!0});var re=M(_);de(h.$$.fragment,re),E=q(re),de(y.$$.fragment,re),V=q(re),de(O.$$.fragment,re),U=q(re),de(R.$$.fragment,re),X=q(re),de(J.$$.fragment,re),re.forEach(A),this.h()},h(){m(r,"name","title"),m(r,"content",De),m(r,"class","svelte-vglu9v"),m(n,"name","description"),m(n,"content",Ye),m(n,"class","svelte-vglu9v"),m(s,"property","og:type"),m(s,"content","website"),m(s,"class","svelte-vglu9v"),m(a,"property","og:url"),m(a,"content",pt),m(a,"class","svelte-vglu9v"),m(l,"property","og:title"),m(l,"content",De),m(l,"class","svelte-vglu9v"),m(i,"property","og:description"),m(i,"content",Ye),m(i,"class","svelte-vglu9v"),m(o,"property","og:image"),m(o,"content",gt),m(o,"class","svelte-vglu9v"),m(c,"property","twitter:card"),m(c,"content","summary_large_image"),m(c,"class","svelte-vglu9v"),m(f,"property","twitter:url"),m(f,"content",pt),m(f,"class","svelte-vglu9v"),m(u,"property","twitter:title"),m(u,"content",De),m(u,"class","svelte-vglu9v"),m(b,"property","twitter:description"),m(b,"content",Ye),m(b,"class","svelte-vglu9v"),m(p,"property","twitter:image"),m(p,"content",gt),m(p,"class","svelte-vglu9v"),m(_,"class","grid svelte-vglu9v")},m(C,N){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,l),g(document.head,i),g(document.head,o),g(document.head,c),g(document.head,f),g(document.head,u),g(document.head,b),g(document.head,p),ie(C,d,N),ie(C,_,N),ve(h,_,null),g(_,E),ve(y,_,null),g(_,V),ve(O,_,null),g(_,U),ve(R,_,null),g(_,X),ve(J,_,null),Z=!0},p(C,[N]){(!Z||N&0)&&e!==(e=De)&&(document.title=e)},i(C){Z||(se(h.$$.fragment,C),se(y.$$.fragment,C),se(O.$$.fragment,C),se(R.$$.fragment,C),se(J.$$.fragment,C),Z=!0)},o(C){oe(h.$$.fragment,C),oe(y.$$.fragment,C),oe(O.$$.fragment,C),oe(R.$$.fragment,C),oe(J.$$.fragment,C),Z=!1},d(C){A(r),A(n),A(s),A(a),A(l),A(i),A(o),A(c),A(f),A(u),A(b),A(p),C&&A(d),C&&A(_),he(h),he(y),he(O),he(R),he(J)}}}const De="Jumping Peter",Ye="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",pt="https://ksmai.github.io/jumping-peter",gt="https://ksmai.github.io/jumping-peter/favicon.png";class Gr extends Se{constructor(e){super(),Pe(this,e,null,Dr,Fe,{})}}export{Gr as default};
