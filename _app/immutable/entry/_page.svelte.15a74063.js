var zn=Object.defineProperty;var Gn=(t,e,r)=>e in t?zn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var he=(t,e,r)=>(Gn(t,typeof e!="symbol"?e+"":e,r),r);import{S as de,i as ve,n as _e,j as D,s as P,q as ce,k as R,l as H,c as F,r as fe,g as $,m as _,J as Ye,K as Fe,a as B,G as E,H as Ge,L as st,M as qn,N as We,u as Le,f as C,v as Et,b as S,d as Tt,O as Xn,P as ct,C as Hn,D as Vn,E as Yn,F as Wn,Q as Zn,R as zt,y as O,z as x,A as k,B as A,I as Te,T as ze,e as Je,U as wn,V as Jn,W as Qn,p as Kn,o as er,X as Gt,Y as tr,w as nr,Z as rr}from"../chunks/index.a9aa9141.js";import{b as dt,w as Ct,d as ar}from"../chunks/paths.2448362e.js";function ir(t){let e,r,n,i,a,o,s,l,u,c,f,h,p;return{c(){e=D("header"),r=D("img"),i=P(),a=D("h1"),o=ce("Jumping Peter"),s=P(),l=D("p"),u=ce("generate gif emojis"),c=P(),f=D("a"),h=ce("Contribute"),this.h()},l(d){e=R(d,"HEADER",{class:!0});var m=H(e);r=R(m,"IMG",{class:!0,src:!0,alt:!0}),i=F(m),a=R(m,"H1",{class:!0});var v=H(a);o=fe(v,"Jumping Peter"),v.forEach($),s=F(m),l=R(m,"P",{class:!0});var y=H(l);u=fe(y,"generate gif emojis"),y.forEach($),c=F(m),f=R(m,"A",{class:!0,href:!0,target:!0,rel:!0});var b=H(f);h=fe(b,"Contribute"),b.forEach($),m.forEach($),this.h()},h(){_(r,"class","logo svelte-bal6b7"),Ye(r.src,n=`${dt}/demo-jumping.gif`)||_(r,"src",n),_(r,"alt",""),_(a,"class","title svelte-bal6b7"),_(l,"class","subtitle svelte-bal6b7"),_(f,"class","contribute svelte-bal6b7"),_(f,"href","https://github.com/ksmai/jumping-peter"),_(f,"target","_blank"),_(f,"rel","noreferrer"),_(e,"class",p=Fe(`header ${t[0]}`)+" svelte-bal6b7")},m(d,m){B(d,e,m),E(e,r),E(e,i),E(e,a),E(a,o),E(e,s),E(e,l),E(l,u),E(e,c),E(e,f),E(f,h)},p(d,[m]){m&1&&p!==(p=Fe(`header ${d[0]}`)+" svelte-bal6b7")&&_(e,"class",p)},i:Ge,o:Ge,d(d){d&&$(e)}}}function sr(t,e,r){let{class:n=""}=e;return t.$$set=i=>{"class"in i&&r(0,n=i.class)},[n]}class or extends de{constructor(e){super(),ve(this,e,sr,ir,_e,{class:0})}}function Qe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function Xe(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Dt(t){return{...t,type:"slider",min:0,max:1,step:.01}}function lt(t){return{...t,type:"slider",min:0,max:2,step:.01}}function vt(t){return{...t,type:"slider",min:-2,max:2,step:.01}}function _t(t){return{...t,type:"slider",min:.01,max:10,step:.01}}function qt(t){return{...t,type:"slider",min:-1,max:1,step:1}}function yn(t){return{...t,type:"slider",min:1,max:100,step:1}}function lr(t){return{...t,type:"slider",min:1,max:5,step:1}}function ft(t){return{...t,type:"toggle"}}function ur(t){return t.reduce((e,r)=>(Object.assign(e,{[r.name]:r.value}),e),{})}const ee={image:{url:`${dt}/favicon.png`},output:{width:64,height:64,clear:[1,1,1],delayMs:50,totalFrames:20},material:{specular:[0,0,0],shininess:32},directionalLight:{ambient:[1,1,1],diffuse:[0,0,0],specular:[0,0,0],direction:[0,-1,-1]},pointLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],attenuation1:.2,attenuation2:.1},spotLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],direction:[0,0,-1],innerDegrees:5,outerDegrees:15,attenuation1:.2,attenuation2:.1},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!1,left:-1,right:1,bottom:-1,top:1,near:.1,far:10}};function $e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ke(t,e,r){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=r,t[5]*=r,t[9]*=r,t[13]*=r}function be(t,e,r){En(t,e,r,0)}function cr(t,e,r){const n=t[0],i=t[4],a=t[8],o=t[12];t[0]+=e*t[1],t[4]+=e*t[5],t[8]+=e*t[9],t[12]+=e*t[13],t[1]+=r*n,t[5]+=r*i,t[9]+=r*a,t[13]+=r*o}function En(t,e,r,n){t[12]+=e,t[13]+=r,t[14]+=n}function ut(t,e){Ut(t,e,[0,0,1])}function Ut(t,e,r){const n=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(n===0)return;const i=r[0]/n,a=r[1]/n,o=r[2]/n,s=e/180*Math.PI,l=Math.cos(s),u=Math.sin(s),c=[(1-l)*i*i+l,(1-l)*i*a+u*o,(1-l)*i*o-u*a,0,(1-l)*i*a-u*o,(1-l)*a*a+l,(1-l)*a*o-u*i,0,(1-l)*i*o+u*a,(1-l)*a*o-u*i,(1-l)*o*o+l,0,0,0,0,1];St(t,c)}function fr(t,e,r,n){En(t,-e[0],-e[1],-e[2]);const i=[-r[0],-r[1],-r[2]];Xt(i);const a=Ht(n,i);Xt(a);const o=Ht(i,a),s=[a[0],o[0],i[0],0,a[1],o[1],i[1],0,a[2],o[2],i[2],0,0,0,0,1];St(t,s)}function mr(t,e,r,n,i,a,o){const s=[2*a/(r-e),0,0,0,0,2*a/(i-n),0,0,(r+e)/(r-e),(i+n)/(i-n),-(o+a)/(o-a),-1,0,0,-2*o*a/(o-a),0];St(t,s)}function pr(t,e,r,n,i,a,o){const s=[2/(r-e),0,0,0,0,2/(i-n),0,0,0,0,-2/(o-a),0,-(r+e)/(r-e),-(i+n)/(i-n),-(o+a)/(o-a),1];St(t,s)}function St(t,e){const r=t.slice();for(let n=0;n<=3;++n)for(let i=0;i<=3;++i){const a=4*n+i;t[a]=0;for(let o=0;o<=3;++o)t[a]+=e[4*o+i]*r[4*n+o]}}function Xt(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?t:[t[0]/e,t[1]/e,t[2]/e]}function Ht(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function re(t,e,r){return t+(e-t)*r}function $t(t){return t*Math.PI/180}function Vt(t){const e=new Float32Array([t]),[r]=new Int32Array(e.buffer);let n=Math.abs(r)|0;return n=(n>>16^n)*73244475,n=(n>>16^n)*73244475,n=n>>16^n,n/(Math.pow(2,31)-1)}function gr(t){return e=>1-Math.pow(1-e,t)}function Tn(t){const e=Math.pow(2,t-1);return r=>r<.5?e*Math.pow(r,t):1-Math.pow(2*(1-r),t)/2}const ht=Tn(3),hr=gr(2);function Yt(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const dr="spinning",vr={...ee,output:{...ee.output,delayMs:50,totalFrames:15}},_r=[Qe({name:"startAngle",value:0}),Qe({name:"endAngle",value:360}),Xe({name:"originX",value:0}),Xe({name:"originY",value:0}),ft({name:"alternates",value:!1})];function Cn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{alternates:a,startAngle:o,endAngle:s,originX:l,originY:u}=r;return[{program:n,geometry:i,getUniforms:f=>{const h=a?Math.min(f,1-f)*2:f,p=re(o,s,h),d=$e();return be(d,-l,-u),ut(d,p),be(d,l,u),{u_model:d}}}]}const $r=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Cn,defaultOptions:vr,editOptions:_r,name:dr},Symbol.toStringTag,{value:"Module"})),br="expanding",wr={...ee,output:{...ee.output,delayMs:50,totalFrames:20}},yr=[_t({name:"minScale",value:1}),_t({name:"maxScale",value:2}),ft({name:"alternates",value:!1})];function Sn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{minScale:a,maxScale:o,alternates:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const c=s?Math.min(u,1-u)*2:u,f=re(a,o,c),h=$e();return Ke(h,f,f),{u_model:h}}}]}const Er=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Sn,defaultOptions:wr,editOptions:yr,name:br},Symbol.toStringTag,{value:"Module"})),Tr="extreme-speed",Cr={...ee,output:{...ee.output,delayMs:20,totalFrames:10}},Sr=[qt({name:"directionX",value:-1}),qt({name:"directionY",value:0})];function On(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("sudoku"),{directionX:a,directionY:o}=r,s=a*2,l=o*2;return[{program:n,geometry:i,getUniforms:c=>{const f=$e(),h=re(0,s,c),p=re(0,l,c);return be(f,h,p),{u_model:f}}}]}const Or=Object.freeze(Object.defineProperty({__proto__:null,createSprites:On,defaultOptions:Cr,editOptions:Sr,name:Tr},Symbol.toStringTag,{value:"Module"})),xr="excited",kr={...ee,output:{...ee.output,delayMs:50,totalFrames:25}},Ar=[Qe({name:"angle",value:15}),vt({name:"startOffset",value:-.2}),vt({name:"endOffset",value:.2}),yn({name:"cycles",value:3})];function xn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{angle:a,cycles:o,startOffset:s,endOffset:l}=r,u=$t(a),c=Math.cos(u),f=Math.sin(u);return[{program:n,geometry:i,getUniforms:p=>{const d=p*2*o%1,m=Math.min(d,1-d)*2,v=re(-s*f,-l*f,m),y=re(s*c,l*c,m),b=$e();return ut(b,a),be(b,v,y),Ke(b,p>.5?-1:1,1),{u_model:b}}}]}const Mr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:xn,defaultOptions:kr,editOptions:Ar,name:xr},Symbol.toStringTag,{value:"Module"})),Pr="jumping",Fr={...ee,output:{...ee.output,delayMs:50,totalFrames:20}},Lr=[lt({name:"maxOffset",value:1.2}),Dt({name:"compressTime",value:.4}),Dt({name:"maxCompress",value:.3})];function kn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{maxOffset:a,compressTime:o,maxCompress:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const c=Math.min(u,1-u)*2,f=$e(),h=c/(1-o);if(h<1){const p=(1-h*h)*a;be(f,0,p)}else{const p=(1-c)/o,m=1-(1-p*p)*s;be(f,0,1),Ke(f,1/m,m),be(f,0,-1)}return{u_model:f}}}]}const Ir=Object.freeze(Object.defineProperty({__proto__:null,createSprites:kn,defaultOptions:Fr,editOptions:Lr,name:Pr},Symbol.toStringTag,{value:"Module"})),Dr="tower",Rr={...ee,output:{...ee.output,delayMs:40,totalFrames:20}},jr=[Qe({name:"startAngle",value:20}),Qe({name:"endAngle",value:-45}),Dt({name:"startTime",value:.5})];function An(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("tower"),{startAngle:a,endAngle:o,startTime:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const c=$e();if(u<s){const f=u/s,h=Math.min(f,1-f)*2,p=re(0,a,h);ut(c,p)}else{const f=(u-s)/(1-s),h=Math.min(f,1-f)*2,p=re(0,o,h);if(ut(c,p),f>.5){const d=$t(p),m=Math.cos(d),v=Math.sin(d),y=(f-.5)*2,b=re(0,-2*v,y),g=re(0,2*m,y);be(c,b,g)}}return{u_model:c}}}]}const Ur=Object.freeze(Object.defineProperty({__proto__:null,createSprites:An,defaultOptions:Rr,editOptions:jr,name:Dr},Symbol.toStringTag,{value:"Module"})),Br="repeated",Nr={...ee,output:{...ee.output,delayMs:60,totalFrames:15}},zr=[_t({name:"initialScale",value:.1}),ft({name:"horizontal",value:!1})];function Mn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{initialScale:a,horizontal:o}=r,s=o?{geometry:e.createGeometry("leftHalf"),endX:-1,endY:0}:{geometry:e.createGeometry("topHalf"),endX:0,endY:1},l=o?{geometry:e.createGeometry("rightHalf"),endX:1,endY:0}:{geometry:e.createGeometry("bottomHalf"),endX:0,endY:-1},u=h=>{const p=$e(),d=ht(h),m=re(a,1,d);return Ke(p,m,m),{u_model:p}},c=h=>{const p=$e(),d=ht(h),m=re(0,s.endX,d),v=re(0,s.endY,d);return be(p,m,v),{u_model:p}},f=h=>{const p=$e(),d=ht(h),m=re(0,l.endX,d),v=re(0,l.endY,d);return be(p,m,v),{u_model:p}};return[{program:n,geometry:i,getUniforms:u},{program:n,geometry:s.geometry,getUniforms:c},{program:n,geometry:l.geometry,getUniforms:f}]}const Gr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Mn,defaultOptions:Nr,editOptions:zr,name:Br},Symbol.toStringTag,{value:"Module"})),qr="mirror",Xr={...ee,output:{...ee.output,delayMs:50,totalFrames:16}},Hr=[ft({name:"rightHalf",value:!1})];function Pn(t,e,r){const n=t.createProgram("default"),{rightHalf:i}=r,a=e.createGeometry(i?"rightHalf":"leftHalf");return[{program:n,geometry:a,getUniforms:l=>{const u=Math.min(l,1-l)*2,c=$e(),f=Yt(u),h=re(-2,-1,f);return i||Ke(c,-1,1),be(c,h,0),{u_model:c}}},{program:n,geometry:a,getUniforms:l=>{const u=Math.min(l,1-l)*2,c=$e(),f=Yt(u),h=re(2,1,f);return i&&Ke(c,-1,1),be(c,h,0),{u_model:c}}}]}const Vr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Pn,defaultOptions:Xr,editOptions:Hr,name:qr},Symbol.toStringTag,{value:"Module"})),Yr="panic",Wr={...ee,output:{...ee.output,delayMs:30,totalFrames:16}},Zr=[lt({name:"maxOffsetX",value:.15}),lt({name:"maxOffsetY",value:.15})];function Fn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{maxOffsetX:a,maxOffsetY:o}=r;return[{program:n,geometry:i,getUniforms:l=>{const u=Vt(l+.123),c=Vt(l*2+1),f=re(-a,a,u),h=re(-o,o,c),p=$e();return be(p,f,h),{u_model:p}}}]}const Jr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Fn,defaultOptions:Wr,editOptions:Zr,name:Yr},Symbol.toStringTag,{value:"Module"})),Qr="rotating",Kr={...ee,output:{...ee.output,delayMs:40,totalFrames:25},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6},material:{specular:[1,1,1],shininess:100},directionalLight:{ambient:[.6,.6,.6],diffuse:[1,1,1],specular:[1,1,1],direction:[-1,-1,-5]}},ea=[Xe({name:"axisX",value:0}),Xe({name:"axisY",value:1}),Xe({name:"axisZ",value:0}),Xe({name:"originX",value:0}),Xe({name:"originY",value:0}),lr({name:"easing",value:1}),ft({name:"alternates",value:!1})];function Ln(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{axisX:a,axisY:o,axisZ:s,originX:l,originY:u,easing:c,alternates:f}=r,h=[a,o,s],p=Tn(c);return[{program:n,geometry:i,getUniforms:m=>{const v=f?Math.min(m,1-m)*2:m,y=p(v),b=re(0,360,y),g=$e();return be(g,-l,-u),Ut(g,b,h),be(g,l,u),{u_model:g}}}]}const ta=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ln,defaultOptions:Kr,editOptions:ea,name:Qr},Symbol.toStringTag,{value:"Module"})),na="party",ra={...ee,output:{...ee.output,delayMs:40,totalFrames:15},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6}},aa=[Qe({name:"angle",value:10}),vt({name:"startOffset",value:-.3}),vt({name:"endOffset",value:.5})];function In(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{angle:a,startOffset:o,endOffset:s}=r;return[{program:n,geometry:i,getUniforms:u=>{const c=2*u%1,f=Math.min(c,1-c)*2,h=ht(c),p=hr(f),d=u<.5?re(0,180,h):re(180,360,h),m=re(o,s,p),v=$e();return ut(v,a),be(v,0,m),Ut(v,d,[0,1,0]),{u_model:v}}}]}const ia=Object.freeze(Object.defineProperty({__proto__:null,createSprites:In,defaultOptions:ra,editOptions:aa,name:na},Symbol.toStringTag,{value:"Module"})),sa="parrot",oa={...ee,output:{...ee.output,delayMs:20,totalFrames:18}},la=[_t({name:"amplitudeX",value:.6}),lt({name:"amplitudeY",value:.5})];function Dn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{amplitudeX:a,amplitudeY:o}=r;return[{program:n,geometry:i,getUniforms:l=>{const u=Math.cos(l*2*Math.PI)*.5+.5,c=re(-a,a,u),f=Math.sin(l*2*Math.PI)*.5+.5,h=re(-o,0,f),p=$e();return be(p,0,1),cr(p,c,0),be(p,0,-1+h),{u_model:p}}}]}const ua=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Dn,defaultOptions:oa,editOptions:la,name:sa},Symbol.toStringTag,{value:"Module"})),ca="wiggling",fa={...ee,output:{...ee.output,delayMs:50,totalFrames:15}},ma=[yn({name:"frequency",value:3}),lt({name:"amplitude",value:.05})];function Rn(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{frequency:a,amplitude:o}=r;return[{program:n,geometry:i,getUniforms:l=>({u_model:$e(),u_time:l,u_amplitude:o,u_frequency:a})}]}const pa=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Rn,defaultOptions:fa,editOptions:ma,name:ca},Symbol.toStringTag,{value:"Module"})),Pt=[Ir,Or,$r,Mr,Er,Ur,Gr,Vr,Jr,ta,ia,ua,pa];function Wt(t,e,r){const n=ur(r.editOptions);switch(r.name){case"spinning":return Cn(t,e,n);case"expanding":return Sn(t,e,n);case"extreme-speed":return On(t,e,n);case"excited":return xn(t,e,n);case"jumping":return kn(t,e,n);case"tower":return An(t,e,n);case"repeated":return Mn(t,e,n);case"mirror":return Pn(t,e,n);case"panic":return Fn(t,e,n);case"rotating":return Ln(t,e,n);case"party":return In(t,e,n);case"parrot":return Dn(t,e,n);case"wiggling":return Rn(t,e,n);default:(i=>{throw new Error(`Unknown animation: ${JSON.stringify(i)}`)})(r)}}var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ga=typeof mt=="object"&&mt&&mt.Object===Object&&mt,ha=ga,da=ha,va=typeof self=="object"&&self&&self.Object===Object&&self,_a=da||va||Function("return this")(),Ot=_a,$a=Ot,ba=$a.Symbol,jn=ba,Zt=jn,Un=Object.prototype,wa=Un.hasOwnProperty,ya=Un.toString,rt=Zt?Zt.toStringTag:void 0;function Ea(t){var e=wa.call(t,rt),r=t[rt];try{t[rt]=void 0;var n=!0}catch{}var i=ya.call(t);return n&&(e?t[rt]=r:delete t[rt]),i}var Ta=Ea,Ca=Object.prototype,Sa=Ca.toString;function Oa(t){return Sa.call(t)}var xa=Oa,Jt=jn,ka=Ta,Aa=xa,Ma="[object Null]",Pa="[object Undefined]",Qt=Jt?Jt.toStringTag:void 0;function Fa(t){return t==null?t===void 0?Pa:Ma:Qt&&Qt in Object(t)?ka(t):Aa(t)}var La=Fa;function Ia(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Bn=Ia,Da=La,Ra=Bn,ja="[object AsyncFunction]",Ua="[object Function]",Ba="[object GeneratorFunction]",Na="[object Proxy]";function za(t){if(!Ra(t))return!1;var e=Da(t);return e==Ua||e==Ba||e==ja||e==Na}var Ga=za,qa=Ot,Xa=qa["__core-js_shared__"],Ha=Xa,Ft=Ha,Kt=function(){var t=/[^.]+$/.exec(Ft&&Ft.keys&&Ft.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Va(t){return!!Kt&&Kt in t}var Ya=Va,Wa=Function.prototype,Za=Wa.toString;function Ja(t){if(t!=null){try{return Za.call(t)}catch{}try{return t+""}catch{}}return""}var Qa=Ja,Ka=Ga,ei=Ya,ti=Bn,ni=Qa,ri=/[\\^$.*+?()[\]{}|]/g,ai=/^\[object .+?Constructor\]$/,ii=Function.prototype,si=Object.prototype,oi=ii.toString,li=si.hasOwnProperty,ui=RegExp("^"+oi.call(li).replace(ri,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ci(t){if(!ti(t)||ei(t))return!1;var e=Ka(t)?ui:ai;return e.test(ni(t))}var fi=ci;function mi(t,e){return t==null?void 0:t[e]}var pi=mi,gi=fi,hi=pi;function di(t,e){var r=hi(t,e);return gi(r)?r:void 0}var Bt=di,vi=Bt,_i=vi(Object,"create"),xt=_i,en=xt;function $i(){this.__data__=en?en(null):{},this.size=0}var bi=$i;function wi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yi=wi,Ei=xt,Ti="__lodash_hash_undefined__",Ci=Object.prototype,Si=Ci.hasOwnProperty;function Oi(t){var e=this.__data__;if(Ei){var r=e[t];return r===Ti?void 0:r}return Si.call(e,t)?e[t]:void 0}var xi=Oi,ki=xt,Ai=Object.prototype,Mi=Ai.hasOwnProperty;function Pi(t){var e=this.__data__;return ki?e[t]!==void 0:Mi.call(e,t)}var Fi=Pi,Li=xt,Ii="__lodash_hash_undefined__";function Di(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Li&&e===void 0?Ii:e,this}var Ri=Di,ji=bi,Ui=yi,Bi=xi,Ni=Fi,zi=Ri;function et(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}et.prototype.clear=ji;et.prototype.delete=Ui;et.prototype.get=Bi;et.prototype.has=Ni;et.prototype.set=zi;var Gi=et;function qi(){this.__data__=[],this.size=0}var Xi=qi;function Hi(t,e){return t===e||t!==t&&e!==e}var Vi=Hi,Yi=Vi;function Wi(t,e){for(var r=t.length;r--;)if(Yi(t[r][0],e))return r;return-1}var kt=Wi,Zi=kt,Ji=Array.prototype,Qi=Ji.splice;function Ki(t){var e=this.__data__,r=Zi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Qi.call(e,r,1),--this.size,!0}var es=Ki,ts=kt;function ns(t){var e=this.__data__,r=ts(e,t);return r<0?void 0:e[r][1]}var rs=ns,as=kt;function is(t){return as(this.__data__,t)>-1}var ss=is,os=kt;function ls(t,e){var r=this.__data__,n=os(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var us=ls,cs=Xi,fs=es,ms=rs,ps=ss,gs=us;function tt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tt.prototype.clear=cs;tt.prototype.delete=fs;tt.prototype.get=ms;tt.prototype.has=ps;tt.prototype.set=gs;var hs=tt,ds=Bt,vs=Ot,_s=ds(vs,"Map"),$s=_s,tn=Gi,bs=hs,ws=$s;function ys(){this.size=0,this.__data__={hash:new tn,map:new(ws||bs),string:new tn}}var Es=ys;function Ts(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Cs=Ts,Ss=Cs;function Os(t,e){var r=t.__data__;return Ss(e)?r[typeof e=="string"?"string":"hash"]:r.map}var At=Os,xs=At;function ks(t){var e=xs(this,t).delete(t);return this.size-=e?1:0,e}var As=ks,Ms=At;function Ps(t){return Ms(this,t).get(t)}var Fs=Ps,Ls=At;function Is(t){return Ls(this,t).has(t)}var Ds=Is,Rs=At;function js(t,e){var r=Rs(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var Us=js,Bs=Es,Ns=As,zs=Fs,Gs=Ds,qs=Us;function nt(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nt.prototype.clear=Bs;nt.prototype.delete=Ns;nt.prototype.get=zs;nt.prototype.has=Gs;nt.prototype.set=qs;var Xs=nt,Hs="__lodash_hash_undefined__";function Vs(t){return this.__data__.set(t,Hs),this}var Ys=Vs;function Ws(t){return this.__data__.has(t)}var Zs=Ws,Js=Xs,Qs=Ys,Ks=Zs;function bt(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Js;++e<r;)this.add(t[e])}bt.prototype.add=bt.prototype.push=Qs;bt.prototype.has=Ks;var eo=bt;function to(t,e,r,n){for(var i=t.length,a=r+(n?1:-1);n?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var no=to;function ro(t){return t!==t}var ao=ro;function io(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var so=io,oo=no,lo=ao,uo=so;function co(t,e,r){return e===e?uo(t,e,r):oo(t,lo,r)}var fo=co,mo=fo;function po(t,e){var r=t==null?0:t.length;return!!r&&mo(t,e,0)>-1}var go=po;function ho(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var vo=ho;function _o(t,e){return t.has(e)}var $o=_o,bo=Bt,wo=Ot,yo=bo(wo,"Set"),Eo=yo;function To(){}var Co=To;function So(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Nn=So,Lt=Eo,Oo=Co,xo=Nn,ko=1/0,Ao=Lt&&1/xo(new Lt([,-0]))[1]==ko?function(t){return new Lt(t)}:Oo,Mo=Ao,Po=eo,Fo=go,Lo=vo,Io=$o,Do=Mo,Ro=Nn,jo=200;function Uo(t,e,r){var n=-1,i=Fo,a=t.length,o=!0,s=[],l=s;if(r)o=!1,i=Lo;else if(a>=jo){var u=e?null:Do(t);if(u)return Ro(u);o=!1,i=Io,l=new Po}else l=e?[]:s;e:for(;++n<a;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,o&&f===f){for(var h=l.length;h--;)if(l[h]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,r)||(l!==s&&l.push(f),s.push(c))}return s}var Bo=Uo,No=Bo;function zo(t){return t&&t.length?No(t):[]}var Go=zo;const qo=function(){var t={},e=-1,r,n,i,a,o,s,l=12,u=5003,c,f=l,h,p=1<<l,d=[],m=[],v=u,y=0,b=!1,g,w,q,X=0,K=0,se=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],le,V=[],Y=t.LZWEncoder=function(Z,j,T,N){r=Z,n=j,i=T,a=Math.max(2,N)},me=function(Z,j){V[le++]=Z,le>=254&&Ae(j)},we=function(Z){De(v),y=w+2,b=!0,Ce(w,Z)},De=function(Z){for(var j=0;j<Z;++j)d[j]=-1},ae=t.compress=function(Z,j){var T,N,ue,te,ye,ie,L;for(g=Z,b=!1,c=g,h=Me(c),w=1<<Z-1,q=w+1,y=w+2,le=0,te=Re(),L=0,T=v;T<65536;T*=2)++L;L=8-L,ie=v,De(ie),Ce(w,j);e:for(;(ue=Re())!=e;){if(T=(ue<<f)+te,N=ue<<L^te,d[N]==T){te=m[N];continue}else if(d[N]>=0){ye=ie-N,N===0&&(ye=1);do if((N-=ye)<0&&(N+=ie),d[N]==T){te=m[N];continue e}while(d[N]>=0)}Ce(te,j),te=ue,y<p?(m[N]=y++,d[N]=T):we(j)}Ce(te,j),Ce(q,j)};t.encode=function(Z){Z.writeByte(a),o=r*n,s=0,ae(a+1,Z),Z.writeByte(0)};var Ae=function(Z){le>0&&(Z.writeByte(le),Z.writeBytes(V,0,le),le=0)},Me=function(Z){return(1<<Z)-1},Re=function(){if(o===0)return e;--o;var Z=i[s++];return Z&255},Ce=function(Z,j){for(X&=se[K],K>0?X|=Z<<K:X=Z,K+=c;K>=8;)me(X&255,j),X>>=8,K-=8;if((y>h||b)&&(b?(h=Me(c=g),b=!1):(++c,c==f?h=p:h=Me(c))),Z==q){for(;K>0;)me(X&255,j),X>>=8,K-=8;Ae(j)}};return Y.apply(this,arguments),t},Xo=function(){var t={},e=256,r=499,n=491,i=487,a=503,o=3*a,s=e-1,l=4,u=100,c=16,f=1<<c,h=10,p=10,d=f>>p,m=f<<h-p,v=e>>3,y=6,b=1<<y,g=v*b,w=30,q=10,X=1<<q,K,se=8,le=1<<se,V=q+se,Y=1<<V,me,we,De,ae,Ae=[],Me=[],Re=[],Ce=[],ge=t.NeuQuant=function(L,U,J){var z,G;for(me=L,we=U,De=J,ae=new Array(e),z=0;z<e;z++)ae[z]=new Array(4),G=ae[z],G[0]=G[1]=G[2]=(z<<l+8)/e,Re[z]=f/e,Me[z]=0},Z=function(){for(var L=[],U=new Array(e),J=0;J<e;J++)U[ae[J][3]]=J;for(var z=0,G=0;G<e;G++){var M=U[G];L[z++]=ae[M][0],L[z++]=ae[M][1],L[z++]=ae[M][2]}return L},j=function(){var L,U,J,z,G,M,I,W;for(I=0,W=0,L=0;L<e;L++){for(G=ae[L],J=L,z=G[1],U=L+1;U<e;U++)M=ae[U],M[1]<z&&(J=U,z=M[1]);if(M=ae[J],L!=J&&(U=M[0],M[0]=G[0],G[0]=U,U=M[1],M[1]=G[1],G[1]=U,U=M[2],M[2]=G[2],G[2]=U,U=M[3],M[3]=G[3],G[3]=U),z!=I){for(Ae[I]=W+L>>1,U=I+1;U<z;U++)Ae[U]=L;I=z,W=L}}for(Ae[I]=W+s>>1,U=I+1;U<256;U++)Ae[U]=s},T=function(){var L,U,J,z,G,M,I,W,Q,pe,Oe,oe,Ee,Nt;for(we<o&&(De=1),K=30+(De-1)/3,oe=me,Ee=0,Nt=we,Oe=we/(3*De),pe=Oe/u|0,W=X,M=g,I=M>>y,I<=1&&(I=0),L=0;L<I;L++)Ce[L]=W*((I*I-L*L)*le/(I*I));for(we<o?Q=3:we%r!==0?Q=3*r:we%n!==0?Q=3*n:we%i!==0?Q=3*i:Q=3*a,L=0;L<Oe;)if(J=(oe[Ee+0]&255)<<l,z=(oe[Ee+1]&255)<<l,G=(oe[Ee+2]&255)<<l,U=ye(J,z,G),te(W,U,J,z,G),I!==0&&ue(I,U,J,z,G),Ee+=Q,Ee>=Nt&&(Ee-=we),L++,pe===0&&(pe=1),L%pe===0)for(W-=W/K,M-=M/w,I=M>>y,I<=1&&(I=0),U=0;U<I;U++)Ce[U]=W*((I*I-U*U)*le/(I*I))};t.map=function(L,U,J){var z,G,M,I,W,Q,pe;for(W=1e3,pe=-1,z=Ae[U],G=z-1;z<e||G>=0;)z<e&&(Q=ae[z],M=Q[1]-U,M>=W?z=e:(z++,M<0&&(M=-M),I=Q[0]-L,I<0&&(I=-I),M+=I,M<W&&(I=Q[2]-J,I<0&&(I=-I),M+=I,M<W&&(W=M,pe=Q[3])))),G>=0&&(Q=ae[G],M=U-Q[1],M>=W?G=-1:(G--,M<0&&(M=-M),I=Q[0]-L,I<0&&(I=-I),M+=I,M<W&&(I=Q[2]-J,I<0&&(I=-I),M+=I,M<W&&(W=M,pe=Q[3]))));return pe},t.process=function(){return T(),N(),j(),Z()};var N=function(){var L;for(L=0;L<e;L++)ae[L][0]>>=l,ae[L][1]>>=l,ae[L][2]>>=l,ae[L][3]=L},ue=function(L,U,J,z,G){var M,I,W,Q,pe,Oe,oe;for(W=U-L,W<-1&&(W=-1),Q=U+L,Q>e&&(Q=e),M=U+1,I=U-1,Oe=1;M<Q||I>W;){if(pe=Ce[Oe++],M<Q){oe=ae[M++];try{oe[0]-=pe*(oe[0]-J)/Y,oe[1]-=pe*(oe[1]-z)/Y,oe[2]-=pe*(oe[2]-G)/Y}catch{}}if(I>W){oe=ae[I--];try{oe[0]-=pe*(oe[0]-J)/Y,oe[1]-=pe*(oe[1]-z)/Y,oe[2]-=pe*(oe[2]-G)/Y}catch{}}}},te=function(L,U,J,z,G){var M=ae[U];M[0]-=L*(M[0]-J)/X,M[1]-=L*(M[1]-z)/X,M[2]-=L*(M[2]-G)/X},ye=function(L,U,J){var z,G,M,I,W,Q,pe,Oe,oe,Ee;for(Oe=~(1<<31),oe=Oe,Q=-1,pe=Q,z=0;z<e;z++)Ee=ae[z],G=Ee[0]-L,G<0&&(G=-G),M=Ee[1]-U,M<0&&(M=-M),G+=M,M=Ee[2]-J,M<0&&(M=-M),G+=M,G<Oe&&(Oe=G,Q=z),I=G-(Me[z]>>c-l),I<oe&&(oe=I,pe=z),W=Re[z]>>p,Re[z]-=W,Me[z]+=W<<h;return Re[Q]+=d,Me[Q]-=m,pe};return ge.apply(this,arguments),t},Ho=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var j="",T=this.bin.length,N=0;N<T;N++)j+=e[this.bin[N]];return j},r.prototype.writeByte=function(j){this.bin.push(j)},r.prototype.writeUTFBytes=function(j){for(var T=j.length,N=0;N<T;N++)this.writeByte(j.charCodeAt(N))},r.prototype.writeBytes=function(j,T,N){for(var ue=N||j.length,te=T||0;te<ue;te++)this.writeByte(j[te])};var n={},i,a,o=null,s,l=-1,u=0,c=!1,f,h,p,d,m,v,y=[],b=7,g=-1,w=!1,q=!0,X=!1,K=10,se="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(T){u=Math.round(T/10)},n.setDispose=function(T){T>=0&&(g=T)},n.setRepeat=function(T){T>=0&&(l=T)},n.setTransparent=function(T){o=T},n.setComment=function(T){se=T},n.addFrame=function(T,N){if(T===null||!c||f===null)throw new Error("Please call start method before calling addFrame");var ue=!0;try{N?T instanceof ImageData?(h=T.data,(!sizeset||i!=T.width||a!=T.height)&&V(T.width,T.height)):T instanceof Uint8ClampedArray?T.length==i*a*4?h=T:(console.log("Please set the correct size: ImageData length mismatch"),ue=!1):(console.log("Please provide correct input"),ue=!1):(h=T.getImageData(0,0,T.canvas.width,T.canvas.height).data,X||V(T.canvas.width,T.canvas.height)),we(),Y(),q&&(Me(),Ce(),l>=0&&Re()),De(),se!==""&&ae(),Ae(),q||Ce(),Z(),q=!1}catch{ue=!1}return ue},n.download=function(T){if(f===null||w==!1)console.log("Please call start method and add frames and call finish method before calling download");else{T=T!==void 0?T.endsWith(".gif")?T:T+".gif":"download.gif";var N=document.createElement("a");N.download=T,N.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),N.click()}},n.finish=function(){if(!c)return!1;var T=!0;c=!1;try{f.writeByte(59),w=!0}catch{T=!1}return T};var le=function(){s=0,h=null,p=null,d=null,v=null,w=!1,q=!0};n.setFrameRate=function(T){T!=15&&(u=Math.round(100/T))},n.setQuality=function(T){T<1&&(T=1),K=T};var V=n.setSize=function(T,N){c&&!q||(i=T,a=N,i<1&&(i=320),a<1&&(a=240),X=!0)};n.start=function(){le();var T=!0;w=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{T=!1}return c=T},n.cont=function(){le();var T=!0;return w=!1,f=new r,c=T};var Y=function(){var T=p.length,N=T/3;d=[];var ue=new Xo(p,T,K);v=ue.process();for(var te=0,ye=0;ye<N;ye++){var ie=ue.map(p[te++]&255,p[te++]&255,p[te++]&255);y[ie]=!0,d[ye]=ie}p=null,m=8,b=7,o!==null&&(s=me(o))},me=function(T){if(v===null)return-1;for(var N=(T&16711680)>>16,ue=(T&65280)>>8,te=T&255,ye=0,ie=256*256*256,L=v.length,U=0;U<L;){var J=N-(v[U++]&255),z=ue-(v[U++]&255),G=te-(v[U]&255),M=J*J+z*z+G*G,I=U/3;y[I]&&M<ie&&(ie=M,ye=I),U++}return ye},we=function(){var T=i,N=a;p=[];for(var ue=h,te=0,ye=0;ye<N;ye++)for(var ie=0;ie<T;ie++){var L=ye*T*4+ie*4;p[te++]=ue[L],p[te++]=ue[L+1],p[te++]=ue[L+2]}},De=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var T,N;o===null?(T=0,N=0):(T=1,N=2),g>=0&&(N=g&7),N<<=2,f.writeByte(0|N|0|T),ge(u),f.writeByte(s),f.writeByte(0)},ae=function(){f.writeByte(33),f.writeByte(254),f.writeByte(se.length),f.writeUTFBytes(se),f.writeByte(0)},Ae=function(){f.writeByte(44),ge(0),ge(0),ge(i),ge(a),q?f.writeByte(0):f.writeByte(128|b)},Me=function(){ge(i),ge(a),f.writeByte(240|b),f.writeByte(0),f.writeByte(0)},Re=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),ge(l),f.writeByte(0)},Ce=function(){f.writeBytes(v);for(var T=3*256-v.length,N=0;N<T;N++)f.writeByte(0)},ge=function(T){f.writeByte(T&255),f.writeByte(T>>8&255)},Z=function(){var T=new qo(i,a,d,m);T.encode(f)};return n.stream=function(){return f},n.setProperties=function(T,N){c=T,q=N},n};class Vo{constructor(e){he(this,"loadingUrl",null);he(this,"url",null);he(this,"texture",null);he(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),i=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const o=a.createTexture();if(!o)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,o),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=o,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}class nn{constructor(e,r){he(this,"texture",null);he(this,"framebuffer");he(this,"width",null);he(this,"height",null);this.gl=e,this.unit=r;const n=e.createFramebuffer();if(!n)throw new Error("Failed to create framebuffer");this.framebuffer=n}bindAsInput(){return this.gl.activeTexture(this.gl.TEXTURE0+this.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.unit}bindAsOutput(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer)}setSize(e,r){if(e===this.width&&r===this.height)return;if(this.texture!==null&&this.gl.deleteTexture(this.texture),this.texture=this.gl.createTexture(),!this.texture)throw new Error("Failed to create texture");if(this.width=e,this.height=r,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error("Failed to attach to framebuffer");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}destroy(){this.texture&&this.gl.deleteTexture(this.texture),this.gl.deleteFramebuffer(this.framebuffer)}}const xe={a_position:0,a_texCoords:1,a_normal:2},Ne=`#version 300 es

layout(location = ${xe.a_position}) in vec2 a_position;
layout(location = ${xe.a_texCoords}) in vec2 a_texCoords;

out vec2 v_texCoords;

void main() {
  gl_Position = vec4(a_position, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
`,pt=`vec3 getColor(vec2 offset, sampler2D image, vec2 texCoords) {
  vec2 coords = texCoords + offset / vec2(textureSize(image, 0));
  float inRange = float(coords.x >= 0.0 && coords.x <= 1.0 && coords.y >= 0.0 && coords.y <= 1.0);
  return texture(image, coords).rgb * inRange;
}

vec3 kernalMultiply(mat3 kernel, sampler2D image, vec2 texCoords) {
  vec3 result = vec3(0.0, 0.0, 0.0);

  result += kernel[0][0] * getColor(vec2(-1.0,  1.0), image, texCoords);
  result += kernel[0][1] * getColor(vec2(-1.0,  0.0), image, texCoords);
  result += kernel[0][2] * getColor(vec2(-1.0, -1.0), image, texCoords);
  result += kernel[1][0] * getColor(vec2( 0.0,  1.0), image, texCoords);
  result += kernel[1][1] * getColor(vec2( 0.0,  0.0), image, texCoords);
  result += kernel[1][2] * getColor(vec2( 0.0, -1.0), image, texCoords);
  result += kernel[2][0] * getColor(vec2( 1.0,  1.0), image, texCoords);
  result += kernel[2][1] * getColor(vec2( 1.0,  0.0), image, texCoords);
  result += kernel[2][2] * getColor(vec2( 1.0, -1.0), image, texCoords);

  return result;
}`,rn={default:{vertex:`#version 300 es

layout(location = ${xe.a_position}) in vec3 a_position;
layout(location = ${xe.a_texCoords}) in vec2 a_texCoords;
layout(location = ${xe.a_normal}) in vec3 a_normal;

uniform mat4 u_model;
uniform mat4 u_view;
uniform mat4 u_projection;

out vec2 v_texCoords;
out vec3 v_normal;
out vec3 v_position;

void main() {
  mat4 modelView = u_view * u_model;
  v_position = vec3(modelView * vec4(a_position, 1.0));
  gl_Position = u_projection * vec4(v_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position.y *= -1.0;
  v_texCoords = a_texCoords;
  v_normal = (transpose(inverse(modelView)) * vec4(a_normal, 0)).xyz;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
in vec3 v_normal;
in vec3 v_position;

struct Material {
  sampler2D diffuse;
  vec3 specular;
  float shininess;
};

struct DirectionalLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 direction;
};

struct PointLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  float attenuation1;
  float attenuation2;
};

struct SpotLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  vec3 direction;
  float innerCos;
  float outerCos;
  float attenuation1;
  float attenuation2;
};

uniform Material u_material;
uniform DirectionalLight u_directionalLight;
uniform PointLight u_pointLight;
uniform SpotLight u_spotLight;

uniform float u_time;
uniform float u_amplitude;
uniform float u_frequency;

out vec4 outColor;

vec3 computeLight(SpotLight light, vec3 normal, vec3 fragToCamera, vec3 texel) {
  float dist = length(light.position - v_position);
  float attenuation = 1.0 / (1.0 + light.attenuation1 * dist + light.attenuation2 * dist * dist);
  vec3 dir = normalize(light.position - v_position);
  float angle = dot(normalize(-light.direction), dir);
  float intensity = smoothstep(light.outerCos, light.innerCos, angle);

  float diff = max(dot(dir, normal), 0.0);

  vec3 halfVec = normalize(dir + fragToCamera);
  float spec = pow(max(dot(halfVec, normal), 0.0), u_material.shininess);

  vec3 ambient = light.ambient * texel * attenuation * intensity;
  vec3 diffuse = light.diffuse * texel * diff * attenuation * intensity;
  vec3 specular = light.specular * u_material.specular * spec * attenuation * intensity;

  return ambient + diffuse + specular;
}

void main() {
  vec2 texCoords = v_texCoords + vec2(sin((v_texCoords.y * u_frequency + u_time) * radians(360.0)) * u_amplitude, 0.0);
  vec3 texel = texture(u_material.diffuse, texCoords).xyz;
  vec3 color = vec3(0.0, 0.0, 0.0);
  // front facing is actually the back face since we flipped y-axis in the vertex shader
  vec3 normal = normalize(v_normal) * (1.0 - 2.0 * float(gl_FrontFacing));
  vec3 fragToCamera = normalize(-v_position);

  color += computeLight(SpotLight(
    u_directionalLight.ambient,
    u_directionalLight.diffuse,
    u_directionalLight.specular,
    -u_directionalLight.direction + v_position,
    u_directionalLight.direction,
    // disable intensity
    -2.0, -3.0,
    // disable attenuation
    0.0, 0.0
  ), normal, fragToCamera, texel);

  color += computeLight(SpotLight(
    u_pointLight.ambient,
    u_pointLight.diffuse,
    u_pointLight.specular,
    u_pointLight.position,
    -u_pointLight.position + v_position,
    // disable intensity
    -2.0, -3.0,
    u_pointLight.attenuation1,
    u_pointLight.attenuation2
  ), normal, fragToCamera, texel);

  color += computeLight(u_spotLight, normal, fragToCamera, texel);

  outColor = vec4(color, float(texCoords.x >= 0.0 && texCoords.x <= 1.0 || u_amplitude < 0.000001));
}
    `},invert:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = vec4(1.0 - texture(u_image, v_texCoords).rgb, 1.0);
}
    `},kernel:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel;

out vec4 outColor;

${pt}

void main() {
  vec3 color = kernalMultiply(u_kernel, u_image, v_texCoords);
  outColor = vec4(color, 1.0);
}
    `},gradient2:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel1;
uniform mat3 u_kernel2;

out vec4 outColor;

${pt}

void main() {
  vec3 color1 = kernalMultiply(u_kernel1, u_image, v_texCoords);
  vec3 color2 = kernalMultiply(u_kernel2, u_image, v_texCoords);
  outColor = vec4(
    length(vec2(color1.r, color2.r)),
    length(vec2(color1.g, color2.g)),
    length(vec2(color1.b, color2.b)),
    1.0);
}
    `},gradient8:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel[8];

out vec4 outColor;

${pt}

void main() {
  vec3 result = vec3(0.0);
  for (int i = 0; i < 8; ++i) {
    result = max(result, kernalMultiply(u_kernel[i], u_image, v_texCoords));
  }
  outColor = vec4(result, 1.0);
}
    `},contrast:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_contrast;

out vec4 outColor;

void main() {
  outColor = vec4(texture(u_image, v_texCoords).rgb, 1.0);
  outColor.rgb = (outColor.rgb - 0.5) * u_contrast + 0.5;
}
    `},bloom:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_luminance;

out vec4 outColor;

${pt}

void main() {
  vec3 sum = vec3(0.0);

  vec2 offsets[8] = vec2[](
    vec2(-1, -1),
    vec2(-1,  0),
    vec2(-1,  1),
    vec2( 0, -1),
    vec2( 0,  1),
    vec2( 1, -1),
    vec2( 1,  0),
    vec2( 1,  1)
  );

  for (int i = 0; i < 8; ++i) {
    vec3 color = getColor(offsets[i], u_image, v_texCoords);
    float luminance = dot(color, vec3(1.0/3.0));
    if (luminance >= u_luminance) {
      sum += color;
    }
  }

  vec3 result = texture(u_image, v_texCoords).rgb + sum / 8.0;
  outColor = vec4(result, 1.0);
}
    `},mix:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_weights;

out vec4 outColor;

void main() {
  outColor = vec4(u_weights * texture(u_image, v_texCoords).rgb, 1.0);
}
    `},vignette:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_inner;
uniform float u_outer;

out vec4 outColor;

void main() {
  float dist = length(v_texCoords - vec2(0.5, 0.5));
  float factor = 1.0 - smoothstep(u_inner, u_outer, dist);
  outColor = vec4(factor * texture(u_image, v_texCoords).rgb, 1.0);
}
    `}};class Yo{constructor(e){he(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:Wo(this.gl,rn[e].vertex,rn[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function Rt(t,e,r){for(const[n,i]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];["u_image","u_material.diffuse"].includes(n)&&typeof i=="number"?t.uniform1i(a,i):Array.isArray(i)?i.length===2?t.uniform2fv(a,i):i.length===3?t.uniform3fv(a,i):i.length===4?t.uniform4fv(a,i):i.length===9?t.uniformMatrix3fv(a,!1,i):i.length===16&&t.uniformMatrix4fv(a,!1,i):typeof i=="number"?t.uniform1f(a,i):typeof i=="boolean"&&t.uniform1i(a,i?1:0)}}function Wo(t,e,r){const n=an(t,t.VERTEX_SHADER,e);let i;try{i=an(t,t.FRAGMENT_SHADER,r)}catch(o){throw t.deleteShader(n),o}const a=t.createProgram();if(a===null)throw t.deleteShader(i),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.detachShader(a,i),t.detachShader(a,n),t.deleteShader(i),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const o=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${o}`)}return a}function an(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${i}`)}return n}function Zo(t,e,r,n){n.effects.length>0?n.renderTextures[0].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT);let i,a;for(const o of r){i!==o.program&&(t.useProgram(o.program.program),i=o.program),a!==o.geometry&&(t.bindVertexArray(o.geometry.vao),a=o.geometry);const s=o.getUniforms(e);Rt(t,o.program,s),t.drawArrays(o.geometry.drawMode,0,o.geometry.drawCount)}if(n.effects.length!==0){t.bindVertexArray(n.quad.vao);for(let o=0;o<n.effects.length;++o){const{program:s,uniforms:l}=n.effects[o],u=o%2,c=1-u;o<n.effects.length-1?n.renderTextures[c].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(s.program);const f=n.renderTextures[u].bindAsInput();Rt(t,s,{u_image:f,...l}),t.drawArrays(n.quad.drawMode,0,n.quad.drawCount)}}}function Jo(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(xe.a_position),t.vertexAttribPointer(xe.a_position,3,t.FLOAT,!1,8*4,0),t.enableVertexAttribArray(xe.a_texCoords),t.vertexAttribPointer(xe.a_texCoords,2,t.FLOAT,!1,8*4,3*4),t.enableVertexAttribArray(xe.a_normal),t.vertexAttribPointer(xe.a_normal,3,t.FLOAT,!1,8*4,5*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const Qo={full:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],sudoku:[-3,-3,0,-1,2,0,0,1,3,-3,0,2,2,0,0,1,-3,3,0,-1,-1,0,0,1,3,3,0,2,-1,0,0,1],tower:[-1,-3,0,0,2,0,0,1,1,-3,0,1,2,0,0,1,-1,3,0,0,-1,0,0,1,1,3,0,1,-1,0,0,1],topHalf:[-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],bottomHalf:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1],leftHalf:[-1,-1,0,0,1,0,0,1,0,-1,0,.5,1,0,0,1,-1,1,0,0,0,0,0,1,0,1,0,.5,0,0,0,1],rightHalf:[0,-1,0,.5,1,0,0,1,1,-1,0,1,1,0,0,1,0,1,0,.5,0,0,0,1,1,1,0,1,0,0,0,1],quad:[-1,-1,0,0,0,0,0,1,1,-1,0,1,0,0,0,1,-1,1,0,0,1,0,0,1,1,1,0,1,1,0,0,1]};class Ko{constructor(e){he(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=Jo(this.gl,Qo[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}const el=["grayscale","sepia","boxBlur","guassian","sharpen1","sharpen2","emboss","laplacian1","laplacian2","prewitt","sobel","kirsch","darken","lighten","highContrast","bloom","invert","grb","rbg","bgr","gbr","brg","0gb","r0b","rg0","vignette"],sn={grayscale:{program:"mix",uniforms:{u_weights:[.2126,.2126,.2126,.7152,.7152,.7152,.0722,.0722,.0722]}},sepia:{program:"mix",uniforms:{u_weights:[.393,.349,.272,.769,.686,.534,.189,.168,.131]}},boxBlur:{program:"kernel",uniforms:{u_kernel:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]}},guassian:{program:"kernel",uniforms:{u_kernel:[1/16,2/16,1/16,2/16,4/16,2/16,1/16,2/16,1/16]}},sharpen1:{program:"kernel",uniforms:{u_kernel:[-.0023,-.0432,-.0023,-.0432,1.182,-.0432,-.0023,-.0432,-.0023]}},sharpen2:{program:"kernel",uniforms:{u_kernel:[-1/9,-1/9,-1/9,-1/9,17/9,-1/9,-1/9,-1/9,-1/9]}},emboss:{program:"kernel",uniforms:{u_kernel:[-2,-1,0,-1,1,1,0,1,2]}},laplacian1:{program:"kernel",uniforms:{u_kernel:[0,-1,0,-1,4,-1,0,-1,0]}},laplacian2:{program:"kernel",uniforms:{u_kernel:[-1,-1,-1,-1,8,-1,-1,-1,-1]}},prewitt:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,1,0,-1,1,0,-1],u_kernel2:[1,1,1,0,0,0,-1,-1,-1]}},sobel:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,2,0,-2,1,0,-1],u_kernel2:[1,2,1,0,0,0,-1,-2,-1]}},kirsch:{program:"gradient8",uniforms:{"u_kernel[0]":[5,5,5,-3,0,-3,-3,-3,-3],"u_kernel[1]":[-3,5,5,-3,0,5,-3,-3,-3],"u_kernel[2]":[-3,-3,5,-3,0,5,-3,-3,5],"u_kernel[3]":[-3,-3,-3,-3,0,5,-3,5,5],"u_kernel[4]":[-3,-3,-3,-3,0,-3,5,5,5],"u_kernel[5]":[-3,-3,-3,5,0,-3,5,5,-3],"u_kernel[6]":[5,-3,-3,5,0,-3,5,-3,-3],"u_kernel[7]":[5,5,-3,5,0,-3,-3,-3,-3]}},darken:{program:"mix",uniforms:{u_kernel:[.5,0,0,0,.5,0,0,0,.5]}},lighten:{program:"kernel",uniforms:{u_kernel:[2,0,0,0,2,0,0,0,2]}},highContrast:{program:"contrast",uniforms:{u_contrast:2}},bloom:{program:"bloom",uniforms:{u_luminance:.6}},invert:{program:"invert",uniforms:{}},grb:{program:"mix",uniforms:{u_weights:[0,1,0,1,0,0,0,0,1]}},rbg:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,1,0,1,0]}},bgr:{program:"mix",uniforms:{u_weights:[0,0,1,0,1,0,1,0,0]}},gbr:{program:"mix",uniforms:{u_weights:[0,0,1,1,0,0,0,1,0]}},brg:{program:"mix",uniforms:{u_weights:[0,1,0,0,0,1,1,0,0]}},"0gb":{program:"mix",uniforms:{u_weights:[0,0,0,0,1,0,0,0,1]}},r0b:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,0,0,0,1]}},rg0:{program:"mix",uniforms:{u_weights:[1,0,0,0,1,0,0,0,0]}},vignette:{program:"vignette",uniforms:{u_inner:.4,u_outer:.6}}};function on(t,e){return e.map(r=>({program:t.createProgram(sn[r].program),uniforms:sn[r].uniforms}))}class tl{constructor(e){he(this,"gl");he(this,"programFactory");he(this,"geometryFactory");he(this,"texture");he(this,"renderTextures");he(this,"quad");he(this,"queue",[]);he(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new Yo(this.gl),this.geometryFactory=new Ko(this.gl),this.texture=new Vo(this.gl),this.renderTextures=[new nn(this.gl,1),new nn(this.gl,2)],this.quad=this.geometryFactory.createGeometry("quad")}animate(e,r){return new Promise((n,i)=>{const a=new Ho;if(a.setRepeat(0),a.setDelay(e.output.delayMs),a.setSize(e.output.width,e.output.height),!a.start()){i("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:i,frame:0,sprites:Wt(this.programFactory,this.geometryFactory,e.animation),effects:on(this.programFactory,e.effects.filter(s=>s.enabled).map(s=>s.type)),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,i)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:i,frame:r,sprites:Wt(this.programFactory,this.geometryFactory,e.animation),effects:on(this.programFactory,e.effects.filter(a=>a.enabled).map(a=>a.type))}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let m=0;m<this.queue.length-1;++m)this.queue[m].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:i,effects:a,frame:o}=this.queue[0],{image:s,output:l,camera:u,projection:c,material:f,directionalLight:h,pointLight:p,spotLight:d}=r;if(e==="frame"||e==="gif"&&this.queue[0].frame===0){await this.texture.loadImage(s.url);const{width:m,height:v,clear:y}=l;this.renderTextures.forEach(q=>q.setSize(m,v)),this.canvas.width=m,this.canvas.height=v,this.gl.viewport(0,0,m,v),this.gl.clearColor(...y,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.activeTexture(this.gl.TEXTURE0+this.texture.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture.texture);const b=$e();fr(b,u.position,u.lookAt,u.up);const g=$e();c.perspective?mr(g,c.left,c.right,c.bottom,c.top,c.near,c.far):pr(g,c.left,c.right,c.bottom,c.top,c.near,c.far);const w={u_view:b,u_projection:g,"u_material.diffuse":this.texture.unit,"u_material.specular":f.specular,"u_material.shininess":f.shininess,"u_directionalLight.ambient":h.ambient,"u_directionalLight.diffuse":h.diffuse,"u_directionalLight.specular":h.specular,"u_directionalLight.direction":h.direction,"u_pointLight.ambient":p.ambient,"u_pointLight.diffuse":p.diffuse,"u_pointLight.specular":p.specular,"u_pointLight.position":p.position,"u_pointLight.attenuation1":p.attenuation1,"u_pointLight.attenuation2":p.attenuation2,"u_spotLight.ambient":d.ambient,"u_spotLight.diffuse":d.diffuse,"u_spotLight.specular":d.specular,"u_spotLight.position":d.position,"u_spotLight.direction":d.direction,"u_spotLight.innerCos":Math.cos($t(d.innerDegrees)),"u_spotLight.outerCos":Math.cos($t(d.outerDegrees)),"u_spotLight.attenuation1":d.attenuation1,"u_spotLight.attenuation2":d.attenuation2};for(const q of Go(i.map(X=>X.program)))this.gl.useProgram(q.program),Rt(this.gl,q,w)}if(Zo(this.gl,o/r.output.totalFrames,i,{renderTextures:this.renderTextures,quad:this.quad,effects:a}),e==="frame")n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:m,callback:v}=this.queue[0];v(o);const y=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,y),m.addFrame(y,!0),m.setTransparent(16777215),o===l.totalFrames-1){m.finish();const b=m.stream().getData(),g="data:image/gif;base64,"+window.btoa(b);n({dataUri:g}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.renderTextures.forEach(e=>e.destroy()),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Be=function(){const{subscribe:t,update:e}=Ct({animations:Pt,current:Pt[0]}),r=a=>{e(o=>o.current===a||!o.animations.find(l=>l===a)?o:{animations:o.animations,current:a})};function n(a,o){e(({animations:s,current:l})=>{const u={...l,editOptions:l.editOptions.map(c=>c===a?{...a,value:o}:c)};return{animations:s.map(c=>c===l?u:c),current:u}})}function i(){e(({animations:a,current:o})=>{const s=Pt.find(l=>l.name===o.name);return{animations:a.map(l=>l===o?s:l),current:s}})}return{subscribe:t,changeCurrentAnimation:r,changeEditOptions:n,resetEditOptions:i}}(),wt=function(){const{subscribe:t,update:e}=Ct(el.map(i=>({type:i,enabled:!1})));function r(i,a){e(o=>o.map(s=>s.type===i?{type:i,enabled:a}:s))}function n(){e(i=>i.map(a=>({...a,enabled:!1})))}return{subscribe:t,change:r,reset:n}}();function qe(t){let e=!0;const{subscribe:r,update:n}=Ct(void 0,o=>Be.subscribe(({current:s})=>{e&&o(s.defaultOptions[t])}));function i(o){n(s=>(e=!1,{...s,...o}))}function a(){n(()=>(e=!0,st(Be).current.defaultOptions[t]))}return{subscribe:r,change:i,reset:a}}const yt=qe("image"),Ue=qe("output"),Ze=qe("camera"),Pe=qe("projection"),ot=qe("material"),He=qe("directionalLight"),je=qe("pointLight"),Se=qe("spotLight"),jt=ar([yt,Ue,Ze,Pe,ot,He,je,Se,Be,wt],([t,e,r,n,i,a,o,s,l,u])=>({image:t,output:e,camera:r,projection:n,material:i,directionalLight:a,pointLight:o,spotLight:s,animation:l.current,effects:u})),at=function(){const t=Ct({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(o){r(s=>{var l;return(l=s.animator)==null||l.destroy(),{animator:new tl(o),running:!1,frame:0}})}function i(){const{animator:o}=st(t);return o?(r(s=>({...s,running:!0,frame:0})),o.animate(st(jt),s=>r(l=>({...l,frame:s}))).finally(()=>{r(s=>({...s,running:!1}))})):Promise.reject("Animator has not been created")}function a(o){const{animator:s,frame:l}=st(t);if(!s)return Promise.reject("Animator has not been created");let u;typeof o>"u"?u=l:u=o;const c=st(jt);return u>=c.output.totalFrames&&(u=c.output.totalFrames-1),r(f=>({...f,frame:u,running:!0})),s.renderFrame(c,u).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:i,renderFrame:a}}();function ln(t,{delay:e=0,duration:r=400,easing:n=qn}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:a=>`opacity: ${a*i}`}}function un(t){let e,r,n;const i=t[4].default,a=Hn(i,t,t[3],null);return{c(){e=D("div"),a&&a.c(),this.h()},l(o){e=R(o,"DIV",{class:!0});var s=H(e);a&&a.l(s),s.forEach($),this.h()},h(){_(e,"class","section__content svelte-8mtv8e")},m(o,s){B(o,e,s),a&&a.m(e,null),n=!0},p(o,s){a&&a.p&&(!n||s&8)&&Vn(a,i,o,o[3],n?Wn(i,o[3],s,null):Yn(o[3]),null)},i(o){n||(C(a,o),Zn(()=>{r||(r=zt(e,ln,{duration:250},!0)),r.run(1)}),n=!0)},o(o){S(a,o),r||(r=zt(e,ln,{duration:250},!1)),r.run(0),n=!1},d(o){o&&$(e),a&&a.d(o),o&&r&&r.end()}}}function nl(t){let e,r,n,i,a=t[0]?"-":"+",o,s,l,u,c,f,h,p,d,m,v,y,b=t[0]&&un(t);return{c(){e=D("section"),r=D("header"),n=D("button"),i=ce("["),o=ce(a),s=ce("]"),l=P(),u=D("h2"),c=ce(t[1]),f=P(),h=D("button"),p=ce("Reset"),d=P(),b&&b.c(),this.h()},l(g){e=R(g,"SECTION",{class:!0});var w=H(e);r=R(w,"HEADER",{class:!0});var q=H(r);n=R(q,"BUTTON",{class:!0,type:!0});var X=H(n);i=fe(X,"["),o=fe(X,a),s=fe(X,"]"),X.forEach($),l=F(q),u=R(q,"H2",{class:!0});var K=H(u);c=fe(K,t[1]),K.forEach($),f=F(q),h=R(q,"BUTTON",{class:!0,type:!0});var se=H(h);p=fe(se,"Reset"),se.forEach($),q.forEach($),d=F(w),b&&b.l(w),w.forEach($),this.h()},h(){_(n,"class","section__expand svelte-8mtv8e"),_(n,"type","button"),_(u,"class","section__heading svelte-8mtv8e"),_(h,"class","section__reset svelte-8mtv8e"),_(h,"type","button"),_(r,"class","section__header svelte-8mtv8e"),_(e,"class","section svelte-8mtv8e")},m(g,w){B(g,e,w),E(e,r),E(r,n),E(n,i),E(n,o),E(n,s),E(r,l),E(r,u),E(u,c),E(r,f),E(r,h),E(h,p),E(e,d),b&&b.m(e,null),m=!0,v||(y=[We(n,"click",t[5]),We(h,"click",t[6])],v=!0)},p(g,[w]){(!m||w&1)&&a!==(a=g[0]?"-":"+")&&Le(o,a),(!m||w&2)&&Le(c,g[1]),g[0]?b?(b.p(g,w),w&1&&C(b,1)):(b=un(g),b.c(),C(b,1),b.m(e,null)):b&&(Et(),S(b,1,1,()=>{b=null}),Tt())},i(g){m||(C(b),m=!0)},o(g){S(b),m=!1},d(g){g&&$(e),b&&b.d(),v=!1,Xn(y)}}}function rl(t,e,r){let{$$slots:n={},$$scope:i}=e,{title:a=""}=e,{expanded:o=!0}=e;const s=ct(),l=()=>r(0,o=!o),u=()=>s("reset");return t.$$set=c=>{"title"in c&&r(1,a=c.title),"expanded"in c&&r(0,o=c.expanded),"$$scope"in c&&r(3,i=c.$$scope)},[o,a,s,i,n,l,u]}class Ie extends de{constructor(e){super(),ve(this,e,rl,nl,_e,{title:1,expanded:0})}}function al(t){let e,r,n,i,a,o,s,l;return{c(){e=D("label"),r=D("input"),n=P(),i=D("div"),a=D("img"),this.h()},l(u){e=R(u,"LABEL",{class:!0});var c=H(e);r=R(c,"INPUT",{class:!0,type:!0,accept:!0}),n=F(c),i=R(c,"DIV",{class:!0});var f=H(i);a=R(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach($),c.forEach($),this.h()},h(){_(r,"class","image__input svelte-1me35do"),_(r,"type","file"),_(r,"accept","image/*"),_(a,"class","image__preview svelte-1me35do"),Ye(a.src,o=t[0].url)||_(a,"src",o),_(a,"alt","source"),_(i,"class","image__container svelte-1me35do"),_(e,"class","image svelte-1me35do")},m(u,c){B(u,e,c),E(e,r),E(e,n),E(e,i),E(i,a),s||(l=We(r,"input",t[1]),s=!0)},p(u,c){c&1&&!Ye(a.src,o=u[0].url)&&_(a,"src",o)},d(u){u&&$(e),s=!1,l()}}}function il(t){let e,r;return e=new Ie({props:{title:"Image",expanded:!0,$$slots:{default:[al]},$$scope:{ctx:t}}}),e.$on("reset",yt.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&5&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function sl(t,e,r){let n;Te(t,yt,a=>r(0,n=a));function i(a){var l;const s=(l=a.target.files)==null?void 0:l[0];s&&yt.change({url:URL.createObjectURL(s)})}return[n,i]}class ol extends de{constructor(e){super(),ve(this,e,sl,il,_e,{})}}function cn(t){let e,r,n,i,a,o;return{c(){e=D("label"),r=ce(t[1]),n=P(),i=D("input"),this.h()},l(s){e=R(s,"LABEL",{class:!0});var l=H(e);r=fe(l,t[1]),n=F(l),i=R(l,"INPUT",{class:!0,type:!0}),l.forEach($),this.h()},h(){_(i,"class","slider__text-input svelte-1h0gcvd"),_(i,"type","text"),i.value=t[0],_(e,"class","slider__label svelte-1h0gcvd")},m(s,l){B(s,e,l),E(e,r),E(e,n),E(e,i),a||(o=We(i,"input",t[5]),a=!0)},p(s,l){l&2&&Le(r,s[1]),l&1&&i.value!==s[0]&&(i.value=s[0])},d(s){s&&$(e),a=!1,o()}}}function ll(t){let e,r,n,i,a=gt(t[2])+"",o,s,l,u,c,f,h=gt(t[3])+"",p,d,m,v=t[1]&&cn(t);return{c(){e=D("div"),v&&v.c(),r=P(),n=D("div"),i=D("span"),o=ce(a),s=P(),l=D("div"),u=D("input"),c=P(),f=D("span"),p=ce(h),this.h()},l(y){e=R(y,"DIV",{class:!0});var b=H(e);v&&v.l(b),r=F(b),n=R(b,"DIV",{class:!0});var g=H(n);i=R(g,"SPAN",{class:!0});var w=H(i);o=fe(w,a),w.forEach($),s=F(g),l=R(g,"DIV",{class:!0});var q=H(l);u=R(q,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),q.forEach($),c=F(g),f=R(g,"SPAN",{class:!0});var X=H(f);p=fe(X,h),X.forEach($),g.forEach($),b.forEach($),this.h()},h(){_(i,"class","slider__range slider__range--min svelte-1h0gcvd"),_(u,"class","slider__input svelte-1h0gcvd"),_(u,"type","range"),_(u,"min",t[2]),_(u,"max",t[3]),_(u,"step",t[4]),u.value=t[0],_(l,"class","slider__input-container svelte-1h0gcvd"),_(f,"class","slider__range slider__range--max"),_(n,"class","slider__container svelte-1h0gcvd"),_(e,"class","slider")},m(y,b){B(y,e,b),v&&v.m(e,null),E(e,r),E(e,n),E(n,i),E(i,o),E(n,s),E(n,l),E(l,u),E(n,c),E(n,f),E(f,p),d||(m=We(u,"input",t[5]),d=!0)},p(y,[b]){y[1]?v?v.p(y,b):(v=cn(y),v.c(),v.m(e,r)):v&&(v.d(1),v=null),b&4&&a!==(a=gt(y[2])+"")&&Le(o,a),b&4&&_(u,"min",y[2]),b&8&&_(u,"max",y[3]),b&16&&_(u,"step",y[4]),b&1&&(u.value=y[0]),b&8&&h!==(h=gt(y[3])+"")&&Le(p,h)},i:Ge,o:Ge,d(y){y&&$(e),v&&v.d(),d=!1,m()}}}function gt(t){return t.toFixed(2).replace(/\.?0+$/,"")}function ul(t,e,r){const n=ct();let{label:i=""}=e,{min:a=0}=e,{max:o=100}=e,{step:s=1}=e,{value:l=o<a?a:(o-a)/2}=e;function u(c){const f=c.target,h=parseFloat(f.value);Number.isNaN(h)||(r(0,l=h),n("input",{value:l}))}return t.$$set=c=>{"label"in c&&r(1,i=c.label),"min"in c&&r(2,a=c.min),"max"in c&&r(3,o=c.max),"step"in c&&r(4,s=c.step),"value"in c&&r(0,l=c.value)},[l,i,a,o,s,u]}class ne extends de{constructor(e){super(),ve(this,e,ul,ll,_e,{label:1,min:2,max:3,step:4,value:0})}}function cl(t){let e,r,n,i,a,o;return e=new ne({props:{label:`${t[0]}R`,min:0,max:1,step:.01,value:t[1][0]}}),e.$on("input",t[3]),n=new ne({props:{label:`${t[0]}G`,min:0,max:1,step:.01,value:t[1][1]}}),n.$on("input",t[4]),a=new ne({props:{label:`${t[0]}B`,min:0,max:1,step:.01,value:t[1][2]}}),a.$on("input",t[5]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment)},l(s){x(e.$$.fragment,s),r=F(s),x(n.$$.fragment,s),i=F(s),x(a.$$.fragment,s)},m(s,l){k(e,s,l),B(s,r,l),k(n,s,l),B(s,i,l),k(a,s,l),o=!0},p(s,[l]){const u={};l&1&&(u.label=`${s[0]}R`),l&2&&(u.value=s[1][0]),e.$set(u);const c={};l&1&&(c.label=`${s[0]}G`),l&2&&(c.value=s[1][1]),n.$set(c);const f={};l&1&&(f.label=`${s[0]}B`),l&2&&(f.value=s[1][2]),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){A(e,s),s&&$(r),A(n,s),s&&$(i),A(a,s)}}}function fl(t,e,r){let{label:n=""}=e,{value:i=[1,1,1]}=e;const a=ct();function o(c,f){const h=[...i];h[c]=f,a("input",{value:h})}const s=c=>o(0,c.detail.value),l=c=>o(1,c.detail.value),u=c=>o(2,c.detail.value);return t.$$set=c=>{"label"in c&&r(0,n=c.label),"value"in c&&r(1,i=c.value)},[n,i,o,s,l,u]}class ke extends de{constructor(e){super(),ve(this,e,fl,cl,_e,{label:0,value:1})}}function ml(t){let e,r,n,i,a,o,s,l,u,c;return e=new ne({props:{label:"width",min:1,max:1024,step:1,value:t[0].width}}),e.$on("input",t[1]),n=new ne({props:{label:"height",min:1,max:1024,step:1,value:t[0].height}}),n.$on("input",t[2]),a=new ne({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[0].delayMs}}),a.$on("input",t[3]),s=new ne({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[0].totalFrames}}),s.$on("input",t[4]),u=new ke({props:{label:"clear",value:t[0].clear}}),u.$on("input",t[5]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment)},l(f){x(e.$$.fragment,f),r=F(f),x(n.$$.fragment,f),i=F(f),x(a.$$.fragment,f),o=F(f),x(s.$$.fragment,f),l=F(f),x(u.$$.fragment,f)},m(f,h){k(e,f,h),B(f,r,h),k(n,f,h),B(f,i,h),k(a,f,h),B(f,o,h),k(s,f,h),B(f,l,h),k(u,f,h),c=!0},p(f,h){const p={};h&1&&(p.value=f[0].width),e.$set(p);const d={};h&1&&(d.value=f[0].height),n.$set(d);const m={};h&1&&(m.value=f[0].delayMs),a.$set(m);const v={};h&1&&(v.value=f[0].totalFrames),s.$set(v);const y={};h&1&&(y.value=f[0].clear),u.$set(y)},i(f){c||(C(e.$$.fragment,f),C(n.$$.fragment,f),C(a.$$.fragment,f),C(s.$$.fragment,f),C(u.$$.fragment,f),c=!0)},o(f){S(e.$$.fragment,f),S(n.$$.fragment,f),S(a.$$.fragment,f),S(s.$$.fragment,f),S(u.$$.fragment,f),c=!1},d(f){A(e,f),f&&$(r),A(n,f),f&&$(i),A(a,f),f&&$(o),A(s,f),f&&$(l),A(u,f)}}}function pl(t){let e,r;return e=new Ie({props:{title:"Output",expanded:!0,$$slots:{default:[ml]},$$scope:{ctx:t}}}),e.$on("reset",Ue.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&65&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function gl(t,e,r){let n;return Te(t,Ue,u=>r(0,n=u)),[n,u=>Ue.change({width:u.detail.value}),u=>Ue.change({height:u.detail.value}),u=>Ue.change({delayMs:u.detail.value}),u=>Ue.change({totalFrames:u.detail.value}),u=>Ue.change({clear:u.detail.value})]}class hl extends de{constructor(e){super(),ve(this,e,gl,pl,_e,{})}}function dl(t){let e,r,n,i,a,o;return e=new ne({props:{label:`${t[0]}X`,min:-10,max:10,step:.01,value:t[1][0]}}),e.$on("input",t[3]),n=new ne({props:{label:`${t[0]}Y`,min:-10,max:10,step:.01,value:t[1][1]}}),n.$on("input",t[4]),a=new ne({props:{label:`${t[0]}Z`,min:-10,max:10,step:.01,value:t[1][2]}}),a.$on("input",t[5]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment)},l(s){x(e.$$.fragment,s),r=F(s),x(n.$$.fragment,s),i=F(s),x(a.$$.fragment,s)},m(s,l){k(e,s,l),B(s,r,l),k(n,s,l),B(s,i,l),k(a,s,l),o=!0},p(s,[l]){const u={};l&1&&(u.label=`${s[0]}X`),l&2&&(u.value=s[1][0]),e.$set(u);const c={};l&1&&(c.label=`${s[0]}Y`),l&2&&(c.value=s[1][1]),n.$set(c);const f={};l&1&&(f.label=`${s[0]}Z`),l&2&&(f.value=s[1][2]),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){A(e,s),s&&$(r),A(n,s),s&&$(i),A(a,s)}}}function vl(t,e,r){let{label:n=""}=e,{value:i=[0,0,-1]}=e;const a=ct();function o(c,f){const h=[...i];h[c]=f,a("input",{value:h})}const s=c=>o(0,c.detail.value),l=c=>o(1,c.detail.value),u=c=>o(2,c.detail.value);return t.$$set=c=>{"label"in c&&r(0,n=c.label),"value"in c&&r(1,i=c.value)},[n,i,o,s,l,u]}class Ve extends de{constructor(e){super(),ve(this,e,vl,dl,_e,{label:0,value:1})}}function _l(t){let e,r,n,i,a,o;return e=new Ve({props:{label:"position",value:t[0].position}}),e.$on("input",t[1]),n=new Ve({props:{label:"lookAt",value:t[0].lookAt}}),n.$on("input",t[2]),a=new Ve({props:{label:"up",value:t[0].up}}),a.$on("input",t[3]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment)},l(s){x(e.$$.fragment,s),r=F(s),x(n.$$.fragment,s),i=F(s),x(a.$$.fragment,s)},m(s,l){k(e,s,l),B(s,r,l),k(n,s,l),B(s,i,l),k(a,s,l),o=!0},p(s,l){const u={};l&1&&(u.value=s[0].position),e.$set(u);const c={};l&1&&(c.value=s[0].lookAt),n.$set(c);const f={};l&1&&(f.value=s[0].up),a.$set(f)},i(s){o||(C(e.$$.fragment,s),C(n.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(n.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){A(e,s),s&&$(r),A(n,s),s&&$(i),A(a,s)}}}function $l(t){let e,r;return e=new Ie({props:{title:"Camera",expanded:!1,$$slots:{default:[_l]},$$scope:{ctx:t}}}),e.$on("reset",Ze.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&17&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function bl(t,e,r){let n;return Te(t,Ze,s=>r(0,n=s)),[n,s=>Ze.change({position:s.detail.value}),s=>Ze.change({lookAt:s.detail.value}),s=>Ze.change({up:s.detail.value})]}class wl extends de{constructor(e){super(),ve(this,e,bl,$l,_e,{})}}function yl(t){let e,r,n,i,a,o,s;return{c(){e=D("div"),r=ce(t[1]),n=P(),i=D("label"),a=D("input"),this.h()},l(l){e=R(l,"DIV",{class:!0});var u=H(e);r=fe(u,t[1]),n=F(u),i=R(u,"LABEL",{class:!0});var c=H(i);a=R(c,"INPUT",{class:!0,type:!0}),c.forEach($),u.forEach($),this.h()},h(){_(a,"class","toggle__checkbox svelte-1j9rfin"),_(a,"type","checkbox"),a.checked=t[0],_(i,"class","toggle__label svelte-1j9rfin"),ze(i,"toggle__label--active",t[0]),_(e,"class","toggle svelte-1j9rfin")},m(l,u){B(l,e,u),E(e,r),E(e,n),E(e,i),E(i,a),o||(s=We(a,"change",t[2]),o=!0)},p(l,[u]){u&2&&Le(r,l[1]),u&1&&(a.checked=l[0]),u&1&&ze(i,"toggle__label--active",l[0])},i:Ge,o:Ge,d(l){l&&$(e),o=!1,s()}}}function El(t,e,r){const n=ct();let{label:i=""}=e,{value:a=!1}=e;function o(s){const l=s.target;r(0,a=Boolean(l.checked)),n("change",{value:a})}return t.$$set=s=>{"label"in s&&r(1,i=s.label),"value"in s&&r(0,a=s.value)},[a,i,o]}class Mt extends de{constructor(e){super(),ve(this,e,El,yl,_e,{label:1,value:0})}}function Tl(t){let e,r,n,i,a,o,s,l,u,c,f,h,p,d;return e=new Mt({props:{label:"perspective",value:t[0].perspective}}),e.$on("change",t[1]),n=new ne({props:{label:"left",min:-10,max:10,step:.01,value:t[0].left}}),n.$on("input",t[2]),a=new ne({props:{label:"right",min:-10,max:10,step:.01,value:t[0].right}}),a.$on("input",t[3]),s=new ne({props:{label:"bottom",min:-10,max:10,step:.01,value:t[0].bottom}}),s.$on("input",t[4]),u=new ne({props:{label:"top",min:-10,max:10,step:.01,value:t[0].top}}),u.$on("input",t[5]),f=new ne({props:{label:"near",min:.01,max:10,step:.01,value:t[0].near}}),f.$on("input",t[6]),p=new ne({props:{label:"far",min:.01,max:10,step:.01,value:t[0].far}}),p.$on("input",t[7]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment),c=P(),O(f.$$.fragment),h=P(),O(p.$$.fragment)},l(m){x(e.$$.fragment,m),r=F(m),x(n.$$.fragment,m),i=F(m),x(a.$$.fragment,m),o=F(m),x(s.$$.fragment,m),l=F(m),x(u.$$.fragment,m),c=F(m),x(f.$$.fragment,m),h=F(m),x(p.$$.fragment,m)},m(m,v){k(e,m,v),B(m,r,v),k(n,m,v),B(m,i,v),k(a,m,v),B(m,o,v),k(s,m,v),B(m,l,v),k(u,m,v),B(m,c,v),k(f,m,v),B(m,h,v),k(p,m,v),d=!0},p(m,v){const y={};v&1&&(y.value=m[0].perspective),e.$set(y);const b={};v&1&&(b.value=m[0].left),n.$set(b);const g={};v&1&&(g.value=m[0].right),a.$set(g);const w={};v&1&&(w.value=m[0].bottom),s.$set(w);const q={};v&1&&(q.value=m[0].top),u.$set(q);const X={};v&1&&(X.value=m[0].near),f.$set(X);const K={};v&1&&(K.value=m[0].far),p.$set(K)},i(m){d||(C(e.$$.fragment,m),C(n.$$.fragment,m),C(a.$$.fragment,m),C(s.$$.fragment,m),C(u.$$.fragment,m),C(f.$$.fragment,m),C(p.$$.fragment,m),d=!0)},o(m){S(e.$$.fragment,m),S(n.$$.fragment,m),S(a.$$.fragment,m),S(s.$$.fragment,m),S(u.$$.fragment,m),S(f.$$.fragment,m),S(p.$$.fragment,m),d=!1},d(m){A(e,m),m&&$(r),A(n,m),m&&$(i),A(a,m),m&&$(o),A(s,m),m&&$(l),A(u,m),m&&$(c),A(f,m),m&&$(h),A(p,m)}}}function Cl(t){let e,r;return e=new Ie({props:{title:"Projection",expanded:!1,$$slots:{default:[Tl]},$$scope:{ctx:t}}}),e.$on("reset",Pe.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&257&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function Sl(t,e,r){let n;return Te(t,Pe,f=>r(0,n=f)),[n,f=>Pe.change({perspective:f.detail.value}),f=>Pe.change({left:f.detail.value}),f=>Pe.change({right:f.detail.value}),f=>Pe.change({bottom:f.detail.value}),f=>Pe.change({top:f.detail.value}),f=>Pe.change({near:f.detail.value}),f=>Pe.change({far:f.detail.value})]}class Ol extends de{constructor(e){super(),ve(this,e,Sl,Cl,_e,{})}}function xl(t){let e,r,n,i;return e=new ke({props:{label:"specular",value:t[0].specular}}),e.$on("input",t[1]),n=new ne({props:{label:"shininess",min:0,max:100,step:.1,value:t[0].shininess}}),n.$on("input",t[2]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment)},l(a){x(e.$$.fragment,a),r=F(a),x(n.$$.fragment,a)},m(a,o){k(e,a,o),B(a,r,o),k(n,a,o),i=!0},p(a,o){const s={};o&1&&(s.value=a[0].specular),e.$set(s);const l={};o&1&&(l.value=a[0].shininess),n.$set(l)},i(a){i||(C(e.$$.fragment,a),C(n.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),i=!1},d(a){A(e,a),a&&$(r),A(n,a)}}}function kl(t){let e,r;return e=new Ie({props:{title:"Material",expanded:!1,$$slots:{default:[xl]},$$scope:{ctx:t}}}),e.$on("reset",ot.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&9&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function Al(t,e,r){let n;return Te(t,ot,o=>r(0,n=o)),[n,o=>ot.change({specular:o.detail.value}),o=>ot.change({shininess:o.detail.value})]}class Ml extends de{constructor(e){super(),ve(this,e,Al,kl,_e,{})}}function Pl(t){let e,r,n,i,a,o,s,l;return e=new ke({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new ke({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),a=new ke({props:{label:"specular",value:t[0].specular}}),a.$on("input",t[3]),s=new Ve({props:{label:"direction",value:t[0].direction}}),s.$on("input",t[4]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment),o=P(),O(s.$$.fragment)},l(u){x(e.$$.fragment,u),r=F(u),x(n.$$.fragment,u),i=F(u),x(a.$$.fragment,u),o=F(u),x(s.$$.fragment,u)},m(u,c){k(e,u,c),B(u,r,c),k(n,u,c),B(u,i,c),k(a,u,c),B(u,o,c),k(s,u,c),l=!0},p(u,c){const f={};c&1&&(f.value=u[0].ambient),e.$set(f);const h={};c&1&&(h.value=u[0].diffuse),n.$set(h);const p={};c&1&&(p.value=u[0].specular),a.$set(p);const d={};c&1&&(d.value=u[0].direction),s.$set(d)},i(u){l||(C(e.$$.fragment,u),C(n.$$.fragment,u),C(a.$$.fragment,u),C(s.$$.fragment,u),l=!0)},o(u){S(e.$$.fragment,u),S(n.$$.fragment,u),S(a.$$.fragment,u),S(s.$$.fragment,u),l=!1},d(u){A(e,u),u&&$(r),A(n,u),u&&$(i),A(a,u),u&&$(o),A(s,u)}}}function Fl(t){let e,r;return e=new Ie({props:{title:"Directional light",expanded:!1,$$slots:{default:[Pl]},$$scope:{ctx:t}}}),e.$on("reset",He.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&33&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function Ll(t,e,r){let n;return Te(t,He,l=>r(0,n=l)),[n,l=>He.change({ambient:l.detail.value}),l=>He.change({diffuse:l.detail.value}),l=>He.change({specular:l.detail.value}),l=>He.change({direction:l.detail.value})]}class Il extends de{constructor(e){super(),ve(this,e,Ll,Fl,_e,{})}}function Dl(t){let e,r,n,i,a,o,s,l,u,c,f,h;return e=new ke({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new ke({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),a=new ke({props:{label:"specular",value:t[0].specular}}),a.$on("input",t[3]),s=new Ve({props:{label:"position",value:t[0].position}}),s.$on("input",t[4]),u=new ne({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),u.$on("input",t[5]),f=new ne({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),f.$on("input",t[6]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment),c=P(),O(f.$$.fragment)},l(p){x(e.$$.fragment,p),r=F(p),x(n.$$.fragment,p),i=F(p),x(a.$$.fragment,p),o=F(p),x(s.$$.fragment,p),l=F(p),x(u.$$.fragment,p),c=F(p),x(f.$$.fragment,p)},m(p,d){k(e,p,d),B(p,r,d),k(n,p,d),B(p,i,d),k(a,p,d),B(p,o,d),k(s,p,d),B(p,l,d),k(u,p,d),B(p,c,d),k(f,p,d),h=!0},p(p,d){const m={};d&1&&(m.value=p[0].ambient),e.$set(m);const v={};d&1&&(v.value=p[0].diffuse),n.$set(v);const y={};d&1&&(y.value=p[0].specular),a.$set(y);const b={};d&1&&(b.value=p[0].position),s.$set(b);const g={};d&1&&(g.value=p[0].attenuation1),u.$set(g);const w={};d&1&&(w.value=p[0].attenuation2),f.$set(w)},i(p){h||(C(e.$$.fragment,p),C(n.$$.fragment,p),C(a.$$.fragment,p),C(s.$$.fragment,p),C(u.$$.fragment,p),C(f.$$.fragment,p),h=!0)},o(p){S(e.$$.fragment,p),S(n.$$.fragment,p),S(a.$$.fragment,p),S(s.$$.fragment,p),S(u.$$.fragment,p),S(f.$$.fragment,p),h=!1},d(p){A(e,p),p&&$(r),A(n,p),p&&$(i),A(a,p),p&&$(o),A(s,p),p&&$(l),A(u,p),p&&$(c),A(f,p)}}}function Rl(t){let e,r;return e=new Ie({props:{title:"Point light",expanded:!1,$$slots:{default:[Dl]},$$scope:{ctx:t}}}),e.$on("reset",je.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&129&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function jl(t,e,r){let n;return Te(t,je,c=>r(0,n=c)),[n,c=>je.change({ambient:c.detail.value}),c=>je.change({diffuse:c.detail.value}),c=>je.change({specular:c.detail.value}),c=>je.change({position:c.detail.value}),c=>je.change({attenuation1:c.detail.value}),c=>je.change({attenuation2:c.detail.value})]}class Ul extends de{constructor(e){super(),ve(this,e,jl,Rl,_e,{})}}function Bl(t){let e,r,n,i,a,o,s,l,u,c,f,h,p,d,m,v,y,b;return e=new ke({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new ke({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),a=new ke({props:{label:"specular",value:t[0].specular}}),a.$on("input",t[3]),s=new Ve({props:{label:"position",value:t[0].position}}),s.$on("input",t[4]),u=new Ve({props:{label:"direction",value:t[0].direction}}),u.$on("input",t[5]),f=new ne({props:{label:"innerDegrees",min:0,max:360,step:1,value:t[0].innerDegrees}}),f.$on("input",t[6]),p=new ne({props:{label:"outerDegrees",min:0,max:360,step:1,value:t[0].outerDegrees}}),p.$on("input",t[7]),m=new ne({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),m.$on("input",t[8]),y=new ne({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),y.$on("input",t[9]),{c(){O(e.$$.fragment),r=P(),O(n.$$.fragment),i=P(),O(a.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment),c=P(),O(f.$$.fragment),h=P(),O(p.$$.fragment),d=P(),O(m.$$.fragment),v=P(),O(y.$$.fragment)},l(g){x(e.$$.fragment,g),r=F(g),x(n.$$.fragment,g),i=F(g),x(a.$$.fragment,g),o=F(g),x(s.$$.fragment,g),l=F(g),x(u.$$.fragment,g),c=F(g),x(f.$$.fragment,g),h=F(g),x(p.$$.fragment,g),d=F(g),x(m.$$.fragment,g),v=F(g),x(y.$$.fragment,g)},m(g,w){k(e,g,w),B(g,r,w),k(n,g,w),B(g,i,w),k(a,g,w),B(g,o,w),k(s,g,w),B(g,l,w),k(u,g,w),B(g,c,w),k(f,g,w),B(g,h,w),k(p,g,w),B(g,d,w),k(m,g,w),B(g,v,w),k(y,g,w),b=!0},p(g,w){const q={};w&1&&(q.value=g[0].ambient),e.$set(q);const X={};w&1&&(X.value=g[0].diffuse),n.$set(X);const K={};w&1&&(K.value=g[0].specular),a.$set(K);const se={};w&1&&(se.value=g[0].position),s.$set(se);const le={};w&1&&(le.value=g[0].direction),u.$set(le);const V={};w&1&&(V.value=g[0].innerDegrees),f.$set(V);const Y={};w&1&&(Y.value=g[0].outerDegrees),p.$set(Y);const me={};w&1&&(me.value=g[0].attenuation1),m.$set(me);const we={};w&1&&(we.value=g[0].attenuation2),y.$set(we)},i(g){b||(C(e.$$.fragment,g),C(n.$$.fragment,g),C(a.$$.fragment,g),C(s.$$.fragment,g),C(u.$$.fragment,g),C(f.$$.fragment,g),C(p.$$.fragment,g),C(m.$$.fragment,g),C(y.$$.fragment,g),b=!0)},o(g){S(e.$$.fragment,g),S(n.$$.fragment,g),S(a.$$.fragment,g),S(s.$$.fragment,g),S(u.$$.fragment,g),S(f.$$.fragment,g),S(p.$$.fragment,g),S(m.$$.fragment,g),S(y.$$.fragment,g),b=!1},d(g){A(e,g),g&&$(r),A(n,g),g&&$(i),A(a,g),g&&$(o),A(s,g),g&&$(l),A(u,g),g&&$(c),A(f,g),g&&$(h),A(p,g),g&&$(d),A(m,g),g&&$(v),A(y,g)}}}function Nl(t){let e,r;return e=new Ie({props:{title:"Spot light",expanded:!1,$$slots:{default:[Bl]},$$scope:{ctx:t}}}),e.$on("reset",Se.reset),{c(){O(e.$$.fragment)},l(n){x(e.$$.fragment,n)},m(n,i){k(e,n,i),r=!0},p(n,[i]){const a={};i&1025&&(a.$$scope={dirty:i,ctx:n}),e.$set(a)},i(n){r||(C(e.$$.fragment,n),r=!0)},o(n){S(e.$$.fragment,n),r=!1},d(n){A(e,n)}}}function zl(t,e,r){let n;return Te(t,Se,p=>r(0,n=p)),[n,p=>Se.change({ambient:p.detail.value}),p=>Se.change({diffuse:p.detail.value}),p=>Se.change({specular:p.detail.value}),p=>Se.change({position:p.detail.value}),p=>Se.change({direction:p.detail.value}),p=>Se.change({innerDegrees:p.detail.value}),p=>Se.change({outerDegrees:p.detail.value}),p=>Se.change({attenuation1:p.detail.value}),p=>Se.change({attenuation2:p.detail.value})]}class Gl extends de{constructor(e){super(),ve(this,e,zl,Nl,_e,{})}}function ql(t){let e,r,n,i,a,o,s,l,u,c,f,h,p,d,m,v,y,b;return r=new ol({}),i=new hl({}),o=new wl({}),l=new Ol({}),c=new Ml({}),h=new Il({}),d=new Ul({}),v=new Gl({}),{c(){e=D("aside"),O(r.$$.fragment),n=P(),O(i.$$.fragment),a=P(),O(o.$$.fragment),s=P(),O(l.$$.fragment),u=P(),O(c.$$.fragment),f=P(),O(h.$$.fragment),p=P(),O(d.$$.fragment),m=P(),O(v.$$.fragment),this.h()},l(g){e=R(g,"ASIDE",{class:!0});var w=H(e);x(r.$$.fragment,w),n=F(w),x(i.$$.fragment,w),a=F(w),x(o.$$.fragment,w),s=F(w),x(l.$$.fragment,w),u=F(w),x(c.$$.fragment,w),f=F(w),x(h.$$.fragment,w),p=F(w),x(d.$$.fragment,w),m=F(w),x(v.$$.fragment,w),w.forEach($),this.h()},h(){_(e,"class",y=Fe(`container ${t[0]}`)+" svelte-7v3svs")},m(g,w){B(g,e,w),k(r,e,null),E(e,n),k(i,e,null),E(e,a),k(o,e,null),E(e,s),k(l,e,null),E(e,u),k(c,e,null),E(e,f),k(h,e,null),E(e,p),k(d,e,null),E(e,m),k(v,e,null),b=!0},p(g,[w]){(!b||w&1&&y!==(y=Fe(`container ${g[0]}`)+" svelte-7v3svs"))&&_(e,"class",y)},i(g){b||(C(r.$$.fragment,g),C(i.$$.fragment,g),C(o.$$.fragment,g),C(l.$$.fragment,g),C(c.$$.fragment,g),C(h.$$.fragment,g),C(d.$$.fragment,g),C(v.$$.fragment,g),b=!0)},o(g){S(r.$$.fragment,g),S(i.$$.fragment,g),S(o.$$.fragment,g),S(l.$$.fragment,g),S(c.$$.fragment,g),S(h.$$.fragment,g),S(d.$$.fragment,g),S(v.$$.fragment,g),b=!1},d(g){g&&$(e),A(r),A(i),A(o),A(l),A(c),A(h),A(d),A(v)}}}function Xl(t,e,r){let{class:n=""}=e;return t.$$set=i=>{"class"in i&&r(0,n=i.class)},[n]}class Hl extends de{constructor(e){super(),ve(this,e,Xl,ql,_e,{class:0})}}function fn(t,e,r){const n=t.slice();return n[6]=e[r],n}function mn(t,e,r){const n=t.slice();return n[9]=e[r],n}function Vl(t){let e,r;function n(...i){return t[4](t[9],...i)}return e=new Mt({props:{label:t[9].name,value:t[9].value}}),e.$on("change",n),{c(){O(e.$$.fragment)},l(i){x(e.$$.fragment,i)},m(i,a){k(e,i,a),r=!0},p(i,a){t=i;const o={};a&2&&(o.label=t[9].name),a&2&&(o.value=t[9].value),e.$set(o)},i(i){r||(C(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){A(e,i)}}}function Yl(t){let e,r;function n(...i){return t[3](t[9],...i)}return e=new ne({props:{label:t[9].name,min:t[9].min,max:t[9].max,step:t[9].step,value:t[9].value}}),e.$on("input",n),{c(){O(e.$$.fragment)},l(i){x(e.$$.fragment,i)},m(i,a){k(e,i,a),r=!0},p(i,a){t=i;const o={};a&2&&(o.label=t[9].name),a&2&&(o.min=t[9].min),a&2&&(o.max=t[9].max),a&2&&(o.step=t[9].step),a&2&&(o.value=t[9].value),e.$set(o)},i(i){r||(C(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){A(e,i)}}}function pn(t){let e,r,n,i;const a=[Yl,Vl],o=[];function s(l,u){return l[9].type==="slider"?0:l[9].type==="toggle"?1:-1}return~(e=s(t))&&(r=o[e]=a[e](t)),{c(){r&&r.c(),n=Je()},l(l){r&&r.l(l),n=Je()},m(l,u){~e&&o[e].m(l,u),B(l,n,u),i=!0},p(l,u){let c=e;e=s(l),e===c?~e&&o[e].p(l,u):(r&&(Et(),S(o[c],1,1,()=>{o[c]=null}),Tt()),~e?(r=o[e],r?r.p(l,u):(r=o[e]=a[e](l),r.c()),C(r,1),r.m(n.parentNode,n)):r=null)},i(l){i||(C(r),i=!0)},o(l){S(r),i=!1},d(l){~e&&o[e].d(l),l&&$(n)}}}function Wl(t){let e,r,n=t[1].current.editOptions,i=[];for(let o=0;o<n.length;o+=1)i[o]=pn(mn(t,n,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Je()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=Je()},m(o,s){for(let l=0;l<i.length;l+=1)i[l].m(o,s);B(o,e,s),r=!0},p(o,s){if(s&2){n=o[1].current.editOptions;let l;for(l=0;l<n.length;l+=1){const u=mn(o,n,l);i[l]?(i[l].p(u,s),C(i[l],1)):(i[l]=pn(u),i[l].c(),C(i[l],1),i[l].m(e.parentNode,e))}for(Et(),l=n.length;l<i.length;l+=1)a(l);Tt()}},i(o){if(!r){for(let s=0;s<n.length;s+=1)C(i[s]);r=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)S(i[s]);r=!1},d(o){wn(i,o),o&&$(e)}}}function gn(t){let e,r;function n(...i){return t[5](t[6],...i)}return e=new Mt({props:{label:t[6].type,value:t[6].enabled}}),e.$on("change",n),{c(){O(e.$$.fragment)},l(i){x(e.$$.fragment,i)},m(i,a){k(e,i,a),r=!0},p(i,a){t=i;const o={};a&4&&(o.label=t[6].type),a&4&&(o.value=t[6].enabled),e.$set(o)},i(i){r||(C(e.$$.fragment,i),r=!0)},o(i){S(e.$$.fragment,i),r=!1},d(i){A(e,i)}}}function Zl(t){let e,r,n=t[2],i=[];for(let o=0;o<n.length;o+=1)i[o]=gn(fn(t,n,o));const a=o=>S(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Je()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=Je()},m(o,s){for(let l=0;l<i.length;l+=1)i[l].m(o,s);B(o,e,s),r=!0},p(o,s){if(s&4){n=o[2];let l;for(l=0;l<n.length;l+=1){const u=fn(o,n,l);i[l]?(i[l].p(u,s),C(i[l],1)):(i[l]=gn(u),i[l].c(),C(i[l],1),i[l].m(e.parentNode,e))}for(Et(),l=n.length;l<i.length;l+=1)a(l);Tt()}},i(o){if(!r){for(let s=0;s<n.length;s+=1)C(i[s]);r=!0}},o(o){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)S(i[s]);r=!1},d(o){wn(i,o),o&&$(e)}}}function Jl(t){let e,r,n,i,a,o;return r=new Ie({props:{title:t[1].current.name,expanded:!0,$$slots:{default:[Wl]},$$scope:{ctx:t}}}),r.$on("reset",Be.resetEditOptions),i=new Ie({props:{title:"Effects",expanded:!1,$$slots:{default:[Zl]},$$scope:{ctx:t}}}),i.$on("reset",wt.reset),{c(){e=D("aside"),O(r.$$.fragment),n=P(),O(i.$$.fragment),this.h()},l(s){e=R(s,"ASIDE",{class:!0});var l=H(e);x(r.$$.fragment,l),n=F(l),x(i.$$.fragment,l),l.forEach($),this.h()},h(){_(e,"class",a=Fe(`container ${t[0]}`)+" svelte-7v3svs")},m(s,l){B(s,e,l),k(r,e,null),E(e,n),k(i,e,null),o=!0},p(s,[l]){const u={};l&2&&(u.title=s[1].current.name),l&4098&&(u.$$scope={dirty:l,ctx:s}),r.$set(u);const c={};l&4100&&(c.$$scope={dirty:l,ctx:s}),i.$set(c),(!o||l&1&&a!==(a=Fe(`container ${s[0]}`)+" svelte-7v3svs"))&&_(e,"class",a)},i(s){o||(C(r.$$.fragment,s),C(i.$$.fragment,s),o=!0)},o(s){S(r.$$.fragment,s),S(i.$$.fragment,s),o=!1},d(s){s&&$(e),A(r),A(i)}}}function Ql(t,e,r){let n,i;Te(t,Be,u=>r(1,n=u)),Te(t,wt,u=>r(2,i=u));let{class:a=""}=e;const o=(u,c)=>Be.changeEditOptions(u,c.detail.value),s=(u,c)=>Be.changeEditOptions(u,c.detail.value),l=(u,c)=>wt.change(u.type,c.detail.value);return t.$$set=u=>{"class"in u&&r(0,a=u.class)},[a,n,i,o,s,l]}class Kl extends de{constructor(e){super(),ve(this,e,Ql,Jl,_e,{class:0})}}function hn(t,e,r){const n=t.slice();return n[3]=e[r],n}function dn(t,e){let r,n,i,a,o,s,l=e[3].name+"",u,c,f,h;function p(){return e[2](e[3])}return{key:t,first:null,c(){r=D("button"),n=D("img"),o=P(),s=D("span"),u=ce(l),c=P(),this.h()},l(d){r=R(d,"BUTTON",{type:!0,class:!0});var m=H(r);n=R(m,"IMG",{class:!0,src:!0,alt:!0}),o=F(m),s=R(m,"SPAN",{});var v=H(s);u=fe(v,l),v.forEach($),c=F(m),m.forEach($),this.h()},h(){_(n,"class","image svelte-1l1v01j"),Ye(n.src,i=`${dt}/demo-${e[3].name}.gif`)||_(n,"src",i),_(n,"alt",a=e[3].name),_(r,"type","button"),_(r,"class","option svelte-1l1v01j"),ze(r,"option--selected",e[3]===e[1].current),this.first=r},m(d,m){B(d,r,m),E(r,n),E(r,o),E(r,s),E(s,u),E(r,c),f||(h=We(r,"click",p),f=!0)},p(d,m){e=d,m&2&&!Ye(n.src,i=`${dt}/demo-${e[3].name}.gif`)&&_(n,"src",i),m&2&&a!==(a=e[3].name)&&_(n,"alt",a),m&2&&l!==(l=e[3].name+"")&&Le(u,l),m&2&&ze(r,"option--selected",e[3]===e[1].current)},d(d){d&&$(r),f=!1,h()}}}function eu(t){let e,r=[],n=new Map,i,a=t[1].animations;const o=s=>s[3].name;for(let s=0;s<a.length;s+=1){let l=hn(t,a,s),u=o(l);n.set(u,r[s]=dn(u,l))}return{c(){e=D("aside");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=R(s,"ASIDE",{class:!0});var l=H(e);for(let u=0;u<r.length;u+=1)r[u].l(l);l.forEach($),this.h()},h(){_(e,"class",i=Fe(`container ${t[0]}`)+" svelte-1l1v01j")},m(s,l){B(s,e,l);for(let u=0;u<r.length;u+=1)r[u].m(e,null)},p(s,[l]){l&2&&(a=s[1].animations,r=Jn(r,l,o,1,s,a,n,e,Qn,dn,null,hn)),l&1&&i!==(i=Fe(`container ${s[0]}`)+" svelte-1l1v01j")&&_(e,"class",i)},i:Ge,o:Ge,d(s){s&&$(e);for(let l=0;l<r.length;l+=1)r[l].d()}}}function tu(t,e,r){let n;Te(t,Be,o=>r(1,n=o));let{class:i=""}=e;const a=o=>Be.changeCurrentAnimation(o);return t.$$set=o=>{"class"in o&&r(0,i=o.class)},[i,n,a]}class nu extends de{constructor(e){super(),ve(this,e,tu,eu,_e,{class:0})}}function vn(t){t[12]=t[13].dataUri}function _n(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:iu,then:au,catch:ru,value:13,error:14};return Gt(r=t[3],n),{c(){e=D("div"),n.block.c(),this.h()},l(i){e=R(i,"DIV",{class:!0});var a=H(e);n.block.l(a),a.forEach($),this.h()},h(){_(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(i,a){B(i,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(i,a){t=i,n.ctx=t,a&8&&r!==(r=t[3])&&Gt(r,n)||tr(n,t,a)},d(i){i&&$(e),n.block.d(),n.token=null,n=null}}}function ru(t){let e,r,n=t[14]+"",i;return{c(){e=D("p"),r=ce("An error has occurred: "),i=ce(n),this.h()},l(a){e=R(a,"P",{class:!0});var o=H(e);r=fe(o,"An error has occurred: "),i=fe(o,n),o.forEach($),this.h()},h(){_(e,"class","preview__error svelte-13qbjon")},m(a,o){B(a,e,o),E(e,r),E(e,i)},p(a,o){o&8&&n!==(n=a[14]+"")&&Le(i,n)},d(a){a&&$(e)}}}function au(t){vn(t);let e,r,n,i,a,o,s;return{c(){e=D("div"),r=D("img"),i=P(),a=D("a"),o=ce("Download"),this.h()},l(l){e=R(l,"DIV",{class:!0});var u=H(e);r=R(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach($),i=F(l),a=R(l,"A",{class:!0,download:!0,href:!0});var c=H(a);o=fe(c,"Download"),c.forEach($),this.h()},h(){_(r,"class","preview__image svelte-13qbjon"),Ye(r.src,n=t[12])||_(r,"src",n),_(r,"alt","generated gif"),_(e,"class","preview__image-container svelte-13qbjon"),_(a,"class","preview__download-button svelte-13qbjon"),_(a,"download","jumping_peter.gif"),_(a,"href",s=t[12])},m(l,u){B(l,e,u),E(e,r),B(l,i,u),B(l,a,u),E(a,o)},p(l,u){vn(l),u&8&&!Ye(r.src,n=l[12])&&_(r,"src",n),u&8&&s!==(s=l[12])&&_(a,"href",s)},d(l){l&&$(e),l&&$(i),l&&$(a)}}}function iu(t){let e,r,n,i,a,o,s=t[4].frame+"",l,u,c=t[5].totalFrames+"",f,h,p,d,m,v;return{c(){e=D("div"),r=D("p"),n=ce("Generating..."),i=P(),a=D("p"),o=ce("["),l=ce(s),u=ce(" / "),f=ce(c),h=ce("]"),p=P(),d=D("progress"),this.h()},l(y){e=R(y,"DIV",{class:!0});var b=H(e);r=R(b,"P",{});var g=H(r);n=fe(g,"Generating..."),g.forEach($),i=F(b),a=R(b,"P",{});var w=H(a);o=fe(w,"["),l=fe(w,s),u=fe(w," / "),f=fe(w,c),h=fe(w,"]"),w.forEach($),p=F(b),d=R(b,"PROGRESS",{class:!0,max:!0}),H(d).forEach($),b.forEach($),this.h()},h(){_(d,"class","preview__progress svelte-13qbjon"),_(d,"max",m=t[5].totalFrames),d.value=v=t[4].frame,_(e,"class","preview__loading svelte-13qbjon")},m(y,b){B(y,e,b),E(e,r),E(r,n),E(e,i),E(e,a),E(a,o),E(a,l),E(a,u),E(a,f),E(a,h),E(e,p),E(e,d)},p(y,b){b&16&&s!==(s=y[4].frame+"")&&Le(l,s),b&32&&c!==(c=y[5].totalFrames+"")&&Le(f,c),b&32&&m!==(m=y[5].totalFrames)&&_(d,"max",m),b&16&&v!==(v=y[4].frame)&&(d.value=v)},d(y){y&&$(e)}}}function su(t){let e,r,n,i,a,o,s,l,u,c,f,h;n=new Mt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[3]&&_n(t);return c=new ne({props:{min:0,max:t[5].totalFrames-1,step:1,value:t[4].frame}}),c.$on("input",t[6]),{c(){e=D("main"),r=D("div"),O(n.$$.fragment),i=P(),p&&p.c(),a=P(),o=D("div"),s=D("div"),l=D("canvas"),u=P(),O(c.$$.fragment),this.h()},l(d){e=R(d,"MAIN",{class:!0});var m=H(e);r=R(m,"DIV",{class:!0});var v=H(r);x(n.$$.fragment,v),v.forEach($),i=F(m),p&&p.l(m),a=F(m),o=R(m,"DIV",{class:!0});var y=H(o);s=R(y,"DIV",{class:!0});var b=H(s);l=R(b,"CANVAS",{class:!0,style:!0}),H(l).forEach($),b.forEach($),u=F(y),x(c.$$.fragment,y),y.forEach($),m.forEach($),this.h()},h(){_(r,"class","preview__debug-input svelte-13qbjon"),_(l,"class","preview__image svelte-13qbjon"),Kn(l,"transform","scaleY(-1)"),_(s,"class","preview__image-container svelte-13qbjon"),_(o,"class","preview__container preview__container--debug svelte-13qbjon"),_(e,"class",f=Fe(`preview ${t[0]}`)+" svelte-13qbjon"),ze(e,"preview--debug",t[1]),ze(e,"preview--no-debug",!t[1])},m(d,m){B(d,e,m),E(e,r),k(n,r,null),E(e,i),p&&p.m(e,null),E(e,a),E(e,o),E(o,s),E(s,l),t[9](l),E(o,u),k(c,o,null),h=!0},p(d,[m]){const v={};m&2&&(v.value=d[1]),n.$set(v),!d[1]&&d[3]?p?p.p(d,m):(p=_n(d),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const y={};m&32&&(y.max=d[5].totalFrames-1),m&16&&(y.value=d[4].frame),c.$set(y),(!h||m&1&&f!==(f=Fe(`preview ${d[0]}`)+" svelte-13qbjon"))&&_(e,"class",f),(!h||m&3)&&ze(e,"preview--debug",d[1]),(!h||m&3)&&ze(e,"preview--no-debug",!d[1])},i(d){h||(C(n.$$.fragment,d),C(c.$$.fragment,d),h=!0)},o(d){S(n.$$.fragment,d),S(c.$$.fragment,d),h=!1},d(d){d&&$(e),A(n),p&&p.d(),t[9](null),A(c)}}}function ou(t,e,r){let n,i,a;Te(t,jt,m=>r(8,n=m)),Te(t,at,m=>r(4,i=m)),Te(t,Ue,m=>r(5,a=m));let o,{class:s=""}=e,l=!1,u=null;function c(){at.renderFrame().catch(m=>{throw console.error(`renderFrame failed: ${m}`),m})}function f(){r(3,u=at.animate().catch(m=>{throw console.error(`animate failed: ${m}`),m}))}er(()=>{at.changeCanvas(o),f()});function h(m){at.renderFrame(m.detail.value).catch(v=>console.error(`Animation failed: ${v}`))}function p(m){r(1,l=m.detail.value)}function d(m){nr[m?"unshift":"push"](()=>{o=m,r(2,o)})}return t.$$set=m=>{"class"in m&&r(0,s=m.class)},t.$$.update=()=>{t.$$.dirty&258&&(l?c():f())},[s,l,o,u,i,a,h,p,n,d]}class lu extends de{constructor(e){super(),ve(this,e,ou,su,_e,{class:0})}}function uu(t){let e,r,n,i,a,o,s,l,u,c,f,h,p,d,m,v,y,b,g,w,q,X,K,se,le;return document.title=e=it,v=new or({props:{class:"header"}}),b=new nu({props:{class:"animations"}}),w=new Hl({props:{class:"common-options"}}),X=new Kl({props:{class:"animation-options"}}),se=new lu({props:{class:"preview"}}),{c(){r=D("meta"),n=D("meta"),i=D("meta"),a=D("meta"),o=D("meta"),s=D("meta"),l=D("meta"),u=D("meta"),c=D("meta"),f=D("meta"),h=D("meta"),p=D("meta"),d=P(),m=D("div"),O(v.$$.fragment),y=P(),O(b.$$.fragment),g=P(),O(w.$$.fragment),q=P(),O(X.$$.fragment),K=P(),O(se.$$.fragment),this.h()},l(V){const Y=rr("svelte-2dqrj",document.head);r=R(Y,"META",{name:!0,content:!0,class:!0}),n=R(Y,"META",{name:!0,content:!0,class:!0}),i=R(Y,"META",{property:!0,content:!0,class:!0}),a=R(Y,"META",{property:!0,content:!0,class:!0}),o=R(Y,"META",{property:!0,content:!0,class:!0}),s=R(Y,"META",{property:!0,content:!0,class:!0}),l=R(Y,"META",{property:!0,content:!0,class:!0}),u=R(Y,"META",{property:!0,content:!0,class:!0}),c=R(Y,"META",{property:!0,content:!0,class:!0}),f=R(Y,"META",{property:!0,content:!0,class:!0}),h=R(Y,"META",{property:!0,content:!0,class:!0}),p=R(Y,"META",{property:!0,content:!0,class:!0}),Y.forEach($),d=F(V),m=R(V,"DIV",{class:!0});var me=H(m);x(v.$$.fragment,me),y=F(me),x(b.$$.fragment,me),g=F(me),x(w.$$.fragment,me),q=F(me),x(X.$$.fragment,me),K=F(me),x(se.$$.fragment,me),me.forEach($),this.h()},h(){_(r,"name","title"),_(r,"content",it),_(r,"class","svelte-z7ouxl"),_(n,"name","description"),_(n,"content",It),_(n,"class","svelte-z7ouxl"),_(i,"property","og:type"),_(i,"content","website"),_(i,"class","svelte-z7ouxl"),_(a,"property","og:url"),_(a,"content",$n),_(a,"class","svelte-z7ouxl"),_(o,"property","og:title"),_(o,"content",it),_(o,"class","svelte-z7ouxl"),_(s,"property","og:description"),_(s,"content",It),_(s,"class","svelte-z7ouxl"),_(l,"property","og:image"),_(l,"content",bn),_(l,"class","svelte-z7ouxl"),_(u,"property","twitter:card"),_(u,"content","summary_large_image"),_(u,"class","svelte-z7ouxl"),_(c,"property","twitter:url"),_(c,"content",$n),_(c,"class","svelte-z7ouxl"),_(f,"property","twitter:title"),_(f,"content",it),_(f,"class","svelte-z7ouxl"),_(h,"property","twitter:description"),_(h,"content",It),_(h,"class","svelte-z7ouxl"),_(p,"property","twitter:image"),_(p,"content",bn),_(p,"class","svelte-z7ouxl"),_(m,"class","grid svelte-z7ouxl")},m(V,Y){E(document.head,r),E(document.head,n),E(document.head,i),E(document.head,a),E(document.head,o),E(document.head,s),E(document.head,l),E(document.head,u),E(document.head,c),E(document.head,f),E(document.head,h),E(document.head,p),B(V,d,Y),B(V,m,Y),k(v,m,null),E(m,y),k(b,m,null),E(m,g),k(w,m,null),E(m,q),k(X,m,null),E(m,K),k(se,m,null),le=!0},p(V,[Y]){(!le||Y&0)&&e!==(e=it)&&(document.title=e)},i(V){le||(C(v.$$.fragment,V),C(b.$$.fragment,V),C(w.$$.fragment,V),C(X.$$.fragment,V),C(se.$$.fragment,V),le=!0)},o(V){S(v.$$.fragment,V),S(b.$$.fragment,V),S(w.$$.fragment,V),S(X.$$.fragment,V),S(se.$$.fragment,V),le=!1},d(V){$(r),$(n),$(i),$(a),$(o),$(s),$(l),$(u),$(c),$(f),$(h),$(p),V&&$(d),V&&$(m),A(v),A(b),A(w),A(X),A(se)}}}const it="Jumping Peter",It="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",$n="https://ksmai.github.io/jumping-peter",bn="https://ksmai.github.io/jumping-peter/favicon.png";class pu extends de{constructor(e){super(),ve(this,e,null,uu,_e,{})}}export{pu as default};
