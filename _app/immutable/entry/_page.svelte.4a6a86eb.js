var Cn=Object.defineProperty;var Pn=(t,e,a)=>e in t?Cn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Se=(t,e,a)=>(Pn(t,typeof e!="symbol"?e+"":e,a),a);import{S as ge,i as ve,n as de,j as F,s as I,q as pe,k as U,l as q,c as j,r as he,g as $,m as _,J as Ve,K as Ie,a as N,G as O,H as ze,L as rt,C as Mn,M as Ze,u as xe,D as Ln,E as In,F as jn,f as E,b as T,N as ot,y as C,z as P,A as M,B as L,I as Oe,O as Ne,e as mt,v as on,d as ln,P as kn,Q as Dn,R as Fn,p as Un,o as Rn,T as Ft,U as xn,w as Bn,V as Nn}from"../chunks/index.b30f5e97.js";import{b as pt,w as Lt,d as zn}from"../chunks/paths.4b33ea21.js";function Gn(t){let e,a,n,s,r,l,i,o,u,f,c,v,p;return{c(){e=F("header"),a=F("img"),s=I(),r=F("h1"),l=pe("Jumping Peter"),i=I(),o=F("p"),u=pe("generate gif emojis"),f=I(),c=F("a"),v=pe("Contribute"),this.h()},l(h){e=U(h,"HEADER",{class:!0});var m=q(e);a=U(m,"IMG",{class:!0,src:!0,alt:!0}),s=j(m),r=U(m,"H1",{class:!0});var d=q(r);l=he(d,"Jumping Peter"),d.forEach($),i=j(m),o=U(m,"P",{class:!0});var b=q(o);u=he(b,"generate gif emojis"),b.forEach($),f=j(m),c=U(m,"A",{class:!0,href:!0,target:!0,rel:!0});var S=q(c);v=he(S,"Contribute"),S.forEach($),m.forEach($),this.h()},h(){_(a,"class","logo svelte-bal6b7"),Ve(a.src,n=`${pt}/demo-jumping.gif`)||_(a,"src",n),_(a,"alt",""),_(r,"class","title svelte-bal6b7"),_(o,"class","subtitle svelte-bal6b7"),_(c,"class","contribute svelte-bal6b7"),_(c,"href","https://github.com/ksmai/jumping-peter"),_(c,"target","_blank"),_(c,"rel","noreferrer"),_(e,"class",p=Ie(`header ${t[0]}`)+" svelte-bal6b7")},m(h,m){N(h,e,m),O(e,a),O(e,s),O(e,r),O(r,l),O(e,i),O(e,o),O(o,u),O(e,f),O(e,c),O(c,v)},p(h,[m]){m&1&&p!==(p=Ie(`header ${h[0]}`)+" svelte-bal6b7")&&_(e,"class",p)},i:ze,o:ze,d(h){h&&$(e)}}}function qn(t,e,a){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&a(0,n=s.class)},[n]}class Hn extends ge{constructor(e){super(),ve(this,e,qn,Gn,de,{class:0})}}function We(t){return{...t,type:"slider",min:-360,max:360,step:1}}function qe(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Pt(t){return{...t,type:"slider",min:0,max:1,step:.01}}function ht(t){return{...t,type:"slider",min:0,max:2,step:.01}}function gt(t){return{...t,type:"slider",min:-2,max:2,step:.01}}function vt(t){return{...t,type:"slider",min:.01,max:10,step:.01}}function Ut(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Xn(t){return{...t,type:"slider",min:1,max:100,step:1}}function Vn(t){return{...t,type:"slider",min:1,max:5,step:1}}function lt(t){return{...t,type:"toggle"}}function Yn(t){return t.reduce((e,a)=>(Object.assign(e,{[a.name]:a.value}),e),{})}const se={image:{url:`${pt}/favicon.png`},output:{width:64,height:64,clear:[1,1,1],delayMs:50,totalFrames:20},material:{specular:[0,0,0],shininess:32},directionalLight:{ambient:[1,1,1],diffuse:[0,0,0],specular:[0,0,0],direction:[0,-1,-1]},pointLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],attenuation1:.2,attenuation2:.1},spotLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],direction:[0,0,-1],innerDegrees:5,outerDegrees:15,attenuation1:.2,attenuation2:.1},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!1,left:-1,right:1,bottom:-1,top:1,near:.1,far:10}};function $e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Je(t,e,a){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=a,t[5]*=a,t[9]*=a,t[13]*=a}function _e(t,e,a){un(t,e,a,0)}function Wn(t,e,a){const n=t[0],s=t[4],r=t[8],l=t[12];t[0]+=e*t[1],t[4]+=e*t[5],t[8]+=e*t[9],t[12]+=e*t[13],t[1]+=a*n,t[5]+=a*s,t[9]+=a*r,t[13]+=a*l}function un(t,e,a,n){t[12]+=e,t[13]+=a,t[14]+=n}function it(t,e){It(t,e,[0,0,1])}function It(t,e,a){const n=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);if(n===0)return;const s=a[0]/n,r=a[1]/n,l=a[2]/n,i=e/180*Math.PI,o=Math.cos(i),u=Math.sin(i),f=[(1-o)*s*s+o,(1-o)*s*r+u*l,(1-o)*s*l-u*r,0,(1-o)*s*r-u*l,(1-o)*r*r+o,(1-o)*r*l-u*s,0,(1-o)*s*l+u*r,(1-o)*r*l-u*s,(1-o)*l*l+o,0,0,0,0,1];bt(t,f)}function Jn(t,e,a,n){un(t,-e[0],-e[1],-e[2]);const s=[-a[0],-a[1],-a[2]];Rt(s);const r=xt(n,s);Rt(r);const l=xt(s,r),i=[r[0],l[0],s[0],0,r[1],l[1],s[1],0,r[2],l[2],s[2],0,0,0,0,1];bt(t,i)}function Zn(t,e,a,n,s,r,l){const i=[2*r/(a-e),0,0,0,0,2*r/(s-n),0,0,(a+e)/(a-e),(s+n)/(s-n),-(l+r)/(l-r),-1,0,0,-2*l*r/(l-r),0];bt(t,i)}function Qn(t,e,a,n,s,r,l){const i=[2/(a-e),0,0,0,0,2/(s-n),0,0,0,0,-2/(l-r),0,-(a+e)/(a-e),-(s+n)/(s-n),-(l+r)/(l-r),1];bt(t,i)}function bt(t,e){const a=t.slice();for(let n=0;n<=3;++n)for(let s=0;s<=3;++s){const r=4*n+s;t[r]=0;for(let l=0;l<=3;++l)t[r]+=e[4*l+s]*a[4*n+l]}}function Rt(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?t:[t[0]/e,t[1]/e,t[2]/e]}function xt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function te(t,e,a){return t+(e-t)*a}function dt(t){return t*Math.PI/180}function Bt(t){const e=new Float32Array([t]),[a]=new Int32Array(e.buffer);let n=Math.abs(a)|0;return n=(n>>16^n)*73244475,n=(n>>16^n)*73244475,n=n>>16^n,n/(Math.pow(2,31)-1)}function Kn(t){return e=>1-Math.pow(1-e,t)}function cn(t){const e=Math.pow(2,t-1);return a=>a<.5?e*Math.pow(a,t):1-Math.pow(2*(1-a),t)/2}const ft=cn(3),ea=Kn(2);function Nt(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const ta="spinning",na={...se,output:{...se.output,delayMs:50,totalFrames:15}},aa=[We({name:"startAngle",value:0}),We({name:"endAngle",value:360}),qe({name:"originX",value:0}),qe({name:"originY",value:0}),lt({name:"alternates",value:!1})];function fn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:r,startAngle:l,endAngle:i,originX:o,originY:u}=a;return[{program:n,geometry:s,getUniforms:c=>{const v=r?Math.min(c,1-c)*2:c,p=te(l,i,v),h=$e();return _e(h,-o,-u),it(h,p),_e(h,o,u),{u_model:h}}}]}const ra=Object.freeze(Object.defineProperty({__proto__:null,createSprites:fn,defaultOptions:na,editOptions:aa,name:ta},Symbol.toStringTag,{value:"Module"})),sa="expanding",ia={...se,output:{...se.output,delayMs:50,totalFrames:20}},oa=[vt({name:"minScale",value:1}),vt({name:"maxScale",value:2}),lt({name:"alternates",value:!1})];function mn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:r,maxScale:l,alternates:i}=a;return[{program:n,geometry:s,getUniforms:u=>{const f=i?Math.min(u,1-u)*2:u,c=te(r,l,f),v=$e();return Je(v,c,c),{u_model:v}}}]}const la=Object.freeze(Object.defineProperty({__proto__:null,createSprites:mn,defaultOptions:ia,editOptions:oa,name:sa},Symbol.toStringTag,{value:"Module"})),ua="extreme-speed",ca={...se,output:{...se.output,delayMs:20,totalFrames:10}},fa=[Ut({name:"directionX",value:-1}),Ut({name:"directionY",value:0})];function pn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:r,directionY:l}=a,i=r*2,o=l*2;return[{program:n,geometry:s,getUniforms:f=>{const c=$e(),v=te(0,i,f),p=te(0,o,f);return _e(c,v,p),{u_model:c}}}]}const ma=Object.freeze(Object.defineProperty({__proto__:null,createSprites:pn,defaultOptions:ca,editOptions:fa,name:ua},Symbol.toStringTag,{value:"Module"})),pa="excited",ha={...se,output:{...se.output,delayMs:50,totalFrames:25}},ga=[We({name:"angle",value:15}),gt({name:"startOffset",value:-.2}),gt({name:"endOffset",value:.2}),Xn({name:"cycles",value:3})];function hn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:r,cycles:l,startOffset:i,endOffset:o}=a,u=dt(r),f=Math.cos(u),c=Math.sin(u);return[{program:n,geometry:s,getUniforms:p=>{const h=p*2*l%1,m=Math.min(h,1-h)*2,d=te(-i*c,-o*c,m),b=te(i*f,o*f,m),S=$e();return it(S,r),_e(S,d,b),Je(S,p>.5?-1:1,1),{u_model:S}}}]}const va=Object.freeze(Object.defineProperty({__proto__:null,createSprites:hn,defaultOptions:ha,editOptions:ga,name:pa},Symbol.toStringTag,{value:"Module"})),da="jumping",_a={...se,output:{...se.output,delayMs:50,totalFrames:20}},$a=[ht({name:"maxOffset",value:1.2}),Pt({name:"compressTime",value:.4}),Pt({name:"maxCompress",value:.3})];function gn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:r,compressTime:l,maxCompress:i}=a;return[{program:n,geometry:s,getUniforms:u=>{const f=Math.min(u,1-u)*2,c=$e(),v=f/(1-l);if(v<1){const p=(1-v*v)*r;_e(c,0,p)}else{const p=(1-f)/l,m=1-(1-p*p)*i;_e(c,0,1),Je(c,1/m,m),_e(c,0,-1)}return{u_model:c}}}]}const ba=Object.freeze(Object.defineProperty({__proto__:null,createSprites:gn,defaultOptions:_a,editOptions:$a,name:da},Symbol.toStringTag,{value:"Module"})),wa="tower",ya={...se,output:{...se.output,delayMs:40,totalFrames:20}},Sa=[We({name:"startAngle",value:20}),We({name:"endAngle",value:-45}),Pt({name:"startTime",value:.5})];function vn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("tower"),{startAngle:r,endAngle:l,startTime:i}=a;return[{program:n,geometry:s,getUniforms:u=>{const f=$e();if(u<i){const c=u/i,v=Math.min(c,1-c)*2,p=te(0,r,v);it(f,p)}else{const c=(u-i)/(1-i),v=Math.min(c,1-c)*2,p=te(0,l,v);if(it(f,p),c>.5){const h=dt(p),m=Math.cos(h),d=Math.sin(h),b=(c-.5)*2,S=te(0,-2*d,b),g=te(0,2*m,b);_e(f,S,g)}}return{u_model:f}}}]}const Oa=Object.freeze(Object.defineProperty({__proto__:null,createSprites:vn,defaultOptions:ya,editOptions:Sa,name:wa},Symbol.toStringTag,{value:"Module"})),Ea="repeated",Ta={...se,output:{...se.output,delayMs:60,totalFrames:15}},Aa=[vt({name:"initialScale",value:.1}),lt({name:"horizontal",value:!1})];function dn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{initialScale:r,horizontal:l}=a,i=l?{geometry:e.createGeometry("leftHalf"),endX:-1,endY:0}:{geometry:e.createGeometry("topHalf"),endX:0,endY:1},o=l?{geometry:e.createGeometry("rightHalf"),endX:1,endY:0}:{geometry:e.createGeometry("bottomHalf"),endX:0,endY:-1},u=v=>{const p=$e(),h=ft(v),m=te(r,1,h);return Je(p,m,m),{u_model:p}},f=v=>{const p=$e(),h=ft(v),m=te(0,i.endX,h),d=te(0,i.endY,h);return _e(p,m,d),{u_model:p}},c=v=>{const p=$e(),h=ft(v),m=te(0,o.endX,h),d=te(0,o.endY,h);return _e(p,m,d),{u_model:p}};return[{program:n,geometry:s,getUniforms:u},{program:n,geometry:i.geometry,getUniforms:f},{program:n,geometry:o.geometry,getUniforms:c}]}const Ca=Object.freeze(Object.defineProperty({__proto__:null,createSprites:dn,defaultOptions:Ta,editOptions:Aa,name:Ea},Symbol.toStringTag,{value:"Module"})),Pa="mirror",Ma={...se,output:{...se.output,delayMs:50,totalFrames:16}},La=[lt({name:"rightHalf",value:!1})];function _n(t,e,a){const n=t.createProgram("default"),{rightHalf:s}=a,r=e.createGeometry(s?"rightHalf":"leftHalf");return[{program:n,geometry:r,getUniforms:o=>{const u=Math.min(o,1-o)*2,f=$e(),c=Nt(u),v=te(-2,-1,c);return s||Je(f,-1,1),_e(f,v,0),{u_model:f}}},{program:n,geometry:r,getUniforms:o=>{const u=Math.min(o,1-o)*2,f=$e(),c=Nt(u),v=te(2,1,c);return s&&Je(f,-1,1),_e(f,v,0),{u_model:f}}}]}const Ia=Object.freeze(Object.defineProperty({__proto__:null,createSprites:_n,defaultOptions:Ma,editOptions:La,name:Pa},Symbol.toStringTag,{value:"Module"})),ja="panic",ka={...se,output:{...se.output,delayMs:30,totalFrames:16}},Da=[ht({name:"maxOffsetX",value:.15}),ht({name:"maxOffsetY",value:.15})];function $n(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffsetX:r,maxOffsetY:l}=a;return[{program:n,geometry:s,getUniforms:o=>{const u=Bt(o+.123),f=Bt(o*2+1),c=te(-r,r,u),v=te(-l,l,f),p=$e();return _e(p,c,v),{u_model:p}}}]}const Fa=Object.freeze(Object.defineProperty({__proto__:null,createSprites:$n,defaultOptions:ka,editOptions:Da,name:ja},Symbol.toStringTag,{value:"Module"})),Ua="rotating",Ra={...se,output:{...se.output,delayMs:40,totalFrames:25},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6},material:{specular:[1,1,1],shininess:100},directionalLight:{ambient:[.6,.6,.6],diffuse:[1,1,1],specular:[1,1,1],direction:[-1,-1,-5]}},xa=[qe({name:"axisX",value:0}),qe({name:"axisY",value:1}),qe({name:"axisZ",value:0}),qe({name:"originX",value:0}),qe({name:"originY",value:0}),Vn({name:"easing",value:1}),lt({name:"alternates",value:!1})];function bn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{axisX:r,axisY:l,axisZ:i,originX:o,originY:u,easing:f,alternates:c}=a,v=[r,l,i],p=cn(f);return[{program:n,geometry:s,getUniforms:m=>{const d=c?Math.min(m,1-m)*2:m,b=p(d),S=te(0,360,b),g=$e();return _e(g,-o,-u),It(g,S,v),_e(g,o,u),{u_model:g}}}]}const Ba=Object.freeze(Object.defineProperty({__proto__:null,createSprites:bn,defaultOptions:Ra,editOptions:xa,name:Ua},Symbol.toStringTag,{value:"Module"})),Na="party",za={...se,output:{...se.output,delayMs:40,totalFrames:15},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6}},Ga=[We({name:"angle",value:10}),gt({name:"startOffset",value:-.3}),gt({name:"endOffset",value:.5})];function wn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:r,startOffset:l,endOffset:i}=a;return[{program:n,geometry:s,getUniforms:u=>{const f=2*u%1,c=Math.min(f,1-f)*2,v=ft(f),p=ea(c),h=u<.5?te(0,180,v):te(180,360,v),m=te(l,i,p),d=$e();return it(d,r),_e(d,0,m),It(d,h,[0,1,0]),{u_model:d}}}]}const qa=Object.freeze(Object.defineProperty({__proto__:null,createSprites:wn,defaultOptions:za,editOptions:Ga,name:Na},Symbol.toStringTag,{value:"Module"})),Ha="parrot",Xa={...se,output:{...se.output,delayMs:20,totalFrames:18}},Va=[vt({name:"amplitudeX",value:.6}),ht({name:"amplitudeY",value:.5})];function yn(t,e,a){const n=t.createProgram("default"),s=e.createGeometry("full"),{amplitudeX:r,amplitudeY:l}=a;return[{program:n,geometry:s,getUniforms:o=>{const u=Math.cos(o*2*Math.PI)*.5+.5,f=te(-r,r,u),c=Math.sin(o*2*Math.PI)*.5+.5,v=te(-l,0,c),p=$e();return _e(p,0,1),Wn(p,f,0),_e(p,0,-1+v),{u_model:p}}}]}const Ya=Object.freeze(Object.defineProperty({__proto__:null,createSprites:yn,defaultOptions:Xa,editOptions:Va,name:Ha},Symbol.toStringTag,{value:"Module"})),Et=[ba,ma,ra,va,la,Oa,Ca,Ia,Fa,Ba,qa,Ya];function zt(t,e,a){const n=Yn(a.editOptions);switch(a.name){case"spinning":return fn(t,e,n);case"expanding":return mn(t,e,n);case"extreme-speed":return pn(t,e,n);case"excited":return hn(t,e,n);case"jumping":return gn(t,e,n);case"tower":return vn(t,e,n);case"repeated":return dn(t,e,n);case"mirror":return _n(t,e,n);case"panic":return $n(t,e,n);case"rotating":return bn(t,e,n);case"party":return wn(t,e,n);case"parrot":return yn(t,e,n);default:(s=>{throw new Error(`Unknown animation: ${JSON.stringify(s)}`)})(a)}}var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wa=typeof ut=="object"&&ut&&ut.Object===Object&&ut,Ja=Wa,Za=Ja,Qa=typeof self=="object"&&self&&self.Object===Object&&self,Ka=Za||Qa||Function("return this")(),wt=Ka,er=wt,tr=er.Symbol,Sn=tr,Gt=Sn,On=Object.prototype,nr=On.hasOwnProperty,ar=On.toString,tt=Gt?Gt.toStringTag:void 0;function rr(t){var e=nr.call(t,tt),a=t[tt];try{t[tt]=void 0;var n=!0}catch{}var s=ar.call(t);return n&&(e?t[tt]=a:delete t[tt]),s}var sr=rr,ir=Object.prototype,or=ir.toString;function lr(t){return or.call(t)}var ur=lr,qt=Sn,cr=sr,fr=ur,mr="[object Null]",pr="[object Undefined]",Ht=qt?qt.toStringTag:void 0;function hr(t){return t==null?t===void 0?pr:mr:Ht&&Ht in Object(t)?cr(t):fr(t)}var gr=hr;function vr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var En=vr,dr=gr,_r=En,$r="[object AsyncFunction]",br="[object Function]",wr="[object GeneratorFunction]",yr="[object Proxy]";function Sr(t){if(!_r(t))return!1;var e=dr(t);return e==br||e==wr||e==$r||e==yr}var Or=Sr,Er=wt,Tr=Er["__core-js_shared__"],Ar=Tr,Tt=Ar,Xt=function(){var t=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Cr(t){return!!Xt&&Xt in t}var Pr=Cr,Mr=Function.prototype,Lr=Mr.toString;function Ir(t){if(t!=null){try{return Lr.call(t)}catch{}try{return t+""}catch{}}return""}var jr=Ir,kr=Or,Dr=Pr,Fr=En,Ur=jr,Rr=/[\\^$.*+?()[\]{}|]/g,xr=/^\[object .+?Constructor\]$/,Br=Function.prototype,Nr=Object.prototype,zr=Br.toString,Gr=Nr.hasOwnProperty,qr=RegExp("^"+zr.call(Gr).replace(Rr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hr(t){if(!Fr(t)||Dr(t))return!1;var e=kr(t)?qr:xr;return e.test(Ur(t))}var Xr=Hr;function Vr(t,e){return t==null?void 0:t[e]}var Yr=Vr,Wr=Xr,Jr=Yr;function Zr(t,e){var a=Jr(t,e);return Wr(a)?a:void 0}var jt=Zr,Qr=jt,Kr=Qr(Object,"create"),yt=Kr,Vt=yt;function es(){this.__data__=Vt?Vt(null):{},this.size=0}var ts=es;function ns(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var as=ns,rs=yt,ss="__lodash_hash_undefined__",is=Object.prototype,os=is.hasOwnProperty;function ls(t){var e=this.__data__;if(rs){var a=e[t];return a===ss?void 0:a}return os.call(e,t)?e[t]:void 0}var us=ls,cs=yt,fs=Object.prototype,ms=fs.hasOwnProperty;function ps(t){var e=this.__data__;return cs?e[t]!==void 0:ms.call(e,t)}var hs=ps,gs=yt,vs="__lodash_hash_undefined__";function ds(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=gs&&e===void 0?vs:e,this}var _s=ds,$s=ts,bs=as,ws=us,ys=hs,Ss=_s;function Qe(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var n=t[e];this.set(n[0],n[1])}}Qe.prototype.clear=$s;Qe.prototype.delete=bs;Qe.prototype.get=ws;Qe.prototype.has=ys;Qe.prototype.set=Ss;var Os=Qe;function Es(){this.__data__=[],this.size=0}var Ts=Es;function As(t,e){return t===e||t!==t&&e!==e}var Cs=As,Ps=Cs;function Ms(t,e){for(var a=t.length;a--;)if(Ps(t[a][0],e))return a;return-1}var St=Ms,Ls=St,Is=Array.prototype,js=Is.splice;function ks(t){var e=this.__data__,a=Ls(e,t);if(a<0)return!1;var n=e.length-1;return a==n?e.pop():js.call(e,a,1),--this.size,!0}var Ds=ks,Fs=St;function Us(t){var e=this.__data__,a=Fs(e,t);return a<0?void 0:e[a][1]}var Rs=Us,xs=St;function Bs(t){return xs(this.__data__,t)>-1}var Ns=Bs,zs=St;function Gs(t,e){var a=this.__data__,n=zs(a,t);return n<0?(++this.size,a.push([t,e])):a[n][1]=e,this}var qs=Gs,Hs=Ts,Xs=Ds,Vs=Rs,Ys=Ns,Ws=qs;function Ke(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var n=t[e];this.set(n[0],n[1])}}Ke.prototype.clear=Hs;Ke.prototype.delete=Xs;Ke.prototype.get=Vs;Ke.prototype.has=Ys;Ke.prototype.set=Ws;var Js=Ke,Zs=jt,Qs=wt,Ks=Zs(Qs,"Map"),ei=Ks,Yt=Os,ti=Js,ni=ei;function ai(){this.size=0,this.__data__={hash:new Yt,map:new(ni||ti),string:new Yt}}var ri=ai;function si(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ii=si,oi=ii;function li(t,e){var a=t.__data__;return oi(e)?a[typeof e=="string"?"string":"hash"]:a.map}var Ot=li,ui=Ot;function ci(t){var e=ui(this,t).delete(t);return this.size-=e?1:0,e}var fi=ci,mi=Ot;function pi(t){return mi(this,t).get(t)}var hi=pi,gi=Ot;function vi(t){return gi(this,t).has(t)}var di=vi,_i=Ot;function $i(t,e){var a=_i(this,t),n=a.size;return a.set(t,e),this.size+=a.size==n?0:1,this}var bi=$i,wi=ri,yi=fi,Si=hi,Oi=di,Ei=bi;function et(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var n=t[e];this.set(n[0],n[1])}}et.prototype.clear=wi;et.prototype.delete=yi;et.prototype.get=Si;et.prototype.has=Oi;et.prototype.set=Ei;var Ti=et,Ai="__lodash_hash_undefined__";function Ci(t){return this.__data__.set(t,Ai),this}var Pi=Ci;function Mi(t){return this.__data__.has(t)}var Li=Mi,Ii=Ti,ji=Pi,ki=Li;function _t(t){var e=-1,a=t==null?0:t.length;for(this.__data__=new Ii;++e<a;)this.add(t[e])}_t.prototype.add=_t.prototype.push=ji;_t.prototype.has=ki;var Di=_t;function Fi(t,e,a,n){for(var s=t.length,r=a+(n?1:-1);n?r--:++r<s;)if(e(t[r],r,t))return r;return-1}var Ui=Fi;function Ri(t){return t!==t}var xi=Ri;function Bi(t,e,a){for(var n=a-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}var Ni=Bi,zi=Ui,Gi=xi,qi=Ni;function Hi(t,e,a){return e===e?qi(t,e,a):zi(t,Gi,a)}var Xi=Hi,Vi=Xi;function Yi(t,e){var a=t==null?0:t.length;return!!a&&Vi(t,e,0)>-1}var Wi=Yi;function Ji(t,e,a){for(var n=-1,s=t==null?0:t.length;++n<s;)if(a(e,t[n]))return!0;return!1}var Zi=Ji;function Qi(t,e){return t.has(e)}var Ki=Qi,eo=jt,to=wt,no=eo(to,"Set"),ao=no;function ro(){}var so=ro;function io(t){var e=-1,a=Array(t.size);return t.forEach(function(n){a[++e]=n}),a}var Tn=io,At=ao,oo=so,lo=Tn,uo=1/0,co=At&&1/lo(new At([,-0]))[1]==uo?function(t){return new At(t)}:oo,fo=co,mo=Di,po=Wi,ho=Zi,go=Ki,vo=fo,_o=Tn,$o=200;function bo(t,e,a){var n=-1,s=po,r=t.length,l=!0,i=[],o=i;if(a)l=!1,s=ho;else if(r>=$o){var u=e?null:vo(t);if(u)return _o(u);l=!1,s=go,o=new mo}else o=e?[]:i;e:for(;++n<r;){var f=t[n],c=e?e(f):f;if(f=a||f!==0?f:0,l&&c===c){for(var v=o.length;v--;)if(o[v]===c)continue e;e&&o.push(c),i.push(f)}else s(o,c,a)||(o!==i&&o.push(c),i.push(f))}return i}var wo=bo,yo=wo;function So(t){return t&&t.length?yo(t):[]}var Oo=So;const Eo=function(){var t={},e=-1,a,n,s,r,l,i,o=12,u=5003,f,c=o,v,p=1<<o,h=[],m=[],d=u,b=0,S=!1,g,w,W,H=0,ne=0,fe=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],oe,X=[],V=t.LZWEncoder=function(J,R,y,B){a=J,n=R,s=y,r=Math.max(2,B)},ue=function(J,R){X[oe++]=J,oe>=254&&Pe(R)},be=function(J){je(d),b=w+2,S=!0,Ee(w,J)},je=function(J){for(var R=0;R<J;++R)h[R]=-1},ae=t.compress=function(J,R){var y,B,le,K,we,re,k;for(g=J,S=!1,f=g,v=Me(f),w=1<<J-1,W=w+1,b=w+2,oe=0,K=ke(),k=0,y=d;y<65536;y*=2)++k;k=8-k,re=d,je(re),Ee(w,R);e:for(;(le=ke())!=e;){if(y=(le<<c)+K,B=le<<k^K,h[B]==y){K=m[B];continue}else if(h[B]>=0){we=re-B,B===0&&(we=1);do if((B-=we)<0&&(B+=re),h[B]==y){K=m[B];continue e}while(h[B]>=0)}Ee(K,R),K=le,b<p?(m[B]=b++,h[B]=y):be(R)}Ee(K,R),Ee(W,R)};t.encode=function(J){J.writeByte(r),l=a*n,i=0,ae(r+1,J),J.writeByte(0)};var Pe=function(J){oe>0&&(J.writeByte(oe),J.writeBytes(X,0,oe),oe=0)},Me=function(J){return(1<<J)-1},ke=function(){if(l===0)return e;--l;var J=s[i++];return J&255},Ee=function(J,R){for(H&=fe[ne],ne>0?H|=J<<ne:H=J,ne+=f;ne>=8;)ue(H&255,R),H>>=8,ne-=8;if((b>v||S)&&(S?(v=Me(f=g),S=!1):(++f,f==c?v=p:v=Me(f))),J==W){for(;ne>0;)ue(H&255,R),H>>=8,ne-=8;Pe(R)}};return V.apply(this,arguments),t},To=function(){var t={},e=256,a=499,n=491,s=487,r=503,l=3*r,i=e-1,o=4,u=100,f=16,c=1<<f,v=10,p=10,h=c>>p,m=c<<v-p,d=e>>3,b=6,S=1<<b,g=d*S,w=30,W=10,H=1<<W,ne,fe=8,oe=1<<fe,X=W+fe,V=1<<X,ue,be,je,ae,Pe=[],Me=[],ke=[],Ee=[],me=t.NeuQuant=function(k,x,Z){var z,G;for(ue=k,be=x,je=Z,ae=new Array(e),z=0;z<e;z++)ae[z]=new Array(4),G=ae[z],G[0]=G[1]=G[2]=(z<<o+8)/e,ke[z]=c/e,Me[z]=0},J=function(){for(var k=[],x=new Array(e),Z=0;Z<e;Z++)x[ae[Z][3]]=Z;for(var z=0,G=0;G<e;G++){var A=x[G];k[z++]=ae[A][0],k[z++]=ae[A][1],k[z++]=ae[A][2]}return k},R=function(){var k,x,Z,z,G,A,D,Y;for(D=0,Y=0,k=0;k<e;k++){for(G=ae[k],Z=k,z=G[1],x=k+1;x<e;x++)A=ae[x],A[1]<z&&(Z=x,z=A[1]);if(A=ae[Z],k!=Z&&(x=A[0],A[0]=G[0],G[0]=x,x=A[1],A[1]=G[1],G[1]=x,x=A[2],A[2]=G[2],G[2]=x,x=A[3],A[3]=G[3],G[3]=x),z!=D){for(Pe[D]=Y+k>>1,x=D+1;x<z;x++)Pe[x]=k;D=z,Y=k}}for(Pe[D]=Y+i>>1,x=D+1;x<256;x++)Pe[x]=i},y=function(){var k,x,Z,z,G,A,D,Y,Q,ce,Ae,ie,ye,Dt;for(be<l&&(je=1),ne=30+(je-1)/3,ie=ue,ye=0,Dt=be,Ae=be/(3*je),ce=Ae/u|0,Y=H,A=g,D=A>>b,D<=1&&(D=0),k=0;k<D;k++)Ee[k]=Y*((D*D-k*k)*oe/(D*D));for(be<l?Q=3:be%a!==0?Q=3*a:be%n!==0?Q=3*n:be%s!==0?Q=3*s:Q=3*r,k=0;k<Ae;)if(Z=(ie[ye+0]&255)<<o,z=(ie[ye+1]&255)<<o,G=(ie[ye+2]&255)<<o,x=we(Z,z,G),K(Y,x,Z,z,G),D!==0&&le(D,x,Z,z,G),ye+=Q,ye>=Dt&&(ye-=be),k++,ce===0&&(ce=1),k%ce===0)for(Y-=Y/ne,A-=A/w,D=A>>b,D<=1&&(D=0),x=0;x<D;x++)Ee[x]=Y*((D*D-x*x)*oe/(D*D))};t.map=function(k,x,Z){var z,G,A,D,Y,Q,ce;for(Y=1e3,ce=-1,z=Pe[x],G=z-1;z<e||G>=0;)z<e&&(Q=ae[z],A=Q[1]-x,A>=Y?z=e:(z++,A<0&&(A=-A),D=Q[0]-k,D<0&&(D=-D),A+=D,A<Y&&(D=Q[2]-Z,D<0&&(D=-D),A+=D,A<Y&&(Y=A,ce=Q[3])))),G>=0&&(Q=ae[G],A=x-Q[1],A>=Y?G=-1:(G--,A<0&&(A=-A),D=Q[0]-k,D<0&&(D=-D),A+=D,A<Y&&(D=Q[2]-Z,D<0&&(D=-D),A+=D,A<Y&&(Y=A,ce=Q[3]))));return ce},t.process=function(){return y(),B(),R(),J()};var B=function(){var k;for(k=0;k<e;k++)ae[k][0]>>=o,ae[k][1]>>=o,ae[k][2]>>=o,ae[k][3]=k},le=function(k,x,Z,z,G){var A,D,Y,Q,ce,Ae,ie;for(Y=x-k,Y<-1&&(Y=-1),Q=x+k,Q>e&&(Q=e),A=x+1,D=x-1,Ae=1;A<Q||D>Y;){if(ce=Ee[Ae++],A<Q){ie=ae[A++];try{ie[0]-=ce*(ie[0]-Z)/V,ie[1]-=ce*(ie[1]-z)/V,ie[2]-=ce*(ie[2]-G)/V}catch{}}if(D>Y){ie=ae[D--];try{ie[0]-=ce*(ie[0]-Z)/V,ie[1]-=ce*(ie[1]-z)/V,ie[2]-=ce*(ie[2]-G)/V}catch{}}}},K=function(k,x,Z,z,G){var A=ae[x];A[0]-=k*(A[0]-Z)/H,A[1]-=k*(A[1]-z)/H,A[2]-=k*(A[2]-G)/H},we=function(k,x,Z){var z,G,A,D,Y,Q,ce,Ae,ie,ye;for(Ae=~(1<<31),ie=Ae,Q=-1,ce=Q,z=0;z<e;z++)ye=ae[z],G=ye[0]-k,G<0&&(G=-G),A=ye[1]-x,A<0&&(A=-A),G+=A,A=ye[2]-Z,A<0&&(A=-A),G+=A,G<Ae&&(Ae=G,Q=z),D=G-(Me[z]>>f-o),D<ie&&(ie=D,ce=z),Y=ke[z]>>p,ke[z]-=Y,Me[z]+=Y<<v;return ke[Q]+=h,Me[Q]-=m,ce};return me.apply(this,arguments),t},Ao=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function a(){this.bin=[]}a.prototype.getData=function(){for(var R="",y=this.bin.length,B=0;B<y;B++)R+=e[this.bin[B]];return R},a.prototype.writeByte=function(R){this.bin.push(R)},a.prototype.writeUTFBytes=function(R){for(var y=R.length,B=0;B<y;B++)this.writeByte(R.charCodeAt(B))},a.prototype.writeBytes=function(R,y,B){for(var le=B||R.length,K=y||0;K<le;K++)this.writeByte(R[K])};var n={},s,r,l=null,i,o=-1,u=0,f=!1,c,v,p,h,m,d,b=[],S=7,g=-1,w=!1,W=!0,H=!1,ne=10,fe="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(y){u=Math.round(y/10)},n.setDispose=function(y){y>=0&&(g=y)},n.setRepeat=function(y){y>=0&&(o=y)},n.setTransparent=function(y){l=y},n.setComment=function(y){fe=y},n.addFrame=function(y,B){if(y===null||!f||c===null)throw new Error("Please call start method before calling addFrame");var le=!0;try{B?y instanceof ImageData?(v=y.data,(!sizeset||s!=y.width||r!=y.height)&&X(y.width,y.height)):y instanceof Uint8ClampedArray?y.length==s*r*4?v=y:(console.log("Please set the correct size: ImageData length mismatch"),le=!1):(console.log("Please provide correct input"),le=!1):(v=y.getImageData(0,0,y.canvas.width,y.canvas.height).data,H||X(y.canvas.width,y.canvas.height)),be(),V(),W&&(Me(),Ee(),o>=0&&ke()),je(),fe!==""&&ae(),Pe(),W||Ee(),J(),W=!1}catch{le=!1}return le},n.download=function(y){if(c===null||w==!1)console.log("Please call start method and add frames and call finish method before calling download");else{y=y!==void 0?y.endsWith(".gif")?y:y+".gif":"download.gif";var B=document.createElement("a");B.download=y,B.href=URL.createObjectURL(new Blob([new Uint8Array(c.bin)],{type:"image/gif"})),B.click()}},n.finish=function(){if(!f)return!1;var y=!0;f=!1;try{c.writeByte(59),w=!0}catch{y=!1}return y};var oe=function(){i=0,v=null,p=null,h=null,d=null,w=!1,W=!0};n.setFrameRate=function(y){y!=15&&(u=Math.round(100/y))},n.setQuality=function(y){y<1&&(y=1),ne=y};var X=n.setSize=function(y,B){f&&!W||(s=y,r=B,s<1&&(s=320),r<1&&(r=240),H=!0)};n.start=function(){oe();var y=!0;w=!1,c=new a;try{c.writeUTFBytes("GIF89a")}catch{y=!1}return f=y},n.cont=function(){oe();var y=!0;return w=!1,c=new a,f=y};var V=function(){var y=p.length,B=y/3;h=[];var le=new To(p,y,ne);d=le.process();for(var K=0,we=0;we<B;we++){var re=le.map(p[K++]&255,p[K++]&255,p[K++]&255);b[re]=!0,h[we]=re}p=null,m=8,S=7,l!==null&&(i=ue(l))},ue=function(y){if(d===null)return-1;for(var B=(y&16711680)>>16,le=(y&65280)>>8,K=y&255,we=0,re=256*256*256,k=d.length,x=0;x<k;){var Z=B-(d[x++]&255),z=le-(d[x++]&255),G=K-(d[x]&255),A=Z*Z+z*z+G*G,D=x/3;b[D]&&A<re&&(re=A,we=D),x++}return we},be=function(){var y=s,B=r;p=[];for(var le=v,K=0,we=0;we<B;we++)for(var re=0;re<y;re++){var k=we*y*4+re*4;p[K++]=le[k],p[K++]=le[k+1],p[K++]=le[k+2]}},je=function(){c.writeByte(33),c.writeByte(249),c.writeByte(4);var y,B;l===null?(y=0,B=0):(y=1,B=2),g>=0&&(B=g&7),B<<=2,c.writeByte(0|B|0|y),me(u),c.writeByte(i),c.writeByte(0)},ae=function(){c.writeByte(33),c.writeByte(254),c.writeByte(fe.length),c.writeUTFBytes(fe),c.writeByte(0)},Pe=function(){c.writeByte(44),me(0),me(0),me(s),me(r),W?c.writeByte(0):c.writeByte(128|S)},Me=function(){me(s),me(r),c.writeByte(240|S),c.writeByte(0),c.writeByte(0)},ke=function(){c.writeByte(33),c.writeByte(255),c.writeByte(11),c.writeUTFBytes("NETSCAPE2.0"),c.writeByte(3),c.writeByte(1),me(o),c.writeByte(0)},Ee=function(){c.writeBytes(d);for(var y=3*256-d.length,B=0;B<y;B++)c.writeByte(0)},me=function(y){c.writeByte(y&255),c.writeByte(y>>8&255)},J=function(){var y=new Eo(s,r,h,m);y.encode(c)};return n.stream=function(){return c},n.setProperties=function(y,B){f=y,W=B},n};class Co{constructor(e){Se(this,"loadingUrl",null);Se(this,"url",null);Se(this,"texture",null);Se(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:r}=this;this.texture&&r.deleteTexture(this.texture);const l=r.createTexture();if(!l)throw new Error("Failed to create texture");r.activeTexture(r.TEXTURE0+this.unit),r.bindTexture(r.TEXTURE_2D,l),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),this.texture=l,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const Fe={a_position:0,a_texCoords:1,a_normal:2},Wt={default:{vertex:`#version 300 es

layout(location = ${Fe.a_position}) in vec3 a_position;
layout(location = ${Fe.a_texCoords}) in vec2 a_texCoords;
layout(location = ${Fe.a_normal}) in vec3 a_normal;

uniform mat4 u_model;
uniform mat4 u_view;
uniform mat4 u_projection;

out vec2 v_texCoords;
out vec3 v_normal;
out vec3 v_position;

void main() {
  mat4 modelView = u_view * u_model;
  v_position = vec3(modelView * vec4(a_position, 1.0));
  gl_Position = u_projection * vec4(v_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position.y *= -1.0;
  v_texCoords = a_texCoords;
  v_normal = (transpose(inverse(modelView)) * vec4(a_normal, 0)).xyz;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
in vec3 v_normal;
in vec3 v_position;

struct Material {
  sampler2D diffuse;
  vec3 specular;
  float shininess;
};

struct DirectionalLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 direction;
};

struct PointLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  float attenuation1;
  float attenuation2;
};

struct SpotLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  vec3 direction;
  float innerCos;
  float outerCos;
  float attenuation1;
  float attenuation2;
};

uniform Material u_material;
uniform DirectionalLight u_directionalLight;
uniform PointLight u_pointLight;
uniform SpotLight u_spotLight;

out vec4 outColor;

vec3 computeLight(SpotLight light, vec3 normal, vec3 fragToCamera, vec3 texel) {
  float dist = length(light.position - v_position);
  float attenuation = 1.0 / (1.0 + light.attenuation1 * dist + light.attenuation2 * dist * dist);
  vec3 dir = normalize(light.position - v_position);
  float angle = dot(normalize(-light.direction), dir);
  float intensity = smoothstep(light.outerCos, light.innerCos, angle);

  float diff = max(dot(dir, normal), 0.0);

  vec3 halfVec = normalize(dir + fragToCamera);
  float spec = pow(max(dot(halfVec, normal), 0.0), u_material.shininess);

  vec3 ambient = light.ambient * texel * attenuation * intensity;
  vec3 diffuse = light.diffuse * texel * diff * attenuation * intensity;
  vec3 specular = light.specular * u_material.specular * spec * attenuation * intensity;

  return ambient + diffuse + specular;
}

void main() {
  vec3 texel = texture(u_material.diffuse, v_texCoords).xyz;
  vec3 color = vec3(0.0, 0.0, 0.0);
  // front facing is actually the back face since we flipped y-axis in the vertex shader
  vec3 normal = normalize(v_normal) * (1.0 - 2.0 * float(gl_FrontFacing));
  vec3 fragToCamera = normalize(-v_position);

  color += computeLight(SpotLight(
    u_directionalLight.ambient,
    u_directionalLight.diffuse,
    u_directionalLight.specular,
    -u_directionalLight.direction + v_position,
    u_directionalLight.direction,
    // disable intensity
    -2.0, -3.0,
    // disable attenuation
    0.0, 0.0
  ), normal, fragToCamera, texel);

  color += computeLight(SpotLight(
    u_pointLight.ambient,
    u_pointLight.diffuse,
    u_pointLight.specular,
    u_pointLight.position,
    -u_pointLight.position + v_position,
    // disable intensity
    -2.0, -3.0,
    u_pointLight.attenuation1,
    u_pointLight.attenuation2
  ), normal, fragToCamera, texel);

  color += computeLight(u_spotLight, normal, fragToCamera, texel);

  outColor = vec4(color, 1.0);
}
    `}};class Po{constructor(e){Se(this,"programs",{});this.gl=e}createProgram(e){let a=this.programs[e];return a||(a=this.programs[e]={program:Mo(this.gl,Wt[e].vertex,Wt[e].fragment),uniformLocations:{}}),a}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function An(t,e,a){for(const[n,s]of Object.entries(a)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const r=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(r,s):Array.isArray(s)?s.length===2?t.uniform2fv(r,s):s.length===3?t.uniform3fv(r,s):s.length===4?t.uniform4fv(r,s):s.length===9?t.uniformMatrix3fv(r,!1,s):s.length===16&&t.uniformMatrix4fv(r,!1,s):typeof s=="number"?t.uniform1f(r,s):typeof s=="boolean"&&t.uniform1i(r,s?1:0)}}function Mo(t,e,a){const n=Jt(t,t.VERTEX_SHADER,e);let s;try{s=Jt(t,t.FRAGMENT_SHADER,a)}catch(l){throw t.deleteShader(n),l}const r=t.createProgram();if(r===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(r,n),t.attachShader(r,s),t.linkProgram(r),t.detachShader(r,s),t.detachShader(r,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(r,t.LINK_STATUS)){const l=t.getProgramInfoLog(r);throw t.deleteProgram(r),new Error(`Failed to link program: ${l}`)}return r}function Jt(t,e,a){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,a),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function Lo(t,e,a){t.clear(t.COLOR_BUFFER_BIT);let n,s;for(const r of a){n!==r.program&&(t.useProgram(r.program.program),n=r.program),s!==r.geometry&&(t.bindVertexArray(r.geometry.vao),s=r.geometry);const l=r.getUniforms(e);An(t,r.program,l),t.drawArrays(r.geometry.drawMode,0,r.geometry.drawCount)}}function Io(t,e){const a=t.createVertexArray();if(a===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(a),new Error("Failed to create buffer");return t.bindVertexArray(a),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(Fe.a_position),t.vertexAttribPointer(Fe.a_position,3,t.FLOAT,!1,8*4,0),t.enableVertexAttribArray(Fe.a_texCoords),t.vertexAttribPointer(Fe.a_texCoords,2,t.FLOAT,!1,8*4,3*4),t.enableVertexAttribArray(Fe.a_normal),t.vertexAttribPointer(Fe.a_normal,3,t.FLOAT,!1,8*4,5*4),t.bindVertexArray(null),{vao:a,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const jo={full:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],sudoku:[-3,-3,0,-1,2,0,0,1,3,-3,0,2,2,0,0,1,-3,3,0,-1,-1,0,0,1,3,3,0,2,-1,0,0,1],tower:[-1,-3,0,0,2,0,0,1,1,-3,0,1,2,0,0,1,-1,3,0,0,-1,0,0,1,1,3,0,1,-1,0,0,1],topHalf:[-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],bottomHalf:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1],leftHalf:[-1,-1,0,0,1,0,0,1,0,-1,0,.5,1,0,0,1,-1,1,0,0,0,0,0,1,0,1,0,.5,0,0,0,1],rightHalf:[0,-1,0,.5,1,0,0,1,1,-1,0,1,1,0,0,1,0,1,0,.5,0,0,0,1,1,1,0,1,0,0,0,1]};class ko{constructor(e){Se(this,"geometries",{});this.gl=e}createGeometry(e){let a=this.geometries[e];return a||(a=this.geometries[e]=Io(this.gl,jo[e])),a}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class Do{constructor(e){Se(this,"gl");Se(this,"programFactory");Se(this,"geometryFactory");Se(this,"texture");Se(this,"queue",[]);Se(this,"animationFrame",null);this.canvas=e;const a=e.getContext("webgl2");if(!a)throw new Error("webgl2 is not supported");this.gl=a,this.programFactory=new Po(this.gl),this.geometryFactory=new ko(this.gl),this.texture=new Co(this.gl)}animate(e,a){return new Promise((n,s)=>{const r=new Ao;if(r.setRepeat(0),r.setDelay(e.output.delayMs),r.setSize(e.output.width,e.output.height),!r.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:zt(this.programFactory,this.geometryFactory,e.animation),callback:a,encoder:r}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,a){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:a,sprites:zt(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let h=0;h<this.queue.length-1;++h)this.queue[h].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:a,resolve:n,sprites:s,frame:r}=this.queue[0],{image:l,output:i,camera:o,projection:u,material:f,directionalLight:c,pointLight:v,spotLight:p}=a;if(e==="frame"||e==="gif"&&this.queue[0].frame===0){await this.texture.loadImage(l.url);const{width:h,height:m,clear:d}=i;this.canvas.width=h,this.canvas.height=m,this.gl.viewport(0,0,h,m),this.gl.clearColor(...d,1),this.gl.activeTexture(this.gl.TEXTURE0+this.texture.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture.texture);const b=$e();Jn(b,o.position,o.lookAt,o.up);const S=$e();u.perspective?Zn(S,u.left,u.right,u.bottom,u.top,u.near,u.far):Qn(S,u.left,u.right,u.bottom,u.top,u.near,u.far);const g={u_view:b,u_projection:S,"u_material.specular":f.specular,"u_material.shininess":f.shininess,"u_directionalLight.ambient":c.ambient,"u_directionalLight.diffuse":c.diffuse,"u_directionalLight.specular":c.specular,"u_directionalLight.direction":c.direction,"u_pointLight.ambient":v.ambient,"u_pointLight.diffuse":v.diffuse,"u_pointLight.specular":v.specular,"u_pointLight.position":v.position,"u_pointLight.attenuation1":v.attenuation1,"u_pointLight.attenuation2":v.attenuation2,"u_spotLight.ambient":p.ambient,"u_spotLight.diffuse":p.diffuse,"u_spotLight.specular":p.specular,"u_spotLight.position":p.position,"u_spotLight.direction":p.direction,"u_spotLight.innerCos":Math.cos(dt(p.innerDegrees)),"u_spotLight.outerCos":Math.cos(dt(p.outerDegrees)),"u_spotLight.attenuation1":p.attenuation1,"u_spotLight.attenuation2":p.attenuation2};for(const w of Oo(s.map(W=>W.program)))this.gl.useProgram(w.program),An(this.gl,w,g)}if(Lo(this.gl,r/a.output.totalFrames,s),e==="frame")n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:h,callback:m}=this.queue[0];m(r);const d=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,d),h.addFrame(d,!0),h.setTransparent(16777215),r===i.totalFrames-1){h.finish();const b=h.stream().getData(),S="data:image/gif;base64,"+window.btoa(b);n({dataUri:S}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Re=function(){const{subscribe:t,update:e}=Lt({animations:Et,current:Et[0]}),a=r=>{e(l=>l.current===r||!l.animations.find(o=>o===r)?l:{animations:l.animations,current:r})};function n(r,l){e(({animations:i,current:o})=>{const u={...o,editOptions:o.editOptions.map(f=>f===r?{...r,value:l}:f)};return{animations:i.map(f=>f===o?u:f),current:u}})}function s(){e(({animations:r,current:l})=>{const i=Et.find(o=>o.name===l.name);return{animations:r.map(o=>o===l?i:o),current:i}})}return{subscribe:t,changeCurrentAnimation:a,changeEditOptions:n,resetEditOptions:s}}();function Ge(t){let e=!0;const{subscribe:a,update:n}=Lt(void 0,l=>Re.subscribe(({current:i})=>{e&&l(i.defaultOptions[t])}));function s(l){n(i=>(e=!1,{...i,...l}))}function r(){n(()=>(e=!0,rt(Re).current.defaultOptions[t]))}return{subscribe:a,change:s,reset:r}}const $t=Ge("image"),Ue=Ge("output"),Ye=Ge("camera"),Le=Ge("projection"),st=Ge("material"),He=Ge("directionalLight"),De=Ge("pointLight"),Te=Ge("spotLight"),Mt=zn([$t,Ue,Ye,Le,st,He,De,Te,Re],([t,e,a,n,s,r,l,i,o])=>({image:t,output:e,camera:a,projection:n,material:s,directionalLight:r,pointLight:l,spotLight:i,animation:o.current})),nt=function(){const t=Lt({animator:null,running:!1,frame:0}),{subscribe:e,update:a}=t;function n(l){a(i=>{var o;return(o=i.animator)==null||o.destroy(),{animator:new Do(l),running:!1,frame:0}})}function s(){const{animator:l}=rt(t);return l?(a(i=>({...i,running:!0,frame:0})),l.animate(rt(Mt),i=>a(o=>({...o,frame:i}))).finally(()=>{a(i=>({...i,running:!1}))})):Promise.reject("Animator has not been created")}function r(l){const{animator:i,frame:o}=rt(t);if(!i)return Promise.reject("Animator has not been created");let u;typeof l>"u"?u=o:u=l;const f=rt(Mt);return u>=f.output.totalFrames&&(u=f.output.totalFrames-1),a(c=>({...c,frame:u,running:!0})),i.renderFrame(f,u).finally(()=>{a(c=>({...c,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:r}}();function Fo(t){let e,a,n,s,r,l,i,o,u,f,c,v;const p=t[3].default,h=Mn(p,t,t[2],null);return{c(){e=F("section"),a=F("header"),n=F("h2"),s=pe(t[0]),r=I(),l=F("button"),i=pe("Reset"),o=I(),u=F("div"),h&&h.c(),this.h()},l(m){e=U(m,"SECTION",{class:!0});var d=q(e);a=U(d,"HEADER",{class:!0});var b=q(a);n=U(b,"H2",{class:!0});var S=q(n);s=he(S,t[0]),S.forEach($),r=j(b),l=U(b,"BUTTON",{class:!0,type:!0});var g=q(l);i=he(g,"Reset"),g.forEach($),b.forEach($),o=j(d),u=U(d,"DIV",{class:!0});var w=q(u);h&&h.l(w),w.forEach($),d.forEach($),this.h()},h(){_(n,"class","section__heading svelte-1wqqw95"),_(l,"class","section__reset svelte-1wqqw95"),_(l,"type","button"),_(a,"class","section__header svelte-1wqqw95"),_(u,"class","section__content svelte-1wqqw95"),_(e,"class","section svelte-1wqqw95")},m(m,d){N(m,e,d),O(e,a),O(a,n),O(n,s),O(a,r),O(a,l),O(l,i),O(e,o),O(e,u),h&&h.m(u,null),f=!0,c||(v=Ze(l,"click",t[4]),c=!0)},p(m,[d]){(!f||d&1)&&xe(s,m[0]),h&&h.p&&(!f||d&4)&&Ln(h,p,m,m[2],f?jn(p,m[2],d,null):In(m[2]),null)},i(m){f||(E(h,m),f=!0)},o(m){T(h,m),f=!1},d(m){m&&$(e),h&&h.d(m),c=!1,v()}}}function Uo(t,e,a){let{$$slots:n={},$$scope:s}=e,{title:r=""}=e;const l=ot(),i=()=>l("reset");return t.$$set=o=>{"title"in o&&a(0,r=o.title),"$$scope"in o&&a(2,s=o.$$scope)},[r,l,s,n,i]}class Be extends ge{constructor(e){super(),ve(this,e,Uo,Fo,de,{title:0})}}function Ro(t){let e,a,n,s,r,l,i,o;return{c(){e=F("label"),a=F("input"),n=I(),s=F("div"),r=F("img"),this.h()},l(u){e=U(u,"LABEL",{class:!0});var f=q(e);a=U(f,"INPUT",{class:!0,type:!0,accept:!0}),n=j(f),s=U(f,"DIV",{class:!0});var c=q(s);r=U(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach($),f.forEach($),this.h()},h(){_(a,"class","image__input svelte-1me35do"),_(a,"type","file"),_(a,"accept","image/*"),_(r,"class","image__preview svelte-1me35do"),Ve(r.src,l=t[0].url)||_(r,"src",l),_(r,"alt","source"),_(s,"class","image__container svelte-1me35do"),_(e,"class","image svelte-1me35do")},m(u,f){N(u,e,f),O(e,a),O(e,n),O(e,s),O(s,r),i||(o=Ze(a,"input",t[1]),i=!0)},p(u,f){f&1&&!Ve(r.src,l=u[0].url)&&_(r,"src",l)},d(u){u&&$(e),i=!1,o()}}}function xo(t){let e,a;return e=new Be({props:{title:"Image",$$slots:{default:[Ro]},$$scope:{ctx:t}}}),e.$on("reset",$t.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&5&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function Bo(t,e,a){let n;Oe(t,$t,r=>a(0,n=r));function s(r){var o;const i=(o=r.target.files)==null?void 0:o[0];i&&$t.change({url:URL.createObjectURL(i)})}return[n,s]}class No extends ge{constructor(e){super(),ve(this,e,Bo,xo,de,{})}}function Zt(t){let e,a,n,s,r,l;return{c(){e=F("label"),a=pe(t[1]),n=I(),s=F("input"),this.h()},l(i){e=U(i,"LABEL",{class:!0});var o=q(e);a=he(o,t[1]),n=j(o),s=U(o,"INPUT",{class:!0,type:!0}),o.forEach($),this.h()},h(){_(s,"class","slider__text-input svelte-1h0gcvd"),_(s,"type","text"),s.value=t[0],_(e,"class","slider__label svelte-1h0gcvd")},m(i,o){N(i,e,o),O(e,a),O(e,n),O(e,s),r||(l=Ze(s,"input",t[5]),r=!0)},p(i,o){o&2&&xe(a,i[1]),o&1&&s.value!==i[0]&&(s.value=i[0])},d(i){i&&$(e),r=!1,l()}}}function zo(t){let e,a,n,s,r=ct(t[2])+"",l,i,o,u,f,c,v=ct(t[3])+"",p,h,m,d=t[1]&&Zt(t);return{c(){e=F("div"),d&&d.c(),a=I(),n=F("div"),s=F("span"),l=pe(r),i=I(),o=F("div"),u=F("input"),f=I(),c=F("span"),p=pe(v),this.h()},l(b){e=U(b,"DIV",{class:!0});var S=q(e);d&&d.l(S),a=j(S),n=U(S,"DIV",{class:!0});var g=q(n);s=U(g,"SPAN",{class:!0});var w=q(s);l=he(w,r),w.forEach($),i=j(g),o=U(g,"DIV",{class:!0});var W=q(o);u=U(W,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),W.forEach($),f=j(g),c=U(g,"SPAN",{class:!0});var H=q(c);p=he(H,v),H.forEach($),g.forEach($),S.forEach($),this.h()},h(){_(s,"class","slider__range slider__range--min svelte-1h0gcvd"),_(u,"class","slider__input svelte-1h0gcvd"),_(u,"type","range"),_(u,"min",t[2]),_(u,"max",t[3]),_(u,"step",t[4]),u.value=t[0],_(o,"class","slider__input-container svelte-1h0gcvd"),_(c,"class","slider__range slider__range--max"),_(n,"class","slider__container svelte-1h0gcvd"),_(e,"class","slider")},m(b,S){N(b,e,S),d&&d.m(e,null),O(e,a),O(e,n),O(n,s),O(s,l),O(n,i),O(n,o),O(o,u),O(n,f),O(n,c),O(c,p),h||(m=Ze(u,"input",t[5]),h=!0)},p(b,[S]){b[1]?d?d.p(b,S):(d=Zt(b),d.c(),d.m(e,a)):d&&(d.d(1),d=null),S&4&&r!==(r=ct(b[2])+"")&&xe(l,r),S&4&&_(u,"min",b[2]),S&8&&_(u,"max",b[3]),S&16&&_(u,"step",b[4]),S&1&&(u.value=b[0]),S&8&&v!==(v=ct(b[3])+"")&&xe(p,v)},i:ze,o:ze,d(b){b&&$(e),d&&d.d(),h=!1,m()}}}function ct(t){return t.toFixed(2).replace(/\.?0+$/,"")}function Go(t,e,a){const n=ot();let{label:s=""}=e,{min:r=0}=e,{max:l=100}=e,{step:i=1}=e,{value:o=l<r?r:(l-r)/2}=e;function u(f){const c=f.target,v=parseFloat(c.value);Number.isNaN(v)||(a(0,o=v),n("input",{value:o}))}return t.$$set=f=>{"label"in f&&a(1,s=f.label),"min"in f&&a(2,r=f.min),"max"in f&&a(3,l=f.max),"step"in f&&a(4,i=f.step),"value"in f&&a(0,o=f.value)},[o,s,r,l,i,u]}class ee extends ge{constructor(e){super(),ve(this,e,Go,zo,de,{label:1,min:2,max:3,step:4,value:0})}}function qo(t){let e,a,n,s,r,l;return e=new ee({props:{label:`${t[0]}R`,min:0,max:1,step:.01,value:t[1][0]}}),e.$on("input",t[3]),n=new ee({props:{label:`${t[0]}G`,min:0,max:1,step:.01,value:t[1][1]}}),n.$on("input",t[4]),r=new ee({props:{label:`${t[0]}B`,min:0,max:1,step:.01,value:t[1][2]}}),r.$on("input",t[5]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment)},l(i){P(e.$$.fragment,i),a=j(i),P(n.$$.fragment,i),s=j(i),P(r.$$.fragment,i)},m(i,o){M(e,i,o),N(i,a,o),M(n,i,o),N(i,s,o),M(r,i,o),l=!0},p(i,[o]){const u={};o&1&&(u.label=`${i[0]}R`),o&2&&(u.value=i[1][0]),e.$set(u);const f={};o&1&&(f.label=`${i[0]}G`),o&2&&(f.value=i[1][1]),n.$set(f);const c={};o&1&&(c.label=`${i[0]}B`),o&2&&(c.value=i[1][2]),r.$set(c)},i(i){l||(E(e.$$.fragment,i),E(n.$$.fragment,i),E(r.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),T(n.$$.fragment,i),T(r.$$.fragment,i),l=!1},d(i){L(e,i),i&&$(a),L(n,i),i&&$(s),L(r,i)}}}function Ho(t,e,a){let{label:n=""}=e,{value:s=[1,1,1]}=e;const r=ot();function l(f,c){const v=[...s];v[f]=c,r("input",{value:v})}const i=f=>l(0,f.detail.value),o=f=>l(1,f.detail.value),u=f=>l(2,f.detail.value);return t.$$set=f=>{"label"in f&&a(0,n=f.label),"value"in f&&a(1,s=f.value)},[n,s,l,i,o,u]}class Ce extends ge{constructor(e){super(),ve(this,e,Ho,qo,de,{label:0,value:1})}}function Xo(t){let e,a,n,s,r,l,i,o,u,f;return e=new ee({props:{label:"width",min:1,max:1024,step:1,value:t[0].width}}),e.$on("input",t[1]),n=new ee({props:{label:"height",min:1,max:1024,step:1,value:t[0].height}}),n.$on("input",t[2]),r=new ee({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[0].delayMs}}),r.$on("input",t[3]),i=new ee({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[0].totalFrames}}),i.$on("input",t[4]),u=new Ce({props:{label:"clear",value:t[0].clear}}),u.$on("input",t[5]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment),l=I(),C(i.$$.fragment),o=I(),C(u.$$.fragment)},l(c){P(e.$$.fragment,c),a=j(c),P(n.$$.fragment,c),s=j(c),P(r.$$.fragment,c),l=j(c),P(i.$$.fragment,c),o=j(c),P(u.$$.fragment,c)},m(c,v){M(e,c,v),N(c,a,v),M(n,c,v),N(c,s,v),M(r,c,v),N(c,l,v),M(i,c,v),N(c,o,v),M(u,c,v),f=!0},p(c,v){const p={};v&1&&(p.value=c[0].width),e.$set(p);const h={};v&1&&(h.value=c[0].height),n.$set(h);const m={};v&1&&(m.value=c[0].delayMs),r.$set(m);const d={};v&1&&(d.value=c[0].totalFrames),i.$set(d);const b={};v&1&&(b.value=c[0].clear),u.$set(b)},i(c){f||(E(e.$$.fragment,c),E(n.$$.fragment,c),E(r.$$.fragment,c),E(i.$$.fragment,c),E(u.$$.fragment,c),f=!0)},o(c){T(e.$$.fragment,c),T(n.$$.fragment,c),T(r.$$.fragment,c),T(i.$$.fragment,c),T(u.$$.fragment,c),f=!1},d(c){L(e,c),c&&$(a),L(n,c),c&&$(s),L(r,c),c&&$(l),L(i,c),c&&$(o),L(u,c)}}}function Vo(t){let e,a;return e=new Be({props:{title:"Output",$$slots:{default:[Xo]},$$scope:{ctx:t}}}),e.$on("reset",Ue.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&65&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function Yo(t,e,a){let n;return Oe(t,Ue,u=>a(0,n=u)),[n,u=>Ue.change({width:u.detail.value}),u=>Ue.change({height:u.detail.value}),u=>Ue.change({delayMs:u.detail.value}),u=>Ue.change({totalFrames:u.detail.value}),u=>Ue.change({clear:u.detail.value})]}class Wo extends ge{constructor(e){super(),ve(this,e,Yo,Vo,de,{})}}function Jo(t){let e,a,n,s,r,l;return e=new ee({props:{label:`${t[0]}X`,min:-10,max:10,step:.01,value:t[1][0]}}),e.$on("input",t[3]),n=new ee({props:{label:`${t[0]}Y`,min:-10,max:10,step:.01,value:t[1][1]}}),n.$on("input",t[4]),r=new ee({props:{label:`${t[0]}Z`,min:-10,max:10,step:.01,value:t[1][2]}}),r.$on("input",t[5]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment)},l(i){P(e.$$.fragment,i),a=j(i),P(n.$$.fragment,i),s=j(i),P(r.$$.fragment,i)},m(i,o){M(e,i,o),N(i,a,o),M(n,i,o),N(i,s,o),M(r,i,o),l=!0},p(i,[o]){const u={};o&1&&(u.label=`${i[0]}X`),o&2&&(u.value=i[1][0]),e.$set(u);const f={};o&1&&(f.label=`${i[0]}Y`),o&2&&(f.value=i[1][1]),n.$set(f);const c={};o&1&&(c.label=`${i[0]}Z`),o&2&&(c.value=i[1][2]),r.$set(c)},i(i){l||(E(e.$$.fragment,i),E(n.$$.fragment,i),E(r.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),T(n.$$.fragment,i),T(r.$$.fragment,i),l=!1},d(i){L(e,i),i&&$(a),L(n,i),i&&$(s),L(r,i)}}}function Zo(t,e,a){let{label:n=""}=e,{value:s=[0,0,-1]}=e;const r=ot();function l(f,c){const v=[...s];v[f]=c,r("input",{value:v})}const i=f=>l(0,f.detail.value),o=f=>l(1,f.detail.value),u=f=>l(2,f.detail.value);return t.$$set=f=>{"label"in f&&a(0,n=f.label),"value"in f&&a(1,s=f.value)},[n,s,l,i,o,u]}class Xe extends ge{constructor(e){super(),ve(this,e,Zo,Jo,de,{label:0,value:1})}}function Qo(t){let e,a,n,s,r,l;return e=new Xe({props:{label:"position",value:t[0].position}}),e.$on("input",t[1]),n=new Xe({props:{label:"lookAt",value:t[0].lookAt}}),n.$on("input",t[2]),r=new Xe({props:{label:"up",value:t[0].up}}),r.$on("input",t[3]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment)},l(i){P(e.$$.fragment,i),a=j(i),P(n.$$.fragment,i),s=j(i),P(r.$$.fragment,i)},m(i,o){M(e,i,o),N(i,a,o),M(n,i,o),N(i,s,o),M(r,i,o),l=!0},p(i,o){const u={};o&1&&(u.value=i[0].position),e.$set(u);const f={};o&1&&(f.value=i[0].lookAt),n.$set(f);const c={};o&1&&(c.value=i[0].up),r.$set(c)},i(i){l||(E(e.$$.fragment,i),E(n.$$.fragment,i),E(r.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),T(n.$$.fragment,i),T(r.$$.fragment,i),l=!1},d(i){L(e,i),i&&$(a),L(n,i),i&&$(s),L(r,i)}}}function Ko(t){let e,a;return e=new Be({props:{title:"Camera",$$slots:{default:[Qo]},$$scope:{ctx:t}}}),e.$on("reset",Ye.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&17&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function el(t,e,a){let n;return Oe(t,Ye,i=>a(0,n=i)),[n,i=>Ye.change({position:i.detail.value}),i=>Ye.change({lookAt:i.detail.value}),i=>Ye.change({up:i.detail.value})]}class tl extends ge{constructor(e){super(),ve(this,e,el,Ko,de,{})}}function nl(t){let e,a,n,s,r,l,i;return{c(){e=F("div"),a=pe(t[1]),n=I(),s=F("label"),r=F("input"),this.h()},l(o){e=U(o,"DIV",{class:!0});var u=q(e);a=he(u,t[1]),n=j(u),s=U(u,"LABEL",{class:!0});var f=q(s);r=U(f,"INPUT",{class:!0,type:!0}),f.forEach($),u.forEach($),this.h()},h(){_(r,"class","toggle__checkbox svelte-1j9rfin"),_(r,"type","checkbox"),r.checked=t[0],_(s,"class","toggle__label svelte-1j9rfin"),Ne(s,"toggle__label--active",t[0]),_(e,"class","toggle svelte-1j9rfin")},m(o,u){N(o,e,u),O(e,a),O(e,n),O(e,s),O(s,r),l||(i=Ze(r,"change",t[2]),l=!0)},p(o,[u]){u&2&&xe(a,o[1]),u&1&&(r.checked=o[0]),u&1&&Ne(s,"toggle__label--active",o[0])},i:ze,o:ze,d(o){o&&$(e),l=!1,i()}}}function al(t,e,a){const n=ot();let{label:s=""}=e,{value:r=!1}=e;function l(i){const o=i.target;a(0,r=Boolean(o.checked)),n("change",{value:r})}return t.$$set=i=>{"label"in i&&a(1,s=i.label),"value"in i&&a(0,r=i.value)},[r,s,l]}class kt extends ge{constructor(e){super(),ve(this,e,al,nl,de,{label:1,value:0})}}function rl(t){let e,a,n,s,r,l,i,o,u,f,c,v,p,h;return e=new kt({props:{label:"perspective",value:t[0].perspective}}),e.$on("change",t[1]),n=new ee({props:{label:"left",min:-10,max:10,step:.01,value:t[0].left}}),n.$on("input",t[2]),r=new ee({props:{label:"right",min:-10,max:10,step:.01,value:t[0].right}}),r.$on("input",t[3]),i=new ee({props:{label:"bottom",min:-10,max:10,step:.01,value:t[0].bottom}}),i.$on("input",t[4]),u=new ee({props:{label:"top",min:-10,max:10,step:.01,value:t[0].top}}),u.$on("input",t[5]),c=new ee({props:{label:"near",min:.01,max:10,step:.01,value:t[0].near}}),c.$on("input",t[6]),p=new ee({props:{label:"far",min:.01,max:10,step:.01,value:t[0].far}}),p.$on("input",t[7]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment),l=I(),C(i.$$.fragment),o=I(),C(u.$$.fragment),f=I(),C(c.$$.fragment),v=I(),C(p.$$.fragment)},l(m){P(e.$$.fragment,m),a=j(m),P(n.$$.fragment,m),s=j(m),P(r.$$.fragment,m),l=j(m),P(i.$$.fragment,m),o=j(m),P(u.$$.fragment,m),f=j(m),P(c.$$.fragment,m),v=j(m),P(p.$$.fragment,m)},m(m,d){M(e,m,d),N(m,a,d),M(n,m,d),N(m,s,d),M(r,m,d),N(m,l,d),M(i,m,d),N(m,o,d),M(u,m,d),N(m,f,d),M(c,m,d),N(m,v,d),M(p,m,d),h=!0},p(m,d){const b={};d&1&&(b.value=m[0].perspective),e.$set(b);const S={};d&1&&(S.value=m[0].left),n.$set(S);const g={};d&1&&(g.value=m[0].right),r.$set(g);const w={};d&1&&(w.value=m[0].bottom),i.$set(w);const W={};d&1&&(W.value=m[0].top),u.$set(W);const H={};d&1&&(H.value=m[0].near),c.$set(H);const ne={};d&1&&(ne.value=m[0].far),p.$set(ne)},i(m){h||(E(e.$$.fragment,m),E(n.$$.fragment,m),E(r.$$.fragment,m),E(i.$$.fragment,m),E(u.$$.fragment,m),E(c.$$.fragment,m),E(p.$$.fragment,m),h=!0)},o(m){T(e.$$.fragment,m),T(n.$$.fragment,m),T(r.$$.fragment,m),T(i.$$.fragment,m),T(u.$$.fragment,m),T(c.$$.fragment,m),T(p.$$.fragment,m),h=!1},d(m){L(e,m),m&&$(a),L(n,m),m&&$(s),L(r,m),m&&$(l),L(i,m),m&&$(o),L(u,m),m&&$(f),L(c,m),m&&$(v),L(p,m)}}}function sl(t){let e,a;return e=new Be({props:{title:"Projection",$$slots:{default:[rl]},$$scope:{ctx:t}}}),e.$on("reset",Le.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function il(t,e,a){let n;return Oe(t,Le,c=>a(0,n=c)),[n,c=>Le.change({perspective:c.detail.value}),c=>Le.change({left:c.detail.value}),c=>Le.change({right:c.detail.value}),c=>Le.change({bottom:c.detail.value}),c=>Le.change({top:c.detail.value}),c=>Le.change({near:c.detail.value}),c=>Le.change({far:c.detail.value})]}class ol extends ge{constructor(e){super(),ve(this,e,il,sl,de,{})}}function ll(t){let e,a,n,s;return e=new Ce({props:{label:"specular",value:t[0].specular}}),e.$on("input",t[1]),n=new ee({props:{label:"shininess",min:0,max:100,step:.1,value:t[0].shininess}}),n.$on("input",t[2]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment)},l(r){P(e.$$.fragment,r),a=j(r),P(n.$$.fragment,r)},m(r,l){M(e,r,l),N(r,a,l),M(n,r,l),s=!0},p(r,l){const i={};l&1&&(i.value=r[0].specular),e.$set(i);const o={};l&1&&(o.value=r[0].shininess),n.$set(o)},i(r){s||(E(e.$$.fragment,r),E(n.$$.fragment,r),s=!0)},o(r){T(e.$$.fragment,r),T(n.$$.fragment,r),s=!1},d(r){L(e,r),r&&$(a),L(n,r)}}}function ul(t){let e,a;return e=new Be({props:{title:"Material",$$slots:{default:[ll]},$$scope:{ctx:t}}}),e.$on("reset",st.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&9&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function cl(t,e,a){let n;return Oe(t,st,l=>a(0,n=l)),[n,l=>st.change({specular:l.detail.value}),l=>st.change({shininess:l.detail.value})]}class fl extends ge{constructor(e){super(),ve(this,e,cl,ul,de,{})}}function ml(t){let e,a,n,s,r,l,i,o;return e=new Ce({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new Ce({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),r=new Ce({props:{label:"specular",value:t[0].specular}}),r.$on("input",t[3]),i=new Xe({props:{label:"direction",value:t[0].direction}}),i.$on("input",t[4]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment),l=I(),C(i.$$.fragment)},l(u){P(e.$$.fragment,u),a=j(u),P(n.$$.fragment,u),s=j(u),P(r.$$.fragment,u),l=j(u),P(i.$$.fragment,u)},m(u,f){M(e,u,f),N(u,a,f),M(n,u,f),N(u,s,f),M(r,u,f),N(u,l,f),M(i,u,f),o=!0},p(u,f){const c={};f&1&&(c.value=u[0].ambient),e.$set(c);const v={};f&1&&(v.value=u[0].diffuse),n.$set(v);const p={};f&1&&(p.value=u[0].specular),r.$set(p);const h={};f&1&&(h.value=u[0].direction),i.$set(h)},i(u){o||(E(e.$$.fragment,u),E(n.$$.fragment,u),E(r.$$.fragment,u),E(i.$$.fragment,u),o=!0)},o(u){T(e.$$.fragment,u),T(n.$$.fragment,u),T(r.$$.fragment,u),T(i.$$.fragment,u),o=!1},d(u){L(e,u),u&&$(a),L(n,u),u&&$(s),L(r,u),u&&$(l),L(i,u)}}}function pl(t){let e,a;return e=new Be({props:{title:"Directional light",$$slots:{default:[ml]},$$scope:{ctx:t}}}),e.$on("reset",He.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&33&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function hl(t,e,a){let n;return Oe(t,He,o=>a(0,n=o)),[n,o=>He.change({ambient:o.detail.value}),o=>He.change({diffuse:o.detail.value}),o=>He.change({specular:o.detail.value}),o=>He.change({direction:o.detail.value})]}class gl extends ge{constructor(e){super(),ve(this,e,hl,pl,de,{})}}function vl(t){let e,a,n,s,r,l,i,o,u,f,c,v;return e=new Ce({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new Ce({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),r=new Ce({props:{label:"specular",value:t[0].specular}}),r.$on("input",t[3]),i=new Xe({props:{label:"position",value:t[0].position}}),i.$on("input",t[4]),u=new ee({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),u.$on("input",t[5]),c=new ee({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),c.$on("input",t[6]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment),l=I(),C(i.$$.fragment),o=I(),C(u.$$.fragment),f=I(),C(c.$$.fragment)},l(p){P(e.$$.fragment,p),a=j(p),P(n.$$.fragment,p),s=j(p),P(r.$$.fragment,p),l=j(p),P(i.$$.fragment,p),o=j(p),P(u.$$.fragment,p),f=j(p),P(c.$$.fragment,p)},m(p,h){M(e,p,h),N(p,a,h),M(n,p,h),N(p,s,h),M(r,p,h),N(p,l,h),M(i,p,h),N(p,o,h),M(u,p,h),N(p,f,h),M(c,p,h),v=!0},p(p,h){const m={};h&1&&(m.value=p[0].ambient),e.$set(m);const d={};h&1&&(d.value=p[0].diffuse),n.$set(d);const b={};h&1&&(b.value=p[0].specular),r.$set(b);const S={};h&1&&(S.value=p[0].position),i.$set(S);const g={};h&1&&(g.value=p[0].attenuation1),u.$set(g);const w={};h&1&&(w.value=p[0].attenuation2),c.$set(w)},i(p){v||(E(e.$$.fragment,p),E(n.$$.fragment,p),E(r.$$.fragment,p),E(i.$$.fragment,p),E(u.$$.fragment,p),E(c.$$.fragment,p),v=!0)},o(p){T(e.$$.fragment,p),T(n.$$.fragment,p),T(r.$$.fragment,p),T(i.$$.fragment,p),T(u.$$.fragment,p),T(c.$$.fragment,p),v=!1},d(p){L(e,p),p&&$(a),L(n,p),p&&$(s),L(r,p),p&&$(l),L(i,p),p&&$(o),L(u,p),p&&$(f),L(c,p)}}}function dl(t){let e,a;return e=new Be({props:{title:"Point light",$$slots:{default:[vl]},$$scope:{ctx:t}}}),e.$on("reset",De.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&129&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function _l(t,e,a){let n;return Oe(t,De,f=>a(0,n=f)),[n,f=>De.change({ambient:f.detail.value}),f=>De.change({diffuse:f.detail.value}),f=>De.change({specular:f.detail.value}),f=>De.change({position:f.detail.value}),f=>De.change({attenuation1:f.detail.value}),f=>De.change({attenuation2:f.detail.value})]}class $l extends ge{constructor(e){super(),ve(this,e,_l,dl,de,{})}}function bl(t){let e,a,n,s,r,l,i,o,u,f,c,v,p,h,m,d,b,S;return e=new Ce({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),n=new Ce({props:{label:"diffuse",value:t[0].diffuse}}),n.$on("input",t[2]),r=new Ce({props:{label:"specular",value:t[0].specular}}),r.$on("input",t[3]),i=new Xe({props:{label:"position",value:t[0].position}}),i.$on("input",t[4]),u=new Xe({props:{label:"direction",value:t[0].direction}}),u.$on("input",t[5]),c=new ee({props:{label:"innerDegrees",min:0,max:360,step:1,value:t[0].innerDegrees}}),c.$on("input",t[6]),p=new ee({props:{label:"outerDegrees",min:0,max:360,step:1,value:t[0].outerDegrees}}),p.$on("input",t[7]),m=new ee({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),m.$on("input",t[8]),b=new ee({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),b.$on("input",t[9]),{c(){C(e.$$.fragment),a=I(),C(n.$$.fragment),s=I(),C(r.$$.fragment),l=I(),C(i.$$.fragment),o=I(),C(u.$$.fragment),f=I(),C(c.$$.fragment),v=I(),C(p.$$.fragment),h=I(),C(m.$$.fragment),d=I(),C(b.$$.fragment)},l(g){P(e.$$.fragment,g),a=j(g),P(n.$$.fragment,g),s=j(g),P(r.$$.fragment,g),l=j(g),P(i.$$.fragment,g),o=j(g),P(u.$$.fragment,g),f=j(g),P(c.$$.fragment,g),v=j(g),P(p.$$.fragment,g),h=j(g),P(m.$$.fragment,g),d=j(g),P(b.$$.fragment,g)},m(g,w){M(e,g,w),N(g,a,w),M(n,g,w),N(g,s,w),M(r,g,w),N(g,l,w),M(i,g,w),N(g,o,w),M(u,g,w),N(g,f,w),M(c,g,w),N(g,v,w),M(p,g,w),N(g,h,w),M(m,g,w),N(g,d,w),M(b,g,w),S=!0},p(g,w){const W={};w&1&&(W.value=g[0].ambient),e.$set(W);const H={};w&1&&(H.value=g[0].diffuse),n.$set(H);const ne={};w&1&&(ne.value=g[0].specular),r.$set(ne);const fe={};w&1&&(fe.value=g[0].position),i.$set(fe);const oe={};w&1&&(oe.value=g[0].direction),u.$set(oe);const X={};w&1&&(X.value=g[0].innerDegrees),c.$set(X);const V={};w&1&&(V.value=g[0].outerDegrees),p.$set(V);const ue={};w&1&&(ue.value=g[0].attenuation1),m.$set(ue);const be={};w&1&&(be.value=g[0].attenuation2),b.$set(be)},i(g){S||(E(e.$$.fragment,g),E(n.$$.fragment,g),E(r.$$.fragment,g),E(i.$$.fragment,g),E(u.$$.fragment,g),E(c.$$.fragment,g),E(p.$$.fragment,g),E(m.$$.fragment,g),E(b.$$.fragment,g),S=!0)},o(g){T(e.$$.fragment,g),T(n.$$.fragment,g),T(r.$$.fragment,g),T(i.$$.fragment,g),T(u.$$.fragment,g),T(c.$$.fragment,g),T(p.$$.fragment,g),T(m.$$.fragment,g),T(b.$$.fragment,g),S=!1},d(g){L(e,g),g&&$(a),L(n,g),g&&$(s),L(r,g),g&&$(l),L(i,g),g&&$(o),L(u,g),g&&$(f),L(c,g),g&&$(v),L(p,g),g&&$(h),L(m,g),g&&$(d),L(b,g)}}}function wl(t){let e,a;return e=new Be({props:{title:"Spot light",$$slots:{default:[bl]},$$scope:{ctx:t}}}),e.$on("reset",Te.reset),{c(){C(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,s){M(e,n,s),a=!0},p(n,[s]){const r={};s&1025&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){L(e,n)}}}function yl(t,e,a){let n;return Oe(t,Te,p=>a(0,n=p)),[n,p=>Te.change({ambient:p.detail.value}),p=>Te.change({diffuse:p.detail.value}),p=>Te.change({specular:p.detail.value}),p=>Te.change({position:p.detail.value}),p=>Te.change({direction:p.detail.value}),p=>Te.change({innerDegrees:p.detail.value}),p=>Te.change({outerDegrees:p.detail.value}),p=>Te.change({attenuation1:p.detail.value}),p=>Te.change({attenuation2:p.detail.value})]}class Sl extends ge{constructor(e){super(),ve(this,e,yl,wl,de,{})}}function Ol(t){let e,a,n,s,r,l,i,o,u,f,c,v,p,h,m,d,b,S;return a=new No({}),s=new Wo({}),l=new tl({}),o=new ol({}),f=new fl({}),v=new gl({}),h=new $l({}),d=new Sl({}),{c(){e=F("aside"),C(a.$$.fragment),n=I(),C(s.$$.fragment),r=I(),C(l.$$.fragment),i=I(),C(o.$$.fragment),u=I(),C(f.$$.fragment),c=I(),C(v.$$.fragment),p=I(),C(h.$$.fragment),m=I(),C(d.$$.fragment),this.h()},l(g){e=U(g,"ASIDE",{class:!0});var w=q(e);P(a.$$.fragment,w),n=j(w),P(s.$$.fragment,w),r=j(w),P(l.$$.fragment,w),i=j(w),P(o.$$.fragment,w),u=j(w),P(f.$$.fragment,w),c=j(w),P(v.$$.fragment,w),p=j(w),P(h.$$.fragment,w),m=j(w),P(d.$$.fragment,w),w.forEach($),this.h()},h(){_(e,"class",b=Ie(`container ${t[0]}`)+" svelte-7v3svs")},m(g,w){N(g,e,w),M(a,e,null),O(e,n),M(s,e,null),O(e,r),M(l,e,null),O(e,i),M(o,e,null),O(e,u),M(f,e,null),O(e,c),M(v,e,null),O(e,p),M(h,e,null),O(e,m),M(d,e,null),S=!0},p(g,[w]){(!S||w&1&&b!==(b=Ie(`container ${g[0]}`)+" svelte-7v3svs"))&&_(e,"class",b)},i(g){S||(E(a.$$.fragment,g),E(s.$$.fragment,g),E(l.$$.fragment,g),E(o.$$.fragment,g),E(f.$$.fragment,g),E(v.$$.fragment,g),E(h.$$.fragment,g),E(d.$$.fragment,g),S=!0)},o(g){T(a.$$.fragment,g),T(s.$$.fragment,g),T(l.$$.fragment,g),T(o.$$.fragment,g),T(f.$$.fragment,g),T(v.$$.fragment,g),T(h.$$.fragment,g),T(d.$$.fragment,g),S=!1},d(g){g&&$(e),L(a),L(s),L(l),L(o),L(f),L(v),L(h),L(d)}}}function El(t,e,a){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&a(0,n=s.class)},[n]}class Tl extends ge{constructor(e){super(),ve(this,e,El,Ol,de,{class:0})}}function Qt(t,e,a){const n=t.slice();return n[4]=e[a],n}function Al(t){let e,a;function n(...s){return t[3](t[4],...s)}return e=new kt({props:{label:t[4].name,value:t[4].value}}),e.$on("change",n),{c(){C(e.$$.fragment)},l(s){P(e.$$.fragment,s)},m(s,r){M(e,s,r),a=!0},p(s,r){t=s;const l={};r&2&&(l.label=t[4].name),r&2&&(l.value=t[4].value),e.$set(l)},i(s){a||(E(e.$$.fragment,s),a=!0)},o(s){T(e.$$.fragment,s),a=!1},d(s){L(e,s)}}}function Cl(t){let e,a;function n(...s){return t[2](t[4],...s)}return e=new ee({props:{label:t[4].name,min:t[4].min,max:t[4].max,step:t[4].step,value:t[4].value}}),e.$on("input",n),{c(){C(e.$$.fragment)},l(s){P(e.$$.fragment,s)},m(s,r){M(e,s,r),a=!0},p(s,r){t=s;const l={};r&2&&(l.label=t[4].name),r&2&&(l.min=t[4].min),r&2&&(l.max=t[4].max),r&2&&(l.step=t[4].step),r&2&&(l.value=t[4].value),e.$set(l)},i(s){a||(E(e.$$.fragment,s),a=!0)},o(s){T(e.$$.fragment,s),a=!1},d(s){L(e,s)}}}function Kt(t){let e,a,n,s;const r=[Cl,Al],l=[];function i(o,u){return o[4].type==="slider"?0:o[4].type==="toggle"?1:-1}return~(e=i(t))&&(a=l[e]=r[e](t)),{c(){a&&a.c(),n=mt()},l(o){a&&a.l(o),n=mt()},m(o,u){~e&&l[e].m(o,u),N(o,n,u),s=!0},p(o,u){let f=e;e=i(o),e===f?~e&&l[e].p(o,u):(a&&(on(),T(l[f],1,1,()=>{l[f]=null}),ln()),~e?(a=l[e],a?a.p(o,u):(a=l[e]=r[e](o),a.c()),E(a,1),a.m(n.parentNode,n)):a=null)},i(o){s||(E(a),s=!0)},o(o){T(a),s=!1},d(o){~e&&l[e].d(o),o&&$(n)}}}function Pl(t){let e,a,n=t[1].current.editOptions,s=[];for(let l=0;l<n.length;l+=1)s[l]=Kt(Qt(t,n,l));const r=l=>T(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=mt()},l(l){for(let i=0;i<s.length;i+=1)s[i].l(l);e=mt()},m(l,i){for(let o=0;o<s.length;o+=1)s[o].m(l,i);N(l,e,i),a=!0},p(l,i){if(i&2){n=l[1].current.editOptions;let o;for(o=0;o<n.length;o+=1){const u=Qt(l,n,o);s[o]?(s[o].p(u,i),E(s[o],1)):(s[o]=Kt(u),s[o].c(),E(s[o],1),s[o].m(e.parentNode,e))}for(on(),o=n.length;o<s.length;o+=1)r(o);ln()}},i(l){if(!a){for(let i=0;i<n.length;i+=1)E(s[i]);a=!0}},o(l){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)T(s[i]);a=!1},d(l){kn(s,l),l&&$(e)}}}function Ml(t){let e,a,n,s;return a=new Be({props:{title:t[1].current.name,$$slots:{default:[Pl]},$$scope:{ctx:t}}}),a.$on("reset",Re.resetEditOptions),{c(){e=F("aside"),C(a.$$.fragment),this.h()},l(r){e=U(r,"ASIDE",{class:!0});var l=q(e);P(a.$$.fragment,l),l.forEach($),this.h()},h(){_(e,"class",n=Ie(`container ${t[0]}`)+" svelte-1solget")},m(r,l){N(r,e,l),M(a,e,null),s=!0},p(r,[l]){const i={};l&2&&(i.title=r[1].current.name),l&130&&(i.$$scope={dirty:l,ctx:r}),a.$set(i),(!s||l&1&&n!==(n=Ie(`container ${r[0]}`)+" svelte-1solget"))&&_(e,"class",n)},i(r){s||(E(a.$$.fragment,r),s=!0)},o(r){T(a.$$.fragment,r),s=!1},d(r){r&&$(e),L(a)}}}function Ll(t,e,a){let n;Oe(t,Re,i=>a(1,n=i));let{class:s=""}=e;const r=(i,o)=>Re.changeEditOptions(i,o.detail.value),l=(i,o)=>Re.changeEditOptions(i,o.detail.value);return t.$$set=i=>{"class"in i&&a(0,s=i.class)},[s,n,r,l]}class Il extends ge{constructor(e){super(),ve(this,e,Ll,Ml,de,{class:0})}}function en(t,e,a){const n=t.slice();return n[3]=e[a],n}function tn(t,e){let a,n,s,r,l,i,o=e[3].name+"",u,f,c,v;function p(){return e[2](e[3])}return{key:t,first:null,c(){a=F("button"),n=F("img"),l=I(),i=F("span"),u=pe(o),f=I(),this.h()},l(h){a=U(h,"BUTTON",{type:!0,class:!0});var m=q(a);n=U(m,"IMG",{class:!0,src:!0,alt:!0}),l=j(m),i=U(m,"SPAN",{});var d=q(i);u=he(d,o),d.forEach($),f=j(m),m.forEach($),this.h()},h(){_(n,"class","image svelte-1l1v01j"),Ve(n.src,s=`${pt}/demo-${e[3].name}.gif`)||_(n,"src",s),_(n,"alt",r=e[3].name),_(a,"type","button"),_(a,"class","option svelte-1l1v01j"),Ne(a,"option--selected",e[3]===e[1].current),this.first=a},m(h,m){N(h,a,m),O(a,n),O(a,l),O(a,i),O(i,u),O(a,f),c||(v=Ze(a,"click",p),c=!0)},p(h,m){e=h,m&2&&!Ve(n.src,s=`${pt}/demo-${e[3].name}.gif`)&&_(n,"src",s),m&2&&r!==(r=e[3].name)&&_(n,"alt",r),m&2&&o!==(o=e[3].name+"")&&xe(u,o),m&2&&Ne(a,"option--selected",e[3]===e[1].current)},d(h){h&&$(a),c=!1,v()}}}function jl(t){let e,a=[],n=new Map,s,r=t[1].animations;const l=i=>i[3].name;for(let i=0;i<r.length;i+=1){let o=en(t,r,i),u=l(o);n.set(u,a[i]=tn(u,o))}return{c(){e=F("aside");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=U(i,"ASIDE",{class:!0});var o=q(e);for(let u=0;u<a.length;u+=1)a[u].l(o);o.forEach($),this.h()},h(){_(e,"class",s=Ie(`container ${t[0]}`)+" svelte-1l1v01j")},m(i,o){N(i,e,o);for(let u=0;u<a.length;u+=1)a[u].m(e,null)},p(i,[o]){o&2&&(r=i[1].animations,a=Dn(a,o,l,1,i,r,n,e,Fn,tn,null,en)),o&1&&s!==(s=Ie(`container ${i[0]}`)+" svelte-1l1v01j")&&_(e,"class",s)},i:ze,o:ze,d(i){i&&$(e);for(let o=0;o<a.length;o+=1)a[o].d()}}}function kl(t,e,a){let n;Oe(t,Re,l=>a(1,n=l));let{class:s=""}=e;const r=l=>Re.changeCurrentAnimation(l);return t.$$set=l=>{"class"in l&&a(0,s=l.class)},[s,n,r]}class Dl extends ge{constructor(e){super(),ve(this,e,kl,jl,de,{class:0})}}function nn(t){t[12]=t[13].dataUri}function an(t){let e,a,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Rl,then:Ul,catch:Fl,value:13,error:14};return Ft(a=t[3],n),{c(){e=F("div"),n.block.c(),this.h()},l(s){e=U(s,"DIV",{class:!0});var r=q(e);n.block.l(r),r.forEach($),this.h()},h(){_(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(s,r){N(s,e,r),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,r){t=s,n.ctx=t,r&8&&a!==(a=t[3])&&Ft(a,n)||xn(n,t,r)},d(s){s&&$(e),n.block.d(),n.token=null,n=null}}}function Fl(t){let e,a,n=t[14]+"",s;return{c(){e=F("p"),a=pe("An error has occurred: "),s=pe(n),this.h()},l(r){e=U(r,"P",{class:!0});var l=q(e);a=he(l,"An error has occurred: "),s=he(l,n),l.forEach($),this.h()},h(){_(e,"class","preview__error svelte-13qbjon")},m(r,l){N(r,e,l),O(e,a),O(e,s)},p(r,l){l&8&&n!==(n=r[14]+"")&&xe(s,n)},d(r){r&&$(e)}}}function Ul(t){nn(t);let e,a,n,s,r,l,i;return{c(){e=F("div"),a=F("img"),s=I(),r=F("a"),l=pe("Download"),this.h()},l(o){e=U(o,"DIV",{class:!0});var u=q(e);a=U(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach($),s=j(o),r=U(o,"A",{class:!0,download:!0,href:!0});var f=q(r);l=he(f,"Download"),f.forEach($),this.h()},h(){_(a,"class","preview__image svelte-13qbjon"),Ve(a.src,n=t[12])||_(a,"src",n),_(a,"alt","generated gif"),_(e,"class","preview__image-container svelte-13qbjon"),_(r,"class","preview__download-button svelte-13qbjon"),_(r,"download","jumping_peter.gif"),_(r,"href",i=t[12])},m(o,u){N(o,e,u),O(e,a),N(o,s,u),N(o,r,u),O(r,l)},p(o,u){nn(o),u&8&&!Ve(a.src,n=o[12])&&_(a,"src",n),u&8&&i!==(i=o[12])&&_(r,"href",i)},d(o){o&&$(e),o&&$(s),o&&$(r)}}}function Rl(t){let e,a,n,s,r,l,i=t[4].frame+"",o,u,f=t[5].totalFrames+"",c,v,p,h,m,d;return{c(){e=F("div"),a=F("p"),n=pe("Generating..."),s=I(),r=F("p"),l=pe("["),o=pe(i),u=pe(" / "),c=pe(f),v=pe("]"),p=I(),h=F("progress"),this.h()},l(b){e=U(b,"DIV",{class:!0});var S=q(e);a=U(S,"P",{});var g=q(a);n=he(g,"Generating..."),g.forEach($),s=j(S),r=U(S,"P",{});var w=q(r);l=he(w,"["),o=he(w,i),u=he(w," / "),c=he(w,f),v=he(w,"]"),w.forEach($),p=j(S),h=U(S,"PROGRESS",{class:!0,max:!0}),q(h).forEach($),S.forEach($),this.h()},h(){_(h,"class","preview__progress svelte-13qbjon"),_(h,"max",m=t[5].totalFrames),h.value=d=t[4].frame,_(e,"class","preview__loading svelte-13qbjon")},m(b,S){N(b,e,S),O(e,a),O(a,n),O(e,s),O(e,r),O(r,l),O(r,o),O(r,u),O(r,c),O(r,v),O(e,p),O(e,h)},p(b,S){S&16&&i!==(i=b[4].frame+"")&&xe(o,i),S&32&&f!==(f=b[5].totalFrames+"")&&xe(c,f),S&32&&m!==(m=b[5].totalFrames)&&_(h,"max",m),S&16&&d!==(d=b[4].frame)&&(h.value=d)},d(b){b&&$(e)}}}function xl(t){let e,a,n,s,r,l,i,o,u,f,c,v;n=new kt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[3]&&an(t);return f=new ee({props:{min:0,max:t[5].totalFrames-1,step:1,value:t[4].frame}}),f.$on("input",t[6]),{c(){e=F("main"),a=F("div"),C(n.$$.fragment),s=I(),p&&p.c(),r=I(),l=F("div"),i=F("div"),o=F("canvas"),u=I(),C(f.$$.fragment),this.h()},l(h){e=U(h,"MAIN",{class:!0});var m=q(e);a=U(m,"DIV",{class:!0});var d=q(a);P(n.$$.fragment,d),d.forEach($),s=j(m),p&&p.l(m),r=j(m),l=U(m,"DIV",{class:!0});var b=q(l);i=U(b,"DIV",{class:!0});var S=q(i);o=U(S,"CANVAS",{class:!0,style:!0}),q(o).forEach($),S.forEach($),u=j(b),P(f.$$.fragment,b),b.forEach($),m.forEach($),this.h()},h(){_(a,"class","preview__debug-input svelte-13qbjon"),_(o,"class","preview__image svelte-13qbjon"),Un(o,"transform","scaleY(-1)"),_(i,"class","preview__image-container svelte-13qbjon"),_(l,"class","preview__container preview__container--debug svelte-13qbjon"),_(e,"class",c=Ie(`preview ${t[0]}`)+" svelte-13qbjon"),Ne(e,"preview--debug",t[1]),Ne(e,"preview--no-debug",!t[1])},m(h,m){N(h,e,m),O(e,a),M(n,a,null),O(e,s),p&&p.m(e,null),O(e,r),O(e,l),O(l,i),O(i,o),t[9](o),O(l,u),M(f,l,null),v=!0},p(h,[m]){const d={};m&2&&(d.value=h[1]),n.$set(d),!h[1]&&h[3]?p?p.p(h,m):(p=an(h),p.c(),p.m(e,r)):p&&(p.d(1),p=null);const b={};m&32&&(b.max=h[5].totalFrames-1),m&16&&(b.value=h[4].frame),f.$set(b),(!v||m&1&&c!==(c=Ie(`preview ${h[0]}`)+" svelte-13qbjon"))&&_(e,"class",c),(!v||m&3)&&Ne(e,"preview--debug",h[1]),(!v||m&3)&&Ne(e,"preview--no-debug",!h[1])},i(h){v||(E(n.$$.fragment,h),E(f.$$.fragment,h),v=!0)},o(h){T(n.$$.fragment,h),T(f.$$.fragment,h),v=!1},d(h){h&&$(e),L(n),p&&p.d(),t[9](null),L(f)}}}function Bl(t,e,a){let n,s,r;Oe(t,Mt,m=>a(8,n=m)),Oe(t,nt,m=>a(4,s=m)),Oe(t,Ue,m=>a(5,r=m));let l,{class:i=""}=e,o=!1,u=null;function f(){nt.renderFrame().catch(m=>{throw console.error(`renderFrame failed: ${m}`),m})}function c(){a(3,u=nt.animate().catch(m=>{throw console.error(`animate failed: ${m}`),m}))}Rn(()=>{nt.changeCanvas(l),c()});function v(m){nt.renderFrame(m.detail.value).catch(d=>console.error(`Animation failed: ${d}`))}function p(m){a(1,o=m.detail.value)}function h(m){Bn[m?"unshift":"push"](()=>{l=m,a(2,l)})}return t.$$set=m=>{"class"in m&&a(0,i=m.class)},t.$$.update=()=>{t.$$.dirty&258&&(o?f():c())},[i,o,l,u,s,r,v,p,n,h]}class Nl extends ge{constructor(e){super(),ve(this,e,Bl,xl,de,{class:0})}}function zl(t){let e,a,n,s,r,l,i,o,u,f,c,v,p,h,m,d,b,S,g,w,W,H,ne,fe,oe;return document.title=e=at,d=new Hn({props:{class:"header"}}),S=new Dl({props:{class:"animations"}}),w=new Tl({props:{class:"common-options"}}),H=new Il({props:{class:"animation-options"}}),fe=new Nl({props:{class:"preview"}}),{c(){a=F("meta"),n=F("meta"),s=F("meta"),r=F("meta"),l=F("meta"),i=F("meta"),o=F("meta"),u=F("meta"),f=F("meta"),c=F("meta"),v=F("meta"),p=F("meta"),h=I(),m=F("div"),C(d.$$.fragment),b=I(),C(S.$$.fragment),g=I(),C(w.$$.fragment),W=I(),C(H.$$.fragment),ne=I(),C(fe.$$.fragment),this.h()},l(X){const V=Nn("svelte-2dqrj",document.head);a=U(V,"META",{name:!0,content:!0,class:!0}),n=U(V,"META",{name:!0,content:!0,class:!0}),s=U(V,"META",{property:!0,content:!0,class:!0}),r=U(V,"META",{property:!0,content:!0,class:!0}),l=U(V,"META",{property:!0,content:!0,class:!0}),i=U(V,"META",{property:!0,content:!0,class:!0}),o=U(V,"META",{property:!0,content:!0,class:!0}),u=U(V,"META",{property:!0,content:!0,class:!0}),f=U(V,"META",{property:!0,content:!0,class:!0}),c=U(V,"META",{property:!0,content:!0,class:!0}),v=U(V,"META",{property:!0,content:!0,class:!0}),p=U(V,"META",{property:!0,content:!0,class:!0}),V.forEach($),h=j(X),m=U(X,"DIV",{class:!0});var ue=q(m);P(d.$$.fragment,ue),b=j(ue),P(S.$$.fragment,ue),g=j(ue),P(w.$$.fragment,ue),W=j(ue),P(H.$$.fragment,ue),ne=j(ue),P(fe.$$.fragment,ue),ue.forEach($),this.h()},h(){_(a,"name","title"),_(a,"content",at),_(a,"class","svelte-z7ouxl"),_(n,"name","description"),_(n,"content",Ct),_(n,"class","svelte-z7ouxl"),_(s,"property","og:type"),_(s,"content","website"),_(s,"class","svelte-z7ouxl"),_(r,"property","og:url"),_(r,"content",rn),_(r,"class","svelte-z7ouxl"),_(l,"property","og:title"),_(l,"content",at),_(l,"class","svelte-z7ouxl"),_(i,"property","og:description"),_(i,"content",Ct),_(i,"class","svelte-z7ouxl"),_(o,"property","og:image"),_(o,"content",sn),_(o,"class","svelte-z7ouxl"),_(u,"property","twitter:card"),_(u,"content","summary_large_image"),_(u,"class","svelte-z7ouxl"),_(f,"property","twitter:url"),_(f,"content",rn),_(f,"class","svelte-z7ouxl"),_(c,"property","twitter:title"),_(c,"content",at),_(c,"class","svelte-z7ouxl"),_(v,"property","twitter:description"),_(v,"content",Ct),_(v,"class","svelte-z7ouxl"),_(p,"property","twitter:image"),_(p,"content",sn),_(p,"class","svelte-z7ouxl"),_(m,"class","grid svelte-z7ouxl")},m(X,V){O(document.head,a),O(document.head,n),O(document.head,s),O(document.head,r),O(document.head,l),O(document.head,i),O(document.head,o),O(document.head,u),O(document.head,f),O(document.head,c),O(document.head,v),O(document.head,p),N(X,h,V),N(X,m,V),M(d,m,null),O(m,b),M(S,m,null),O(m,g),M(w,m,null),O(m,W),M(H,m,null),O(m,ne),M(fe,m,null),oe=!0},p(X,[V]){(!oe||V&0)&&e!==(e=at)&&(document.title=e)},i(X){oe||(E(d.$$.fragment,X),E(S.$$.fragment,X),E(w.$$.fragment,X),E(H.$$.fragment,X),E(fe.$$.fragment,X),oe=!0)},o(X){T(d.$$.fragment,X),T(S.$$.fragment,X),T(w.$$.fragment,X),T(H.$$.fragment,X),T(fe.$$.fragment,X),oe=!1},d(X){$(a),$(n),$(s),$(r),$(l),$(i),$(o),$(u),$(f),$(c),$(v),$(p),X&&$(h),X&&$(m),L(d),L(S),L(w),L(H),L(fe)}}}const at="Jumping Peter",Ct="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",rn="https://ksmai.github.io/jumping-peter",sn="https://ksmai.github.io/jumping-peter/favicon.png";class Xl extends ge{constructor(e){super(),ve(this,e,null,zl,de,{})}}export{Xl as default};
