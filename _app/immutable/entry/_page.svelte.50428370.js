var jr=Object.defineProperty;var Ur=(t,e,n)=>e in t?jr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>(Ur(t,typeof e!="symbol"?e+"":e,n),n);import{S as de,i as ve,n as _e,j as D,s as P,q as ge,k as R,l as q,c as F,r as he,g as $,m as _,J as Ye,K as Fe,a as B,G as E,H as Ge,L as st,C as Br,M as Ke,u as Be,D as Nr,E as zr,F as Gr,f as C,b as S,N as ct,y as O,z as x,A,B as k,I as Te,O as ze,e as Je,v as Rt,d as jt,P as vr,Q as qr,R as Hr,p as Xr,o as Vr,T as zt,U as Yr,w as Wr,V as Jr}from"../chunks/index.b30f5e97.js";import{b as dt,w as Et,d as Qr}from"../chunks/paths.cf749bf4.js";function Zr(t){let e,n,r,a,i,o,s,l,u,c,f,d,p;return{c(){e=D("header"),n=D("img"),a=P(),i=D("h1"),o=ge("Jumping Peter"),s=P(),l=D("p"),u=ge("generate gif emojis"),c=P(),f=D("a"),d=ge("Contribute"),this.h()},l(g){e=R(g,"HEADER",{class:!0});var m=q(e);n=R(m,"IMG",{class:!0,src:!0,alt:!0}),a=F(m),i=R(m,"H1",{class:!0});var v=q(i);o=he(v,"Jumping Peter"),v.forEach($),s=F(m),l=R(m,"P",{class:!0});var b=q(l);u=he(b,"generate gif emojis"),b.forEach($),c=F(m),f=R(m,"A",{class:!0,href:!0,target:!0,rel:!0});var T=q(f);d=he(T,"Contribute"),T.forEach($),m.forEach($),this.h()},h(){_(n,"class","logo svelte-bal6b7"),Ye(n.src,r=`${dt}/demo-jumping.gif`)||_(n,"src",r),_(n,"alt",""),_(i,"class","title svelte-bal6b7"),_(l,"class","subtitle svelte-bal6b7"),_(f,"class","contribute svelte-bal6b7"),_(f,"href","https://github.com/ksmai/jumping-peter"),_(f,"target","_blank"),_(f,"rel","noreferrer"),_(e,"class",p=Fe(`header ${t[0]}`)+" svelte-bal6b7")},m(g,m){B(g,e,m),E(e,n),E(e,a),E(e,i),E(i,o),E(e,s),E(e,l),E(l,u),E(e,c),E(e,f),E(f,d)},p(g,[m]){m&1&&p!==(p=Fe(`header ${g[0]}`)+" svelte-bal6b7")&&_(e,"class",p)},i:Ge,o:Ge,d(g){g&&$(e)}}}function Kr(t,e,n){let{class:r=""}=e;return t.$$set=a=>{"class"in a&&n(0,r=a.class)},[r]}class en extends de{constructor(e){super(),ve(this,e,Kr,Zr,_e,{class:0})}}function Qe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function He(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Lt(t){return{...t,type:"slider",min:0,max:1,step:.01}}function lt(t){return{...t,type:"slider",min:0,max:2,step:.01}}function vt(t){return{...t,type:"slider",min:-2,max:2,step:.01}}function _t(t){return{...t,type:"slider",min:.01,max:10,step:.01}}function Gt(t){return{...t,type:"slider",min:-1,max:1,step:1}}function _r(t){return{...t,type:"slider",min:1,max:100,step:1}}function tn(t){return{...t,type:"slider",min:1,max:5,step:1}}function ft(t){return{...t,type:"toggle"}}function rn(t){return t.reduce((e,n)=>(Object.assign(e,{[n.name]:n.value}),e),{})}const K={image:{url:`${dt}/favicon.png`},output:{width:64,height:64,clear:[1,1,1],delayMs:50,totalFrames:20},material:{specular:[0,0,0],shininess:32},directionalLight:{ambient:[1,1,1],diffuse:[0,0,0],specular:[0,0,0],direction:[0,-1,-1]},pointLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],attenuation1:.2,attenuation2:.1},spotLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],direction:[0,0,-1],innerDegrees:5,outerDegrees:15,attenuation1:.2,attenuation2:.1},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!1,left:-1,right:1,bottom:-1,top:1,near:.1,far:10}};function $e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Ze(t,e,n){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=n,t[5]*=n,t[9]*=n,t[13]*=n}function be(t,e,n){$r(t,e,n,0)}function nn(t,e,n){const r=t[0],a=t[4],i=t[8],o=t[12];t[0]+=e*t[1],t[4]+=e*t[5],t[8]+=e*t[9],t[12]+=e*t[13],t[1]+=n*r,t[5]+=n*a,t[9]+=n*i,t[13]+=n*o}function $r(t,e,n,r){t[12]+=e,t[13]+=n,t[14]+=r}function ut(t,e){Ut(t,e,[0,0,1])}function Ut(t,e,n){const r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);if(r===0)return;const a=n[0]/r,i=n[1]/r,o=n[2]/r,s=e/180*Math.PI,l=Math.cos(s),u=Math.sin(s),c=[(1-l)*a*a+l,(1-l)*a*i+u*o,(1-l)*a*o-u*i,0,(1-l)*a*i-u*o,(1-l)*i*i+l,(1-l)*i*o-u*a,0,(1-l)*a*o+u*i,(1-l)*i*o-u*a,(1-l)*o*o+l,0,0,0,0,1];Tt(t,c)}function an(t,e,n,r){$r(t,-e[0],-e[1],-e[2]);const a=[-n[0],-n[1],-n[2]];qt(a);const i=Ht(r,a);qt(i);const o=Ht(a,i),s=[i[0],o[0],a[0],0,i[1],o[1],a[1],0,i[2],o[2],a[2],0,0,0,0,1];Tt(t,s)}function sn(t,e,n,r,a,i,o){const s=[2*i/(n-e),0,0,0,0,2*i/(a-r),0,0,(n+e)/(n-e),(a+r)/(a-r),-(o+i)/(o-i),-1,0,0,-2*o*i/(o-i),0];Tt(t,s)}function on(t,e,n,r,a,i,o){const s=[2/(n-e),0,0,0,0,2/(a-r),0,0,0,0,-2/(o-i),0,-(n+e)/(n-e),-(a+r)/(a-r),-(o+i)/(o-i),1];Tt(t,s)}function Tt(t,e){const n=t.slice();for(let r=0;r<=3;++r)for(let a=0;a<=3;++a){const i=4*r+a;t[i]=0;for(let o=0;o<=3;++o)t[i]+=e[4*o+a]*n[4*r+o]}}function qt(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?t:[t[0]/e,t[1]/e,t[2]/e]}function Ht(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function re(t,e,n){return t+(e-t)*n}function $t(t){return t*Math.PI/180}function Xt(t){const e=new Float32Array([t]),[n]=new Int32Array(e.buffer);let r=Math.abs(n)|0;return r=(r>>16^r)*73244475,r=(r>>16^r)*73244475,r=r>>16^r,r/(Math.pow(2,31)-1)}function ln(t){return e=>1-Math.pow(1-e,t)}function br(t){const e=Math.pow(2,t-1);return n=>n<.5?e*Math.pow(n,t):1-Math.pow(2*(1-n),t)/2}const ht=br(3),un=ln(2);function Vt(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const cn="spinning",fn={...K,output:{...K.output,delayMs:50,totalFrames:15}},mn=[Qe({name:"startAngle",value:0}),Qe({name:"endAngle",value:360}),He({name:"originX",value:0}),He({name:"originY",value:0}),ft({name:"alternates",value:!1})];function wr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{alternates:i,startAngle:o,endAngle:s,originX:l,originY:u}=n;return[{program:r,geometry:a,getUniforms:f=>{const d=i?Math.min(f,1-f)*2:f,p=re(o,s,d),g=$e();return be(g,-l,-u),ut(g,p),be(g,l,u),{u_model:g}}}]}const pn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:wr,defaultOptions:fn,editOptions:mn,name:cn},Symbol.toStringTag,{value:"Module"})),gn="expanding",hn={...K,output:{...K.output,delayMs:50,totalFrames:20}},dn=[_t({name:"minScale",value:1}),_t({name:"maxScale",value:2}),ft({name:"alternates",value:!1})];function yr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{minScale:i,maxScale:o,alternates:s}=n;return[{program:r,geometry:a,getUniforms:u=>{const c=s?Math.min(u,1-u)*2:u,f=re(i,o,c),d=$e();return Ze(d,f,f),{u_model:d}}}]}const vn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:yr,defaultOptions:hn,editOptions:dn,name:gn},Symbol.toStringTag,{value:"Module"})),_n="extreme-speed",$n={...K,output:{...K.output,delayMs:20,totalFrames:10}},bn=[Gt({name:"directionX",value:-1}),Gt({name:"directionY",value:0})];function Er(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("sudoku"),{directionX:i,directionY:o}=n,s=i*2,l=o*2;return[{program:r,geometry:a,getUniforms:c=>{const f=$e(),d=re(0,s,c),p=re(0,l,c);return be(f,d,p),{u_model:f}}}]}const wn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Er,defaultOptions:$n,editOptions:bn,name:_n},Symbol.toStringTag,{value:"Module"})),yn="excited",En={...K,output:{...K.output,delayMs:50,totalFrames:25}},Tn=[Qe({name:"angle",value:15}),vt({name:"startOffset",value:-.2}),vt({name:"endOffset",value:.2}),_r({name:"cycles",value:3})];function Tr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{angle:i,cycles:o,startOffset:s,endOffset:l}=n,u=$t(i),c=Math.cos(u),f=Math.sin(u);return[{program:r,geometry:a,getUniforms:p=>{const g=p*2*o%1,m=Math.min(g,1-g)*2,v=re(-s*f,-l*f,m),b=re(s*c,l*c,m),T=$e();return ut(T,i),be(T,v,b),Ze(T,p>.5?-1:1,1),{u_model:T}}}]}const Cn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Tr,defaultOptions:En,editOptions:Tn,name:yn},Symbol.toStringTag,{value:"Module"})),Sn="jumping",On={...K,output:{...K.output,delayMs:50,totalFrames:20}},xn=[lt({name:"maxOffset",value:1.2}),Lt({name:"compressTime",value:.4}),Lt({name:"maxCompress",value:.3})];function Cr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{maxOffset:i,compressTime:o,maxCompress:s}=n;return[{program:r,geometry:a,getUniforms:u=>{const c=Math.min(u,1-u)*2,f=$e(),d=c/(1-o);if(d<1){const p=(1-d*d)*i;be(f,0,p)}else{const p=(1-c)/o,m=1-(1-p*p)*s;be(f,0,1),Ze(f,1/m,m),be(f,0,-1)}return{u_model:f}}}]}const An=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Cr,defaultOptions:On,editOptions:xn,name:Sn},Symbol.toStringTag,{value:"Module"})),kn="tower",Mn={...K,output:{...K.output,delayMs:40,totalFrames:20}},Pn=[Qe({name:"startAngle",value:20}),Qe({name:"endAngle",value:-45}),Lt({name:"startTime",value:.5})];function Sr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("tower"),{startAngle:i,endAngle:o,startTime:s}=n;return[{program:r,geometry:a,getUniforms:u=>{const c=$e();if(u<s){const f=u/s,d=Math.min(f,1-f)*2,p=re(0,i,d);ut(c,p)}else{const f=(u-s)/(1-s),d=Math.min(f,1-f)*2,p=re(0,o,d);if(ut(c,p),f>.5){const g=$t(p),m=Math.cos(g),v=Math.sin(g),b=(f-.5)*2,T=re(0,-2*v,b),h=re(0,2*m,b);be(c,T,h)}}return{u_model:c}}}]}const Fn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Sr,defaultOptions:Mn,editOptions:Pn,name:kn},Symbol.toStringTag,{value:"Module"})),Ln="repeated",In={...K,output:{...K.output,delayMs:60,totalFrames:15}},Dn=[_t({name:"initialScale",value:.1}),ft({name:"horizontal",value:!1})];function Or(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{initialScale:i,horizontal:o}=n,s=o?{geometry:e.createGeometry("leftHalf"),endX:-1,endY:0}:{geometry:e.createGeometry("topHalf"),endX:0,endY:1},l=o?{geometry:e.createGeometry("rightHalf"),endX:1,endY:0}:{geometry:e.createGeometry("bottomHalf"),endX:0,endY:-1},u=d=>{const p=$e(),g=ht(d),m=re(i,1,g);return Ze(p,m,m),{u_model:p}},c=d=>{const p=$e(),g=ht(d),m=re(0,s.endX,g),v=re(0,s.endY,g);return be(p,m,v),{u_model:p}},f=d=>{const p=$e(),g=ht(d),m=re(0,l.endX,g),v=re(0,l.endY,g);return be(p,m,v),{u_model:p}};return[{program:r,geometry:a,getUniforms:u},{program:r,geometry:s.geometry,getUniforms:c},{program:r,geometry:l.geometry,getUniforms:f}]}const Rn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Or,defaultOptions:In,editOptions:Dn,name:Ln},Symbol.toStringTag,{value:"Module"})),jn="mirror",Un={...K,output:{...K.output,delayMs:50,totalFrames:16}},Bn=[ft({name:"rightHalf",value:!1})];function xr(t,e,n){const r=t.createProgram("default"),{rightHalf:a}=n,i=e.createGeometry(a?"rightHalf":"leftHalf");return[{program:r,geometry:i,getUniforms:l=>{const u=Math.min(l,1-l)*2,c=$e(),f=Vt(u),d=re(-2,-1,f);return a||Ze(c,-1,1),be(c,d,0),{u_model:c}}},{program:r,geometry:i,getUniforms:l=>{const u=Math.min(l,1-l)*2,c=$e(),f=Vt(u),d=re(2,1,f);return a&&Ze(c,-1,1),be(c,d,0),{u_model:c}}}]}const Nn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:xr,defaultOptions:Un,editOptions:Bn,name:jn},Symbol.toStringTag,{value:"Module"})),zn="panic",Gn={...K,output:{...K.output,delayMs:30,totalFrames:16}},qn=[lt({name:"maxOffsetX",value:.15}),lt({name:"maxOffsetY",value:.15})];function Ar(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{maxOffsetX:i,maxOffsetY:o}=n;return[{program:r,geometry:a,getUniforms:l=>{const u=Xt(l+.123),c=Xt(l*2+1),f=re(-i,i,u),d=re(-o,o,c),p=$e();return be(p,f,d),{u_model:p}}}]}const Hn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ar,defaultOptions:Gn,editOptions:qn,name:zn},Symbol.toStringTag,{value:"Module"})),Xn="rotating",Vn={...K,output:{...K.output,delayMs:40,totalFrames:25},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6},material:{specular:[1,1,1],shininess:100},directionalLight:{ambient:[.6,.6,.6],diffuse:[1,1,1],specular:[1,1,1],direction:[-1,-1,-5]}},Yn=[He({name:"axisX",value:0}),He({name:"axisY",value:1}),He({name:"axisZ",value:0}),He({name:"originX",value:0}),He({name:"originY",value:0}),tn({name:"easing",value:1}),ft({name:"alternates",value:!1})];function kr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{axisX:i,axisY:o,axisZ:s,originX:l,originY:u,easing:c,alternates:f}=n,d=[i,o,s],p=br(c);return[{program:r,geometry:a,getUniforms:m=>{const v=f?Math.min(m,1-m)*2:m,b=p(v),T=re(0,360,b),h=$e();return be(h,-l,-u),Ut(h,T,d),be(h,l,u),{u_model:h}}}]}const Wn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:kr,defaultOptions:Vn,editOptions:Yn,name:Xn},Symbol.toStringTag,{value:"Module"})),Jn="party",Qn={...K,output:{...K.output,delayMs:40,totalFrames:15},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6}},Zn=[Qe({name:"angle",value:10}),vt({name:"startOffset",value:-.3}),vt({name:"endOffset",value:.5})];function Mr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{angle:i,startOffset:o,endOffset:s}=n;return[{program:r,geometry:a,getUniforms:u=>{const c=2*u%1,f=Math.min(c,1-c)*2,d=ht(c),p=un(f),g=u<.5?re(0,180,d):re(180,360,d),m=re(o,s,p),v=$e();return ut(v,i),be(v,0,m),Ut(v,g,[0,1,0]),{u_model:v}}}]}const Kn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Mr,defaultOptions:Qn,editOptions:Zn,name:Jn},Symbol.toStringTag,{value:"Module"})),ea="parrot",ta={...K,output:{...K.output,delayMs:20,totalFrames:18}},ra=[_t({name:"amplitudeX",value:.6}),lt({name:"amplitudeY",value:.5})];function Pr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{amplitudeX:i,amplitudeY:o}=n;return[{program:r,geometry:a,getUniforms:l=>{const u=Math.cos(l*2*Math.PI)*.5+.5,c=re(-i,i,u),f=Math.sin(l*2*Math.PI)*.5+.5,d=re(-o,0,f),p=$e();return be(p,0,1),nn(p,c,0),be(p,0,-1+d),{u_model:p}}}]}const na=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Pr,defaultOptions:ta,editOptions:ra,name:ea},Symbol.toStringTag,{value:"Module"})),aa="wiggling",ia={...K,output:{...K.output,delayMs:50,totalFrames:15}},sa=[_r({name:"frequency",value:3}),lt({name:"amplitude",value:.05})];function Fr(t,e,n){const r=t.createProgram("default"),a=e.createGeometry("full"),{frequency:i,amplitude:o}=n;return[{program:r,geometry:a,getUniforms:l=>({u_model:$e(),u_time:l,u_amplitude:o,u_frequency:i})}]}const oa=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Fr,defaultOptions:ia,editOptions:sa,name:aa},Symbol.toStringTag,{value:"Module"})),kt=[An,wn,pn,Cn,vn,Fn,Rn,Nn,Hn,Wn,Kn,na,oa];function Yt(t,e,n){const r=rn(n.editOptions);switch(n.name){case"spinning":return wr(t,e,r);case"expanding":return yr(t,e,r);case"extreme-speed":return Er(t,e,r);case"excited":return Tr(t,e,r);case"jumping":return Cr(t,e,r);case"tower":return Sr(t,e,r);case"repeated":return Or(t,e,r);case"mirror":return xr(t,e,r);case"panic":return Ar(t,e,r);case"rotating":return kr(t,e,r);case"party":return Mr(t,e,r);case"parrot":return Pr(t,e,r);case"wiggling":return Fr(t,e,r);default:(a=>{throw new Error(`Unknown animation: ${JSON.stringify(a)}`)})(n)}}var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},la=typeof mt=="object"&&mt&&mt.Object===Object&&mt,ua=la,ca=ua,fa=typeof self=="object"&&self&&self.Object===Object&&self,ma=ca||fa||Function("return this")(),Ct=ma,pa=Ct,ga=pa.Symbol,Lr=ga,Wt=Lr,Ir=Object.prototype,ha=Ir.hasOwnProperty,da=Ir.toString,nt=Wt?Wt.toStringTag:void 0;function va(t){var e=ha.call(t,nt),n=t[nt];try{t[nt]=void 0;var r=!0}catch{}var a=da.call(t);return r&&(e?t[nt]=n:delete t[nt]),a}var _a=va,$a=Object.prototype,ba=$a.toString;function wa(t){return ba.call(t)}var ya=wa,Jt=Lr,Ea=_a,Ta=ya,Ca="[object Null]",Sa="[object Undefined]",Qt=Jt?Jt.toStringTag:void 0;function Oa(t){return t==null?t===void 0?Sa:Ca:Qt&&Qt in Object(t)?Ea(t):Ta(t)}var xa=Oa;function Aa(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Dr=Aa,ka=xa,Ma=Dr,Pa="[object AsyncFunction]",Fa="[object Function]",La="[object GeneratorFunction]",Ia="[object Proxy]";function Da(t){if(!Ma(t))return!1;var e=ka(t);return e==Fa||e==La||e==Pa||e==Ia}var Ra=Da,ja=Ct,Ua=ja["__core-js_shared__"],Ba=Ua,Mt=Ba,Zt=function(){var t=/[^.]+$/.exec(Mt&&Mt.keys&&Mt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Na(t){return!!Zt&&Zt in t}var za=Na,Ga=Function.prototype,qa=Ga.toString;function Ha(t){if(t!=null){try{return qa.call(t)}catch{}try{return t+""}catch{}}return""}var Xa=Ha,Va=Ra,Ya=za,Wa=Dr,Ja=Xa,Qa=/[\\^$.*+?()[\]{}|]/g,Za=/^\[object .+?Constructor\]$/,Ka=Function.prototype,ei=Object.prototype,ti=Ka.toString,ri=ei.hasOwnProperty,ni=RegExp("^"+ti.call(ri).replace(Qa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ai(t){if(!Wa(t)||Ya(t))return!1;var e=Va(t)?ni:Za;return e.test(Ja(t))}var ii=ai;function si(t,e){return t==null?void 0:t[e]}var oi=si,li=ii,ui=oi;function ci(t,e){var n=ui(t,e);return li(n)?n:void 0}var Bt=ci,fi=Bt,mi=fi(Object,"create"),St=mi,Kt=St;function pi(){this.__data__=Kt?Kt(null):{},this.size=0}var gi=pi;function hi(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var di=hi,vi=St,_i="__lodash_hash_undefined__",$i=Object.prototype,bi=$i.hasOwnProperty;function wi(t){var e=this.__data__;if(vi){var n=e[t];return n===_i?void 0:n}return bi.call(e,t)?e[t]:void 0}var yi=wi,Ei=St,Ti=Object.prototype,Ci=Ti.hasOwnProperty;function Si(t){var e=this.__data__;return Ei?e[t]!==void 0:Ci.call(e,t)}var Oi=Si,xi=St,Ai="__lodash_hash_undefined__";function ki(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xi&&e===void 0?Ai:e,this}var Mi=ki,Pi=gi,Fi=di,Li=yi,Ii=Oi,Di=Mi;function et(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}et.prototype.clear=Pi;et.prototype.delete=Fi;et.prototype.get=Li;et.prototype.has=Ii;et.prototype.set=Di;var Ri=et;function ji(){this.__data__=[],this.size=0}var Ui=ji;function Bi(t,e){return t===e||t!==t&&e!==e}var Ni=Bi,zi=Ni;function Gi(t,e){for(var n=t.length;n--;)if(zi(t[n][0],e))return n;return-1}var Ot=Gi,qi=Ot,Hi=Array.prototype,Xi=Hi.splice;function Vi(t){var e=this.__data__,n=qi(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Xi.call(e,n,1),--this.size,!0}var Yi=Vi,Wi=Ot;function Ji(t){var e=this.__data__,n=Wi(e,t);return n<0?void 0:e[n][1]}var Qi=Ji,Zi=Ot;function Ki(t){return Zi(this.__data__,t)>-1}var es=Ki,ts=Ot;function rs(t,e){var n=this.__data__,r=ts(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ns=rs,as=Ui,is=Yi,ss=Qi,os=es,ls=ns;function tt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}tt.prototype.clear=as;tt.prototype.delete=is;tt.prototype.get=ss;tt.prototype.has=os;tt.prototype.set=ls;var us=tt,cs=Bt,fs=Ct,ms=cs(fs,"Map"),ps=ms,er=Ri,gs=us,hs=ps;function ds(){this.size=0,this.__data__={hash:new er,map:new(hs||gs),string:new er}}var vs=ds;function _s(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var $s=_s,bs=$s;function ws(t,e){var n=t.__data__;return bs(e)?n[typeof e=="string"?"string":"hash"]:n.map}var xt=ws,ys=xt;function Es(t){var e=ys(this,t).delete(t);return this.size-=e?1:0,e}var Ts=Es,Cs=xt;function Ss(t){return Cs(this,t).get(t)}var Os=Ss,xs=xt;function As(t){return xs(this,t).has(t)}var ks=As,Ms=xt;function Ps(t,e){var n=Ms(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Fs=Ps,Ls=vs,Is=Ts,Ds=Os,Rs=ks,js=Fs;function rt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}rt.prototype.clear=Ls;rt.prototype.delete=Is;rt.prototype.get=Ds;rt.prototype.has=Rs;rt.prototype.set=js;var Us=rt,Bs="__lodash_hash_undefined__";function Ns(t){return this.__data__.set(t,Bs),this}var zs=Ns;function Gs(t){return this.__data__.has(t)}var qs=Gs,Hs=Us,Xs=zs,Vs=qs;function bt(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Hs;++e<n;)this.add(t[e])}bt.prototype.add=bt.prototype.push=Xs;bt.prototype.has=Vs;var Ys=bt;function Ws(t,e,n,r){for(var a=t.length,i=n+(r?1:-1);r?i--:++i<a;)if(e(t[i],i,t))return i;return-1}var Js=Ws;function Qs(t){return t!==t}var Zs=Qs;function Ks(t,e,n){for(var r=n-1,a=t.length;++r<a;)if(t[r]===e)return r;return-1}var eo=Ks,to=Js,ro=Zs,no=eo;function ao(t,e,n){return e===e?no(t,e,n):to(t,ro,n)}var io=ao,so=io;function oo(t,e){var n=t==null?0:t.length;return!!n&&so(t,e,0)>-1}var lo=oo;function uo(t,e,n){for(var r=-1,a=t==null?0:t.length;++r<a;)if(n(e,t[r]))return!0;return!1}var co=uo;function fo(t,e){return t.has(e)}var mo=fo,po=Bt,go=Ct,ho=po(go,"Set"),vo=ho;function _o(){}var $o=_o;function bo(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Rr=bo,Pt=vo,wo=$o,yo=Rr,Eo=1/0,To=Pt&&1/yo(new Pt([,-0]))[1]==Eo?function(t){return new Pt(t)}:wo,Co=To,So=Ys,Oo=lo,xo=co,Ao=mo,ko=Co,Mo=Rr,Po=200;function Fo(t,e,n){var r=-1,a=Oo,i=t.length,o=!0,s=[],l=s;if(n)o=!1,a=xo;else if(i>=Po){var u=e?null:ko(t);if(u)return Mo(u);o=!1,a=Ao,l=new So}else l=e?[]:s;e:for(;++r<i;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;e&&l.push(f),s.push(c)}else a(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}var Lo=Fo,Io=Lo;function Do(t){return t&&t.length?Io(t):[]}var Ro=Do;const jo=function(){var t={},e=-1,n,r,a,i,o,s,l=12,u=5003,c,f=l,d,p=1<<l,g=[],m=[],v=u,b=0,T=!1,h,w,X,H=0,ne=0,fe=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],oe,V=[],Y=t.LZWEncoder=function(J,j,y,N){n=J,r=j,a=y,i=Math.max(2,N)},ue=function(J,j){V[oe++]=J,oe>=254&&ke(j)},we=function(J){Ie(v),b=w+2,T=!0,Ce(w,J)},Ie=function(J){for(var j=0;j<J;++j)g[j]=-1},ae=t.compress=function(J,j){var y,N,le,ee,ye,ie,L;for(h=J,T=!1,c=h,d=Me(c),w=1<<J-1,X=w+1,b=w+2,oe=0,ee=De(),L=0,y=v;y<65536;y*=2)++L;L=8-L,ie=v,Ie(ie),Ce(w,j);e:for(;(le=De())!=e;){if(y=(le<<f)+ee,N=le<<L^ee,g[N]==y){ee=m[N];continue}else if(g[N]>=0){ye=ie-N,N===0&&(ye=1);do if((N-=ye)<0&&(N+=ie),g[N]==y){ee=m[N];continue e}while(g[N]>=0)}Ce(ee,j),ee=le,b<p?(m[N]=b++,g[N]=y):we(j)}Ce(ee,j),Ce(X,j)};t.encode=function(J){J.writeByte(i),o=n*r,s=0,ae(i+1,J),J.writeByte(0)};var ke=function(J){oe>0&&(J.writeByte(oe),J.writeBytes(V,0,oe),oe=0)},Me=function(J){return(1<<J)-1},De=function(){if(o===0)return e;--o;var J=a[s++];return J&255},Ce=function(J,j){for(H&=fe[ne],ne>0?H|=J<<ne:H=J,ne+=c;ne>=8;)ue(H&255,j),H>>=8,ne-=8;if((b>d||T)&&(T?(d=Me(c=h),T=!1):(++c,c==f?d=p:d=Me(c))),J==X){for(;ne>0;)ue(H&255,j),H>>=8,ne-=8;ke(j)}};return Y.apply(this,arguments),t},Uo=function(){var t={},e=256,n=499,r=491,a=487,i=503,o=3*i,s=e-1,l=4,u=100,c=16,f=1<<c,d=10,p=10,g=f>>p,m=f<<d-p,v=e>>3,b=6,T=1<<b,h=v*T,w=30,X=10,H=1<<X,ne,fe=8,oe=1<<fe,V=X+fe,Y=1<<V,ue,we,Ie,ae,ke=[],Me=[],De=[],Ce=[],me=t.NeuQuant=function(L,U,Q){var z,G;for(ue=L,we=U,Ie=Q,ae=new Array(e),z=0;z<e;z++)ae[z]=new Array(4),G=ae[z],G[0]=G[1]=G[2]=(z<<l+8)/e,De[z]=f/e,Me[z]=0},J=function(){for(var L=[],U=new Array(e),Q=0;Q<e;Q++)U[ae[Q][3]]=Q;for(var z=0,G=0;G<e;G++){var M=U[G];L[z++]=ae[M][0],L[z++]=ae[M][1],L[z++]=ae[M][2]}return L},j=function(){var L,U,Q,z,G,M,I,W;for(I=0,W=0,L=0;L<e;L++){for(G=ae[L],Q=L,z=G[1],U=L+1;U<e;U++)M=ae[U],M[1]<z&&(Q=U,z=M[1]);if(M=ae[Q],L!=Q&&(U=M[0],M[0]=G[0],G[0]=U,U=M[1],M[1]=G[1],G[1]=U,U=M[2],M[2]=G[2],G[2]=U,U=M[3],M[3]=G[3],G[3]=U),z!=I){for(ke[I]=W+L>>1,U=I+1;U<z;U++)ke[U]=L;I=z,W=L}}for(ke[I]=W+s>>1,U=I+1;U<256;U++)ke[U]=s},y=function(){var L,U,Q,z,G,M,I,W,Z,ce,Oe,se,Ee,Nt;for(we<o&&(Ie=1),ne=30+(Ie-1)/3,se=ue,Ee=0,Nt=we,Oe=we/(3*Ie),ce=Oe/u|0,W=H,M=h,I=M>>b,I<=1&&(I=0),L=0;L<I;L++)Ce[L]=W*((I*I-L*L)*oe/(I*I));for(we<o?Z=3:we%n!==0?Z=3*n:we%r!==0?Z=3*r:we%a!==0?Z=3*a:Z=3*i,L=0;L<Oe;)if(Q=(se[Ee+0]&255)<<l,z=(se[Ee+1]&255)<<l,G=(se[Ee+2]&255)<<l,U=ye(Q,z,G),ee(W,U,Q,z,G),I!==0&&le(I,U,Q,z,G),Ee+=Z,Ee>=Nt&&(Ee-=we),L++,ce===0&&(ce=1),L%ce===0)for(W-=W/ne,M-=M/w,I=M>>b,I<=1&&(I=0),U=0;U<I;U++)Ce[U]=W*((I*I-U*U)*oe/(I*I))};t.map=function(L,U,Q){var z,G,M,I,W,Z,ce;for(W=1e3,ce=-1,z=ke[U],G=z-1;z<e||G>=0;)z<e&&(Z=ae[z],M=Z[1]-U,M>=W?z=e:(z++,M<0&&(M=-M),I=Z[0]-L,I<0&&(I=-I),M+=I,M<W&&(I=Z[2]-Q,I<0&&(I=-I),M+=I,M<W&&(W=M,ce=Z[3])))),G>=0&&(Z=ae[G],M=U-Z[1],M>=W?G=-1:(G--,M<0&&(M=-M),I=Z[0]-L,I<0&&(I=-I),M+=I,M<W&&(I=Z[2]-Q,I<0&&(I=-I),M+=I,M<W&&(W=M,ce=Z[3]))));return ce},t.process=function(){return y(),N(),j(),J()};var N=function(){var L;for(L=0;L<e;L++)ae[L][0]>>=l,ae[L][1]>>=l,ae[L][2]>>=l,ae[L][3]=L},le=function(L,U,Q,z,G){var M,I,W,Z,ce,Oe,se;for(W=U-L,W<-1&&(W=-1),Z=U+L,Z>e&&(Z=e),M=U+1,I=U-1,Oe=1;M<Z||I>W;){if(ce=Ce[Oe++],M<Z){se=ae[M++];try{se[0]-=ce*(se[0]-Q)/Y,se[1]-=ce*(se[1]-z)/Y,se[2]-=ce*(se[2]-G)/Y}catch{}}if(I>W){se=ae[I--];try{se[0]-=ce*(se[0]-Q)/Y,se[1]-=ce*(se[1]-z)/Y,se[2]-=ce*(se[2]-G)/Y}catch{}}}},ee=function(L,U,Q,z,G){var M=ae[U];M[0]-=L*(M[0]-Q)/H,M[1]-=L*(M[1]-z)/H,M[2]-=L*(M[2]-G)/H},ye=function(L,U,Q){var z,G,M,I,W,Z,ce,Oe,se,Ee;for(Oe=~(1<<31),se=Oe,Z=-1,ce=Z,z=0;z<e;z++)Ee=ae[z],G=Ee[0]-L,G<0&&(G=-G),M=Ee[1]-U,M<0&&(M=-M),G+=M,M=Ee[2]-Q,M<0&&(M=-M),G+=M,G<Oe&&(Oe=G,Z=z),I=G-(Me[z]>>c-l),I<se&&(se=I,ce=z),W=De[z]>>p,De[z]-=W,Me[z]+=W<<d;return De[Z]+=g,Me[Z]-=m,ce};return me.apply(this,arguments),t},Bo=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function n(){this.bin=[]}n.prototype.getData=function(){for(var j="",y=this.bin.length,N=0;N<y;N++)j+=e[this.bin[N]];return j},n.prototype.writeByte=function(j){this.bin.push(j)},n.prototype.writeUTFBytes=function(j){for(var y=j.length,N=0;N<y;N++)this.writeByte(j.charCodeAt(N))},n.prototype.writeBytes=function(j,y,N){for(var le=N||j.length,ee=y||0;ee<le;ee++)this.writeByte(j[ee])};var r={},a,i,o=null,s,l=-1,u=0,c=!1,f,d,p,g,m,v,b=[],T=7,h=-1,w=!1,X=!0,H=!1,ne=10,fe="Generated by jsgif (https://github.com/antimatter15/jsgif/)";r.setDelay=function(y){u=Math.round(y/10)},r.setDispose=function(y){y>=0&&(h=y)},r.setRepeat=function(y){y>=0&&(l=y)},r.setTransparent=function(y){o=y},r.setComment=function(y){fe=y},r.addFrame=function(y,N){if(y===null||!c||f===null)throw new Error("Please call start method before calling addFrame");var le=!0;try{N?y instanceof ImageData?(d=y.data,(!sizeset||a!=y.width||i!=y.height)&&V(y.width,y.height)):y instanceof Uint8ClampedArray?y.length==a*i*4?d=y:(console.log("Please set the correct size: ImageData length mismatch"),le=!1):(console.log("Please provide correct input"),le=!1):(d=y.getImageData(0,0,y.canvas.width,y.canvas.height).data,H||V(y.canvas.width,y.canvas.height)),we(),Y(),X&&(Me(),Ce(),l>=0&&De()),Ie(),fe!==""&&ae(),ke(),X||Ce(),J(),X=!1}catch{le=!1}return le},r.download=function(y){if(f===null||w==!1)console.log("Please call start method and add frames and call finish method before calling download");else{y=y!==void 0?y.endsWith(".gif")?y:y+".gif":"download.gif";var N=document.createElement("a");N.download=y,N.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),N.click()}},r.finish=function(){if(!c)return!1;var y=!0;c=!1;try{f.writeByte(59),w=!0}catch{y=!1}return y};var oe=function(){s=0,d=null,p=null,g=null,v=null,w=!1,X=!0};r.setFrameRate=function(y){y!=15&&(u=Math.round(100/y))},r.setQuality=function(y){y<1&&(y=1),ne=y};var V=r.setSize=function(y,N){c&&!X||(a=y,i=N,a<1&&(a=320),i<1&&(i=240),H=!0)};r.start=function(){oe();var y=!0;w=!1,f=new n;try{f.writeUTFBytes("GIF89a")}catch{y=!1}return c=y},r.cont=function(){oe();var y=!0;return w=!1,f=new n,c=y};var Y=function(){var y=p.length,N=y/3;g=[];var le=new Uo(p,y,ne);v=le.process();for(var ee=0,ye=0;ye<N;ye++){var ie=le.map(p[ee++]&255,p[ee++]&255,p[ee++]&255);b[ie]=!0,g[ye]=ie}p=null,m=8,T=7,o!==null&&(s=ue(o))},ue=function(y){if(v===null)return-1;for(var N=(y&16711680)>>16,le=(y&65280)>>8,ee=y&255,ye=0,ie=256*256*256,L=v.length,U=0;U<L;){var Q=N-(v[U++]&255),z=le-(v[U++]&255),G=ee-(v[U]&255),M=Q*Q+z*z+G*G,I=U/3;b[I]&&M<ie&&(ie=M,ye=I),U++}return ye},we=function(){var y=a,N=i;p=[];for(var le=d,ee=0,ye=0;ye<N;ye++)for(var ie=0;ie<y;ie++){var L=ye*y*4+ie*4;p[ee++]=le[L],p[ee++]=le[L+1],p[ee++]=le[L+2]}},Ie=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var y,N;o===null?(y=0,N=0):(y=1,N=2),h>=0&&(N=h&7),N<<=2,f.writeByte(0|N|0|y),me(u),f.writeByte(s),f.writeByte(0)},ae=function(){f.writeByte(33),f.writeByte(254),f.writeByte(fe.length),f.writeUTFBytes(fe),f.writeByte(0)},ke=function(){f.writeByte(44),me(0),me(0),me(a),me(i),X?f.writeByte(0):f.writeByte(128|T)},Me=function(){me(a),me(i),f.writeByte(240|T),f.writeByte(0),f.writeByte(0)},De=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),me(l),f.writeByte(0)},Ce=function(){f.writeBytes(v);for(var y=3*256-v.length,N=0;N<y;N++)f.writeByte(0)},me=function(y){f.writeByte(y&255),f.writeByte(y>>8&255)},J=function(){var y=new jo(a,i,g,m);y.encode(f)};return r.stream=function(){return f},r.setProperties=function(y,N){c=y,X=N},r};class No{constructor(e){pe(this,"loadingUrl",null);pe(this,"url",null);pe(this,"texture",null);pe(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const r=await(await fetch(e)).blob(),a=await createImageBitmap(r);if(this.loadingUrl!==e)return;const{gl:i}=this;this.texture&&i.deleteTexture(this.texture);const o=i.createTexture();if(!o)throw new Error("Failed to create texture");i.activeTexture(i.TEXTURE0+this.unit),i.bindTexture(i.TEXTURE_2D,o),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.REPEAT),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),this.texture=o,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}class tr{constructor(e,n){pe(this,"texture",null);pe(this,"framebuffer");pe(this,"width",null);pe(this,"height",null);this.gl=e,this.unit=n;const r=e.createFramebuffer();if(!r)throw new Error("Failed to create framebuffer");this.framebuffer=r}bindAsInput(){return this.gl.activeTexture(this.gl.TEXTURE0+this.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.unit}bindAsOutput(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer)}setSize(e,n){if(e===this.width&&n===this.height)return;if(this.texture!==null&&this.gl.deleteTexture(this.texture),this.texture=this.gl.createTexture(),!this.texture)throw new Error("Failed to create texture");if(this.width=e,this.height=n,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,n,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error("Failed to attach to framebuffer");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}destroy(){this.texture&&this.gl.deleteTexture(this.texture),this.gl.deleteFramebuffer(this.framebuffer)}}const xe={a_position:0,a_texCoords:1,a_normal:2},Ne=`#version 300 es

layout(location = ${xe.a_position}) in vec2 a_position;
layout(location = ${xe.a_texCoords}) in vec2 a_texCoords;

out vec2 v_texCoords;

void main() {
  gl_Position = vec4(a_position, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
`,pt=`vec3 getColor(vec2 offset, sampler2D image, vec2 texCoords) {
  vec2 coords = texCoords + offset / vec2(textureSize(image, 0));
  float inRange = float(coords.x >= 0.0 && coords.x <= 1.0 && coords.y >= 0.0 && coords.y <= 1.0);
  return texture(image, coords).rgb * inRange;
}

vec3 kernalMultiply(mat3 kernel, sampler2D image, vec2 texCoords) {
  vec3 result = vec3(0.0, 0.0, 0.0);

  result += kernel[0][0] * getColor(vec2(-1.0,  1.0), image, texCoords);
  result += kernel[0][1] * getColor(vec2(-1.0,  0.0), image, texCoords);
  result += kernel[0][2] * getColor(vec2(-1.0, -1.0), image, texCoords);
  result += kernel[1][0] * getColor(vec2( 0.0,  1.0), image, texCoords);
  result += kernel[1][1] * getColor(vec2( 0.0,  0.0), image, texCoords);
  result += kernel[1][2] * getColor(vec2( 0.0, -1.0), image, texCoords);
  result += kernel[2][0] * getColor(vec2( 1.0,  1.0), image, texCoords);
  result += kernel[2][1] * getColor(vec2( 1.0,  0.0), image, texCoords);
  result += kernel[2][2] * getColor(vec2( 1.0, -1.0), image, texCoords);

  return result;
}`,rr={default:{vertex:`#version 300 es

layout(location = ${xe.a_position}) in vec3 a_position;
layout(location = ${xe.a_texCoords}) in vec2 a_texCoords;
layout(location = ${xe.a_normal}) in vec3 a_normal;

uniform mat4 u_model;
uniform mat4 u_view;
uniform mat4 u_projection;

out vec2 v_texCoords;
out vec3 v_normal;
out vec3 v_position;

void main() {
  mat4 modelView = u_view * u_model;
  v_position = vec3(modelView * vec4(a_position, 1.0));
  gl_Position = u_projection * vec4(v_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position.y *= -1.0;
  v_texCoords = a_texCoords;
  v_normal = (transpose(inverse(modelView)) * vec4(a_normal, 0)).xyz;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
in vec3 v_normal;
in vec3 v_position;

struct Material {
  sampler2D diffuse;
  vec3 specular;
  float shininess;
};

struct DirectionalLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 direction;
};

struct PointLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  float attenuation1;
  float attenuation2;
};

struct SpotLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  vec3 direction;
  float innerCos;
  float outerCos;
  float attenuation1;
  float attenuation2;
};

uniform Material u_material;
uniform DirectionalLight u_directionalLight;
uniform PointLight u_pointLight;
uniform SpotLight u_spotLight;

uniform float u_time;
uniform float u_amplitude;
uniform float u_frequency;

out vec4 outColor;

vec3 computeLight(SpotLight light, vec3 normal, vec3 fragToCamera, vec3 texel) {
  float dist = length(light.position - v_position);
  float attenuation = 1.0 / (1.0 + light.attenuation1 * dist + light.attenuation2 * dist * dist);
  vec3 dir = normalize(light.position - v_position);
  float angle = dot(normalize(-light.direction), dir);
  float intensity = smoothstep(light.outerCos, light.innerCos, angle);

  float diff = max(dot(dir, normal), 0.0);

  vec3 halfVec = normalize(dir + fragToCamera);
  float spec = pow(max(dot(halfVec, normal), 0.0), u_material.shininess);

  vec3 ambient = light.ambient * texel * attenuation * intensity;
  vec3 diffuse = light.diffuse * texel * diff * attenuation * intensity;
  vec3 specular = light.specular * u_material.specular * spec * attenuation * intensity;

  return ambient + diffuse + specular;
}

void main() {
  vec2 texCoords = v_texCoords + vec2(sin((v_texCoords.y * u_frequency + u_time) * radians(360.0)) * u_amplitude, 0.0);
  vec3 texel = texture(u_material.diffuse, texCoords).xyz;
  vec3 color = vec3(0.0, 0.0, 0.0);
  // front facing is actually the back face since we flipped y-axis in the vertex shader
  vec3 normal = normalize(v_normal) * (1.0 - 2.0 * float(gl_FrontFacing));
  vec3 fragToCamera = normalize(-v_position);

  color += computeLight(SpotLight(
    u_directionalLight.ambient,
    u_directionalLight.diffuse,
    u_directionalLight.specular,
    -u_directionalLight.direction + v_position,
    u_directionalLight.direction,
    // disable intensity
    -2.0, -3.0,
    // disable attenuation
    0.0, 0.0
  ), normal, fragToCamera, texel);

  color += computeLight(SpotLight(
    u_pointLight.ambient,
    u_pointLight.diffuse,
    u_pointLight.specular,
    u_pointLight.position,
    -u_pointLight.position + v_position,
    // disable intensity
    -2.0, -3.0,
    u_pointLight.attenuation1,
    u_pointLight.attenuation2
  ), normal, fragToCamera, texel);

  color += computeLight(u_spotLight, normal, fragToCamera, texel);

  outColor = vec4(color, float(texCoords.x >= 0.0 && texCoords.x <= 1.0 || u_amplitude < 0.000001));
}
    `},invert:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = vec4(1.0 - texture(u_image, v_texCoords).rgb, 1.0);
}
    `},kernel:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel;

out vec4 outColor;

${pt}

void main() {
  vec3 color = kernalMultiply(u_kernel, u_image, v_texCoords);
  outColor = vec4(color, 1.0);
}
    `},gradient2:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel1;
uniform mat3 u_kernel2;

out vec4 outColor;

${pt}

void main() {
  vec3 color1 = kernalMultiply(u_kernel1, u_image, v_texCoords);
  vec3 color2 = kernalMultiply(u_kernel2, u_image, v_texCoords);
  outColor = vec4(
    length(vec2(color1.r, color2.r)),
    length(vec2(color1.g, color2.g)),
    length(vec2(color1.b, color2.b)),
    1.0);
}
    `},gradient8:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel[8];

out vec4 outColor;

${pt}

void main() {
  vec3 result = vec3(0.0);
  for (int i = 0; i < 8; ++i) {
    result = max(result, kernalMultiply(u_kernel[i], u_image, v_texCoords));
  }
  outColor = vec4(result, 1.0);
}
    `},contrast:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_contrast;

out vec4 outColor;

void main() {
  outColor = vec4(texture(u_image, v_texCoords).rgb, 1.0);
  outColor.rgb = (outColor.rgb - 0.5) * u_contrast + 0.5;
}
    `},bloom:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_luminance;

out vec4 outColor;

${pt}

void main() {
  vec3 sum = vec3(0.0);

  vec2 offsets[8] = vec2[](
    vec2(-1, -1),
    vec2(-1,  0),
    vec2(-1,  1),
    vec2( 0, -1),
    vec2( 0,  1),
    vec2( 1, -1),
    vec2( 1,  0),
    vec2( 1,  1)
  );

  for (int i = 0; i < 8; ++i) {
    vec3 color = getColor(offsets[i], u_image, v_texCoords);
    float luminance = dot(color, vec3(1.0/3.0));
    if (luminance >= u_luminance) {
      sum += color;
    }
  }

  vec3 result = texture(u_image, v_texCoords).rgb + sum / 8.0;
  outColor = vec4(result, 1.0);
}
    `},mix:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_weights;

out vec4 outColor;

void main() {
  outColor = vec4(u_weights * texture(u_image, v_texCoords).rgb, 1.0);
}
    `},vignette:{vertex:Ne,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_inner;
uniform float u_outer;

out vec4 outColor;

void main() {
  float dist = length(v_texCoords - vec2(0.5, 0.5));
  float factor = 1.0 - smoothstep(u_inner, u_outer, dist);
  outColor = vec4(factor * texture(u_image, v_texCoords).rgb, 1.0);
}
    `}};class zo{constructor(e){pe(this,"programs",{});this.gl=e}createProgram(e){let n=this.programs[e];return n||(n=this.programs[e]={program:Go(this.gl,rr[e].vertex,rr[e].fragment),uniformLocations:{}}),n}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function It(t,e,n){for(const[r,a]of Object.entries(n)){r in e.uniformLocations||(e.uniformLocations[r]=t.getUniformLocation(e.program,r));const i=e.uniformLocations[r];["u_image","u_material.diffuse"].includes(r)&&typeof a=="number"?t.uniform1i(i,a):Array.isArray(a)?a.length===2?t.uniform2fv(i,a):a.length===3?t.uniform3fv(i,a):a.length===4?t.uniform4fv(i,a):a.length===9?t.uniformMatrix3fv(i,!1,a):a.length===16&&t.uniformMatrix4fv(i,!1,a):typeof a=="number"?t.uniform1f(i,a):typeof a=="boolean"&&t.uniform1i(i,a?1:0)}}function Go(t,e,n){const r=nr(t,t.VERTEX_SHADER,e);let a;try{a=nr(t,t.FRAGMENT_SHADER,n)}catch(o){throw t.deleteShader(r),o}const i=t.createProgram();if(i===null)throw t.deleteShader(a),t.deleteShader(r),new Error("Failed to create program");if(t.attachShader(i,r),t.attachShader(i,a),t.linkProgram(i),t.detachShader(i,a),t.detachShader(i,r),t.deleteShader(a),t.deleteShader(r),!t.getProgramParameter(i,t.LINK_STATUS)){const o=t.getProgramInfoLog(i);throw t.deleteProgram(i),new Error(`Failed to link program: ${o}`)}return i}function nr(t,e,n){const r=t.createShader(e);if(r===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const a=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`Failed to compile shader: ${a}`)}return r}function qo(t,e,n,r){r.effects.length>0?r.renderTextures[0].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT);let a,i;for(const o of n){a!==o.program&&(t.useProgram(o.program.program),a=o.program),i!==o.geometry&&(t.bindVertexArray(o.geometry.vao),i=o.geometry);const s=o.getUniforms(e);It(t,o.program,s),t.drawArrays(o.geometry.drawMode,0,o.geometry.drawCount)}if(r.effects.length!==0){t.bindVertexArray(r.quad.vao);for(let o=0;o<r.effects.length;++o){const{program:s,uniforms:l}=r.effects[o],u=o%2,c=1-u;o<r.effects.length-1?r.renderTextures[c].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(s.program);const f=r.renderTextures[u].bindAsInput();It(t,s,{u_image:f,...l}),t.drawArrays(r.quad.drawMode,0,r.quad.drawCount)}}}function Ho(t,e){const n=t.createVertexArray();if(n===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(n),new Error("Failed to create buffer");return t.bindVertexArray(n),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(xe.a_position),t.vertexAttribPointer(xe.a_position,3,t.FLOAT,!1,8*4,0),t.enableVertexAttribArray(xe.a_texCoords),t.vertexAttribPointer(xe.a_texCoords,2,t.FLOAT,!1,8*4,3*4),t.enableVertexAttribArray(xe.a_normal),t.vertexAttribPointer(xe.a_normal,3,t.FLOAT,!1,8*4,5*4),t.bindVertexArray(null),{vao:n,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const Xo={full:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],sudoku:[-3,-3,0,-1,2,0,0,1,3,-3,0,2,2,0,0,1,-3,3,0,-1,-1,0,0,1,3,3,0,2,-1,0,0,1],tower:[-1,-3,0,0,2,0,0,1,1,-3,0,1,2,0,0,1,-1,3,0,0,-1,0,0,1,1,3,0,1,-1,0,0,1],topHalf:[-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],bottomHalf:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1],leftHalf:[-1,-1,0,0,1,0,0,1,0,-1,0,.5,1,0,0,1,-1,1,0,0,0,0,0,1,0,1,0,.5,0,0,0,1],rightHalf:[0,-1,0,.5,1,0,0,1,1,-1,0,1,1,0,0,1,0,1,0,.5,0,0,0,1,1,1,0,1,0,0,0,1],quad:[-1,-1,0,0,0,0,0,1,1,-1,0,1,0,0,0,1,-1,1,0,0,1,0,0,1,1,1,0,1,1,0,0,1]};class Vo{constructor(e){pe(this,"geometries",{});this.gl=e}createGeometry(e){let n=this.geometries[e];return n||(n=this.geometries[e]=Ho(this.gl,Xo[e])),n}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}const Yo=["grayscale","sepia","boxBlur","guassian","sharpen1","sharpen2","emboss","laplacian1","laplacian2","prewitt","sobel","kirsch","darken","lighten","highContrast","bloom","invert","grb","rbg","bgr","gbr","brg","0gb","r0b","rg0","vignette"],ar={grayscale:{program:"mix",uniforms:{u_weights:[.2126,.2126,.2126,.7152,.7152,.7152,.0722,.0722,.0722]}},sepia:{program:"mix",uniforms:{u_weights:[.393,.349,.272,.769,.686,.534,.189,.168,.131]}},boxBlur:{program:"kernel",uniforms:{u_kernel:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]}},guassian:{program:"kernel",uniforms:{u_kernel:[1/16,2/16,1/16,2/16,4/16,2/16,1/16,2/16,1/16]}},sharpen1:{program:"kernel",uniforms:{u_kernel:[-.0023,-.0432,-.0023,-.0432,1.182,-.0432,-.0023,-.0432,-.0023]}},sharpen2:{program:"kernel",uniforms:{u_kernel:[-1/9,-1/9,-1/9,-1/9,17/9,-1/9,-1/9,-1/9,-1/9]}},emboss:{program:"kernel",uniforms:{u_kernel:[-2,-1,0,-1,1,1,0,1,2]}},laplacian1:{program:"kernel",uniforms:{u_kernel:[0,-1,0,-1,4,-1,0,-1,0]}},laplacian2:{program:"kernel",uniforms:{u_kernel:[-1,-1,-1,-1,8,-1,-1,-1,-1]}},prewitt:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,1,0,-1,1,0,-1],u_kernel2:[1,1,1,0,0,0,-1,-1,-1]}},sobel:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,2,0,-2,1,0,-1],u_kernel2:[1,2,1,0,0,0,-1,-2,-1]}},kirsch:{program:"gradient8",uniforms:{"u_kernel[0]":[5,5,5,-3,0,-3,-3,-3,-3],"u_kernel[1]":[-3,5,5,-3,0,5,-3,-3,-3],"u_kernel[2]":[-3,-3,5,-3,0,5,-3,-3,5],"u_kernel[3]":[-3,-3,-3,-3,0,5,-3,5,5],"u_kernel[4]":[-3,-3,-3,-3,0,-3,5,5,5],"u_kernel[5]":[-3,-3,-3,5,0,-3,5,5,-3],"u_kernel[6]":[5,-3,-3,5,0,-3,5,-3,-3],"u_kernel[7]":[5,5,-3,5,0,-3,-3,-3,-3]}},darken:{program:"mix",uniforms:{u_kernel:[.5,0,0,0,.5,0,0,0,.5]}},lighten:{program:"kernel",uniforms:{u_kernel:[2,0,0,0,2,0,0,0,2]}},highContrast:{program:"contrast",uniforms:{u_contrast:2}},bloom:{program:"bloom",uniforms:{u_luminance:.6}},invert:{program:"invert",uniforms:{}},grb:{program:"mix",uniforms:{u_weights:[0,1,0,1,0,0,0,0,1]}},rbg:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,1,0,1,0]}},bgr:{program:"mix",uniforms:{u_weights:[0,0,1,0,1,0,1,0,0]}},gbr:{program:"mix",uniforms:{u_weights:[0,0,1,1,0,0,0,1,0]}},brg:{program:"mix",uniforms:{u_weights:[0,1,0,0,0,1,1,0,0]}},"0gb":{program:"mix",uniforms:{u_weights:[0,0,0,0,1,0,0,0,1]}},r0b:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,0,0,0,1]}},rg0:{program:"mix",uniforms:{u_weights:[1,0,0,0,1,0,0,0,0]}},vignette:{program:"vignette",uniforms:{u_inner:.4,u_outer:.6}}};function ir(t,e){return e.map(n=>({program:t.createProgram(ar[n].program),uniforms:ar[n].uniforms}))}class Wo{constructor(e){pe(this,"gl");pe(this,"programFactory");pe(this,"geometryFactory");pe(this,"texture");pe(this,"renderTextures");pe(this,"quad");pe(this,"queue",[]);pe(this,"animationFrame",null);this.canvas=e;const n=e.getContext("webgl2");if(!n)throw new Error("webgl2 is not supported");this.gl=n,this.programFactory=new zo(this.gl),this.geometryFactory=new Vo(this.gl),this.texture=new No(this.gl),this.renderTextures=[new tr(this.gl,1),new tr(this.gl,2)],this.quad=this.geometryFactory.createGeometry("quad")}animate(e,n){return new Promise((r,a)=>{const i=new Bo;if(i.setRepeat(0),i.setDelay(e.output.delayMs),i.setSize(e.output.width,e.output.height),!i.start()){a("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:r,reject:a,frame:0,sprites:Yt(this.programFactory,this.geometryFactory,e.animation),effects:ir(this.programFactory,e.effects.filter(s=>s.enabled).map(s=>s.type)),callback:n,encoder:i}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,n){return new Promise((r,a)=>{this.queue.push({type:"frame",request:e,resolve:r,reject:a,frame:n,sprites:Yt(this.programFactory,this.geometryFactory,e.animation),effects:ir(this.programFactory,e.effects.filter(i=>i.enabled).map(i=>i.type))}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let m=0;m<this.queue.length-1;++m)this.queue[m].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:n,resolve:r,sprites:a,effects:i,frame:o}=this.queue[0],{image:s,output:l,camera:u,projection:c,material:f,directionalLight:d,pointLight:p,spotLight:g}=n;if(e==="frame"||e==="gif"&&this.queue[0].frame===0){await this.texture.loadImage(s.url);const{width:m,height:v,clear:b}=l;this.renderTextures.forEach(X=>X.setSize(m,v)),this.canvas.width=m,this.canvas.height=v,this.gl.viewport(0,0,m,v),this.gl.clearColor(...b,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.activeTexture(this.gl.TEXTURE0+this.texture.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture.texture);const T=$e();an(T,u.position,u.lookAt,u.up);const h=$e();c.perspective?sn(h,c.left,c.right,c.bottom,c.top,c.near,c.far):on(h,c.left,c.right,c.bottom,c.top,c.near,c.far);const w={u_view:T,u_projection:h,"u_material.diffuse":this.texture.unit,"u_material.specular":f.specular,"u_material.shininess":f.shininess,"u_directionalLight.ambient":d.ambient,"u_directionalLight.diffuse":d.diffuse,"u_directionalLight.specular":d.specular,"u_directionalLight.direction":d.direction,"u_pointLight.ambient":p.ambient,"u_pointLight.diffuse":p.diffuse,"u_pointLight.specular":p.specular,"u_pointLight.position":p.position,"u_pointLight.attenuation1":p.attenuation1,"u_pointLight.attenuation2":p.attenuation2,"u_spotLight.ambient":g.ambient,"u_spotLight.diffuse":g.diffuse,"u_spotLight.specular":g.specular,"u_spotLight.position":g.position,"u_spotLight.direction":g.direction,"u_spotLight.innerCos":Math.cos($t(g.innerDegrees)),"u_spotLight.outerCos":Math.cos($t(g.outerDegrees)),"u_spotLight.attenuation1":g.attenuation1,"u_spotLight.attenuation2":g.attenuation2};for(const X of Ro(a.map(H=>H.program)))this.gl.useProgram(X.program),It(this.gl,X,w)}if(qo(this.gl,o/n.output.totalFrames,a,{renderTextures:this.renderTextures,quad:this.quad,effects:i}),e==="frame")r(),this.queue.shift(),this.animationFrame=null;else{const{encoder:m,callback:v}=this.queue[0];v(o);const b=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,b),m.addFrame(b,!0),m.setTransparent(16777215),o===l.totalFrames-1){m.finish();const T=m.stream().getData(),h="data:image/gif;base64,"+window.btoa(T);r({dataUri:h}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.renderTextures.forEach(e=>e.destroy()),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ue=function(){const{subscribe:t,update:e}=Et({animations:kt,current:kt[0]}),n=i=>{e(o=>o.current===i||!o.animations.find(l=>l===i)?o:{animations:o.animations,current:i})};function r(i,o){e(({animations:s,current:l})=>{const u={...l,editOptions:l.editOptions.map(c=>c===i?{...i,value:o}:c)};return{animations:s.map(c=>c===l?u:c),current:u}})}function a(){e(({animations:i,current:o})=>{const s=kt.find(l=>l.name===o.name);return{animations:i.map(l=>l===o?s:l),current:s}})}return{subscribe:t,changeCurrentAnimation:n,changeEditOptions:r,resetEditOptions:a}}(),wt=function(){const{subscribe:t,update:e}=Et(Yo.map(a=>({type:a,enabled:!1})));function n(a,i){e(o=>o.map(s=>s.type===a?{type:a,enabled:i}:s))}function r(){e(a=>a.map(i=>({...i,enabled:!1})))}return{subscribe:t,change:n,reset:r}}();function qe(t){let e=!0;const{subscribe:n,update:r}=Et(void 0,o=>Ue.subscribe(({current:s})=>{e&&o(s.defaultOptions[t])}));function a(o){r(s=>(e=!1,{...s,...o}))}function i(){r(()=>(e=!0,st(Ue).current.defaultOptions[t]))}return{subscribe:n,change:a,reset:i}}const yt=qe("image"),je=qe("output"),We=qe("camera"),Pe=qe("projection"),ot=qe("material"),Xe=qe("directionalLight"),Re=qe("pointLight"),Se=qe("spotLight"),Dt=Qr([yt,je,We,Pe,ot,Xe,Re,Se,Ue,wt],([t,e,n,r,a,i,o,s,l,u])=>({image:t,output:e,camera:n,projection:r,material:a,directionalLight:i,pointLight:o,spotLight:s,animation:l.current,effects:u})),at=function(){const t=Et({animator:null,running:!1,frame:0}),{subscribe:e,update:n}=t;function r(o){n(s=>{var l;return(l=s.animator)==null||l.destroy(),{animator:new Wo(o),running:!1,frame:0}})}function a(){const{animator:o}=st(t);return o?(n(s=>({...s,running:!0,frame:0})),o.animate(st(Dt),s=>n(l=>({...l,frame:s}))).finally(()=>{n(s=>({...s,running:!1}))})):Promise.reject("Animator has not been created")}function i(o){const{animator:s,frame:l}=st(t);if(!s)return Promise.reject("Animator has not been created");let u;typeof o>"u"?u=l:u=o;const c=st(Dt);return u>=c.output.totalFrames&&(u=c.output.totalFrames-1),n(f=>({...f,frame:u,running:!0})),s.renderFrame(c,u).finally(()=>{n(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:r,animate:a,renderFrame:i}}();function Jo(t){let e,n,r,a,i,o,s,l,u,c,f,d;const p=t[3].default,g=Br(p,t,t[2],null);return{c(){e=D("section"),n=D("header"),r=D("h2"),a=ge(t[0]),i=P(),o=D("button"),s=ge("Reset"),l=P(),u=D("div"),g&&g.c(),this.h()},l(m){e=R(m,"SECTION",{class:!0});var v=q(e);n=R(v,"HEADER",{class:!0});var b=q(n);r=R(b,"H2",{class:!0});var T=q(r);a=he(T,t[0]),T.forEach($),i=F(b),o=R(b,"BUTTON",{class:!0,type:!0});var h=q(o);s=he(h,"Reset"),h.forEach($),b.forEach($),l=F(v),u=R(v,"DIV",{class:!0});var w=q(u);g&&g.l(w),w.forEach($),v.forEach($),this.h()},h(){_(r,"class","section__heading svelte-1wqqw95"),_(o,"class","section__reset svelte-1wqqw95"),_(o,"type","button"),_(n,"class","section__header svelte-1wqqw95"),_(u,"class","section__content svelte-1wqqw95"),_(e,"class","section svelte-1wqqw95")},m(m,v){B(m,e,v),E(e,n),E(n,r),E(r,a),E(n,i),E(n,o),E(o,s),E(e,l),E(e,u),g&&g.m(u,null),c=!0,f||(d=Ke(o,"click",t[4]),f=!0)},p(m,[v]){(!c||v&1)&&Be(a,m[0]),g&&g.p&&(!c||v&4)&&Nr(g,p,m,m[2],c?Gr(p,m[2],v,null):zr(m[2]),null)},i(m){c||(C(g,m),c=!0)},o(m){S(g,m),c=!1},d(m){m&&$(e),g&&g.d(m),f=!1,d()}}}function Qo(t,e,n){let{$$slots:r={},$$scope:a}=e,{title:i=""}=e;const o=ct(),s=()=>o("reset");return t.$$set=l=>{"title"in l&&n(0,i=l.title),"$$scope"in l&&n(2,a=l.$$scope)},[i,o,a,r,s]}class Le extends de{constructor(e){super(),ve(this,e,Qo,Jo,_e,{title:0})}}function Zo(t){let e,n,r,a,i,o,s,l;return{c(){e=D("label"),n=D("input"),r=P(),a=D("div"),i=D("img"),this.h()},l(u){e=R(u,"LABEL",{class:!0});var c=q(e);n=R(c,"INPUT",{class:!0,type:!0,accept:!0}),r=F(c),a=R(c,"DIV",{class:!0});var f=q(a);i=R(f,"IMG",{class:!0,src:!0,alt:!0}),f.forEach($),c.forEach($),this.h()},h(){_(n,"class","image__input svelte-1me35do"),_(n,"type","file"),_(n,"accept","image/*"),_(i,"class","image__preview svelte-1me35do"),Ye(i.src,o=t[0].url)||_(i,"src",o),_(i,"alt","source"),_(a,"class","image__container svelte-1me35do"),_(e,"class","image svelte-1me35do")},m(u,c){B(u,e,c),E(e,n),E(e,r),E(e,a),E(a,i),s||(l=Ke(n,"input",t[1]),s=!0)},p(u,c){c&1&&!Ye(i.src,o=u[0].url)&&_(i,"src",o)},d(u){u&&$(e),s=!1,l()}}}function Ko(t){let e,n;return e=new Le({props:{title:"Image",$$slots:{default:[Zo]},$$scope:{ctx:t}}}),e.$on("reset",yt.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&5&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function el(t,e,n){let r;Te(t,yt,i=>n(0,r=i));function a(i){var l;const s=(l=i.target.files)==null?void 0:l[0];s&&yt.change({url:URL.createObjectURL(s)})}return[r,a]}class tl extends de{constructor(e){super(),ve(this,e,el,Ko,_e,{})}}function sr(t){let e,n,r,a,i,o;return{c(){e=D("label"),n=ge(t[1]),r=P(),a=D("input"),this.h()},l(s){e=R(s,"LABEL",{class:!0});var l=q(e);n=he(l,t[1]),r=F(l),a=R(l,"INPUT",{class:!0,type:!0}),l.forEach($),this.h()},h(){_(a,"class","slider__text-input svelte-1h0gcvd"),_(a,"type","text"),a.value=t[0],_(e,"class","slider__label svelte-1h0gcvd")},m(s,l){B(s,e,l),E(e,n),E(e,r),E(e,a),i||(o=Ke(a,"input",t[5]),i=!0)},p(s,l){l&2&&Be(n,s[1]),l&1&&a.value!==s[0]&&(a.value=s[0])},d(s){s&&$(e),i=!1,o()}}}function rl(t){let e,n,r,a,i=gt(t[2])+"",o,s,l,u,c,f,d=gt(t[3])+"",p,g,m,v=t[1]&&sr(t);return{c(){e=D("div"),v&&v.c(),n=P(),r=D("div"),a=D("span"),o=ge(i),s=P(),l=D("div"),u=D("input"),c=P(),f=D("span"),p=ge(d),this.h()},l(b){e=R(b,"DIV",{class:!0});var T=q(e);v&&v.l(T),n=F(T),r=R(T,"DIV",{class:!0});var h=q(r);a=R(h,"SPAN",{class:!0});var w=q(a);o=he(w,i),w.forEach($),s=F(h),l=R(h,"DIV",{class:!0});var X=q(l);u=R(X,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),X.forEach($),c=F(h),f=R(h,"SPAN",{class:!0});var H=q(f);p=he(H,d),H.forEach($),h.forEach($),T.forEach($),this.h()},h(){_(a,"class","slider__range slider__range--min svelte-1h0gcvd"),_(u,"class","slider__input svelte-1h0gcvd"),_(u,"type","range"),_(u,"min",t[2]),_(u,"max",t[3]),_(u,"step",t[4]),u.value=t[0],_(l,"class","slider__input-container svelte-1h0gcvd"),_(f,"class","slider__range slider__range--max"),_(r,"class","slider__container svelte-1h0gcvd"),_(e,"class","slider")},m(b,T){B(b,e,T),v&&v.m(e,null),E(e,n),E(e,r),E(r,a),E(a,o),E(r,s),E(r,l),E(l,u),E(r,c),E(r,f),E(f,p),g||(m=Ke(u,"input",t[5]),g=!0)},p(b,[T]){b[1]?v?v.p(b,T):(v=sr(b),v.c(),v.m(e,n)):v&&(v.d(1),v=null),T&4&&i!==(i=gt(b[2])+"")&&Be(o,i),T&4&&_(u,"min",b[2]),T&8&&_(u,"max",b[3]),T&16&&_(u,"step",b[4]),T&1&&(u.value=b[0]),T&8&&d!==(d=gt(b[3])+"")&&Be(p,d)},i:Ge,o:Ge,d(b){b&&$(e),v&&v.d(),g=!1,m()}}}function gt(t){return t.toFixed(2).replace(/\.?0+$/,"")}function nl(t,e,n){const r=ct();let{label:a=""}=e,{min:i=0}=e,{max:o=100}=e,{step:s=1}=e,{value:l=o<i?i:(o-i)/2}=e;function u(c){const f=c.target,d=parseFloat(f.value);Number.isNaN(d)||(n(0,l=d),r("input",{value:l}))}return t.$$set=c=>{"label"in c&&n(1,a=c.label),"min"in c&&n(2,i=c.min),"max"in c&&n(3,o=c.max),"step"in c&&n(4,s=c.step),"value"in c&&n(0,l=c.value)},[l,a,i,o,s,u]}class te extends de{constructor(e){super(),ve(this,e,nl,rl,_e,{label:1,min:2,max:3,step:4,value:0})}}function al(t){let e,n,r,a,i,o;return e=new te({props:{label:`${t[0]}R`,min:0,max:1,step:.01,value:t[1][0]}}),e.$on("input",t[3]),r=new te({props:{label:`${t[0]}G`,min:0,max:1,step:.01,value:t[1][1]}}),r.$on("input",t[4]),i=new te({props:{label:`${t[0]}B`,min:0,max:1,step:.01,value:t[1][2]}}),i.$on("input",t[5]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment)},l(s){x(e.$$.fragment,s),n=F(s),x(r.$$.fragment,s),a=F(s),x(i.$$.fragment,s)},m(s,l){A(e,s,l),B(s,n,l),A(r,s,l),B(s,a,l),A(i,s,l),o=!0},p(s,[l]){const u={};l&1&&(u.label=`${s[0]}R`),l&2&&(u.value=s[1][0]),e.$set(u);const c={};l&1&&(c.label=`${s[0]}G`),l&2&&(c.value=s[1][1]),r.$set(c);const f={};l&1&&(f.label=`${s[0]}B`),l&2&&(f.value=s[1][2]),i.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(i.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(i.$$.fragment,s),o=!1},d(s){k(e,s),s&&$(n),k(r,s),s&&$(a),k(i,s)}}}function il(t,e,n){let{label:r=""}=e,{value:a=[1,1,1]}=e;const i=ct();function o(c,f){const d=[...a];d[c]=f,i("input",{value:d})}const s=c=>o(0,c.detail.value),l=c=>o(1,c.detail.value),u=c=>o(2,c.detail.value);return t.$$set=c=>{"label"in c&&n(0,r=c.label),"value"in c&&n(1,a=c.value)},[r,a,o,s,l,u]}class Ae extends de{constructor(e){super(),ve(this,e,il,al,_e,{label:0,value:1})}}function sl(t){let e,n,r,a,i,o,s,l,u,c;return e=new te({props:{label:"width",min:1,max:1024,step:1,value:t[0].width}}),e.$on("input",t[1]),r=new te({props:{label:"height",min:1,max:1024,step:1,value:t[0].height}}),r.$on("input",t[2]),i=new te({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[0].delayMs}}),i.$on("input",t[3]),s=new te({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[0].totalFrames}}),s.$on("input",t[4]),u=new Ae({props:{label:"clear",value:t[0].clear}}),u.$on("input",t[5]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment)},l(f){x(e.$$.fragment,f),n=F(f),x(r.$$.fragment,f),a=F(f),x(i.$$.fragment,f),o=F(f),x(s.$$.fragment,f),l=F(f),x(u.$$.fragment,f)},m(f,d){A(e,f,d),B(f,n,d),A(r,f,d),B(f,a,d),A(i,f,d),B(f,o,d),A(s,f,d),B(f,l,d),A(u,f,d),c=!0},p(f,d){const p={};d&1&&(p.value=f[0].width),e.$set(p);const g={};d&1&&(g.value=f[0].height),r.$set(g);const m={};d&1&&(m.value=f[0].delayMs),i.$set(m);const v={};d&1&&(v.value=f[0].totalFrames),s.$set(v);const b={};d&1&&(b.value=f[0].clear),u.$set(b)},i(f){c||(C(e.$$.fragment,f),C(r.$$.fragment,f),C(i.$$.fragment,f),C(s.$$.fragment,f),C(u.$$.fragment,f),c=!0)},o(f){S(e.$$.fragment,f),S(r.$$.fragment,f),S(i.$$.fragment,f),S(s.$$.fragment,f),S(u.$$.fragment,f),c=!1},d(f){k(e,f),f&&$(n),k(r,f),f&&$(a),k(i,f),f&&$(o),k(s,f),f&&$(l),k(u,f)}}}function ol(t){let e,n;return e=new Le({props:{title:"Output",$$slots:{default:[sl]},$$scope:{ctx:t}}}),e.$on("reset",je.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&65&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function ll(t,e,n){let r;return Te(t,je,u=>n(0,r=u)),[r,u=>je.change({width:u.detail.value}),u=>je.change({height:u.detail.value}),u=>je.change({delayMs:u.detail.value}),u=>je.change({totalFrames:u.detail.value}),u=>je.change({clear:u.detail.value})]}class ul extends de{constructor(e){super(),ve(this,e,ll,ol,_e,{})}}function cl(t){let e,n,r,a,i,o;return e=new te({props:{label:`${t[0]}X`,min:-10,max:10,step:.01,value:t[1][0]}}),e.$on("input",t[3]),r=new te({props:{label:`${t[0]}Y`,min:-10,max:10,step:.01,value:t[1][1]}}),r.$on("input",t[4]),i=new te({props:{label:`${t[0]}Z`,min:-10,max:10,step:.01,value:t[1][2]}}),i.$on("input",t[5]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment)},l(s){x(e.$$.fragment,s),n=F(s),x(r.$$.fragment,s),a=F(s),x(i.$$.fragment,s)},m(s,l){A(e,s,l),B(s,n,l),A(r,s,l),B(s,a,l),A(i,s,l),o=!0},p(s,[l]){const u={};l&1&&(u.label=`${s[0]}X`),l&2&&(u.value=s[1][0]),e.$set(u);const c={};l&1&&(c.label=`${s[0]}Y`),l&2&&(c.value=s[1][1]),r.$set(c);const f={};l&1&&(f.label=`${s[0]}Z`),l&2&&(f.value=s[1][2]),i.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(i.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(i.$$.fragment,s),o=!1},d(s){k(e,s),s&&$(n),k(r,s),s&&$(a),k(i,s)}}}function fl(t,e,n){let{label:r=""}=e,{value:a=[0,0,-1]}=e;const i=ct();function o(c,f){const d=[...a];d[c]=f,i("input",{value:d})}const s=c=>o(0,c.detail.value),l=c=>o(1,c.detail.value),u=c=>o(2,c.detail.value);return t.$$set=c=>{"label"in c&&n(0,r=c.label),"value"in c&&n(1,a=c.value)},[r,a,o,s,l,u]}class Ve extends de{constructor(e){super(),ve(this,e,fl,cl,_e,{label:0,value:1})}}function ml(t){let e,n,r,a,i,o;return e=new Ve({props:{label:"position",value:t[0].position}}),e.$on("input",t[1]),r=new Ve({props:{label:"lookAt",value:t[0].lookAt}}),r.$on("input",t[2]),i=new Ve({props:{label:"up",value:t[0].up}}),i.$on("input",t[3]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment)},l(s){x(e.$$.fragment,s),n=F(s),x(r.$$.fragment,s),a=F(s),x(i.$$.fragment,s)},m(s,l){A(e,s,l),B(s,n,l),A(r,s,l),B(s,a,l),A(i,s,l),o=!0},p(s,l){const u={};l&1&&(u.value=s[0].position),e.$set(u);const c={};l&1&&(c.value=s[0].lookAt),r.$set(c);const f={};l&1&&(f.value=s[0].up),i.$set(f)},i(s){o||(C(e.$$.fragment,s),C(r.$$.fragment,s),C(i.$$.fragment,s),o=!0)},o(s){S(e.$$.fragment,s),S(r.$$.fragment,s),S(i.$$.fragment,s),o=!1},d(s){k(e,s),s&&$(n),k(r,s),s&&$(a),k(i,s)}}}function pl(t){let e,n;return e=new Le({props:{title:"Camera",$$slots:{default:[ml]},$$scope:{ctx:t}}}),e.$on("reset",We.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&17&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function gl(t,e,n){let r;return Te(t,We,s=>n(0,r=s)),[r,s=>We.change({position:s.detail.value}),s=>We.change({lookAt:s.detail.value}),s=>We.change({up:s.detail.value})]}class hl extends de{constructor(e){super(),ve(this,e,gl,pl,_e,{})}}function dl(t){let e,n,r,a,i,o,s;return{c(){e=D("div"),n=ge(t[1]),r=P(),a=D("label"),i=D("input"),this.h()},l(l){e=R(l,"DIV",{class:!0});var u=q(e);n=he(u,t[1]),r=F(u),a=R(u,"LABEL",{class:!0});var c=q(a);i=R(c,"INPUT",{class:!0,type:!0}),c.forEach($),u.forEach($),this.h()},h(){_(i,"class","toggle__checkbox svelte-1j9rfin"),_(i,"type","checkbox"),i.checked=t[0],_(a,"class","toggle__label svelte-1j9rfin"),ze(a,"toggle__label--active",t[0]),_(e,"class","toggle svelte-1j9rfin")},m(l,u){B(l,e,u),E(e,n),E(e,r),E(e,a),E(a,i),o||(s=Ke(i,"change",t[2]),o=!0)},p(l,[u]){u&2&&Be(n,l[1]),u&1&&(i.checked=l[0]),u&1&&ze(a,"toggle__label--active",l[0])},i:Ge,o:Ge,d(l){l&&$(e),o=!1,s()}}}function vl(t,e,n){const r=ct();let{label:a=""}=e,{value:i=!1}=e;function o(s){const l=s.target;n(0,i=Boolean(l.checked)),r("change",{value:i})}return t.$$set=s=>{"label"in s&&n(1,a=s.label),"value"in s&&n(0,i=s.value)},[i,a,o]}class At extends de{constructor(e){super(),ve(this,e,vl,dl,_e,{label:1,value:0})}}function _l(t){let e,n,r,a,i,o,s,l,u,c,f,d,p,g;return e=new At({props:{label:"perspective",value:t[0].perspective}}),e.$on("change",t[1]),r=new te({props:{label:"left",min:-10,max:10,step:.01,value:t[0].left}}),r.$on("input",t[2]),i=new te({props:{label:"right",min:-10,max:10,step:.01,value:t[0].right}}),i.$on("input",t[3]),s=new te({props:{label:"bottom",min:-10,max:10,step:.01,value:t[0].bottom}}),s.$on("input",t[4]),u=new te({props:{label:"top",min:-10,max:10,step:.01,value:t[0].top}}),u.$on("input",t[5]),f=new te({props:{label:"near",min:.01,max:10,step:.01,value:t[0].near}}),f.$on("input",t[6]),p=new te({props:{label:"far",min:.01,max:10,step:.01,value:t[0].far}}),p.$on("input",t[7]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment),c=P(),O(f.$$.fragment),d=P(),O(p.$$.fragment)},l(m){x(e.$$.fragment,m),n=F(m),x(r.$$.fragment,m),a=F(m),x(i.$$.fragment,m),o=F(m),x(s.$$.fragment,m),l=F(m),x(u.$$.fragment,m),c=F(m),x(f.$$.fragment,m),d=F(m),x(p.$$.fragment,m)},m(m,v){A(e,m,v),B(m,n,v),A(r,m,v),B(m,a,v),A(i,m,v),B(m,o,v),A(s,m,v),B(m,l,v),A(u,m,v),B(m,c,v),A(f,m,v),B(m,d,v),A(p,m,v),g=!0},p(m,v){const b={};v&1&&(b.value=m[0].perspective),e.$set(b);const T={};v&1&&(T.value=m[0].left),r.$set(T);const h={};v&1&&(h.value=m[0].right),i.$set(h);const w={};v&1&&(w.value=m[0].bottom),s.$set(w);const X={};v&1&&(X.value=m[0].top),u.$set(X);const H={};v&1&&(H.value=m[0].near),f.$set(H);const ne={};v&1&&(ne.value=m[0].far),p.$set(ne)},i(m){g||(C(e.$$.fragment,m),C(r.$$.fragment,m),C(i.$$.fragment,m),C(s.$$.fragment,m),C(u.$$.fragment,m),C(f.$$.fragment,m),C(p.$$.fragment,m),g=!0)},o(m){S(e.$$.fragment,m),S(r.$$.fragment,m),S(i.$$.fragment,m),S(s.$$.fragment,m),S(u.$$.fragment,m),S(f.$$.fragment,m),S(p.$$.fragment,m),g=!1},d(m){k(e,m),m&&$(n),k(r,m),m&&$(a),k(i,m),m&&$(o),k(s,m),m&&$(l),k(u,m),m&&$(c),k(f,m),m&&$(d),k(p,m)}}}function $l(t){let e,n;return e=new Le({props:{title:"Projection",$$slots:{default:[_l]},$$scope:{ctx:t}}}),e.$on("reset",Pe.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&257&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function bl(t,e,n){let r;return Te(t,Pe,f=>n(0,r=f)),[r,f=>Pe.change({perspective:f.detail.value}),f=>Pe.change({left:f.detail.value}),f=>Pe.change({right:f.detail.value}),f=>Pe.change({bottom:f.detail.value}),f=>Pe.change({top:f.detail.value}),f=>Pe.change({near:f.detail.value}),f=>Pe.change({far:f.detail.value})]}class wl extends de{constructor(e){super(),ve(this,e,bl,$l,_e,{})}}function yl(t){let e,n,r,a;return e=new Ae({props:{label:"specular",value:t[0].specular}}),e.$on("input",t[1]),r=new te({props:{label:"shininess",min:0,max:100,step:.1,value:t[0].shininess}}),r.$on("input",t[2]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment)},l(i){x(e.$$.fragment,i),n=F(i),x(r.$$.fragment,i)},m(i,o){A(e,i,o),B(i,n,o),A(r,i,o),a=!0},p(i,o){const s={};o&1&&(s.value=i[0].specular),e.$set(s);const l={};o&1&&(l.value=i[0].shininess),r.$set(l)},i(i){a||(C(e.$$.fragment,i),C(r.$$.fragment,i),a=!0)},o(i){S(e.$$.fragment,i),S(r.$$.fragment,i),a=!1},d(i){k(e,i),i&&$(n),k(r,i)}}}function El(t){let e,n;return e=new Le({props:{title:"Material",$$slots:{default:[yl]},$$scope:{ctx:t}}}),e.$on("reset",ot.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&9&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Tl(t,e,n){let r;return Te(t,ot,o=>n(0,r=o)),[r,o=>ot.change({specular:o.detail.value}),o=>ot.change({shininess:o.detail.value})]}class Cl extends de{constructor(e){super(),ve(this,e,Tl,El,_e,{})}}function Sl(t){let e,n,r,a,i,o,s,l;return e=new Ae({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),r=new Ae({props:{label:"diffuse",value:t[0].diffuse}}),r.$on("input",t[2]),i=new Ae({props:{label:"specular",value:t[0].specular}}),i.$on("input",t[3]),s=new Ve({props:{label:"direction",value:t[0].direction}}),s.$on("input",t[4]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment),o=P(),O(s.$$.fragment)},l(u){x(e.$$.fragment,u),n=F(u),x(r.$$.fragment,u),a=F(u),x(i.$$.fragment,u),o=F(u),x(s.$$.fragment,u)},m(u,c){A(e,u,c),B(u,n,c),A(r,u,c),B(u,a,c),A(i,u,c),B(u,o,c),A(s,u,c),l=!0},p(u,c){const f={};c&1&&(f.value=u[0].ambient),e.$set(f);const d={};c&1&&(d.value=u[0].diffuse),r.$set(d);const p={};c&1&&(p.value=u[0].specular),i.$set(p);const g={};c&1&&(g.value=u[0].direction),s.$set(g)},i(u){l||(C(e.$$.fragment,u),C(r.$$.fragment,u),C(i.$$.fragment,u),C(s.$$.fragment,u),l=!0)},o(u){S(e.$$.fragment,u),S(r.$$.fragment,u),S(i.$$.fragment,u),S(s.$$.fragment,u),l=!1},d(u){k(e,u),u&&$(n),k(r,u),u&&$(a),k(i,u),u&&$(o),k(s,u)}}}function Ol(t){let e,n;return e=new Le({props:{title:"Directional light",$$slots:{default:[Sl]},$$scope:{ctx:t}}}),e.$on("reset",Xe.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&33&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function xl(t,e,n){let r;return Te(t,Xe,l=>n(0,r=l)),[r,l=>Xe.change({ambient:l.detail.value}),l=>Xe.change({diffuse:l.detail.value}),l=>Xe.change({specular:l.detail.value}),l=>Xe.change({direction:l.detail.value})]}class Al extends de{constructor(e){super(),ve(this,e,xl,Ol,_e,{})}}function kl(t){let e,n,r,a,i,o,s,l,u,c,f,d;return e=new Ae({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),r=new Ae({props:{label:"diffuse",value:t[0].diffuse}}),r.$on("input",t[2]),i=new Ae({props:{label:"specular",value:t[0].specular}}),i.$on("input",t[3]),s=new Ve({props:{label:"position",value:t[0].position}}),s.$on("input",t[4]),u=new te({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),u.$on("input",t[5]),f=new te({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),f.$on("input",t[6]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment),c=P(),O(f.$$.fragment)},l(p){x(e.$$.fragment,p),n=F(p),x(r.$$.fragment,p),a=F(p),x(i.$$.fragment,p),o=F(p),x(s.$$.fragment,p),l=F(p),x(u.$$.fragment,p),c=F(p),x(f.$$.fragment,p)},m(p,g){A(e,p,g),B(p,n,g),A(r,p,g),B(p,a,g),A(i,p,g),B(p,o,g),A(s,p,g),B(p,l,g),A(u,p,g),B(p,c,g),A(f,p,g),d=!0},p(p,g){const m={};g&1&&(m.value=p[0].ambient),e.$set(m);const v={};g&1&&(v.value=p[0].diffuse),r.$set(v);const b={};g&1&&(b.value=p[0].specular),i.$set(b);const T={};g&1&&(T.value=p[0].position),s.$set(T);const h={};g&1&&(h.value=p[0].attenuation1),u.$set(h);const w={};g&1&&(w.value=p[0].attenuation2),f.$set(w)},i(p){d||(C(e.$$.fragment,p),C(r.$$.fragment,p),C(i.$$.fragment,p),C(s.$$.fragment,p),C(u.$$.fragment,p),C(f.$$.fragment,p),d=!0)},o(p){S(e.$$.fragment,p),S(r.$$.fragment,p),S(i.$$.fragment,p),S(s.$$.fragment,p),S(u.$$.fragment,p),S(f.$$.fragment,p),d=!1},d(p){k(e,p),p&&$(n),k(r,p),p&&$(a),k(i,p),p&&$(o),k(s,p),p&&$(l),k(u,p),p&&$(c),k(f,p)}}}function Ml(t){let e,n;return e=new Le({props:{title:"Point light",$$slots:{default:[kl]},$$scope:{ctx:t}}}),e.$on("reset",Re.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&129&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Pl(t,e,n){let r;return Te(t,Re,c=>n(0,r=c)),[r,c=>Re.change({ambient:c.detail.value}),c=>Re.change({diffuse:c.detail.value}),c=>Re.change({specular:c.detail.value}),c=>Re.change({position:c.detail.value}),c=>Re.change({attenuation1:c.detail.value}),c=>Re.change({attenuation2:c.detail.value})]}class Fl extends de{constructor(e){super(),ve(this,e,Pl,Ml,_e,{})}}function Ll(t){let e,n,r,a,i,o,s,l,u,c,f,d,p,g,m,v,b,T;return e=new Ae({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),r=new Ae({props:{label:"diffuse",value:t[0].diffuse}}),r.$on("input",t[2]),i=new Ae({props:{label:"specular",value:t[0].specular}}),i.$on("input",t[3]),s=new Ve({props:{label:"position",value:t[0].position}}),s.$on("input",t[4]),u=new Ve({props:{label:"direction",value:t[0].direction}}),u.$on("input",t[5]),f=new te({props:{label:"innerDegrees",min:0,max:360,step:1,value:t[0].innerDegrees}}),f.$on("input",t[6]),p=new te({props:{label:"outerDegrees",min:0,max:360,step:1,value:t[0].outerDegrees}}),p.$on("input",t[7]),m=new te({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),m.$on("input",t[8]),b=new te({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),b.$on("input",t[9]),{c(){O(e.$$.fragment),n=P(),O(r.$$.fragment),a=P(),O(i.$$.fragment),o=P(),O(s.$$.fragment),l=P(),O(u.$$.fragment),c=P(),O(f.$$.fragment),d=P(),O(p.$$.fragment),g=P(),O(m.$$.fragment),v=P(),O(b.$$.fragment)},l(h){x(e.$$.fragment,h),n=F(h),x(r.$$.fragment,h),a=F(h),x(i.$$.fragment,h),o=F(h),x(s.$$.fragment,h),l=F(h),x(u.$$.fragment,h),c=F(h),x(f.$$.fragment,h),d=F(h),x(p.$$.fragment,h),g=F(h),x(m.$$.fragment,h),v=F(h),x(b.$$.fragment,h)},m(h,w){A(e,h,w),B(h,n,w),A(r,h,w),B(h,a,w),A(i,h,w),B(h,o,w),A(s,h,w),B(h,l,w),A(u,h,w),B(h,c,w),A(f,h,w),B(h,d,w),A(p,h,w),B(h,g,w),A(m,h,w),B(h,v,w),A(b,h,w),T=!0},p(h,w){const X={};w&1&&(X.value=h[0].ambient),e.$set(X);const H={};w&1&&(H.value=h[0].diffuse),r.$set(H);const ne={};w&1&&(ne.value=h[0].specular),i.$set(ne);const fe={};w&1&&(fe.value=h[0].position),s.$set(fe);const oe={};w&1&&(oe.value=h[0].direction),u.$set(oe);const V={};w&1&&(V.value=h[0].innerDegrees),f.$set(V);const Y={};w&1&&(Y.value=h[0].outerDegrees),p.$set(Y);const ue={};w&1&&(ue.value=h[0].attenuation1),m.$set(ue);const we={};w&1&&(we.value=h[0].attenuation2),b.$set(we)},i(h){T||(C(e.$$.fragment,h),C(r.$$.fragment,h),C(i.$$.fragment,h),C(s.$$.fragment,h),C(u.$$.fragment,h),C(f.$$.fragment,h),C(p.$$.fragment,h),C(m.$$.fragment,h),C(b.$$.fragment,h),T=!0)},o(h){S(e.$$.fragment,h),S(r.$$.fragment,h),S(i.$$.fragment,h),S(s.$$.fragment,h),S(u.$$.fragment,h),S(f.$$.fragment,h),S(p.$$.fragment,h),S(m.$$.fragment,h),S(b.$$.fragment,h),T=!1},d(h){k(e,h),h&&$(n),k(r,h),h&&$(a),k(i,h),h&&$(o),k(s,h),h&&$(l),k(u,h),h&&$(c),k(f,h),h&&$(d),k(p,h),h&&$(g),k(m,h),h&&$(v),k(b,h)}}}function Il(t){let e,n;return e=new Le({props:{title:"Spot light",$$slots:{default:[Ll]},$$scope:{ctx:t}}}),e.$on("reset",Se.reset),{c(){O(e.$$.fragment)},l(r){x(e.$$.fragment,r)},m(r,a){A(e,r,a),n=!0},p(r,[a]){const i={};a&1025&&(i.$$scope={dirty:a,ctx:r}),e.$set(i)},i(r){n||(C(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){k(e,r)}}}function Dl(t,e,n){let r;return Te(t,Se,p=>n(0,r=p)),[r,p=>Se.change({ambient:p.detail.value}),p=>Se.change({diffuse:p.detail.value}),p=>Se.change({specular:p.detail.value}),p=>Se.change({position:p.detail.value}),p=>Se.change({direction:p.detail.value}),p=>Se.change({innerDegrees:p.detail.value}),p=>Se.change({outerDegrees:p.detail.value}),p=>Se.change({attenuation1:p.detail.value}),p=>Se.change({attenuation2:p.detail.value})]}class Rl extends de{constructor(e){super(),ve(this,e,Dl,Il,_e,{})}}function jl(t){let e,n,r,a,i,o,s,l,u,c,f,d,p,g,m,v,b,T;return n=new tl({}),a=new ul({}),o=new hl({}),l=new wl({}),c=new Cl({}),d=new Al({}),g=new Fl({}),v=new Rl({}),{c(){e=D("aside"),O(n.$$.fragment),r=P(),O(a.$$.fragment),i=P(),O(o.$$.fragment),s=P(),O(l.$$.fragment),u=P(),O(c.$$.fragment),f=P(),O(d.$$.fragment),p=P(),O(g.$$.fragment),m=P(),O(v.$$.fragment),this.h()},l(h){e=R(h,"ASIDE",{class:!0});var w=q(e);x(n.$$.fragment,w),r=F(w),x(a.$$.fragment,w),i=F(w),x(o.$$.fragment,w),s=F(w),x(l.$$.fragment,w),u=F(w),x(c.$$.fragment,w),f=F(w),x(d.$$.fragment,w),p=F(w),x(g.$$.fragment,w),m=F(w),x(v.$$.fragment,w),w.forEach($),this.h()},h(){_(e,"class",b=Fe(`container ${t[0]}`)+" svelte-7v3svs")},m(h,w){B(h,e,w),A(n,e,null),E(e,r),A(a,e,null),E(e,i),A(o,e,null),E(e,s),A(l,e,null),E(e,u),A(c,e,null),E(e,f),A(d,e,null),E(e,p),A(g,e,null),E(e,m),A(v,e,null),T=!0},p(h,[w]){(!T||w&1&&b!==(b=Fe(`container ${h[0]}`)+" svelte-7v3svs"))&&_(e,"class",b)},i(h){T||(C(n.$$.fragment,h),C(a.$$.fragment,h),C(o.$$.fragment,h),C(l.$$.fragment,h),C(c.$$.fragment,h),C(d.$$.fragment,h),C(g.$$.fragment,h),C(v.$$.fragment,h),T=!0)},o(h){S(n.$$.fragment,h),S(a.$$.fragment,h),S(o.$$.fragment,h),S(l.$$.fragment,h),S(c.$$.fragment,h),S(d.$$.fragment,h),S(g.$$.fragment,h),S(v.$$.fragment,h),T=!1},d(h){h&&$(e),k(n),k(a),k(o),k(l),k(c),k(d),k(g),k(v)}}}function Ul(t,e,n){let{class:r=""}=e;return t.$$set=a=>{"class"in a&&n(0,r=a.class)},[r]}class Bl extends de{constructor(e){super(),ve(this,e,Ul,jl,_e,{class:0})}}function or(t,e,n){const r=t.slice();return r[6]=e[n],r}function lr(t,e,n){const r=t.slice();return r[9]=e[n],r}function Nl(t){let e,n;function r(...a){return t[4](t[9],...a)}return e=new At({props:{label:t[9].name,value:t[9].value}}),e.$on("change",r),{c(){O(e.$$.fragment)},l(a){x(e.$$.fragment,a)},m(a,i){A(e,a,i),n=!0},p(a,i){t=a;const o={};i&2&&(o.label=t[9].name),i&2&&(o.value=t[9].value),e.$set(o)},i(a){n||(C(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function zl(t){let e,n;function r(...a){return t[3](t[9],...a)}return e=new te({props:{label:t[9].name,min:t[9].min,max:t[9].max,step:t[9].step,value:t[9].value}}),e.$on("input",r),{c(){O(e.$$.fragment)},l(a){x(e.$$.fragment,a)},m(a,i){A(e,a,i),n=!0},p(a,i){t=a;const o={};i&2&&(o.label=t[9].name),i&2&&(o.min=t[9].min),i&2&&(o.max=t[9].max),i&2&&(o.step=t[9].step),i&2&&(o.value=t[9].value),e.$set(o)},i(a){n||(C(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function ur(t){let e,n,r,a;const i=[zl,Nl],o=[];function s(l,u){return l[9].type==="slider"?0:l[9].type==="toggle"?1:-1}return~(e=s(t))&&(n=o[e]=i[e](t)),{c(){n&&n.c(),r=Je()},l(l){n&&n.l(l),r=Je()},m(l,u){~e&&o[e].m(l,u),B(l,r,u),a=!0},p(l,u){let c=e;e=s(l),e===c?~e&&o[e].p(l,u):(n&&(Rt(),S(o[c],1,1,()=>{o[c]=null}),jt()),~e?(n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),C(n,1),n.m(r.parentNode,r)):n=null)},i(l){a||(C(n),a=!0)},o(l){S(n),a=!1},d(l){~e&&o[e].d(l),l&&$(r)}}}function Gl(t){let e,n,r=t[1].current.editOptions,a=[];for(let o=0;o<r.length;o+=1)a[o]=ur(lr(t,r,o));const i=o=>S(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=Je()},l(o){for(let s=0;s<a.length;s+=1)a[s].l(o);e=Je()},m(o,s){for(let l=0;l<a.length;l+=1)a[l].m(o,s);B(o,e,s),n=!0},p(o,s){if(s&2){r=o[1].current.editOptions;let l;for(l=0;l<r.length;l+=1){const u=lr(o,r,l);a[l]?(a[l].p(u,s),C(a[l],1)):(a[l]=ur(u),a[l].c(),C(a[l],1),a[l].m(e.parentNode,e))}for(Rt(),l=r.length;l<a.length;l+=1)i(l);jt()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)C(a[s]);n=!0}},o(o){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)S(a[s]);n=!1},d(o){vr(a,o),o&&$(e)}}}function cr(t){let e,n;function r(...a){return t[5](t[6],...a)}return e=new At({props:{label:t[6].type,value:t[6].enabled}}),e.$on("change",r),{c(){O(e.$$.fragment)},l(a){x(e.$$.fragment,a)},m(a,i){A(e,a,i),n=!0},p(a,i){t=a;const o={};i&4&&(o.label=t[6].type),i&4&&(o.value=t[6].enabled),e.$set(o)},i(a){n||(C(e.$$.fragment,a),n=!0)},o(a){S(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function ql(t){let e,n,r=t[2],a=[];for(let o=0;o<r.length;o+=1)a[o]=cr(or(t,r,o));const i=o=>S(a[o],1,1,()=>{a[o]=null});return{c(){for(let o=0;o<a.length;o+=1)a[o].c();e=Je()},l(o){for(let s=0;s<a.length;s+=1)a[s].l(o);e=Je()},m(o,s){for(let l=0;l<a.length;l+=1)a[l].m(o,s);B(o,e,s),n=!0},p(o,s){if(s&4){r=o[2];let l;for(l=0;l<r.length;l+=1){const u=or(o,r,l);a[l]?(a[l].p(u,s),C(a[l],1)):(a[l]=cr(u),a[l].c(),C(a[l],1),a[l].m(e.parentNode,e))}for(Rt(),l=r.length;l<a.length;l+=1)i(l);jt()}},i(o){if(!n){for(let s=0;s<r.length;s+=1)C(a[s]);n=!0}},o(o){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)S(a[s]);n=!1},d(o){vr(a,o),o&&$(e)}}}function Hl(t){let e,n,r,a,i,o;return n=new Le({props:{title:t[1].current.name,$$slots:{default:[Gl]},$$scope:{ctx:t}}}),n.$on("reset",Ue.resetEditOptions),a=new Le({props:{title:"Post-processing effects",$$slots:{default:[ql]},$$scope:{ctx:t}}}),a.$on("reset",wt.reset),{c(){e=D("aside"),O(n.$$.fragment),r=P(),O(a.$$.fragment),this.h()},l(s){e=R(s,"ASIDE",{class:!0});var l=q(e);x(n.$$.fragment,l),r=F(l),x(a.$$.fragment,l),l.forEach($),this.h()},h(){_(e,"class",i=Fe(`container ${t[0]}`)+" svelte-7v3svs")},m(s,l){B(s,e,l),A(n,e,null),E(e,r),A(a,e,null),o=!0},p(s,[l]){const u={};l&2&&(u.title=s[1].current.name),l&4098&&(u.$$scope={dirty:l,ctx:s}),n.$set(u);const c={};l&4100&&(c.$$scope={dirty:l,ctx:s}),a.$set(c),(!o||l&1&&i!==(i=Fe(`container ${s[0]}`)+" svelte-7v3svs"))&&_(e,"class",i)},i(s){o||(C(n.$$.fragment,s),C(a.$$.fragment,s),o=!0)},o(s){S(n.$$.fragment,s),S(a.$$.fragment,s),o=!1},d(s){s&&$(e),k(n),k(a)}}}function Xl(t,e,n){let r,a;Te(t,Ue,u=>n(1,r=u)),Te(t,wt,u=>n(2,a=u));let{class:i=""}=e;const o=(u,c)=>Ue.changeEditOptions(u,c.detail.value),s=(u,c)=>Ue.changeEditOptions(u,c.detail.value),l=(u,c)=>wt.change(u.type,c.detail.value);return t.$$set=u=>{"class"in u&&n(0,i=u.class)},[i,r,a,o,s,l]}class Vl extends de{constructor(e){super(),ve(this,e,Xl,Hl,_e,{class:0})}}function fr(t,e,n){const r=t.slice();return r[3]=e[n],r}function mr(t,e){let n,r,a,i,o,s,l=e[3].name+"",u,c,f,d;function p(){return e[2](e[3])}return{key:t,first:null,c(){n=D("button"),r=D("img"),o=P(),s=D("span"),u=ge(l),c=P(),this.h()},l(g){n=R(g,"BUTTON",{type:!0,class:!0});var m=q(n);r=R(m,"IMG",{class:!0,src:!0,alt:!0}),o=F(m),s=R(m,"SPAN",{});var v=q(s);u=he(v,l),v.forEach($),c=F(m),m.forEach($),this.h()},h(){_(r,"class","image svelte-1l1v01j"),Ye(r.src,a=`${dt}/demo-${e[3].name}.gif`)||_(r,"src",a),_(r,"alt",i=e[3].name),_(n,"type","button"),_(n,"class","option svelte-1l1v01j"),ze(n,"option--selected",e[3]===e[1].current),this.first=n},m(g,m){B(g,n,m),E(n,r),E(n,o),E(n,s),E(s,u),E(n,c),f||(d=Ke(n,"click",p),f=!0)},p(g,m){e=g,m&2&&!Ye(r.src,a=`${dt}/demo-${e[3].name}.gif`)&&_(r,"src",a),m&2&&i!==(i=e[3].name)&&_(r,"alt",i),m&2&&l!==(l=e[3].name+"")&&Be(u,l),m&2&&ze(n,"option--selected",e[3]===e[1].current)},d(g){g&&$(n),f=!1,d()}}}function Yl(t){let e,n=[],r=new Map,a,i=t[1].animations;const o=s=>s[3].name;for(let s=0;s<i.length;s+=1){let l=fr(t,i,s),u=o(l);r.set(u,n[s]=mr(u,l))}return{c(){e=D("aside");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=R(s,"ASIDE",{class:!0});var l=q(e);for(let u=0;u<n.length;u+=1)n[u].l(l);l.forEach($),this.h()},h(){_(e,"class",a=Fe(`container ${t[0]}`)+" svelte-1l1v01j")},m(s,l){B(s,e,l);for(let u=0;u<n.length;u+=1)n[u].m(e,null)},p(s,[l]){l&2&&(i=s[1].animations,n=qr(n,l,o,1,s,i,r,e,Hr,mr,null,fr)),l&1&&a!==(a=Fe(`container ${s[0]}`)+" svelte-1l1v01j")&&_(e,"class",a)},i:Ge,o:Ge,d(s){s&&$(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Wl(t,e,n){let r;Te(t,Ue,o=>n(1,r=o));let{class:a=""}=e;const i=o=>Ue.changeCurrentAnimation(o);return t.$$set=o=>{"class"in o&&n(0,a=o.class)},[a,r,i]}class Jl extends de{constructor(e){super(),ve(this,e,Wl,Yl,_e,{class:0})}}function pr(t){t[12]=t[13].dataUri}function gr(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Kl,then:Zl,catch:Ql,value:13,error:14};return zt(n=t[3],r),{c(){e=D("div"),r.block.c(),this.h()},l(a){e=R(a,"DIV",{class:!0});var i=q(e);r.block.l(i),i.forEach($),this.h()},h(){_(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(a,i){B(a,e,i),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null},p(a,i){t=a,r.ctx=t,i&8&&n!==(n=t[3])&&zt(n,r)||Yr(r,t,i)},d(a){a&&$(e),r.block.d(),r.token=null,r=null}}}function Ql(t){let e,n,r=t[14]+"",a;return{c(){e=D("p"),n=ge("An error has occurred: "),a=ge(r),this.h()},l(i){e=R(i,"P",{class:!0});var o=q(e);n=he(o,"An error has occurred: "),a=he(o,r),o.forEach($),this.h()},h(){_(e,"class","preview__error svelte-13qbjon")},m(i,o){B(i,e,o),E(e,n),E(e,a)},p(i,o){o&8&&r!==(r=i[14]+"")&&Be(a,r)},d(i){i&&$(e)}}}function Zl(t){pr(t);let e,n,r,a,i,o,s;return{c(){e=D("div"),n=D("img"),a=P(),i=D("a"),o=ge("Download"),this.h()},l(l){e=R(l,"DIV",{class:!0});var u=q(e);n=R(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach($),a=F(l),i=R(l,"A",{class:!0,download:!0,href:!0});var c=q(i);o=he(c,"Download"),c.forEach($),this.h()},h(){_(n,"class","preview__image svelte-13qbjon"),Ye(n.src,r=t[12])||_(n,"src",r),_(n,"alt","generated gif"),_(e,"class","preview__image-container svelte-13qbjon"),_(i,"class","preview__download-button svelte-13qbjon"),_(i,"download","jumping_peter.gif"),_(i,"href",s=t[12])},m(l,u){B(l,e,u),E(e,n),B(l,a,u),B(l,i,u),E(i,o)},p(l,u){pr(l),u&8&&!Ye(n.src,r=l[12])&&_(n,"src",r),u&8&&s!==(s=l[12])&&_(i,"href",s)},d(l){l&&$(e),l&&$(a),l&&$(i)}}}function Kl(t){let e,n,r,a,i,o,s=t[4].frame+"",l,u,c=t[5].totalFrames+"",f,d,p,g,m,v;return{c(){e=D("div"),n=D("p"),r=ge("Generating..."),a=P(),i=D("p"),o=ge("["),l=ge(s),u=ge(" / "),f=ge(c),d=ge("]"),p=P(),g=D("progress"),this.h()},l(b){e=R(b,"DIV",{class:!0});var T=q(e);n=R(T,"P",{});var h=q(n);r=he(h,"Generating..."),h.forEach($),a=F(T),i=R(T,"P",{});var w=q(i);o=he(w,"["),l=he(w,s),u=he(w," / "),f=he(w,c),d=he(w,"]"),w.forEach($),p=F(T),g=R(T,"PROGRESS",{class:!0,max:!0}),q(g).forEach($),T.forEach($),this.h()},h(){_(g,"class","preview__progress svelte-13qbjon"),_(g,"max",m=t[5].totalFrames),g.value=v=t[4].frame,_(e,"class","preview__loading svelte-13qbjon")},m(b,T){B(b,e,T),E(e,n),E(n,r),E(e,a),E(e,i),E(i,o),E(i,l),E(i,u),E(i,f),E(i,d),E(e,p),E(e,g)},p(b,T){T&16&&s!==(s=b[4].frame+"")&&Be(l,s),T&32&&c!==(c=b[5].totalFrames+"")&&Be(f,c),T&32&&m!==(m=b[5].totalFrames)&&_(g,"max",m),T&16&&v!==(v=b[4].frame)&&(g.value=v)},d(b){b&&$(e)}}}function eu(t){let e,n,r,a,i,o,s,l,u,c,f,d;r=new At({props:{label:"Debug Mode",value:t[1]}}),r.$on("change",t[7]);let p=!t[1]&&t[3]&&gr(t);return c=new te({props:{min:0,max:t[5].totalFrames-1,step:1,value:t[4].frame}}),c.$on("input",t[6]),{c(){e=D("main"),n=D("div"),O(r.$$.fragment),a=P(),p&&p.c(),i=P(),o=D("div"),s=D("div"),l=D("canvas"),u=P(),O(c.$$.fragment),this.h()},l(g){e=R(g,"MAIN",{class:!0});var m=q(e);n=R(m,"DIV",{class:!0});var v=q(n);x(r.$$.fragment,v),v.forEach($),a=F(m),p&&p.l(m),i=F(m),o=R(m,"DIV",{class:!0});var b=q(o);s=R(b,"DIV",{class:!0});var T=q(s);l=R(T,"CANVAS",{class:!0,style:!0}),q(l).forEach($),T.forEach($),u=F(b),x(c.$$.fragment,b),b.forEach($),m.forEach($),this.h()},h(){_(n,"class","preview__debug-input svelte-13qbjon"),_(l,"class","preview__image svelte-13qbjon"),Xr(l,"transform","scaleY(-1)"),_(s,"class","preview__image-container svelte-13qbjon"),_(o,"class","preview__container preview__container--debug svelte-13qbjon"),_(e,"class",f=Fe(`preview ${t[0]}`)+" svelte-13qbjon"),ze(e,"preview--debug",t[1]),ze(e,"preview--no-debug",!t[1])},m(g,m){B(g,e,m),E(e,n),A(r,n,null),E(e,a),p&&p.m(e,null),E(e,i),E(e,o),E(o,s),E(s,l),t[9](l),E(o,u),A(c,o,null),d=!0},p(g,[m]){const v={};m&2&&(v.value=g[1]),r.$set(v),!g[1]&&g[3]?p?p.p(g,m):(p=gr(g),p.c(),p.m(e,i)):p&&(p.d(1),p=null);const b={};m&32&&(b.max=g[5].totalFrames-1),m&16&&(b.value=g[4].frame),c.$set(b),(!d||m&1&&f!==(f=Fe(`preview ${g[0]}`)+" svelte-13qbjon"))&&_(e,"class",f),(!d||m&3)&&ze(e,"preview--debug",g[1]),(!d||m&3)&&ze(e,"preview--no-debug",!g[1])},i(g){d||(C(r.$$.fragment,g),C(c.$$.fragment,g),d=!0)},o(g){S(r.$$.fragment,g),S(c.$$.fragment,g),d=!1},d(g){g&&$(e),k(r),p&&p.d(),t[9](null),k(c)}}}function tu(t,e,n){let r,a,i;Te(t,Dt,m=>n(8,r=m)),Te(t,at,m=>n(4,a=m)),Te(t,je,m=>n(5,i=m));let o,{class:s=""}=e,l=!1,u=null;function c(){at.renderFrame().catch(m=>{throw console.error(`renderFrame failed: ${m}`),m})}function f(){n(3,u=at.animate().catch(m=>{throw console.error(`animate failed: ${m}`),m}))}Vr(()=>{at.changeCanvas(o),f()});function d(m){at.renderFrame(m.detail.value).catch(v=>console.error(`Animation failed: ${v}`))}function p(m){n(1,l=m.detail.value)}function g(m){Wr[m?"unshift":"push"](()=>{o=m,n(2,o)})}return t.$$set=m=>{"class"in m&&n(0,s=m.class)},t.$$.update=()=>{t.$$.dirty&258&&(l?c():f())},[s,l,o,u,a,i,d,p,r,g]}class ru extends de{constructor(e){super(),ve(this,e,tu,eu,_e,{class:0})}}function nu(t){let e,n,r,a,i,o,s,l,u,c,f,d,p,g,m,v,b,T,h,w,X,H,ne,fe,oe;return document.title=e=it,v=new en({props:{class:"header"}}),T=new Jl({props:{class:"animations"}}),w=new Bl({props:{class:"common-options"}}),H=new Vl({props:{class:"animation-options"}}),fe=new ru({props:{class:"preview"}}),{c(){n=D("meta"),r=D("meta"),a=D("meta"),i=D("meta"),o=D("meta"),s=D("meta"),l=D("meta"),u=D("meta"),c=D("meta"),f=D("meta"),d=D("meta"),p=D("meta"),g=P(),m=D("div"),O(v.$$.fragment),b=P(),O(T.$$.fragment),h=P(),O(w.$$.fragment),X=P(),O(H.$$.fragment),ne=P(),O(fe.$$.fragment),this.h()},l(V){const Y=Jr("svelte-2dqrj",document.head);n=R(Y,"META",{name:!0,content:!0,class:!0}),r=R(Y,"META",{name:!0,content:!0,class:!0}),a=R(Y,"META",{property:!0,content:!0,class:!0}),i=R(Y,"META",{property:!0,content:!0,class:!0}),o=R(Y,"META",{property:!0,content:!0,class:!0}),s=R(Y,"META",{property:!0,content:!0,class:!0}),l=R(Y,"META",{property:!0,content:!0,class:!0}),u=R(Y,"META",{property:!0,content:!0,class:!0}),c=R(Y,"META",{property:!0,content:!0,class:!0}),f=R(Y,"META",{property:!0,content:!0,class:!0}),d=R(Y,"META",{property:!0,content:!0,class:!0}),p=R(Y,"META",{property:!0,content:!0,class:!0}),Y.forEach($),g=F(V),m=R(V,"DIV",{class:!0});var ue=q(m);x(v.$$.fragment,ue),b=F(ue),x(T.$$.fragment,ue),h=F(ue),x(w.$$.fragment,ue),X=F(ue),x(H.$$.fragment,ue),ne=F(ue),x(fe.$$.fragment,ue),ue.forEach($),this.h()},h(){_(n,"name","title"),_(n,"content",it),_(n,"class","svelte-z7ouxl"),_(r,"name","description"),_(r,"content",Ft),_(r,"class","svelte-z7ouxl"),_(a,"property","og:type"),_(a,"content","website"),_(a,"class","svelte-z7ouxl"),_(i,"property","og:url"),_(i,"content",hr),_(i,"class","svelte-z7ouxl"),_(o,"property","og:title"),_(o,"content",it),_(o,"class","svelte-z7ouxl"),_(s,"property","og:description"),_(s,"content",Ft),_(s,"class","svelte-z7ouxl"),_(l,"property","og:image"),_(l,"content",dr),_(l,"class","svelte-z7ouxl"),_(u,"property","twitter:card"),_(u,"content","summary_large_image"),_(u,"class","svelte-z7ouxl"),_(c,"property","twitter:url"),_(c,"content",hr),_(c,"class","svelte-z7ouxl"),_(f,"property","twitter:title"),_(f,"content",it),_(f,"class","svelte-z7ouxl"),_(d,"property","twitter:description"),_(d,"content",Ft),_(d,"class","svelte-z7ouxl"),_(p,"property","twitter:image"),_(p,"content",dr),_(p,"class","svelte-z7ouxl"),_(m,"class","grid svelte-z7ouxl")},m(V,Y){E(document.head,n),E(document.head,r),E(document.head,a),E(document.head,i),E(document.head,o),E(document.head,s),E(document.head,l),E(document.head,u),E(document.head,c),E(document.head,f),E(document.head,d),E(document.head,p),B(V,g,Y),B(V,m,Y),A(v,m,null),E(m,b),A(T,m,null),E(m,h),A(w,m,null),E(m,X),A(H,m,null),E(m,ne),A(fe,m,null),oe=!0},p(V,[Y]){(!oe||Y&0)&&e!==(e=it)&&(document.title=e)},i(V){oe||(C(v.$$.fragment,V),C(T.$$.fragment,V),C(w.$$.fragment,V),C(H.$$.fragment,V),C(fe.$$.fragment,V),oe=!0)},o(V){S(v.$$.fragment,V),S(T.$$.fragment,V),S(w.$$.fragment,V),S(H.$$.fragment,V),S(fe.$$.fragment,V),oe=!1},d(V){$(n),$(r),$(a),$(i),$(o),$(s),$(l),$(u),$(c),$(f),$(d),$(p),V&&$(g),V&&$(m),k(v),k(T),k(w),k(H),k(fe)}}}const it="Jumping Peter",Ft="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",hr="https://ksmai.github.io/jumping-peter",dr="https://ksmai.github.io/jumping-peter/favicon.png";class ou extends de{constructor(e){super(),ve(this,e,null,nu,_e,{})}}export{ou as default};
