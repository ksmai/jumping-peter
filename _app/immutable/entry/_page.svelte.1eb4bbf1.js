var Bt=Object.defineProperty;var It=(t,e,r)=>e in t?Bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var be=(t,e,r)=>(It(t,typeof e!="symbol"?e+"":e,r),r);import{S as Pe,i as Oe,n as Be,j as O,s as G,q as ie,k as B,l as C,c as q,r as oe,g as $,m as d,J as Ue,K as Ae,a as le,G as g,H as Se,L as xe,M as ze,u as Re,N as bt,y as ue,z as fe,A as me,f as ae,b as se,B as de,I as $e,O as Fe,v as wt,d as yt,P as Rt,e as et,Q as Et,R as kt,T as Mt,p as Ut,o as Ct,U as tt,V as Dt,w as jt,W as Nt}from"../chunks/index.1d64faf9.js";import{b as Je,w as Ge}from"../chunks/paths.3dcf6f7b.js";function Lt(t){let e,r,n,s,a,c,o,i,l,u,f,b,p;return{c(){e=O("header"),r=O("img"),s=G(),a=O("h1"),c=ie("Jumping Peter"),o=G(),i=O("p"),l=ie("generate gif emojis"),u=G(),f=O("a"),b=ie("Contribute"),this.h()},l(m){e=B(m,"HEADER",{class:!0});var _=C(e);r=B(_,"IMG",{class:!0,src:!0,alt:!0}),s=q(_),a=B(_,"H1",{class:!0});var w=C(a);c=oe(w,"Jumping Peter"),w.forEach($),o=q(_),i=B(_,"P",{class:!0});var v=C(i);l=oe(v,"generate gif emojis"),v.forEach($),u=q(_),f=B(_,"A",{class:!0,href:!0,target:!0,rel:!0});var y=C(f);b=oe(y,"Contribute"),y.forEach($),_.forEach($),this.h()},h(){d(r,"class","logo svelte-bal6b7"),Ue(r.src,n=`${Je}/demo-jumping.gif`)||d(r,"src",n),d(r,"alt",""),d(a,"class","title svelte-bal6b7"),d(i,"class","subtitle svelte-bal6b7"),d(f,"class","contribute svelte-bal6b7"),d(f,"href","https://github.com/ksmai/jumping-peter"),d(f,"target","_blank"),d(f,"rel","noreferrer"),d(e,"class",p=Ae(`header ${t[0]}`)+" svelte-bal6b7")},m(m,_){le(m,e,_),g(e,r),g(e,s),g(e,a),g(a,c),g(e,o),g(e,i),g(i,l),g(e,u),g(e,f),g(f,b)},p(m,[_]){_&1&&p!==(p=Ae(`header ${m[0]}`)+" svelte-bal6b7")&&d(e,"class",p)},i:Se,o:Se,d(m){m&&$(e)}}}function zt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Gt extends Pe{constructor(e){super(),Oe(this,e,zt,Lt,Be,{class:0})}}function Qe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function He(t){return{...t,type:"slider",min:0,max:1,step:.01}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function st(t){return{...t,type:"slider",min:-1,max:1,step:1}}function qt(t){return{...t,type:"slider",min:1,max:100,step:1}}function $t(t){return{...t,type:"toggle"}}function Vt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function qe(){return[1,0,0,1,0,0]}function Ze(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function At(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,c,o,i,l,u]=t;t[0]=a*n-c*s,t[1]=a*s+c*n,t[2]=o*n-i*s,t[3]=o*s+i*n,t[4]=l*n-u*s,t[5]=l*s+u*n}function Ie(t,e,r){t[4]+=e,t[5]+=r}function Ve(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Ce(t,e,r){return t+(e-t)*r}function Xt(t){return t*Math.PI/180}const Wt="spinning",Ht={delayMs:50,totalFrames:15},Yt=[Qe({name:"startAngle",default:0}),Qe({name:"endAngle",default:360}),rt({name:"originX",default:0}),rt({name:"originY",default:0}),$t({name:"alternates",default:!1})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:c,endAngle:o,originX:i,originY:l}=r;return[{program:n,geometry:s,getUniforms:f=>{const b=a?Math.min(f,1-f)*2:f,p=Ce(c,o,b),m=qe();return Ie(m,-i,-l),At(m,p),Ie(m,i,l),{u_transform:Ve(m)}}}]}const Qt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Yt,FrameOptions:Ht,Name:Wt,createSprites:Tt},Symbol.toStringTag,{value:"Module"})),Jt="expanding",Zt={delayMs:50,totalFrames:20},Kt=[nt({name:"minScale",default:1}),nt({name:"maxScale",default:2}),$t({name:"alternates",default:!1})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternates:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=o?Math.min(l,1-l)*2:l,f=Ce(a,c,u),b=qe();return Ze(b,f,f),{u_transform:Ve(b)}}}]}const er=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Kt,FrameOptions:Zt,Name:Jt,createSprites:xt},Symbol.toStringTag,{value:"Module"})),tr="extreme-speed",rr={delayMs:20,totalFrames:10},ar=[st({name:"directionX",default:-1}),st({name:"directionY",default:0})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:a,directionY:c}=r,o=a*2,i=c*2;return[{program:n,geometry:s,getUniforms:u=>{const f=qe(),b=Ce(0,o,u),p=Ce(0,i,u);return Ie(f,b,p),{u_transform:Ve(f)}}}]}const nr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ar,FrameOptions:rr,Name:tr,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),sr="excited",ir={delayMs:50,totalFrames:25},or=[Qe({name:"angle",default:15}),at({name:"startOffset",default:-.1}),at({name:"endOffset",default:.1}),qt({name:"cycles",default:3})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:c}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const l=Xt(a),u=Math.cos(l),f=Math.sin(l);return[{program:n,geometry:s,getUniforms:p=>{const m=p*2*c%1,_=Math.min(m,1-m)*2,w=Ce(-o*f,-i*f,_),v=Ce(o*u,i*u,_),y=qe();return At(y,a),Ie(y,w,v),Ze(y,p>.5?-1:1,1),{u_transform:Ve(y)}}}]}const lr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:or,FrameOptions:ir,Name:sr,createSprites:St},Symbol.toStringTag,{value:"Module"})),cr="jumping",ur={delayMs:50,totalFrames:20},fr=[He({name:"maxOffset",default:.6}),He({name:"compressTime",default:.4}),He({name:"maxCompress",default:.3})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:c,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=Math.min(l,1-l)*2,f=qe(),b=u/(1-c);if(b<1){const p=(1-b*b)*a*2;Ie(f,0,p)}else{const p=(1-u)/c,_=1-(1-p*p)*o;Ie(f,0,1),Ze(f,1/_,_),Ie(f,0,-1)}return{u_transform:Ve(f)}}}]}const mr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:fr,FrameOptions:ur,Name:cr,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),We=[mr,nr,Qt,lr,er].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Vt(t.EditOptions,t.Name),defaultFrameOptions:t.FrameOptions}));function it(t,e,r){switch(r.name){case"spinning":return Tt(t,e,r);case"expanding":return xt(t,e,r);case"extreme-speed":return Ft(t,e,r);case"excited":return St(t,e,r);case"jumping":return Pt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class dr{constructor(e){be(this,"loadingUrl",null);be(this,"url",null);be(this,"texture",null);be(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const hr=function(){var t={},e=-1,r,n,s,a,c,o,i=12,l=5003,u,f=i,b,p=1<<i,m=[],_=[],w=l,v=0,y=!1,V,M,W,U=0,J=0,Y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,D=[],A=t.LZWEncoder=function(N,F,h,P){r=N,n=F,s=h,a=Math.max(2,P)},k=function(N,F){D[Z++]=N,Z>=254&&ge(F)},ee=function(N){he(w),v=M+2,y=!0,ve(M,N)},he=function(N){for(var F=0;F<N;++F)m[F]=-1},X=t.compress=function(N,F){var h,P,te,H,ce,Q,T;for(V=N,y=!1,u=V,b=_e(u),M=1<<N-1,W=M+1,v=M+2,Z=0,H=we(),T=0,h=w;h<65536;h*=2)++T;T=8-T,Q=w,he(Q),ve(M,F);e:for(;(te=we())!=e;){if(h=(te<<f)+H,P=te<<T^H,m[P]==h){H=_[P];continue}else if(m[P]>=0){ce=Q-P,P===0&&(ce=1);do if((P-=ce)<0&&(P+=Q),m[P]==h){H=_[P];continue e}while(m[P]>=0)}ve(H,F),H=te,v<p?(_[P]=v++,m[P]=h):ee(F)}ve(H,F),ve(W,F)};t.encode=function(N){N.writeByte(a),c=r*n,o=0,X(a+1,N),N.writeByte(0)};var ge=function(N){Z>0&&(N.writeByte(Z),N.writeBytes(D,0,Z),Z=0)},_e=function(N){return(1<<N)-1},we=function(){if(c===0)return e;--c;var N=s[o++];return N&255},ve=function(N,F){for(U&=Y[J],J>0?U|=N<<J:U=N,J+=u;J>=8;)k(U&255,F),U>>=8,J-=8;if((v>b||y)&&(y?(b=_e(u=V),y=!1):(++u,u==f?b=p:b=_e(u))),N==W){for(;J>0;)k(U&255,F),U>>=8,J-=8;ge(F)}};return A.apply(this,arguments),t},vr=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,o=e-1,i=4,l=100,u=16,f=1<<u,b=10,p=10,m=f>>p,_=f<<b-p,w=e>>3,v=6,y=1<<v,V=w*y,M=30,W=10,U=1<<W,J,Y=8,Z=1<<Y,D=W+Y,A=1<<D,k,ee,he,X,ge=[],_e=[],we=[],ve=[],ne=t.NeuQuant=function(T,S,L){var I,R;for(k=T,ee=S,he=L,X=new Array(e),I=0;I<e;I++)X[I]=new Array(4),R=X[I],R[0]=R[1]=R[2]=(I<<i+8)/e,we[I]=f/e,_e[I]=0},N=function(){for(var T=[],S=new Array(e),L=0;L<e;L++)S[X[L][3]]=L;for(var I=0,R=0;R<e;R++){var E=S[R];T[I++]=X[E][0],T[I++]=X[E][1],T[I++]=X[E][2]}return T},F=function(){var T,S,L,I,R,E,x,j;for(x=0,j=0,T=0;T<e;T++){for(R=X[T],L=T,I=R[1],S=T+1;S<e;S++)E=X[S],E[1]<I&&(L=S,I=E[1]);if(E=X[L],T!=L&&(S=E[0],E[0]=R[0],R[0]=S,S=E[1],E[1]=R[1],R[1]=S,S=E[2],E[2]=R[2],R[2]=S,S=E[3],E[3]=R[3],R[3]=S),I!=x){for(ge[x]=j+T>>1,S=x+1;S<I;S++)ge[S]=T;x=I,j=T}}for(ge[x]=j+o>>1,S=x+1;S<256;S++)ge[S]=o},h=function(){var T,S,L,I,R,E,x,j,z,re,ye,K,pe,Ke;for(ee<c&&(he=1),J=30+(he-1)/3,K=k,pe=0,Ke=ee,ye=ee/(3*he),re=ye/l|0,j=U,E=V,x=E>>v,x<=1&&(x=0),T=0;T<x;T++)ve[T]=j*((x*x-T*T)*Z/(x*x));for(ee<c?z=3:ee%r!==0?z=3*r:ee%n!==0?z=3*n:ee%s!==0?z=3*s:z=3*a,T=0;T<ye;)if(L=(K[pe+0]&255)<<i,I=(K[pe+1]&255)<<i,R=(K[pe+2]&255)<<i,S=ce(L,I,R),H(j,S,L,I,R),x!==0&&te(x,S,L,I,R),pe+=z,pe>=Ke&&(pe-=ee),T++,re===0&&(re=1),T%re===0)for(j-=j/J,E-=E/M,x=E>>v,x<=1&&(x=0),S=0;S<x;S++)ve[S]=j*((x*x-S*S)*Z/(x*x))};t.map=function(T,S,L){var I,R,E,x,j,z,re;for(j=1e3,re=-1,I=ge[S],R=I-1;I<e||R>=0;)I<e&&(z=X[I],E=z[1]-S,E>=j?I=e:(I++,E<0&&(E=-E),x=z[0]-T,x<0&&(x=-x),E+=x,E<j&&(x=z[2]-L,x<0&&(x=-x),E+=x,E<j&&(j=E,re=z[3])))),R>=0&&(z=X[R],E=S-z[1],E>=j?R=-1:(R--,E<0&&(E=-E),x=z[0]-T,x<0&&(x=-x),E+=x,E<j&&(x=z[2]-L,x<0&&(x=-x),E+=x,E<j&&(j=E,re=z[3]))));return re},t.process=function(){return h(),P(),F(),N()};var P=function(){var T;for(T=0;T<e;T++)X[T][0]>>=i,X[T][1]>>=i,X[T][2]>>=i,X[T][3]=T},te=function(T,S,L,I,R){var E,x,j,z,re,ye,K;for(j=S-T,j<-1&&(j=-1),z=S+T,z>e&&(z=e),E=S+1,x=S-1,ye=1;E<z||x>j;){if(re=ve[ye++],E<z){K=X[E++];try{K[0]-=re*(K[0]-L)/A,K[1]-=re*(K[1]-I)/A,K[2]-=re*(K[2]-R)/A}catch{}}if(x>j){K=X[x--];try{K[0]-=re*(K[0]-L)/A,K[1]-=re*(K[1]-I)/A,K[2]-=re*(K[2]-R)/A}catch{}}}},H=function(T,S,L,I,R){var E=X[S];E[0]-=T*(E[0]-L)/U,E[1]-=T*(E[1]-I)/U,E[2]-=T*(E[2]-R)/U},ce=function(T,S,L){var I,R,E,x,j,z,re,ye,K,pe;for(ye=~(1<<31),K=ye,z=-1,re=z,I=0;I<e;I++)pe=X[I],R=pe[0]-T,R<0&&(R=-R),E=pe[1]-S,E<0&&(E=-E),R+=E,E=pe[2]-L,E<0&&(E=-E),R+=E,R<ye&&(ye=R,z=I),x=R-(_e[I]>>u-i),x<K&&(K=x,re=I),j=we[I]>>p,we[I]-=j,_e[I]+=j<<b;return we[z]+=m,_e[z]-=_,re};return ne.apply(this,arguments),t},pr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var F="",h=this.bin.length,P=0;P<h;P++)F+=e[this.bin[P]];return F},r.prototype.writeByte=function(F){this.bin.push(F)},r.prototype.writeUTFBytes=function(F){for(var h=F.length,P=0;P<h;P++)this.writeByte(F.charCodeAt(P))},r.prototype.writeBytes=function(F,h,P){for(var te=P||F.length,H=h||0;H<te;H++)this.writeByte(F[H])};var n={},s,a,c=null,o,i=-1,l=0,u=!1,f,b,p,m,_,w,v=[],y=7,V=-1,M=!1,W=!0,U=!1,J=10,Y="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(h){l=Math.round(h/10)},n.setDispose=function(h){h>=0&&(V=h)},n.setRepeat=function(h){h>=0&&(i=h)},n.setTransparent=function(h){c=h},n.setComment=function(h){Y=h},n.addFrame=function(h,P){if(h===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?h instanceof ImageData?(b=h.data,(!sizeset||s!=h.width||a!=h.height)&&D(h.width,h.height)):h instanceof Uint8ClampedArray?h.length==s*a*4?b=h:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(b=h.getImageData(0,0,h.canvas.width,h.canvas.height).data,U||D(h.canvas.width,h.canvas.height)),ee(),A(),W&&(_e(),ve(),i>=0&&we()),he(),Y!==""&&X(),ge(),W||ve(),N(),W=!1}catch{te=!1}return te},n.download=function(h){if(f===null||M==!1)console.log("Please call start method and add frames and call finish method before calling download");else{h=h!==void 0?h.endsWith(".gif")?h:h+".gif":"download.gif";var P=document.createElement("a");P.download=h,P.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!u)return!1;var h=!0;u=!1;try{f.writeByte(59),M=!0}catch{h=!1}return h};var Z=function(){o=0,b=null,p=null,m=null,w=null,M=!1,W=!0};n.setFrameRate=function(h){h!=15&&(l=Math.round(100/h))},n.setQuality=function(h){h<1&&(h=1),J=h};var D=n.setSize=function(h,P){u&&!W||(s=h,a=P,s<1&&(s=320),a<1&&(a=240),U=!0)};n.start=function(){Z();var h=!0;M=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{h=!1}return u=h},n.cont=function(){Z();var h=!0;return M=!1,f=new r,u=h};var A=function(){var h=p.length,P=h/3;m=[];var te=new vr(p,h,J);w=te.process();for(var H=0,ce=0;ce<P;ce++){var Q=te.map(p[H++]&255,p[H++]&255,p[H++]&255);v[Q]=!0,m[ce]=Q}p=null,_=8,y=7,c!==null&&(o=k(c))},k=function(h){if(w===null)return-1;for(var P=(h&16711680)>>16,te=(h&65280)>>8,H=h&255,ce=0,Q=256*256*256,T=w.length,S=0;S<T;){var L=P-(w[S++]&255),I=te-(w[S++]&255),R=H-(w[S]&255),E=L*L+I*I+R*R,x=S/3;v[x]&&E<Q&&(Q=E,ce=x),S++}return ce},ee=function(){var h=s,P=a;p=[];for(var te=b,H=0,ce=0;ce<P;ce++)for(var Q=0;Q<h;Q++){var T=ce*h*4+Q*4;p[H++]=te[T],p[H++]=te[T+1],p[H++]=te[T+2]}},he=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var h,P;c===null?(h=0,P=0):(h=1,P=2),V>=0&&(P=V&7),P<<=2,f.writeByte(0|P|0|h),ne(l),f.writeByte(o),f.writeByte(0)},X=function(){f.writeByte(33),f.writeByte(254),f.writeByte(Y.length),f.writeUTFBytes(Y),f.writeByte(0)},ge=function(){f.writeByte(44),ne(0),ne(0),ne(s),ne(a),W?f.writeByte(0):f.writeByte(128|y)},_e=function(){ne(s),ne(a),f.writeByte(240|y),f.writeByte(0),f.writeByte(0)},we=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),ne(i),f.writeByte(0)},ve=function(){f.writeBytes(w);for(var h=3*256-w.length,P=0;P<h;P++)f.writeByte(0)},ne=function(h){f.writeByte(h&255),f.writeByte(h>>8&255)},N=function(){var h=new hr(s,a,m,_);h.encode(f)};return n.stream=function(){return f},n.setProperties=function(h,P){u=h,W=P},n},ke={a_position:0,a_texCoords:1},ot={default:{vertex:`#version 300 es

layout(location = ${ke.a_position}) in vec2 a_position;
layout(location = ${ke.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class gr{constructor(e){be(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:br(this.gl,ot[e].vertex,ot[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function _r(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function br(t,e,r){const n=lt(t,t.VERTEX_SHADER,e);let s;try{s=lt(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function lt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ct(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,c,o;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),c!==i.geometry&&(t.bindVertexArray(i.geometry.vao),c=i.geometry),o!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),o=n);const l={u_image:n.unit,...i.getUniforms(e)};_r(t,i.program,l),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}function wr(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(ke.a_position),t.vertexAttribPointer(ke.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(ke.a_texCoords),t.vertexAttribPointer(ke.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const yr={full:[-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0],sudoku:[-3,-3,0,3,3,-3,3,3,-3,3,0,0,3,3,3,0]};class Er{constructor(e){be(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=wr(this.gl,yr[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class $r{constructor(e){be(this,"gl");be(this,"programFactory");be(this,"geometryFactory");be(this,"texture");be(this,"queue",[]);be(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new gr(this.gl),this.geometryFactory=new Er(this.gl),this.texture=new dr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new pr;if(a.setRepeat(0),a.setDelay(e.frame.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:it(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:it(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let o=0;o<this.queue.length-1;++o)this.queue[o].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const c=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")ct(this.gl,a/r.frame.totalFrames,s,this.texture,c),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:o,sprites:i,callback:l}=this.queue[0];ct(this.gl,a/r.frame.totalFrames,i,this.texture,c),l(a);const u=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,u),o.addFrame(u,!0),o.setTransparent(16777215),a===r.frame.totalFrames-1){o.finish();const f=o.stream().getData(),b="data:image/gif;base64,"+window.btoa(f);n({dataUri:b}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const De=function(){const{subscribe:t,update:e}=Ge(We[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=We.find(c=>c.name===n);return a||s})}}}(),Ee=function(){const t=`${Je}/favicon.png`,{subscribe:e,update:r}=Ge({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.url!==t&&URL.revokeObjectURL(c.url),{...c,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Me=function(){const{subscribe:t,update:e}=Ge(void 0,n=>De.subscribe(a=>{n(a.defaultFrameOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),Le=function(){const{subscribe:t,update:e}=Ge(void 0,n=>De.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),je=function(){const t=Ge({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new $r(c),running:!1,frame:0}})}function s(){const{animator:c}=xe(t);return c?(r(o=>({...o,running:!0,frame:0})),c.animate({image:xe(Ee),frame:xe(Me),animation:xe(Le)},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:o,frame:i}=xe(t);if(!o)return Promise.reject("Animator has not been created");let l;typeof c>"u"?l=i:l=c;const u=xe(Me);return l>=u.totalFrames&&(l=u.totalFrames-1),r(f=>({...f,frame:l,running:!0})),o.renderFrame({image:xe(Ee),frame:u,animation:xe(Le)},l).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ut(t){let e,r,n,s,a,c;return{c(){e=O("label"),r=ie(t[1]),n=G(),s=O("input"),this.h()},l(o){e=B(o,"LABEL",{class:!0});var i=C(e);r=oe(i,t[1]),n=q(i),s=B(i,"INPUT",{class:!0,type:!0}),i.forEach($),this.h()},h(){d(s,"class","slider__text-input svelte-1h0gcvd"),d(s,"type","text"),s.value=t[0],d(e,"class","slider__label svelte-1h0gcvd")},m(o,i){le(o,e,i),g(e,r),g(e,n),g(e,s),a||(c=ze(s,"input",t[5]),a=!0)},p(o,i){i&2&&Re(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&$(e),a=!1,c()}}}function Ar(t){let e,r,n,s,a=Xe(t[2])+"",c,o,i,l,u,f,b=Xe(t[3])+"",p,m,_,w=t[1]&&ut(t);return{c(){e=O("div"),w&&w.c(),r=G(),n=O("div"),s=O("span"),c=ie(a),o=G(),i=O("div"),l=O("input"),u=G(),f=O("span"),p=ie(b),this.h()},l(v){e=B(v,"DIV",{class:!0});var y=C(e);w&&w.l(y),r=q(y),n=B(y,"DIV",{class:!0});var V=C(n);s=B(V,"SPAN",{class:!0});var M=C(s);c=oe(M,a),M.forEach($),o=q(V),i=B(V,"DIV",{class:!0});var W=C(i);l=B(W,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),W.forEach($),u=q(V),f=B(V,"SPAN",{class:!0});var U=C(f);p=oe(U,b),U.forEach($),V.forEach($),y.forEach($),this.h()},h(){d(s,"class","slider__range slider__range--min svelte-1h0gcvd"),d(l,"class","slider__input svelte-1h0gcvd"),d(l,"type","range"),d(l,"min",t[2]),d(l,"max",t[3]),d(l,"step",t[4]),l.value=t[0],d(i,"class","slider__input-container svelte-1h0gcvd"),d(f,"class","slider__range slider__range--max"),d(n,"class","slider__container svelte-1h0gcvd"),d(e,"class","slider")},m(v,y){le(v,e,y),w&&w.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,o),g(n,i),g(i,l),g(n,u),g(n,f),g(f,p),m||(_=ze(l,"input",t[5]),m=!0)},p(v,[y]){v[1]?w?w.p(v,y):(w=ut(v),w.c(),w.m(e,r)):w&&(w.d(1),w=null),y&4&&a!==(a=Xe(v[2])+"")&&Re(c,a),y&4&&d(l,"min",v[2]),y&8&&d(l,"max",v[3]),y&16&&d(l,"step",v[4]),y&1&&(l.value=v[0]),y&8&&b!==(b=Xe(v[3])+"")&&Re(p,b)},i:Se,o:Se,d(v){v&&$(e),w&&w.d(),m=!1,_()}}}function Xe(t){return t.toFixed(2).replace(/\.?0+$/,"")}function Tr(t,e,r){const n=bt();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:o=1}=e,{value:i=c<a?a:(c-a)/2}=e;function l(u){const f=u.target,b=parseFloat(f.value);Number.isNaN(b)||(r(0,i=b),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,c=u.max),"step"in u&&r(4,o=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,c,o,l]}class Te extends Pe{constructor(e){super(),Oe(this,e,Tr,Ar,Be,{label:1,min:2,max:3,step:4,value:0})}}function xr(t){let e,r,n,s,a,c,o,i,l,u,f,b,p,m,_,w,v,y,V,M,W,U,J,Y,Z,D;return u=new Te({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]),b=new Te({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),b.$on("input",t[5]),m=new Te({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),w=new Te({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),w.$on("input",t[7]),y=new Te({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),y.$on("input",t[8]),M=new Te({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].delayMs}}),M.$on("input",t[9]),U=new Te({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].totalFrames}}),U.$on("input",t[10]),{c(){e=O("aside"),r=O("label"),n=ie(`Select image

    `),s=O("input"),a=G(),c=O("div"),o=O("img"),l=G(),ue(u.$$.fragment),f=G(),ue(b.$$.fragment),p=G(),ue(m.$$.fragment),_=G(),ue(w.$$.fragment),v=G(),ue(y.$$.fragment),V=G(),ue(M.$$.fragment),W=G(),ue(U.$$.fragment),this.h()},l(A){e=B(A,"ASIDE",{class:!0});var k=C(e);r=B(k,"LABEL",{class:!0});var ee=C(r);n=oe(ee,`Select image

    `),s=B(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=q(ee),c=B(ee,"DIV",{class:!0});var he=C(c);o=B(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach($),ee.forEach($),l=q(k),fe(u.$$.fragment,k),f=q(k),fe(b.$$.fragment,k),p=q(k),fe(m.$$.fragment,k),_=q(k),fe(w.$$.fragment,k),v=q(k),fe(y.$$.fragment,k),V=q(k),fe(M.$$.fragment,k),W=q(k),fe(U.$$.fragment,k),k.forEach($),this.h()},h(){d(s,"class","image__input svelte-843oxz"),d(s,"type","file"),d(s,"accept","image/*"),d(o,"class","image__preview svelte-843oxz"),Ue(o.src,i=t[1].url)||d(o,"src",i),d(o,"alt","source"),d(c,"class","image__container svelte-843oxz"),d(r,"class","image svelte-843oxz"),d(e,"class",J=Ae(`container ${t[0]}`)+" svelte-843oxz")},m(A,k){le(A,e,k),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,o),g(e,l),me(u,e,null),g(e,f),me(b,e,null),g(e,p),me(m,e,null),g(e,_),me(w,e,null),g(e,v),me(y,e,null),g(e,V),me(M,e,null),g(e,W),me(U,e,null),Y=!0,Z||(D=ze(s,"input",t[3]),Z=!0)},p(A,[k]){(!Y||k&2&&!Ue(o.src,i=A[1].url))&&d(o,"src",i);const ee={};k&2&&(ee.value=A[1].width),u.$set(ee);const he={};k&2&&(he.value=A[1].height),b.$set(he);const X={};k&2&&(X.value=A[1].clearRed),m.$set(X);const ge={};k&2&&(ge.value=A[1].clearGreen),w.$set(ge);const _e={};k&2&&(_e.value=A[1].clearBlue),y.$set(_e);const we={};k&4&&(we.value=A[2].delayMs),M.$set(we);const ve={};k&4&&(ve.value=A[2].totalFrames),U.$set(ve),(!Y||k&1&&J!==(J=Ae(`container ${A[0]}`)+" svelte-843oxz"))&&d(e,"class",J)},i(A){Y||(ae(u.$$.fragment,A),ae(b.$$.fragment,A),ae(m.$$.fragment,A),ae(w.$$.fragment,A),ae(y.$$.fragment,A),ae(M.$$.fragment,A),ae(U.$$.fragment,A),Y=!0)},o(A){se(u.$$.fragment,A),se(b.$$.fragment,A),se(m.$$.fragment,A),se(w.$$.fragment,A),se(y.$$.fragment,A),se(M.$$.fragment,A),se(U.$$.fragment,A),Y=!1},d(A){A&&$(e),de(u),de(b),de(m),de(w),de(y),de(M),de(U),Z=!1,D()}}}function Fr(t,e,r){let n,s;$e(t,Ee,m=>r(1,n=m)),$e(t,Me,m=>r(2,s=m));let{class:a=""}=e;function c(m){var v;const w=(v=m.target.files)==null?void 0:v[0];w&&Ee.changeImage(w)}const o=m=>Ee.change({width:m.detail.value}),i=m=>Ee.change({height:m.detail.value}),l=m=>Ee.change({clearRed:m.detail.value}),u=m=>Ee.change({clearGreen:m.detail.value}),f=m=>Ee.change({clearBlue:m.detail.value}),b=m=>Me.change({delayMs:m.detail.value}),p=m=>Me.change({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,c,o,i,l,u,f,b,p]}class Sr extends Pe{constructor(e){super(),Oe(this,e,Fr,xr,Be,{class:0})}}function Pr(t){let e,r,n,s,a,c,o;return{c(){e=O("div"),r=ie(t[1]),n=G(),s=O("label"),a=O("input"),this.h()},l(i){e=B(i,"DIV",{class:!0});var l=C(e);r=oe(l,t[1]),n=q(l),s=B(l,"LABEL",{class:!0});var u=C(s);a=B(u,"INPUT",{class:!0,type:!0}),u.forEach($),l.forEach($),this.h()},h(){d(a,"class","toggle__checkbox svelte-1j9rfin"),d(a,"type","checkbox"),a.checked=t[0],d(s,"class","toggle__label svelte-1j9rfin"),Fe(s,"toggle__label--active",t[0]),d(e,"class","toggle svelte-1j9rfin")},m(i,l){le(i,e,l),g(e,r),g(e,n),g(e,s),g(s,a),c||(o=ze(a,"change",t[2]),c=!0)},p(i,[l]){l&2&&Re(r,i[1]),l&1&&(a.checked=i[0]),l&1&&Fe(s,"toggle__label--active",i[0])},i:Se,o:Se,d(i){i&&$(e),c=!1,o()}}}function Or(t,e,r){const n=bt();let{label:s=""}=e,{value:a=!1}=e;function c(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,c]}class Ot extends Pe{constructor(e){super(),Oe(this,e,Or,Pr,Be,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[5]=e[r],n}function Br(t){let e,r;return e=new Ot({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Ir(t){let e,r;return e=new Te({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function mt(t){let e,r,n,s;const a=[Ir,Br],c=[];function o(i,l){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=o(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,l){~e&&c[e].m(i,l),le(i,n,l),s=!0},p(i,l){let u=e;e=o(i),e===u?~e&&c[e].p(i,l):(r&&(wt(),se(c[u],1,1,()=>{c[u]=null}),yt()),~e?(r=c[e],r?r.p(i,l):(r=c[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&c[e].d(i),i&&$(n)}}}function Rr(t){let e,r,n,s=t[2].editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=mt(ft(t,s,o));const c=o=>se(a[o],1,1,()=>{a[o]=null});return{c(){e=O("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=B(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<a.length;l+=1)a[l].l(i);i.forEach($),this.h()},h(){d(e,"class",r=Ae(`container ${t[0]}`)+" svelte-1solget")},m(o,i){le(o,e,i);for(let l=0;l<a.length;l+=1)a[l].m(e,null);n=!0},p(o,[i]){if(i&14){s=o[2].editOptions;let l;for(l=0;l<s.length;l+=1){const u=ft(o,s,l);a[l]?(a[l].p(u,i),ae(a[l],1)):(a[l]=mt(u),a[l].c(),ae(a[l],1),a[l].m(e,null))}for(wt(),l=s.length;l<a.length;l+=1)c(l);yt()}(!n||i&1&&r!==(r=Ae(`container ${o[0]}`)+" svelte-1solget"))&&d(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(o){o&&$(e),Rt(a,o)}}}function kr(t,e,r){let n,s,a;$e(t,Le,i=>r(4,s=i)),$e(t,De,i=>r(2,a=i));let{class:c=""}=e;function o(i){return function(l){Le.change({[i]:l.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,o,s]}class Mr extends Pe{constructor(e){super(),Oe(this,e,kr,Rr,Be,{class:0})}}function dt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function ht(t,e){let r,n,s,a,c,o=e[4]+"",i,l,u,f;function b(){return e[3](e[4])}return{key:t,first:null,c(){r=O("button"),n=O("img"),a=G(),c=O("span"),i=ie(o),l=G(),this.h()},l(p){r=B(p,"BUTTON",{type:!0,class:!0});var m=C(r);n=B(m,"IMG",{class:!0,src:!0,alt:!0}),a=q(m),c=B(m,"SPAN",{});var _=C(c);i=oe(_,o),_.forEach($),l=q(m),m.forEach($),this.h()},h(){d(n,"class","image svelte-1l1v01j"),Ue(n.src,s=`${Je}/demo-${e[4]}.gif`)||d(n,"src",s),d(n,"alt",e[4]),d(r,"type","button"),d(r,"class","option svelte-1l1v01j"),Fe(r,"option--selected",e[4]===e[1].name),this.first=r},m(p,m){le(p,r,m),g(r,n),g(r,a),g(r,c),g(c,i),g(r,l),u||(f=ze(r,"click",b),u=!0)},p(p,m){e=p,m&2&&Fe(r,"option--selected",e[4]===e[1].name)},d(p){p&&$(r),u=!1,f()}}}function Ur(t){let e,r=[],n=new Map,s,a=We;const c=o=>o[4];for(let o=0;o<a.length;o+=1){let i=dt(t,a,o),l=c(i);n.set(l,r[o]=ht(l,i))}return{c(){e=O("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=B(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach($),this.h()},h(){d(e,"class",s=Ae(`container ${t[0]}`)+" svelte-1l1v01j")},m(o,i){le(o,e,i);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,[i]){i&6&&(a=We,r=kt(r,i,c,1,o,a,n,e,Mt,ht,null,dt)),i&1&&s!==(s=Ae(`container ${o[0]}`)+" svelte-1l1v01j")&&d(e,"class",s)},i:Se,o:Se,d(o){o&&$(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Cr(t,e,r){let n;$e(t,De,o=>r(1,n=o));let{class:s=""}=e;function a(o){o!==n.name&&De.change(o)}const c=o=>a(o);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,c]}class Dr extends Pe{constructor(e){super(),Oe(this,e,Cr,Ur,Be,{class:0})}}function vt(t){t[14]=t[15].dataUri}function pt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Lr,then:Nr,catch:jr,value:15,error:16};return tt(r=t[4],n),{c(){e=O("div"),n.block.c(),this.h()},l(s){e=B(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach($),this.h()},h(){d(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(s,a){le(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||Dt(n,t,a)},d(s){s&&$(e),n.block.d(),n.token=null,n=null}}}function jr(t){let e,r,n=t[16]+"",s;return{c(){e=O("p"),r=ie("An error has occurred: "),s=ie(n),this.h()},l(a){e=B(a,"P",{class:!0});var c=C(e);r=oe(c,"An error has occurred: "),s=oe(c,n),c.forEach($),this.h()},h(){d(e,"class","preview__error svelte-13qbjon")},m(a,c){le(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[16]+"")&&Re(s,n)},d(a){a&&$(e)}}}function Nr(t){vt(t);let e,r,n,s,a,c,o;return{c(){e=O("div"),r=O("img"),s=G(),a=O("a"),c=ie("Download"),this.h()},l(i){e=B(i,"DIV",{class:!0});var l=C(e);r=B(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach($),s=q(i),a=B(i,"A",{class:!0,download:!0,href:!0});var u=C(a);c=oe(u,"Download"),u.forEach($),this.h()},h(){d(r,"class","preview__image svelte-13qbjon"),Ue(r.src,n=t[14])||d(r,"src",n),d(r,"alt","generated gif"),d(e,"class","preview__image-container svelte-13qbjon"),d(a,"class","preview__download-button svelte-13qbjon"),d(a,"download","jumping_peter.gif"),d(a,"href",o=t[14])},m(i,l){le(i,e,l),g(e,r),le(i,s,l),le(i,a,l),g(a,c)},p(i,l){vt(i),l&16&&!Ue(r.src,n=i[14])&&d(r,"src",n),l&16&&o!==(o=i[14])&&d(a,"href",o)},d(i){i&&$(e),i&&$(s),i&&$(a)}}}function Lr(t){let e,r,n,s,a,c,o=t[5].frame+"",i,l,u=t[2].totalFrames+"",f,b,p,m,_,w;return{c(){e=O("div"),r=O("p"),n=ie("Generating..."),s=G(),a=O("p"),c=ie("["),i=ie(o),l=ie(" / "),f=ie(u),b=ie("]"),p=G(),m=O("progress"),this.h()},l(v){e=B(v,"DIV",{class:!0});var y=C(e);r=B(y,"P",{});var V=C(r);n=oe(V,"Generating..."),V.forEach($),s=q(y),a=B(y,"P",{});var M=C(a);c=oe(M,"["),i=oe(M,o),l=oe(M," / "),f=oe(M,u),b=oe(M,"]"),M.forEach($),p=q(y),m=B(y,"PROGRESS",{class:!0,max:!0}),C(m).forEach($),y.forEach($),this.h()},h(){d(m,"class","preview__progress svelte-13qbjon"),d(m,"max",_=t[2].totalFrames),m.value=w=t[5].frame,d(e,"class","preview__loading svelte-13qbjon")},m(v,y){le(v,e,y),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,l),g(a,f),g(a,b),g(e,p),g(e,m)},p(v,y){y&32&&o!==(o=v[5].frame+"")&&Re(i,o),y&4&&u!==(u=v[2].totalFrames+"")&&Re(f,u),y&4&&_!==(_=v[2].totalFrames)&&d(m,"max",_),y&32&&w!==(w=v[5].frame)&&(m.value=w)},d(v){v&&$(e)}}}function zr(t){let e,r,n,s,a,c,o,i,l,u,f,b;n=new Ot({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[4]&&pt(t);return u=new Te({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=O("main"),r=O("div"),ue(n.$$.fragment),s=G(),p&&p.c(),a=G(),c=O("div"),o=O("div"),i=O("canvas"),l=G(),ue(u.$$.fragment),this.h()},l(m){e=B(m,"MAIN",{class:!0});var _=C(e);r=B(_,"DIV",{class:!0});var w=C(r);fe(n.$$.fragment,w),w.forEach($),s=q(_),p&&p.l(_),a=q(_),c=B(_,"DIV",{class:!0});var v=C(c);o=B(v,"DIV",{class:!0});var y=C(o);i=B(y,"CANVAS",{class:!0,style:!0}),C(i).forEach($),y.forEach($),l=q(v),fe(u.$$.fragment,v),v.forEach($),_.forEach($),this.h()},h(){d(r,"class","preview__debug-input svelte-13qbjon"),d(i,"class","preview__image svelte-13qbjon"),Ut(i,"transform","scaleY(-1)"),d(o,"class","preview__image-container svelte-13qbjon"),d(c,"class","preview__container preview__container--debug svelte-13qbjon"),d(e,"class",f=Ae(`preview ${t[0]}`)+" svelte-13qbjon"),Fe(e,"preview--debug",t[1]),Fe(e,"preview--no-debug",!t[1])},m(m,_){le(m,e,_),g(e,r),me(n,r,null),g(e,s),p&&p.m(e,null),g(e,a),g(e,c),g(c,o),g(o,i),t[11](i),g(c,l),me(u,c,null),b=!0},p(m,[_]){const w={};_&2&&(w.value=m[1]),n.$set(w),!m[1]&&m[4]?p?p.p(m,_):(p=pt(m),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const v={};_&4&&(v.max=m[2].totalFrames-1),_&32&&(v.value=m[5].frame),u.$set(v),(!b||_&1&&f!==(f=Ae(`preview ${m[0]}`)+" svelte-13qbjon"))&&d(e,"class",f),(!b||_&3)&&Fe(e,"preview--debug",m[1]),(!b||_&3)&&Fe(e,"preview--no-debug",!m[1])},i(m){b||(ae(n.$$.fragment,m),ae(u.$$.fragment,m),b=!0)},o(m){se(n.$$.fragment,m),se(u.$$.fragment,m),b=!1},d(m){m&&$(e),de(n),p&&p.d(),t[11](null),de(u)}}}function Gr(t,e,r){let n,s,a,c,o;$e(t,De,v=>r(8,n=v)),$e(t,Le,v=>r(9,s=v)),$e(t,Me,v=>r(2,a=v)),$e(t,Ee,v=>r(10,c=v)),$e(t,je,v=>r(5,o=v));let i,{class:l=""}=e,u=!1,f=null;function b(){je.renderFrame().catch(v=>{throw console.error(`renderFrame failed: ${v}`),v})}function p(){r(4,f=je.animate().catch(v=>{throw console.error(`animate failed: ${v}`),v}))}Ct(()=>{je.changeCanvas(i),p()});function m(v){je.renderFrame(v.detail.value).catch(y=>console.error(`Animation failed: ${y}`))}function _(v){r(1,u=v.detail.value)}function w(v){jt[v?"unshift":"push"](()=>{i=v,r(3,i)})}return t.$$set=v=>{"class"in v&&r(0,l=v.class)},t.$$.update=()=>{t.$$.dirty&1798&&(u?b():p())},[l,u,a,i,f,o,m,_,n,s,c,w]}class qr extends Pe{constructor(e){super(),Oe(this,e,Gr,zr,Be,{class:0})}}function Vr(t){let e,r,n,s,a,c,o,i,l,u,f,b,p,m,_,w,v,y,V,M,W,U,J,Y,Z;return document.title=e=Ne,w=new Gt({props:{class:"header"}}),y=new Dr({props:{class:"animations"}}),M=new Sr({props:{class:"common-options"}}),U=new Mr({props:{class:"animation-options"}}),Y=new qr({props:{class:"preview"}}),{c(){r=O("meta"),n=O("meta"),s=O("meta"),a=O("meta"),c=O("meta"),o=O("meta"),i=O("meta"),l=O("meta"),u=O("meta"),f=O("meta"),b=O("meta"),p=O("meta"),m=G(),_=O("div"),ue(w.$$.fragment),v=G(),ue(y.$$.fragment),V=G(),ue(M.$$.fragment),W=G(),ue(U.$$.fragment),J=G(),ue(Y.$$.fragment),this.h()},l(D){const A=Nt("svelte-2dqrj",document.head);r=B(A,"META",{name:!0,content:!0,class:!0}),n=B(A,"META",{name:!0,content:!0,class:!0}),s=B(A,"META",{property:!0,content:!0,class:!0}),a=B(A,"META",{property:!0,content:!0,class:!0}),c=B(A,"META",{property:!0,content:!0,class:!0}),o=B(A,"META",{property:!0,content:!0,class:!0}),i=B(A,"META",{property:!0,content:!0,class:!0}),l=B(A,"META",{property:!0,content:!0,class:!0}),u=B(A,"META",{property:!0,content:!0,class:!0}),f=B(A,"META",{property:!0,content:!0,class:!0}),b=B(A,"META",{property:!0,content:!0,class:!0}),p=B(A,"META",{property:!0,content:!0,class:!0}),A.forEach($),m=q(D),_=B(D,"DIV",{class:!0});var k=C(_);fe(w.$$.fragment,k),v=q(k),fe(y.$$.fragment,k),V=q(k),fe(M.$$.fragment,k),W=q(k),fe(U.$$.fragment,k),J=q(k),fe(Y.$$.fragment,k),k.forEach($),this.h()},h(){d(r,"name","title"),d(r,"content",Ne),d(r,"class","svelte-z7ouxl"),d(n,"name","description"),d(n,"content",Ye),d(n,"class","svelte-z7ouxl"),d(s,"property","og:type"),d(s,"content","website"),d(s,"class","svelte-z7ouxl"),d(a,"property","og:url"),d(a,"content",gt),d(a,"class","svelte-z7ouxl"),d(c,"property","og:title"),d(c,"content",Ne),d(c,"class","svelte-z7ouxl"),d(o,"property","og:description"),d(o,"content",Ye),d(o,"class","svelte-z7ouxl"),d(i,"property","og:image"),d(i,"content",_t),d(i,"class","svelte-z7ouxl"),d(l,"property","twitter:card"),d(l,"content","summary_large_image"),d(l,"class","svelte-z7ouxl"),d(u,"property","twitter:url"),d(u,"content",gt),d(u,"class","svelte-z7ouxl"),d(f,"property","twitter:title"),d(f,"content",Ne),d(f,"class","svelte-z7ouxl"),d(b,"property","twitter:description"),d(b,"content",Ye),d(b,"class","svelte-z7ouxl"),d(p,"property","twitter:image"),d(p,"content",_t),d(p,"class","svelte-z7ouxl"),d(_,"class","grid svelte-z7ouxl")},m(D,A){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,o),g(document.head,i),g(document.head,l),g(document.head,u),g(document.head,f),g(document.head,b),g(document.head,p),le(D,m,A),le(D,_,A),me(w,_,null),g(_,v),me(y,_,null),g(_,V),me(M,_,null),g(_,W),me(U,_,null),g(_,J),me(Y,_,null),Z=!0},p(D,[A]){(!Z||A&0)&&e!==(e=Ne)&&(document.title=e)},i(D){Z||(ae(w.$$.fragment,D),ae(y.$$.fragment,D),ae(M.$$.fragment,D),ae(U.$$.fragment,D),ae(Y.$$.fragment,D),Z=!0)},o(D){se(w.$$.fragment,D),se(y.$$.fragment,D),se(M.$$.fragment,D),se(U.$$.fragment,D),se(Y.$$.fragment,D),Z=!1},d(D){$(r),$(n),$(s),$(a),$(c),$(o),$(i),$(l),$(u),$(f),$(b),$(p),D&&$(m),D&&$(_),de(w),de(y),de(M),de(U),de(Y)}}}const Ne="Jumping Peter",Ye="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",gt="https://ksmai.github.io/jumping-peter",_t="https://ksmai.github.io/jumping-peter/favicon.png";class Yr extends Pe{constructor(e){super(),Oe(this,e,null,Vr,Be,{})}}export{Yr as default};
