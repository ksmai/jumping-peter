var kt=Object.defineProperty;var Bt=(t,e,r)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var we=(t,e,r)=>(Bt(t,typeof e!="symbol"?e+"":e,r),r);import{S as Oe,i as ke,n as Be,j as O,s as q,q as ie,k,l as C,c as V,r as oe,g as A,m as d,J as Ue,K as Te,a as le,G as g,H as Pe,L as xe,M as Ge,u as Ie,N as wt,y as ue,z as fe,A as me,f as ae,b as se,B as de,I as $e,O as Se,v as bt,d as yt,P as Rt,e as et,Q as Et,R as It,T as Mt,p as Ut,o as Ct,U as tt,V as Dt,w as Nt,W as Lt}from"../chunks/index.1d64faf9.js";import{b as Qe,w as qe}from"../chunks/paths.81c6ff0a.js";function jt(t){let e,r,n,s,a,c,o,i,l,u,f,w,v;return{c(){e=O("header"),r=O("img"),s=q(),a=O("h1"),c=ie("Jumping Peter"),o=q(),i=O("p"),l=ie("generate gif emojis"),u=q(),f=O("a"),w=ie("Contribute"),this.h()},l(m){e=k(m,"HEADER",{class:!0});var _=C(e);r=k(_,"IMG",{class:!0,src:!0,alt:!0}),s=V(_),a=k(_,"H1",{class:!0});var b=C(a);c=oe(b,"Jumping Peter"),b.forEach(A),o=V(_),i=k(_,"P",{class:!0});var p=C(i);l=oe(p,"generate gif emojis"),p.forEach(A),u=V(_),f=k(_,"A",{class:!0,href:!0,target:!0,rel:!0});var y=C(f);w=oe(y,"Contribute"),y.forEach(A),_.forEach(A),this.h()},h(){d(r,"class","logo svelte-1kpylo8"),Ue(r.src,n=`${Qe}/demo-jumping.gif`)||d(r,"src",n),d(r,"alt",""),d(a,"class","title svelte-1kpylo8"),d(i,"class","subtitle svelte-1kpylo8"),d(f,"class","contribute svelte-1kpylo8"),d(f,"href","https://github.com/ksmai/jumping-peter"),d(f,"target","_blank"),d(f,"rel","noreferrer"),d(e,"class",v=Te(`header ${t[0]}`)+" svelte-1kpylo8")},m(m,_){le(m,e,_),g(e,r),g(e,s),g(e,a),g(a,c),g(e,o),g(e,i),g(i,l),g(e,u),g(e,f),g(f,w)},p(m,[_]){_&1&&v!==(v=Te(`header ${m[0]}`)+" svelte-1kpylo8")&&d(e,"class",v)},i:Pe,o:Pe,d(m){m&&A(e)}}}function Gt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class qt extends Oe{constructor(e){super(),ke(this,e,Gt,jt,Be,{class:0})}}function Je(t){return{...t,type:"slider",min:-360,max:360,step:1}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Ye(t){return{...t,type:"slider",min:0,max:1,step:.01}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function st(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Vt(t){return{...t,type:"slider",min:1,max:100,step:1}}function At(t){return{...t,type:"toggle"}}function Xt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function Ve(){return[1,0,0,1,0,0]}function Ze(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function $t(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,c,o,i,l,u]=t;t[0]=a*n-c*s,t[1]=a*s+c*n,t[2]=o*n-i*s,t[3]=o*s+i*n,t[4]=l*n-u*s,t[5]=l*s+u*n}function Re(t,e,r){t[4]+=e,t[5]+=r}function Xe(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Ce(t,e,r){return t+(e-t)*r}function zt(t){return t*Math.PI/180}const Wt="spinning",Yt={delayMs:50,totalFrames:15},Ht=[Je({name:"startAngle",default:0}),Je({name:"endAngle",default:360}),rt({name:"originX",default:0}),rt({name:"originY",default:0}),At({name:"alternates",default:!1})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:c,endAngle:o,originX:i,originY:l}=r;return[{program:n,geometry:s,getUniforms:f=>{const w=a?Math.min(f,1-f)*2:f,v=Ce(c,o,w),m=Ve();return Re(m,-i,-l),$t(m,v),Re(m,i,l),{u_transform:Xe(m)}}}]}const Jt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Ht,FrameOptions:Yt,Name:Wt,createSprites:Tt},Symbol.toStringTag,{value:"Module"})),Qt="expanding",Zt={delayMs:50,totalFrames:20},Kt=[nt({name:"minScale",default:1}),nt({name:"maxScale",default:2}),At({name:"alternates",default:!1})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternates:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=o?Math.min(l,1-l)*2:l,f=Ce(a,c,u),w=Ve();return Ze(w,f,f),{u_transform:Xe(w)}}}]}const er=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Kt,FrameOptions:Zt,Name:Qt,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),tr="extreme-speed",rr={delayMs:20,totalFrames:10},ar=[st({name:"directionX",default:-1}),st({name:"directionY",default:0})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("nine"),{directionX:a,directionY:c}=r,o=a*2,i=c*2;return[{program:n,geometry:s,getUniforms:u=>{const f=Ve(),w=Ce(0,o,u),v=Ce(0,i,u);return Re(f,w,v),{u_transform:Xe(f)}}}]}const nr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ar,FrameOptions:rr,Name:tr,createSprites:xt},Symbol.toStringTag,{value:"Module"})),sr="excited",ir={delayMs:50,totalFrames:25},or=[Je({name:"angle",default:15}),at({name:"startOffset",default:-.1}),at({name:"endOffset",default:.1}),Vt({name:"cycles",default:3})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:c}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const l=zt(a),u=Math.cos(l),f=Math.sin(l);return[{program:n,geometry:s,getUniforms:v=>{const m=v*2*c%1,_=Math.min(m,1-m)*2,b=Ce(-o*f,-i*f,_),p=Ce(o*u,i*u,_),y=Ve();return $t(y,a),Re(y,b,p),Ze(y,v>.5?-1:1,1),{u_transform:Xe(y)}}}]}const lr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:or,FrameOptions:ir,Name:sr,createSprites:St},Symbol.toStringTag,{value:"Module"})),cr="jumping",ur={delayMs:50,totalFrames:20},fr=[Ye({name:"maxOffset",default:.6}),Ye({name:"compressTime",default:.4}),Ye({name:"maxCompress",default:.3})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:c,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=Math.min(l,1-l)*2,f=Ve(),w=u/(1-c);if(w<1){const v=(1-w*w)*a*2;Re(f,0,v)}else{const v=(1-u)/c,_=1-(1-v*v)*o;Re(f,0,1),Ze(f,1/_,_),Re(f,0,-1)}return{u_transform:Xe(f)}}}]}const mr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:fr,FrameOptions:ur,Name:cr,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),We=[mr,nr,Jt,lr,er].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Xt(t.EditOptions,t.Name),defaultFrameOptions:t.FrameOptions}));function it(t,e,r){switch(r.name){case"spinning":return Tt(t,e,r);case"expanding":return Ft(t,e,r);case"extreme-speed":return xt(t,e,r);case"excited":return St(t,e,r);case"jumping":return Pt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class dr{constructor(e){we(this,"loadingUrl",null);we(this,"url",null);we(this,"texture",null);we(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const hr=function(){var t={},e=-1,r,n,s,a,c,o,i=12,l=5003,u,f=i,w,v=1<<i,m=[],_=[],b=l,p=0,y=!1,X,M,W,U=0,Q=0,H=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,D=[],$=t.LZWEncoder=function(L,x,h,P){r=L,n=x,s=h,a=Math.max(2,P)},I=function(L,x){D[Z++]=L,Z>=254&&ge(x)},ee=function(L){he(b),p=M+2,y=!0,pe(M,L)},he=function(L){for(var x=0;x<L;++x)m[x]=-1},z=t.compress=function(L,x){var h,P,te,Y,ce,J,T;for(X=L,y=!1,u=X,w=_e(u),M=1<<L-1,W=M+1,p=M+2,Z=0,Y=be(),T=0,h=b;h<65536;h*=2)++T;T=8-T,J=b,he(J),pe(M,x);e:for(;(te=be())!=e;){if(h=(te<<f)+Y,P=te<<T^Y,m[P]==h){Y=_[P];continue}else if(m[P]>=0){ce=J-P,P===0&&(ce=1);do if((P-=ce)<0&&(P+=J),m[P]==h){Y=_[P];continue e}while(m[P]>=0)}pe(Y,x),Y=te,p<v?(_[P]=p++,m[P]=h):ee(x)}pe(Y,x),pe(W,x)};t.encode=function(L){L.writeByte(a),c=r*n,o=0,z(a+1,L),L.writeByte(0)};var ge=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(D,0,Z),Z=0)},_e=function(L){return(1<<L)-1},be=function(){if(c===0)return e;--c;var L=s[o++];return L&255},pe=function(L,x){for(U&=H[Q],Q>0?U|=L<<Q:U=L,Q+=u;Q>=8;)I(U&255,x),U>>=8,Q-=8;if((p>w||y)&&(y?(w=_e(u=X),y=!1):(++u,u==f?w=v:w=_e(u))),L==W){for(;Q>0;)I(U&255,x),U>>=8,Q-=8;ge(x)}};return $.apply(this,arguments),t},pr=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,o=e-1,i=4,l=100,u=16,f=1<<u,w=10,v=10,m=f>>v,_=f<<w-v,b=e>>3,p=6,y=1<<p,X=b*y,M=30,W=10,U=1<<W,Q,H=8,Z=1<<H,D=W+H,$=1<<D,I,ee,he,z,ge=[],_e=[],be=[],pe=[],ne=t.NeuQuant=function(T,S,j){var B,R;for(I=T,ee=S,he=j,z=new Array(e),B=0;B<e;B++)z[B]=new Array(4),R=z[B],R[0]=R[1]=R[2]=(B<<i+8)/e,be[B]=f/e,_e[B]=0},L=function(){for(var T=[],S=new Array(e),j=0;j<e;j++)S[z[j][3]]=j;for(var B=0,R=0;R<e;R++){var E=S[R];T[B++]=z[E][0],T[B++]=z[E][1],T[B++]=z[E][2]}return T},x=function(){var T,S,j,B,R,E,F,N;for(F=0,N=0,T=0;T<e;T++){for(R=z[T],j=T,B=R[1],S=T+1;S<e;S++)E=z[S],E[1]<B&&(j=S,B=E[1]);if(E=z[j],T!=j&&(S=E[0],E[0]=R[0],R[0]=S,S=E[1],E[1]=R[1],R[1]=S,S=E[2],E[2]=R[2],R[2]=S,S=E[3],E[3]=R[3],R[3]=S),B!=F){for(ge[F]=N+T>>1,S=F+1;S<B;S++)ge[S]=T;F=B,N=T}}for(ge[F]=N+o>>1,S=F+1;S<256;S++)ge[S]=o},h=function(){var T,S,j,B,R,E,F,N,G,re,ye,K,ve,Ke;for(ee<c&&(he=1),Q=30+(he-1)/3,K=I,ve=0,Ke=ee,ye=ee/(3*he),re=ye/l|0,N=U,E=X,F=E>>p,F<=1&&(F=0),T=0;T<F;T++)pe[T]=N*((F*F-T*T)*Z/(F*F));for(ee<c?G=3:ee%r!==0?G=3*r:ee%n!==0?G=3*n:ee%s!==0?G=3*s:G=3*a,T=0;T<ye;)if(j=(K[ve+0]&255)<<i,B=(K[ve+1]&255)<<i,R=(K[ve+2]&255)<<i,S=ce(j,B,R),Y(N,S,j,B,R),F!==0&&te(F,S,j,B,R),ve+=G,ve>=Ke&&(ve-=ee),T++,re===0&&(re=1),T%re===0)for(N-=N/Q,E-=E/M,F=E>>p,F<=1&&(F=0),S=0;S<F;S++)pe[S]=N*((F*F-S*S)*Z/(F*F))};t.map=function(T,S,j){var B,R,E,F,N,G,re;for(N=1e3,re=-1,B=ge[S],R=B-1;B<e||R>=0;)B<e&&(G=z[B],E=G[1]-S,E>=N?B=e:(B++,E<0&&(E=-E),F=G[0]-T,F<0&&(F=-F),E+=F,E<N&&(F=G[2]-j,F<0&&(F=-F),E+=F,E<N&&(N=E,re=G[3])))),R>=0&&(G=z[R],E=S-G[1],E>=N?R=-1:(R--,E<0&&(E=-E),F=G[0]-T,F<0&&(F=-F),E+=F,E<N&&(F=G[2]-j,F<0&&(F=-F),E+=F,E<N&&(N=E,re=G[3]))));return re},t.process=function(){return h(),P(),x(),L()};var P=function(){var T;for(T=0;T<e;T++)z[T][0]>>=i,z[T][1]>>=i,z[T][2]>>=i,z[T][3]=T},te=function(T,S,j,B,R){var E,F,N,G,re,ye,K;for(N=S-T,N<-1&&(N=-1),G=S+T,G>e&&(G=e),E=S+1,F=S-1,ye=1;E<G||F>N;){if(re=pe[ye++],E<G){K=z[E++];try{K[0]-=re*(K[0]-j)/$,K[1]-=re*(K[1]-B)/$,K[2]-=re*(K[2]-R)/$}catch{}}if(F>N){K=z[F--];try{K[0]-=re*(K[0]-j)/$,K[1]-=re*(K[1]-B)/$,K[2]-=re*(K[2]-R)/$}catch{}}}},Y=function(T,S,j,B,R){var E=z[S];E[0]-=T*(E[0]-j)/U,E[1]-=T*(E[1]-B)/U,E[2]-=T*(E[2]-R)/U},ce=function(T,S,j){var B,R,E,F,N,G,re,ye,K,ve;for(ye=~(1<<31),K=ye,G=-1,re=G,B=0;B<e;B++)ve=z[B],R=ve[0]-T,R<0&&(R=-R),E=ve[1]-S,E<0&&(E=-E),R+=E,E=ve[2]-j,E<0&&(E=-E),R+=E,R<ye&&(ye=R,G=B),F=R-(_e[B]>>u-i),F<K&&(K=F,re=B),N=be[B]>>v,be[B]-=N,_e[B]+=N<<w;return be[G]+=m,_e[G]-=_,re};return ne.apply(this,arguments),t},vr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var x="",h=this.bin.length,P=0;P<h;P++)x+=e[this.bin[P]];return x},r.prototype.writeByte=function(x){this.bin.push(x)},r.prototype.writeUTFBytes=function(x){for(var h=x.length,P=0;P<h;P++)this.writeByte(x.charCodeAt(P))},r.prototype.writeBytes=function(x,h,P){for(var te=P||x.length,Y=h||0;Y<te;Y++)this.writeByte(x[Y])};var n={},s,a,c=null,o,i=-1,l=0,u=!1,f,w,v,m,_,b,p=[],y=7,X=-1,M=!1,W=!0,U=!1,Q=10,H="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(h){l=Math.round(h/10)},n.setDispose=function(h){h>=0&&(X=h)},n.setRepeat=function(h){h>=0&&(i=h)},n.setTransparent=function(h){c=h},n.setComment=function(h){H=h},n.addFrame=function(h,P){if(h===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?h instanceof ImageData?(w=h.data,(!sizeset||s!=h.width||a!=h.height)&&D(h.width,h.height)):h instanceof Uint8ClampedArray?h.length==s*a*4?w=h:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(w=h.getImageData(0,0,h.canvas.width,h.canvas.height).data,U||D(h.canvas.width,h.canvas.height)),ee(),$(),W&&(_e(),pe(),i>=0&&be()),he(),H!==""&&z(),ge(),W||pe(),L(),W=!1}catch{te=!1}return te},n.download=function(h){if(f===null||M==!1)console.log("Please call start method and add frames and call finish method before calling download");else{h=h!==void 0?h.endsWith(".gif")?h:h+".gif":"download.gif";var P=document.createElement("a");P.download=h,P.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!u)return!1;var h=!0;u=!1;try{f.writeByte(59),M=!0}catch{h=!1}return h};var Z=function(){o=0,w=null,v=null,m=null,b=null,M=!1,W=!0};n.setFrameRate=function(h){h!=15&&(l=Math.round(100/h))},n.setQuality=function(h){h<1&&(h=1),Q=h};var D=n.setSize=function(h,P){u&&!W||(s=h,a=P,s<1&&(s=320),a<1&&(a=240),U=!0)};n.start=function(){Z();var h=!0;M=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{h=!1}return u=h},n.cont=function(){Z();var h=!0;return M=!1,f=new r,u=h};var $=function(){var h=v.length,P=h/3;m=[];var te=new pr(v,h,Q);b=te.process();for(var Y=0,ce=0;ce<P;ce++){var J=te.map(v[Y++]&255,v[Y++]&255,v[Y++]&255);p[J]=!0,m[ce]=J}v=null,_=8,y=7,c!==null&&(o=I(c))},I=function(h){if(b===null)return-1;for(var P=(h&16711680)>>16,te=(h&65280)>>8,Y=h&255,ce=0,J=256*256*256,T=b.length,S=0;S<T;){var j=P-(b[S++]&255),B=te-(b[S++]&255),R=Y-(b[S]&255),E=j*j+B*B+R*R,F=S/3;p[F]&&E<J&&(J=E,ce=F),S++}return ce},ee=function(){var h=s,P=a;v=[];for(var te=w,Y=0,ce=0;ce<P;ce++)for(var J=0;J<h;J++){var T=ce*h*4+J*4;v[Y++]=te[T],v[Y++]=te[T+1],v[Y++]=te[T+2]}},he=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var h,P;c===null?(h=0,P=0):(h=1,P=2),X>=0&&(P=X&7),P<<=2,f.writeByte(0|P|0|h),ne(l),f.writeByte(o),f.writeByte(0)},z=function(){f.writeByte(33),f.writeByte(254),f.writeByte(H.length),f.writeUTFBytes(H),f.writeByte(0)},ge=function(){f.writeByte(44),ne(0),ne(0),ne(s),ne(a),W?f.writeByte(0):f.writeByte(128|y)},_e=function(){ne(s),ne(a),f.writeByte(240|y),f.writeByte(0),f.writeByte(0)},be=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),ne(i),f.writeByte(0)},pe=function(){f.writeBytes(b);for(var h=3*256-b.length,P=0;P<h;P++)f.writeByte(0)},ne=function(h){f.writeByte(h&255),f.writeByte(h>>8&255)},L=function(){var h=new hr(s,a,m,_);h.encode(f)};return n.stream=function(){return f},n.setProperties=function(h,P){u=h,W=P},n},Ee={a_position:0,a_texCoords:1},ot={default:{vertex:`#version 300 es

layout(location = ${Ee.a_position}) in vec2 a_position;
layout(location = ${Ee.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class gr{constructor(e){we(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:wr(this.gl,ot[e].vertex,ot[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function _r(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function wr(t,e,r){const n=lt(t,t.VERTEX_SHADER,e);let s;try{s=lt(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function lt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ct(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,c,o;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),c!==i.geometry&&(t.bindVertexArray(i.geometry.vao),c=i.geometry),o!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),o=n);const l={u_image:n.unit,...i.getUniforms(e)};_r(t,i.program,l),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}const br={full(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(Ee.a_position),t.vertexAttribPointer(Ee.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(Ee.a_texCoords),t.vertexAttribPointer(Ee.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}},nine(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-3,-3,0,3,3,-3,3,3,-3,3,0,0,3,3,3,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(Ee.a_position),t.vertexAttribPointer(Ee.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(Ee.a_texCoords),t.vertexAttribPointer(Ee.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}};class yr{constructor(e){we(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=br[e](this.gl)),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class Er{constructor(e){we(this,"gl");we(this,"programFactory");we(this,"geometryFactory");we(this,"texture");we(this,"queue",[]);we(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new gr(this.gl),this.geometryFactory=new yr(this.gl),this.texture=new dr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new vr;if(a.setRepeat(0),a.setDelay(e.frame.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:it(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:it(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let o=0;o<this.queue.length-1;++o)this.queue[o].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const c=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")ct(this.gl,a/r.frame.totalFrames,s,this.texture,c),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:o,sprites:i,callback:l}=this.queue[0];ct(this.gl,a/r.frame.totalFrames,i,this.texture,c),l(a);const u=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,u),o.addFrame(u,!0),o.setTransparent(16777215),a===r.frame.totalFrames-1){o.finish();const f=o.stream().getData(),w="data:image/gif;base64,"+window.btoa(f);n({dataUri:w}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const De=function(){const{subscribe:t,update:e}=qe(We[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=We.find(c=>c.name===n);return a||s})}}}(),Ae=function(){const t=`${Qe}/favicon.png`,{subscribe:e,update:r}=qe({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.url!==t&&URL.revokeObjectURL(c.url),{...c,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Me=function(){const{subscribe:t,update:e}=qe(void 0,n=>De.subscribe(a=>{n(a.defaultFrameOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),je=function(){const{subscribe:t,update:e}=qe(void 0,n=>De.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),Ne=function(){const t=qe({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new Er(c),running:!1,frame:0}})}function s(){const{animator:c}=xe(t);return c?(r(o=>({...o,running:!0,frame:0})),c.animate({image:xe(Ae),frame:xe(Me),animation:xe(je)},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:o,frame:i}=xe(t);if(!o)return Promise.reject("Animator has not been created");let l;typeof c>"u"?l=i:l=c;const u=xe(Me);return l>=u.totalFrames&&(l=u.totalFrames-1),r(f=>({...f,frame:l,running:!0})),o.renderFrame({image:xe(Ae),frame:u,animation:xe(je)},l).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ut(t){let e,r,n,s,a,c;return{c(){e=O("label"),r=ie(t[1]),n=q(),s=O("input"),this.h()},l(o){e=k(o,"LABEL",{class:!0});var i=C(e);r=oe(i,t[1]),n=V(i),s=k(i,"INPUT",{class:!0,type:!0}),i.forEach(A),this.h()},h(){d(s,"class","slider__text-input svelte-xvphrk"),d(s,"type","text"),s.value=t[0],d(e,"class","slider__label svelte-xvphrk")},m(o,i){le(o,e,i),g(e,r),g(e,n),g(e,s),a||(c=Ge(s,"input",t[5]),a=!0)},p(o,i){i&2&&Ie(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&A(e),a=!1,c()}}}function Ar(t){let e,r,n,s,a=ze(t[2])+"",c,o,i,l,u,f,w=ze(t[3])+"",v,m,_,b=t[1]&&ut(t);return{c(){e=O("div"),b&&b.c(),r=q(),n=O("div"),s=O("span"),c=ie(a),o=q(),i=O("div"),l=O("input"),u=q(),f=O("span"),v=ie(w),this.h()},l(p){e=k(p,"DIV",{class:!0});var y=C(e);b&&b.l(y),r=V(y),n=k(y,"DIV",{class:!0});var X=C(n);s=k(X,"SPAN",{class:!0});var M=C(s);c=oe(M,a),M.forEach(A),o=V(X),i=k(X,"DIV",{class:!0});var W=C(i);l=k(W,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),W.forEach(A),u=V(X),f=k(X,"SPAN",{class:!0});var U=C(f);v=oe(U,w),U.forEach(A),X.forEach(A),y.forEach(A),this.h()},h(){d(s,"class","slider__range slider__range--min svelte-xvphrk"),d(l,"class","slider__input svelte-xvphrk"),d(l,"type","range"),d(l,"min",t[2]),d(l,"max",t[3]),d(l,"step",t[4]),l.value=t[0],d(i,"class","slider__input-container svelte-xvphrk"),d(f,"class","slider__range slider__range--max svelte-xvphrk"),d(n,"class","slider__container svelte-xvphrk"),d(e,"class","slider")},m(p,y){le(p,e,y),b&&b.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,o),g(n,i),g(i,l),g(n,u),g(n,f),g(f,v),m||(_=Ge(l,"input",t[5]),m=!0)},p(p,[y]){p[1]?b?b.p(p,y):(b=ut(p),b.c(),b.m(e,r)):b&&(b.d(1),b=null),y&4&&a!==(a=ze(p[2])+"")&&Ie(c,a),y&4&&d(l,"min",p[2]),y&8&&d(l,"max",p[3]),y&16&&d(l,"step",p[4]),y&1&&(l.value=p[0]),y&8&&w!==(w=ze(p[3])+"")&&Ie(v,w)},i:Pe,o:Pe,d(p){p&&A(e),b&&b.d(),m=!1,_()}}}function ze(t){return t.toFixed(2).replace(/\.?0+$/,"")}function $r(t,e,r){const n=wt();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:o=1}=e,{value:i=c<a?a:(c-a)/2}=e;function l(u){const f=u.target,w=parseFloat(f.value);Number.isNaN(w)||(r(0,i=w),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,c=u.max),"step"in u&&r(4,o=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,c,o,l]}class Fe extends Oe{constructor(e){super(),ke(this,e,$r,Ar,Be,{label:1,min:2,max:3,step:4,value:0})}}function Tr(t){let e,r,n,s,a,c,o,i,l,u,f,w,v,m,_,b,p,y,X,M,W,U,Q,H,Z,D;return u=new Fe({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]),w=new Fe({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),w.$on("input",t[5]),m=new Fe({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),b=new Fe({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),b.$on("input",t[7]),y=new Fe({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),y.$on("input",t[8]),M=new Fe({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].delayMs}}),M.$on("input",t[9]),U=new Fe({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].totalFrames}}),U.$on("input",t[10]),{c(){e=O("aside"),r=O("label"),n=ie(`Upload image

    `),s=O("input"),a=q(),c=O("div"),o=O("img"),l=q(),ue(u.$$.fragment),f=q(),ue(w.$$.fragment),v=q(),ue(m.$$.fragment),_=q(),ue(b.$$.fragment),p=q(),ue(y.$$.fragment),X=q(),ue(M.$$.fragment),W=q(),ue(U.$$.fragment),this.h()},l($){e=k($,"ASIDE",{class:!0});var I=C(e);r=k(I,"LABEL",{class:!0});var ee=C(r);n=oe(ee,`Upload image

    `),s=k(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=V(ee),c=k(ee,"DIV",{class:!0});var he=C(c);o=k(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach(A),ee.forEach(A),l=V(I),fe(u.$$.fragment,I),f=V(I),fe(w.$$.fragment,I),v=V(I),fe(m.$$.fragment,I),_=V(I),fe(b.$$.fragment,I),p=V(I),fe(y.$$.fragment,I),X=V(I),fe(M.$$.fragment,I),W=V(I),fe(U.$$.fragment,I),I.forEach(A),this.h()},h(){d(s,"class","image__input svelte-1wsjlr5"),d(s,"type","file"),d(s,"accept","image/*"),d(o,"class","image__preview svelte-1wsjlr5"),Ue(o.src,i=t[1].url)||d(o,"src",i),d(o,"alt","source"),d(c,"class","image__container svelte-1wsjlr5"),d(r,"class","image svelte-1wsjlr5"),d(e,"class",Q=Te(`container ${t[0]}`)+" svelte-1wsjlr5")},m($,I){le($,e,I),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,o),g(e,l),me(u,e,null),g(e,f),me(w,e,null),g(e,v),me(m,e,null),g(e,_),me(b,e,null),g(e,p),me(y,e,null),g(e,X),me(M,e,null),g(e,W),me(U,e,null),H=!0,Z||(D=Ge(s,"input",t[3]),Z=!0)},p($,[I]){(!H||I&2&&!Ue(o.src,i=$[1].url))&&d(o,"src",i);const ee={};I&2&&(ee.value=$[1].width),u.$set(ee);const he={};I&2&&(he.value=$[1].height),w.$set(he);const z={};I&2&&(z.value=$[1].clearRed),m.$set(z);const ge={};I&2&&(ge.value=$[1].clearGreen),b.$set(ge);const _e={};I&2&&(_e.value=$[1].clearBlue),y.$set(_e);const be={};I&4&&(be.value=$[2].delayMs),M.$set(be);const pe={};I&4&&(pe.value=$[2].totalFrames),U.$set(pe),(!H||I&1&&Q!==(Q=Te(`container ${$[0]}`)+" svelte-1wsjlr5"))&&d(e,"class",Q)},i($){H||(ae(u.$$.fragment,$),ae(w.$$.fragment,$),ae(m.$$.fragment,$),ae(b.$$.fragment,$),ae(y.$$.fragment,$),ae(M.$$.fragment,$),ae(U.$$.fragment,$),H=!0)},o($){se(u.$$.fragment,$),se(w.$$.fragment,$),se(m.$$.fragment,$),se(b.$$.fragment,$),se(y.$$.fragment,$),se(M.$$.fragment,$),se(U.$$.fragment,$),H=!1},d($){$&&A(e),de(u),de(w),de(m),de(b),de(y),de(M),de(U),Z=!1,D()}}}function Fr(t,e,r){let n,s;$e(t,Ae,m=>r(1,n=m)),$e(t,Me,m=>r(2,s=m));let{class:a=""}=e;function c(m){var p;const b=(p=m.target.files)==null?void 0:p[0];b&&Ae.changeImage(b)}const o=m=>Ae.change({width:m.detail.value}),i=m=>Ae.change({height:m.detail.value}),l=m=>Ae.change({clearRed:m.detail.value}),u=m=>Ae.change({clearGreen:m.detail.value}),f=m=>Ae.change({clearBlue:m.detail.value}),w=m=>Me.change({delayMs:m.detail.value}),v=m=>Me.change({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,c,o,i,l,u,f,w,v]}class xr extends Oe{constructor(e){super(),ke(this,e,Fr,Tr,Be,{class:0})}}function Sr(t){let e,r,n,s,a,c,o;return{c(){e=O("div"),r=ie(t[1]),n=q(),s=O("label"),a=O("input"),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=C(e);r=oe(l,t[1]),n=V(l),s=k(l,"LABEL",{class:!0});var u=C(s);a=k(u,"INPUT",{class:!0,type:!0}),u.forEach(A),l.forEach(A),this.h()},h(){d(a,"class","toggle__checkbox svelte-1j9rfin"),d(a,"type","checkbox"),a.checked=t[0],d(s,"class","toggle__label svelte-1j9rfin"),Se(s,"toggle__label--active",t[0]),d(e,"class","toggle svelte-1j9rfin")},m(i,l){le(i,e,l),g(e,r),g(e,n),g(e,s),g(s,a),c||(o=Ge(a,"change",t[2]),c=!0)},p(i,[l]){l&2&&Ie(r,i[1]),l&1&&(a.checked=i[0]),l&1&&Se(s,"toggle__label--active",i[0])},i:Pe,o:Pe,d(i){i&&A(e),c=!1,o()}}}function Pr(t,e,r){const n=wt();let{label:s=""}=e,{value:a=!1}=e;function c(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,c]}class Ot extends Oe{constructor(e){super(),ke(this,e,Pr,Sr,Be,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[5]=e[r],n}function Or(t){let e,r;return e=new Ot({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function kr(t){let e,r;return e=new Fe({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function mt(t){let e,r,n,s;const a=[kr,Or],c=[];function o(i,l){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=o(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,l){~e&&c[e].m(i,l),le(i,n,l),s=!0},p(i,l){let u=e;e=o(i),e===u?~e&&c[e].p(i,l):(r&&(bt(),se(c[u],1,1,()=>{c[u]=null}),yt()),~e?(r=c[e],r?r.p(i,l):(r=c[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&c[e].d(i),i&&A(n)}}}function Br(t){let e,r,n,s=t[2].editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=mt(ft(t,s,o));const c=o=>se(a[o],1,1,()=>{a[o]=null});return{c(){e=O("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=k(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<a.length;l+=1)a[l].l(i);i.forEach(A),this.h()},h(){d(e,"class",r=Te(`container ${t[0]}`)+" svelte-1solget")},m(o,i){le(o,e,i);for(let l=0;l<a.length;l+=1)a[l].m(e,null);n=!0},p(o,[i]){if(i&14){s=o[2].editOptions;let l;for(l=0;l<s.length;l+=1){const u=ft(o,s,l);a[l]?(a[l].p(u,i),ae(a[l],1)):(a[l]=mt(u),a[l].c(),ae(a[l],1),a[l].m(e,null))}for(bt(),l=s.length;l<a.length;l+=1)c(l);yt()}(!n||i&1&&r!==(r=Te(`container ${o[0]}`)+" svelte-1solget"))&&d(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(o){o&&A(e),Rt(a,o)}}}function Rr(t,e,r){let n,s,a;$e(t,je,i=>r(4,s=i)),$e(t,De,i=>r(2,a=i));let{class:c=""}=e;function o(i){return function(l){je.change({[i]:l.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,o,s]}class Ir extends Oe{constructor(e){super(),ke(this,e,Rr,Br,Be,{class:0})}}function dt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function ht(t,e){let r,n,s,a,c,o=e[4]+"",i,l,u,f;function w(){return e[3](e[4])}return{key:t,first:null,c(){r=O("button"),n=O("img"),a=q(),c=O("span"),i=ie(o),l=q(),this.h()},l(v){r=k(v,"BUTTON",{type:!0,class:!0});var m=C(r);n=k(m,"IMG",{class:!0,src:!0,alt:!0}),a=V(m),c=k(m,"SPAN",{});var _=C(c);i=oe(_,o),_.forEach(A),l=V(m),m.forEach(A),this.h()},h(){d(n,"class","image svelte-18ktnr0"),Ue(n.src,s=`${Qe}/demo-${e[4]}.gif`)||d(n,"src",s),d(n,"alt",e[4]),d(r,"type","button"),d(r,"class","option svelte-18ktnr0"),Se(r,"option--selected",e[4]===e[1].name),this.first=r},m(v,m){le(v,r,m),g(r,n),g(r,a),g(r,c),g(c,i),g(r,l),u||(f=Ge(r,"click",w),u=!0)},p(v,m){e=v,m&2&&Se(r,"option--selected",e[4]===e[1].name)},d(v){v&&A(r),u=!1,f()}}}function Mr(t){let e,r=[],n=new Map,s,a=We;const c=o=>o[4];for(let o=0;o<a.length;o+=1){let i=dt(t,a,o),l=c(i);n.set(l,r[o]=ht(l,i))}return{c(){e=O("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=k(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach(A),this.h()},h(){d(e,"class",s=Te(`container ${t[0]}`)+" svelte-18ktnr0")},m(o,i){le(o,e,i);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,[i]){i&6&&(a=We,r=It(r,i,c,1,o,a,n,e,Mt,ht,null,dt)),i&1&&s!==(s=Te(`container ${o[0]}`)+" svelte-18ktnr0")&&d(e,"class",s)},i:Pe,o:Pe,d(o){o&&A(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Ur(t,e,r){let n;$e(t,De,o=>r(1,n=o));let{class:s=""}=e;function a(o){o!==n.name&&De.change(o)}const c=o=>a(o);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,c]}class Cr extends Oe{constructor(e){super(),ke(this,e,Ur,Mr,Be,{class:0})}}function pt(t){t[14]=t[15].dataUri}function vt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Lr,then:Nr,catch:Dr,value:15,error:16};return tt(r=t[4],n),{c(){e=O("div"),n.block.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach(A),this.h()},h(){d(e,"class","preview__container preview__container--no-debug svelte-3l21ea")},m(s,a){le(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||Dt(n,t,a)},d(s){s&&A(e),n.block.d(),n.token=null,n=null}}}function Dr(t){let e,r,n=t[16]+"",s;return{c(){e=O("p"),r=ie("An error has occurred: "),s=ie(n),this.h()},l(a){e=k(a,"P",{class:!0});var c=C(e);r=oe(c,"An error has occurred: "),s=oe(c,n),c.forEach(A),this.h()},h(){d(e,"class","preview__error svelte-3l21ea")},m(a,c){le(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[16]+"")&&Ie(s,n)},d(a){a&&A(e)}}}function Nr(t){pt(t);let e,r,n,s,a,c,o;return{c(){e=O("div"),r=O("img"),s=q(),a=O("a"),c=ie("Download"),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=C(e);r=k(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(A),s=V(i),a=k(i,"A",{class:!0,download:!0,href:!0});var u=C(a);c=oe(u,"Download"),u.forEach(A),this.h()},h(){d(r,"class","preview__image svelte-3l21ea"),Ue(r.src,n=t[14])||d(r,"src",n),d(r,"alt","generated gif"),d(e,"class","preview__image-container svelte-3l21ea"),d(a,"class","preview__download-button svelte-3l21ea"),d(a,"download","jumping_peter.gif"),d(a,"href",o=t[14])},m(i,l){le(i,e,l),g(e,r),le(i,s,l),le(i,a,l),g(a,c)},p(i,l){pt(i),l&16&&!Ue(r.src,n=i[14])&&d(r,"src",n),l&16&&o!==(o=i[14])&&d(a,"href",o)},d(i){i&&A(e),i&&A(s),i&&A(a)}}}function Lr(t){let e,r,n,s,a,c,o=t[5].frame+"",i,l,u=t[2].totalFrames+"",f,w,v,m,_,b;return{c(){e=O("div"),r=O("p"),n=ie("Generating..."),s=q(),a=O("p"),c=ie("["),i=ie(o),l=ie(" / "),f=ie(u),w=ie("]"),v=q(),m=O("progress"),this.h()},l(p){e=k(p,"DIV",{class:!0});var y=C(e);r=k(y,"P",{});var X=C(r);n=oe(X,"Generating..."),X.forEach(A),s=V(y),a=k(y,"P",{});var M=C(a);c=oe(M,"["),i=oe(M,o),l=oe(M," / "),f=oe(M,u),w=oe(M,"]"),M.forEach(A),v=V(y),m=k(y,"PROGRESS",{class:!0,max:!0}),C(m).forEach(A),y.forEach(A),this.h()},h(){d(m,"class","preview__progress svelte-3l21ea"),d(m,"max",_=t[2].totalFrames),m.value=b=t[5].frame,d(e,"class","preview__loading svelte-3l21ea")},m(p,y){le(p,e,y),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,l),g(a,f),g(a,w),g(e,v),g(e,m)},p(p,y){y&32&&o!==(o=p[5].frame+"")&&Ie(i,o),y&4&&u!==(u=p[2].totalFrames+"")&&Ie(f,u),y&4&&_!==(_=p[2].totalFrames)&&d(m,"max",_),y&32&&b!==(b=p[5].frame)&&(m.value=b)},d(p){p&&A(e)}}}function jr(t){let e,r,n,s,a,c,o,i,l,u,f,w;n=new Ot({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let v=!t[1]&&t[4]&&vt(t);return u=new Fe({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=O("main"),r=O("div"),ue(n.$$.fragment),s=q(),v&&v.c(),a=q(),c=O("div"),o=O("div"),i=O("canvas"),l=q(),ue(u.$$.fragment),this.h()},l(m){e=k(m,"MAIN",{class:!0});var _=C(e);r=k(_,"DIV",{class:!0});var b=C(r);fe(n.$$.fragment,b),b.forEach(A),s=V(_),v&&v.l(_),a=V(_),c=k(_,"DIV",{class:!0});var p=C(c);o=k(p,"DIV",{class:!0});var y=C(o);i=k(y,"CANVAS",{class:!0,style:!0}),C(i).forEach(A),y.forEach(A),l=V(p),fe(u.$$.fragment,p),p.forEach(A),_.forEach(A),this.h()},h(){d(r,"class","preview__debug-input svelte-3l21ea"),d(i,"class","preview__image svelte-3l21ea"),Ut(i,"transform","scaleY(-1)"),d(o,"class","preview__image-container svelte-3l21ea"),d(c,"class","preview__container preview__container--debug svelte-3l21ea"),d(e,"class",f=Te(`preview ${t[0]}`)+" svelte-3l21ea"),Se(e,"preview--debug",t[1]),Se(e,"preview--no-debug",!t[1])},m(m,_){le(m,e,_),g(e,r),me(n,r,null),g(e,s),v&&v.m(e,null),g(e,a),g(e,c),g(c,o),g(o,i),t[11](i),g(c,l),me(u,c,null),w=!0},p(m,[_]){const b={};_&2&&(b.value=m[1]),n.$set(b),!m[1]&&m[4]?v?v.p(m,_):(v=vt(m),v.c(),v.m(e,a)):v&&(v.d(1),v=null);const p={};_&4&&(p.max=m[2].totalFrames-1),_&32&&(p.value=m[5].frame),u.$set(p),(!w||_&1&&f!==(f=Te(`preview ${m[0]}`)+" svelte-3l21ea"))&&d(e,"class",f),(!w||_&3)&&Se(e,"preview--debug",m[1]),(!w||_&3)&&Se(e,"preview--no-debug",!m[1])},i(m){w||(ae(n.$$.fragment,m),ae(u.$$.fragment,m),w=!0)},o(m){se(n.$$.fragment,m),se(u.$$.fragment,m),w=!1},d(m){m&&A(e),de(n),v&&v.d(),t[11](null),de(u)}}}function Gr(t,e,r){let n,s,a,c,o;$e(t,De,p=>r(8,n=p)),$e(t,je,p=>r(9,s=p)),$e(t,Me,p=>r(2,a=p)),$e(t,Ae,p=>r(10,c=p)),$e(t,Ne,p=>r(5,o=p));let i,{class:l=""}=e,u=!1,f=null;function w(){Ne.renderFrame().catch(p=>{throw console.error(`renderFrame failed: ${p}`),p})}function v(){r(4,f=Ne.animate().catch(p=>{throw console.error(`animate failed: ${p}`),p}))}Ct(()=>{Ne.changeCanvas(i),v()});function m(p){Ne.renderFrame(p.detail.value).catch(y=>console.error(`Animation failed: ${y}`))}function _(p){r(1,u=p.detail.value)}function b(p){Nt[p?"unshift":"push"](()=>{i=p,r(3,i)})}return t.$$set=p=>{"class"in p&&r(0,l=p.class)},t.$$.update=()=>{t.$$.dirty&1798&&(u?w():v())},[l,u,a,i,f,o,m,_,n,s,c,b]}class qr extends Oe{constructor(e){super(),ke(this,e,Gr,jr,Be,{class:0})}}function Vr(t){let e,r,n,s,a,c,o,i,l,u,f,w,v,m,_,b,p,y,X,M,W,U,Q,H,Z;return document.title=e=Le,b=new qt({props:{class:"header"}}),y=new Cr({props:{class:"animations"}}),M=new xr({props:{class:"common-options"}}),U=new Ir({props:{class:"animation-options"}}),H=new qr({props:{class:"preview"}}),{c(){r=O("meta"),n=O("meta"),s=O("meta"),a=O("meta"),c=O("meta"),o=O("meta"),i=O("meta"),l=O("meta"),u=O("meta"),f=O("meta"),w=O("meta"),v=O("meta"),m=q(),_=O("div"),ue(b.$$.fragment),p=q(),ue(y.$$.fragment),X=q(),ue(M.$$.fragment),W=q(),ue(U.$$.fragment),Q=q(),ue(H.$$.fragment),this.h()},l(D){const $=Lt("svelte-2dqrj",document.head);r=k($,"META",{name:!0,content:!0,class:!0}),n=k($,"META",{name:!0,content:!0,class:!0}),s=k($,"META",{property:!0,content:!0,class:!0}),a=k($,"META",{property:!0,content:!0,class:!0}),c=k($,"META",{property:!0,content:!0,class:!0}),o=k($,"META",{property:!0,content:!0,class:!0}),i=k($,"META",{property:!0,content:!0,class:!0}),l=k($,"META",{property:!0,content:!0,class:!0}),u=k($,"META",{property:!0,content:!0,class:!0}),f=k($,"META",{property:!0,content:!0,class:!0}),w=k($,"META",{property:!0,content:!0,class:!0}),v=k($,"META",{property:!0,content:!0,class:!0}),$.forEach(A),m=V(D),_=k(D,"DIV",{class:!0});var I=C(_);fe(b.$$.fragment,I),p=V(I),fe(y.$$.fragment,I),X=V(I),fe(M.$$.fragment,I),W=V(I),fe(U.$$.fragment,I),Q=V(I),fe(H.$$.fragment,I),I.forEach(A),this.h()},h(){d(r,"name","title"),d(r,"content",Le),d(r,"class","svelte-r12qw"),d(n,"name","description"),d(n,"content",He),d(n,"class","svelte-r12qw"),d(s,"property","og:type"),d(s,"content","website"),d(s,"class","svelte-r12qw"),d(a,"property","og:url"),d(a,"content",gt),d(a,"class","svelte-r12qw"),d(c,"property","og:title"),d(c,"content",Le),d(c,"class","svelte-r12qw"),d(o,"property","og:description"),d(o,"content",He),d(o,"class","svelte-r12qw"),d(i,"property","og:image"),d(i,"content",_t),d(i,"class","svelte-r12qw"),d(l,"property","twitter:card"),d(l,"content","summary_large_image"),d(l,"class","svelte-r12qw"),d(u,"property","twitter:url"),d(u,"content",gt),d(u,"class","svelte-r12qw"),d(f,"property","twitter:title"),d(f,"content",Le),d(f,"class","svelte-r12qw"),d(w,"property","twitter:description"),d(w,"content",He),d(w,"class","svelte-r12qw"),d(v,"property","twitter:image"),d(v,"content",_t),d(v,"class","svelte-r12qw"),d(_,"class","grid svelte-r12qw")},m(D,$){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,o),g(document.head,i),g(document.head,l),g(document.head,u),g(document.head,f),g(document.head,w),g(document.head,v),le(D,m,$),le(D,_,$),me(b,_,null),g(_,p),me(y,_,null),g(_,X),me(M,_,null),g(_,W),me(U,_,null),g(_,Q),me(H,_,null),Z=!0},p(D,[$]){(!Z||$&0)&&e!==(e=Le)&&(document.title=e)},i(D){Z||(ae(b.$$.fragment,D),ae(y.$$.fragment,D),ae(M.$$.fragment,D),ae(U.$$.fragment,D),ae(H.$$.fragment,D),Z=!0)},o(D){se(b.$$.fragment,D),se(y.$$.fragment,D),se(M.$$.fragment,D),se(U.$$.fragment,D),se(H.$$.fragment,D),Z=!1},d(D){A(r),A(n),A(s),A(a),A(c),A(o),A(i),A(l),A(u),A(f),A(w),A(v),D&&A(m),D&&A(_),de(b),de(y),de(M),de(U),de(H)}}}const Le="Jumping Peter",He="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",gt="https://ksmai.github.io/jumping-peter",_t="https://ksmai.github.io/jumping-peter/favicon.png";class Yr extends Oe{constructor(e){super(),ke(this,e,null,Vr,Be,{})}}export{Yr as default};
