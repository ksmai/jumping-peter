var tu=Object.defineProperty;var nu=(xe,fe,we)=>fe in xe?tu(xe,fe,{enumerable:!0,configurable:!0,writable:!0,value:we}):xe[fe]=we;var N=(xe,fe,we)=>(nu(xe,typeof fe!="symbol"?fe+"":fe,we),we);import{S as V,i as H,n as Y,j as S,s as L,q as X,k as P,l as j,c as M,r as z,g as _,m as $,J as Ce,K as ue,a as k,G as y,H as ce,L as ze,M as ru,N as me,u as oe,f as E,v as ct,b as T,d as mt,O as au,P as Ge,C as ou,D as iu,E as su,F as lu,Q as uu,R as Mn,y as A,z as C,A as F,B as O,I as Z,T as ye,e as ke,U as Sn,V as cu,W as mu,p as fu,o as pu,X as Pn,Y as gu,w as du,Z as hu}from"../chunks/index.a9aa9141.js";import{b as ft,w as pt,d as $u}from"../chunks/paths.ea846259.js";let kn,vu=(async()=>{function xe(t){let e,a,r,n,o,s,i,l,u,c,p,h,m;return{c(){e=S("header"),a=S("img"),n=L(),o=S("h1"),s=X("Jumping Peter"),i=L(),l=S("p"),u=X("generate gif emojis"),c=L(),p=S("a"),h=X("Contribute"),this.h()},l(d){e=P(d,"HEADER",{class:!0});var f=j(e);a=P(f,"IMG",{class:!0,src:!0,alt:!0}),n=M(f),o=P(f,"H1",{class:!0});var v=j(o);s=z(v,"Jumping Peter"),v.forEach(_),i=M(f),l=P(f,"P",{class:!0});var w=j(l);u=z(w,"generate gif emojis"),w.forEach(_),c=M(f),p=P(f,"A",{class:!0,href:!0,target:!0,rel:!0});var x=j(p);h=z(x,"Contribute"),x.forEach(_),f.forEach(_),this.h()},h(){$(a,"class","logo svelte-bal6b7"),Ce(a.src,r=`${ft}/demo-jumping.gif`)||$(a,"src",r),$(a,"alt",""),$(o,"class","title svelte-bal6b7"),$(l,"class","subtitle svelte-bal6b7"),$(p,"class","contribute svelte-bal6b7"),$(p,"href","https://github.com/ksmai/jumping-peter"),$(p,"target","_blank"),$(p,"rel","noreferrer"),$(e,"class",m=ue(`header ${t[0]}`)+" svelte-bal6b7")},m(d,f){k(d,e,f),y(e,a),y(e,n),y(e,o),y(o,s),y(e,i),y(e,l),y(l,u),y(e,c),y(e,p),y(p,h)},p(d,[f]){f&1&&m!==(m=ue(`header ${d[0]}`)+" svelte-bal6b7")&&$(e,"class",m)},i:ce,o:ce,d(d){d&&_(e)}}}function fe(t,e,a){let{class:r=""}=e;return t.$$set=n=>{"class"in n&&a(0,r=n.class)},[r]}class we extends V{constructor(e){super(),H(this,e,fe,xe,Y,{class:0})}}function Fe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function Ee(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function gt(t){return{...t,type:"slider",min:0,max:1,step:.01}}function je(t){return{...t,type:"slider",min:0,max:2,step:.01}}function Ne(t){return{...t,type:"slider",min:-2,max:2,step:.01}}function Ve(t){return{...t,type:"slider",min:.01,max:10,step:.01}}function At(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Ct(t){return{...t,type:"slider",min:1,max:100,step:1}}function jn(t){return{...t,type:"slider",min:1,max:5,step:1}}function Re(t){return{...t,type:"toggle"}}function Rn(t){return t.reduce((e,a)=>(Object.assign(e,{[a.name]:a.value}),e),{})}const R={image:{url:`${ft}/favicon.png`},output:{width:64,height:64,clear:[1,1,1],delayMs:50,totalFrames:20,quality:21},material:{specular:[0,0,0],shininess:32},directionalLight:{ambient:[1,1,1],diffuse:[0,0,0],specular:[0,0,0],direction:[0,-1,-1]},pointLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],attenuation1:.2,attenuation2:.1},spotLight:{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],position:[0,0,0],direction:[0,0,-1],innerDegrees:5,outerDegrees:15,attenuation1:.2,attenuation2:.1},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!1,left:-1,right:1,bottom:-1,top:1,near:.1,far:10}};function W(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Oe(t,e,a){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=a,t[5]*=a,t[9]*=a,t[13]*=a}function J(t,e,a){Ft(t,e,a,0)}function Un(t,e,a){const r=t[0],n=t[4],o=t[8],s=t[12];t[0]+=e*t[1],t[4]+=e*t[5],t[8]+=e*t[9],t[12]+=e*t[13],t[1]+=a*r,t[5]+=a*n,t[9]+=a*o,t[13]+=a*s}function Ft(t,e,a,r){t[12]+=e,t[13]+=a,t[14]+=r}function Ue(t,e){dt(t,e,[0,0,1])}function dt(t,e,a){const r=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);if(r===0)return;const n=a[0]/r,o=a[1]/r,s=a[2]/r,i=e/180*Math.PI,l=Math.cos(i),u=Math.sin(i),c=[(1-l)*n*n+l,(1-l)*n*o+u*s,(1-l)*n*s-u*o,0,(1-l)*n*o-u*s,(1-l)*o*o+l,(1-l)*o*s-u*n,0,(1-l)*n*s+u*o,(1-l)*o*s-u*n,(1-l)*s*s+l,0,0,0,0,1];He(t,c)}function Dn(t,e,a,r){Ft(t,-e[0],-e[1],-e[2]);const n=[-a[0],-a[1],-a[2]];Ot(n);const o=Lt(r,n);Ot(o);const s=Lt(n,o),i=[o[0],s[0],n[0],0,o[1],s[1],n[1],0,o[2],s[2],n[2],0,0,0,0,1];He(t,i)}function In(t,e,a,r,n,o,s){const i=[2*o/(a-e),0,0,0,0,2*o/(n-r),0,0,(a+e)/(a-e),(n+r)/(n-r),-(s+o)/(s-o),-1,0,0,-2*s*o/(s-o),0];He(t,i)}function qn(t,e,a,r,n,o,s){const i=[2/(a-e),0,0,0,0,2/(n-r),0,0,0,0,-2/(s-o),0,-(a+e)/(a-e),-(n+r)/(n-r),-(s+o)/(s-o),1];He(t,i)}function He(t,e){const a=t.slice();for(let r=0;r<=3;++r)for(let n=0;n<=3;++n){const o=4*r+n;t[o]=0;for(let s=0;s<=3;++s)t[o]+=e[4*s+n]*a[4*r+s]}}function Ot(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return e===0?t:[t[0]/e,t[1]/e,t[2]/e]}function Lt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function D(t,e,a){return t+(e-t)*a}function Ye(t){return t*Math.PI/180}function Mt(t){const e=new Float32Array([t]),[a]=new Int32Array(e.buffer);let r=Math.abs(a)|0;return r=(r>>16^r)*73244475,r=(r>>16^r)*73244475,r=r>>16^r,r/(Math.pow(2,31)-1)}function Bn(t){return e=>1-Math.pow(1-e,t)}function St(t){const e=Math.pow(2,t-1);return a=>a<.5?e*Math.pow(a,t):1-Math.pow(2*(1-a),t)/2}const We=St(3),Xn=Bn(2);function Pt(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const zn="spinning",Gn={...R,output:{...R.output,delayMs:50,totalFrames:15}},Nn=[Fe({name:"startAngle",value:0}),Fe({name:"endAngle",value:360}),Ee({name:"originX",value:0}),Ee({name:"originY",value:0}),Re({name:"alternates",value:!1})];function kt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{alternates:o,startAngle:s,endAngle:i,originX:l,originY:u}=a;return[{program:r,geometry:n,getUniforms:c=>{const p=o?Math.min(c,1-c)*2:c,h=D(s,i,p),m=W();return J(m,-l,-u),Ue(m,h),J(m,l,u),{u_model:m}}}]}const Vn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:kt,defaultOptions:Gn,editOptions:Nn,name:zn},Symbol.toStringTag,{value:"Module"})),Hn="expanding",Yn={...R,output:{...R.output,delayMs:50,totalFrames:20}},Wn=[Ve({name:"minScale",value:1}),Ve({name:"maxScale",value:2}),Re({name:"alternates",value:!1})];function jt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{minScale:o,maxScale:s,alternates:i}=a;return[{program:r,geometry:n,getUniforms:l=>{const u=i?Math.min(l,1-l)*2:l,c=D(o,s,u),p=W();return Oe(p,c,c),{u_model:p}}}]}const Jn=Object.freeze(Object.defineProperty({__proto__:null,createSprites:jt,defaultOptions:Yn,editOptions:Wn,name:Hn},Symbol.toStringTag,{value:"Module"})),Kn="extreme-speed",Qn={...R,output:{...R.output,delayMs:20,totalFrames:10}},Zn=[At({name:"directionX",value:-1}),At({name:"directionY",value:0})];function Rt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("sudoku"),{directionX:o,directionY:s}=a,i=o*2,l=s*2;return[{program:r,geometry:n,getUniforms:u=>{const c=W(),p=D(0,i,u),h=D(0,l,u);return J(c,p,h),{u_model:c}}}]}const er=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Rt,defaultOptions:Qn,editOptions:Zn,name:Kn},Symbol.toStringTag,{value:"Module"})),tr="excited",nr={...R,output:{...R.output,delayMs:50,totalFrames:25}},rr=[Fe({name:"angle",value:15}),Ne({name:"startOffset",value:-.2}),Ne({name:"endOffset",value:.2}),Ct({name:"cycles",value:3})];function Ut(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{angle:o,cycles:s,startOffset:i,endOffset:l}=a,u=Ye(o),c=Math.cos(u),p=Math.sin(u);return[{program:r,geometry:n,getUniforms:h=>{const m=h*2*s%1,d=Math.min(m,1-m)*2,f=D(-i*p,-l*p,d),v=D(i*c,l*c,d),w=W();return Ue(w,o),J(w,f,v),Oe(w,h>.5?-1:1,1),{u_model:w}}}]}const ar=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ut,defaultOptions:nr,editOptions:rr,name:tr},Symbol.toStringTag,{value:"Module"})),or="jumping",ir={...R,output:{...R.output,delayMs:50,totalFrames:20}},sr=[je({name:"maxOffset",value:1.2}),gt({name:"compressTime",value:.4}),gt({name:"maxCompress",value:.3})];function Dt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{maxOffset:o,compressTime:s,maxCompress:i}=a;return[{program:r,geometry:n,getUniforms:l=>{const u=Math.min(l,1-l)*2,c=W(),p=u/(1-s);if(p<1){const h=(1-p*p)*o;J(c,0,h)}else{const h=(1-u)/s,m=1-(1-h*h)*i;J(c,0,1),Oe(c,1/m,m),J(c,0,-1)}return{u_model:c}}}]}const lr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Dt,defaultOptions:ir,editOptions:sr,name:or},Symbol.toStringTag,{value:"Module"})),ur="tower",cr={...R,output:{...R.output,delayMs:40,totalFrames:20}},mr=[Fe({name:"startAngle",value:20}),Fe({name:"endAngle",value:-45}),gt({name:"startTime",value:.5})];function It(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("tower"),{startAngle:o,endAngle:s,startTime:i}=a;return[{program:r,geometry:n,getUniforms:l=>{const u=W();if(l<i){const c=l/i,p=Math.min(c,1-c)*2,h=D(0,o,p);Ue(u,h)}else{const c=(l-i)/(1-i),p=Math.min(c,1-c)*2,h=D(0,s,p);if(Ue(u,h),c>.5){const m=Ye(h),d=Math.cos(m),f=Math.sin(m),v=(c-.5)*2,w=D(0,-2*f,v),x=D(0,2*d,v);J(u,w,x)}}return{u_model:u}}}]}const fr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:It,defaultOptions:cr,editOptions:mr,name:ur},Symbol.toStringTag,{value:"Module"})),pr="repeated",gr={...R,output:{...R.output,delayMs:60,totalFrames:15}},dr=[Ve({name:"initialScale",value:.1}),Re({name:"horizontal",value:!1})];function qt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{initialScale:o,horizontal:s}=a,i=s?{geometry:e.createGeometry("leftHalf"),endX:-1,endY:0}:{geometry:e.createGeometry("topHalf"),endX:0,endY:1},l=s?{geometry:e.createGeometry("rightHalf"),endX:1,endY:0}:{geometry:e.createGeometry("bottomHalf"),endX:0,endY:-1},u=h=>{const m=W(),d=We(h),f=D(o,1,d);return Oe(m,f,f),{u_model:m}},c=h=>{const m=W(),d=We(h),f=D(0,i.endX,d),v=D(0,i.endY,d);return J(m,f,v),{u_model:m}},p=h=>{const m=W(),d=We(h),f=D(0,l.endX,d),v=D(0,l.endY,d);return J(m,f,v),{u_model:m}};return[{program:r,geometry:n,getUniforms:u},{program:r,geometry:i.geometry,getUniforms:c},{program:r,geometry:l.geometry,getUniforms:p}]}const hr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:qt,defaultOptions:gr,editOptions:dr,name:pr},Symbol.toStringTag,{value:"Module"})),$r="mirror",vr={...R,output:{...R.output,delayMs:50,totalFrames:16}},_r=[Re({name:"rightHalf",value:!1})];function Bt(t,e,a){const r=t.createProgram("default"),{rightHalf:n}=a,o=e.createGeometry(n?"rightHalf":"leftHalf");return[{program:r,geometry:o,getUniforms:s=>{const i=Math.min(s,1-s)*2,l=W(),u=Pt(i),c=D(-2,-1,u);return n||Oe(l,-1,1),J(l,c,0),{u_model:l}}},{program:r,geometry:o,getUniforms:s=>{const i=Math.min(s,1-s)*2,l=W(),u=Pt(i),c=D(2,1,u);return n&&Oe(l,-1,1),J(l,c,0),{u_model:l}}}]}const br=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Bt,defaultOptions:vr,editOptions:_r,name:$r},Symbol.toStringTag,{value:"Module"})),yr="panic",xr={...R,output:{...R.output,delayMs:30,totalFrames:16}},wr=[je({name:"maxOffsetX",value:.15}),je({name:"maxOffsetY",value:.15})];function Xt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{maxOffsetX:o,maxOffsetY:s}=a;return[{program:r,geometry:n,getUniforms:i=>{const l=Mt(i+.123),u=Mt(i*2+1),c=D(-o,o,l),p=D(-s,s,u),h=W();return J(h,c,p),{u_model:h}}}]}const Er=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Xt,defaultOptions:xr,editOptions:wr,name:yr},Symbol.toStringTag,{value:"Module"})),Tr="rotating",Ar={...R,output:{...R.output,delayMs:40,totalFrames:25},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6},material:{specular:[1,1,1],shininess:100},directionalLight:{ambient:[.6,.6,.6],diffuse:[1,1,1],specular:[1,1,1],direction:[-1,-1,-5]}},Cr=[Ee({name:"axisX",value:0}),Ee({name:"axisY",value:1}),Ee({name:"axisZ",value:0}),Ee({name:"originX",value:0}),Ee({name:"originY",value:0}),jn({name:"easing",value:1}),Re({name:"alternates",value:!1})];function zt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{axisX:o,axisY:s,axisZ:i,originX:l,originY:u,easing:c,alternates:p}=a,h=[o,s,i],m=St(c);return[{program:r,geometry:n,getUniforms:d=>{const f=p?Math.min(d,1-d)*2:d,v=m(f),w=D(0,360,v),x=W();return J(x,-l,-u),dt(x,w,h),J(x,l,u),{u_model:x}}}]}const Fr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:zt,defaultOptions:Ar,editOptions:Cr,name:Tr},Symbol.toStringTag,{value:"Module"})),Or="party",Lr={...R,output:{...R.output,delayMs:40,totalFrames:15},camera:{position:[0,0,3],lookAt:[0,0,-1],up:[0,1,0]},projection:{perspective:!0,left:-.03,right:.03,bottom:-.03,top:.03,near:.1,far:6}},Mr=[Fe({name:"angle",value:10}),Ne({name:"startOffset",value:-.3}),Ne({name:"endOffset",value:.5})];function Gt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{angle:o,startOffset:s,endOffset:i}=a;return[{program:r,geometry:n,getUniforms:l=>{const u=2*l%1,c=Math.min(u,1-u)*2,p=We(u),h=Xn(c),m=l<.5?D(0,180,p):D(180,360,p),d=D(s,i,h),f=W();return Ue(f,o),J(f,0,d),dt(f,m,[0,1,0]),{u_model:f}}}]}const Sr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Gt,defaultOptions:Lr,editOptions:Mr,name:Or},Symbol.toStringTag,{value:"Module"})),Pr="parrot",kr={...R,output:{...R.output,delayMs:20,totalFrames:18}},jr=[Ve({name:"amplitudeX",value:.6}),je({name:"amplitudeY",value:.5})];function Nt(t,e,a){const r=t.createProgram("default"),n=e.createGeometry("full"),{amplitudeX:o,amplitudeY:s}=a;return[{program:r,geometry:n,getUniforms:i=>{const l=Math.cos(i*2*Math.PI)*.5+.5,u=D(-o,o,l),c=Math.sin(i*2*Math.PI)*.5+.5,p=D(-s,0,c),h=W();return J(h,0,1),Un(h,u,0),J(h,0,-1+p),{u_model:h}}}]}const Rr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Nt,defaultOptions:kr,editOptions:jr,name:Pr},Symbol.toStringTag,{value:"Module"})),Ur="wiggling",Dr={...R,output:{...R.output,delayMs:50,totalFrames:15}},Ir=[Ct({name:"frequency",value:3}),je({name:"amplitude",value:.05})];function Vt(t,e,a){const r=t.createProgram("wiggling"),n=e.createGeometry("full"),{frequency:o,amplitude:s}=a;return[{program:r,geometry:n,getUniforms:i=>({u_model:W(),u_time:i,u_amplitude:s,u_frequency:o})}]}const qr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Vt,defaultOptions:Dr,editOptions:Ir,name:Ur},Symbol.toStringTag,{value:"Module"})),ht=[lr,er,Vn,ar,Jn,fr,hr,br,Er,Fr,Sr,Rr,qr];function Ht(t,e,a){const r=Rn(a.editOptions);switch(a.name){case"spinning":return kt(t,e,r);case"expanding":return jt(t,e,r);case"extreme-speed":return Rt(t,e,r);case"excited":return Ut(t,e,r);case"jumping":return Dt(t,e,r);case"tower":return It(t,e,r);case"repeated":return qt(t,e,r);case"mirror":return Bt(t,e,r);case"panic":return Xt(t,e,r);case"rotating":return zt(t,e,r);case"party":return Gt(t,e,r);case"parrot":return Nt(t,e,r);case"wiggling":return Vt(t,e,r);default:(n=>{throw new Error(`Unknown animation: ${JSON.stringify(n)}`)})(a)}}var Je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br=typeof Je=="object"&&Je&&Je.Object===Object&&Je,Xr=Br,zr=Xr,Gr=typeof self=="object"&&self&&self.Object===Object&&self,Nr=zr||Gr||Function("return this")(),Ke=Nr,Vr=Ke,Hr=Vr.Symbol,Yt=Hr,Wt=Yt,Jt=Object.prototype,Yr=Jt.hasOwnProperty,Wr=Jt.toString,De=Wt?Wt.toStringTag:void 0;function Jr(t){var e=Yr.call(t,De),a=t[De];try{t[De]=void 0;var r=!0}catch{}var n=Wr.call(t);return r&&(e?t[De]=a:delete t[De]),n}var Kr=Jr,Qr=Object.prototype,Zr=Qr.toString;function ea(t){return Zr.call(t)}var ta=ea,Kt=Yt,na=Kr,ra=ta,aa="[object Null]",oa="[object Undefined]",Qt=Kt?Kt.toStringTag:void 0;function ia(t){return t==null?t===void 0?oa:aa:Qt&&Qt in Object(t)?na(t):ra(t)}var sa=ia;function la(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Zt=la,ua=sa,ca=Zt,ma="[object AsyncFunction]",fa="[object Function]",pa="[object GeneratorFunction]",ga="[object Proxy]";function da(t){if(!ca(t))return!1;var e=ua(t);return e==fa||e==pa||e==ma||e==ga}var ha=da,$a=Ke,va=$a["__core-js_shared__"],_a=va,$t=_a,en=function(){var t=/[^.]+$/.exec($t&&$t.keys&&$t.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ba(t){return!!en&&en in t}var ya=ba,xa=Function.prototype,wa=xa.toString;function Ea(t){if(t!=null){try{return wa.call(t)}catch{}try{return t+""}catch{}}return""}var Ta=Ea,Aa=ha,Ca=ya,Fa=Zt,Oa=Ta,La=/[\\^$.*+?()[\]{}|]/g,Ma=/^\[object .+?Constructor\]$/,Sa=Function.prototype,Pa=Object.prototype,ka=Sa.toString,ja=Pa.hasOwnProperty,Ra=RegExp("^"+ka.call(ja).replace(La,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ua(t){if(!Fa(t)||Ca(t))return!1;var e=Aa(t)?Ra:Ma;return e.test(Oa(t))}var Da=Ua;function Ia(t,e){return t==null?void 0:t[e]}var qa=Ia,Ba=Da,Xa=qa;function za(t,e){var a=Xa(t,e);return Ba(a)?a:void 0}var vt=za,Ga=vt,Na=Ga(Object,"create"),Qe=Na,tn=Qe;function Va(){this.__data__=tn?tn(null):{},this.size=0}var Ha=Va;function Ya(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Wa=Ya,Ja=Qe,Ka="__lodash_hash_undefined__",Qa=Object.prototype,Za=Qa.hasOwnProperty;function eo(t){var e=this.__data__;if(Ja){var a=e[t];return a===Ka?void 0:a}return Za.call(e,t)?e[t]:void 0}var to=eo,no=Qe,ro=Object.prototype,ao=ro.hasOwnProperty;function oo(t){var e=this.__data__;return no?e[t]!==void 0:ao.call(e,t)}var io=oo,so=Qe,lo="__lodash_hash_undefined__";function uo(t,e){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=so&&e===void 0?lo:e,this}var co=uo,mo=Ha,fo=Wa,po=to,go=io,ho=co;function Le(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var r=t[e];this.set(r[0],r[1])}}Le.prototype.clear=mo,Le.prototype.delete=fo,Le.prototype.get=po,Le.prototype.has=go,Le.prototype.set=ho;var $o=Le;function vo(){this.__data__=[],this.size=0}var _o=vo;function bo(t,e){return t===e||t!==t&&e!==e}var yo=bo,xo=yo;function wo(t,e){for(var a=t.length;a--;)if(xo(t[a][0],e))return a;return-1}var Ze=wo,Eo=Ze,To=Array.prototype,Ao=To.splice;function Co(t){var e=this.__data__,a=Eo(e,t);if(a<0)return!1;var r=e.length-1;return a==r?e.pop():Ao.call(e,a,1),--this.size,!0}var Fo=Co,Oo=Ze;function Lo(t){var e=this.__data__,a=Oo(e,t);return a<0?void 0:e[a][1]}var Mo=Lo,So=Ze;function Po(t){return So(this.__data__,t)>-1}var ko=Po,jo=Ze;function Ro(t,e){var a=this.__data__,r=jo(a,t);return r<0?(++this.size,a.push([t,e])):a[r][1]=e,this}var Uo=Ro,Do=_o,Io=Fo,qo=Mo,Bo=ko,Xo=Uo;function Me(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var r=t[e];this.set(r[0],r[1])}}Me.prototype.clear=Do,Me.prototype.delete=Io,Me.prototype.get=qo,Me.prototype.has=Bo,Me.prototype.set=Xo;var zo=Me,Go=vt,No=Ke,Vo=Go(No,"Map"),Ho=Vo,nn=$o,Yo=zo,Wo=Ho;function Jo(){this.size=0,this.__data__={hash:new nn,map:new(Wo||Yo),string:new nn}}var Ko=Jo;function Qo(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Zo=Qo,ei=Zo;function ti(t,e){var a=t.__data__;return ei(e)?a[typeof e=="string"?"string":"hash"]:a.map}var et=ti,ni=et;function ri(t){var e=ni(this,t).delete(t);return this.size-=e?1:0,e}var ai=ri,oi=et;function ii(t){return oi(this,t).get(t)}var si=ii,li=et;function ui(t){return li(this,t).has(t)}var ci=ui,mi=et;function fi(t,e){var a=mi(this,t),r=a.size;return a.set(t,e),this.size+=a.size==r?0:1,this}var pi=fi,gi=Ko,di=ai,hi=si,$i=ci,vi=pi;function Se(t){var e=-1,a=t==null?0:t.length;for(this.clear();++e<a;){var r=t[e];this.set(r[0],r[1])}}Se.prototype.clear=gi,Se.prototype.delete=di,Se.prototype.get=hi,Se.prototype.has=$i,Se.prototype.set=vi;var _i=Se,bi="__lodash_hash_undefined__";function yi(t){return this.__data__.set(t,bi),this}var xi=yi;function wi(t){return this.__data__.has(t)}var Ei=wi,Ti=_i,Ai=xi,Ci=Ei;function tt(t){var e=-1,a=t==null?0:t.length;for(this.__data__=new Ti;++e<a;)this.add(t[e])}tt.prototype.add=tt.prototype.push=Ai,tt.prototype.has=Ci;var Fi=tt;function Oi(t,e,a,r){for(var n=t.length,o=a+(r?1:-1);r?o--:++o<n;)if(e(t[o],o,t))return o;return-1}var Li=Oi;function Mi(t){return t!==t}var Si=Mi;function Pi(t,e,a){for(var r=a-1,n=t.length;++r<n;)if(t[r]===e)return r;return-1}var ki=Pi,ji=Li,Ri=Si,Ui=ki;function Di(t,e,a){return e===e?Ui(t,e,a):ji(t,Ri,a)}var Ii=Di,qi=Ii;function Bi(t,e){var a=t==null?0:t.length;return!!a&&qi(t,e,0)>-1}var Xi=Bi;function zi(t,e,a){for(var r=-1,n=t==null?0:t.length;++r<n;)if(a(e,t[r]))return!0;return!1}var Gi=zi;function Ni(t,e){return t.has(e)}var Vi=Ni,Hi=vt,Yi=Ke,Wi=Hi(Yi,"Set"),Ji=Wi;function Ki(){}var Qi=Ki;function Zi(t){var e=-1,a=Array(t.size);return t.forEach(function(r){a[++e]=r}),a}var rn=Zi,_t=Ji,es=Qi,ts=rn,ns=1/0,rs=_t&&1/ts(new _t([,-0]))[1]==ns?function(t){return new _t(t)}:es,as=rs,os=Fi,is=Xi,ss=Gi,ls=Vi,us=as,cs=rn,ms=200;function fs(t,e,a){var r=-1,n=is,o=t.length,s=!0,i=[],l=i;if(a)s=!1,n=ss;else if(o>=ms){var u=e?null:us(t);if(u)return cs(u);s=!1,n=ls,l=new os}else l=e?[]:i;e:for(;++r<o;){var c=t[r],p=e?e(c):c;if(c=a||c!==0?c:0,s&&p===p){for(var h=l.length;h--;)if(l[h]===p)continue e;e&&l.push(p),i.push(c)}else n(l,p,a)||(l!==i&&l.push(p),i.push(c))}return i}var ps=fs,gs=ps;function ds(t){return t&&t.length?gs(t):[]}var hs=ds;const $s=""+new URL("../assets/gif_encoder_bg.69aae05b.wasm",import.meta.url).href,vs=async(t={},e)=>{let a;if(e.startsWith("data:")){const r=e.replace(/^data:.*?base64,/,"");let n;if(typeof Buffer=="function"&&typeof Buffer.from=="function")n=Buffer.from(r,"base64");else if(typeof atob=="function"){const o=atob(r);n=new Uint8Array(o.length);for(let s=0;s<o.length;s++)n[s]=o.charCodeAt(s)}else throw new Error("Cannot decode base64-encoded data URL");a=await WebAssembly.instantiate(n,t)}else{const r=await fetch(e),n=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&n.startsWith("application/wasm"))a=await WebAssembly.instantiateStreaming(r,t);else{const o=await r.arrayBuffer();a=await WebAssembly.instantiate(o,t)}}return a.instance.exports};let K;function an(t){K=t}const _s=typeof TextDecoder>"u"?(0,module.require)("util").TextDecoder:TextDecoder;let on=new _s("utf-8",{ignoreBOM:!0,fatal:!0});on.decode();let nt=null;function bt(){return(nt===null||nt.byteLength===0)&&(nt=new Uint8Array(K.memory.buffer)),nt}function sn(t,e){return on.decode(bt().subarray(t,t+e))}const pe=new Array(128).fill(void 0);pe.push(void 0,null,!0,!1);let Ie=pe.length;function bs(t){Ie===pe.length&&pe.push(pe.length+1);const e=Ie;return Ie=pe[e],pe[e]=t,e}let rt=null;function ge(){return(rt===null||rt.byteLength===0)&&(rt=new Int32Array(K.memory.buffer)),rt}function ys(t){return pe[t]}function xs(t){t<132||(pe[t]=Ie,Ie=t)}function yt(t){const e=ys(t);return xs(t),e}let ln=0;function ws(t,e){const a=e(t.length*1);return bt().set(t,a/1),ln=t.length,a}function Es(t,e){return bt().subarray(t/1,t/1+e)}class at{static __wrap(e){const a=Object.create(at.prototype);return a.ptr=e,a}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();K.__wbg_gifencoder_free(e)}static new(e,a,r,n){try{const l=K.__wbindgen_add_to_stack_pointer(-16);K.gifencoder_new(l,e,a,r,n);var o=ge()[l/4+0],s=ge()[l/4+1],i=ge()[l/4+2];if(i)throw yt(s);return at.__wrap(o)}finally{K.__wbindgen_add_to_stack_pointer(16)}}add_frame(e){try{const n=K.__wbindgen_add_to_stack_pointer(-16),o=ws(e,K.__wbindgen_malloc),s=ln;K.gifencoder_add_frame(n,this.ptr,o,s);var a=ge()[n/4+0],r=ge()[n/4+1];if(r)throw yt(a)}finally{K.__wbindgen_add_to_stack_pointer(16)}}get_result(){try{const s=this.__destroy_into_raw(),i=K.__wbindgen_add_to_stack_pointer(-16);K.gifencoder_get_result(i,s);var e=ge()[i/4+0],a=ge()[i/4+1],r=ge()[i/4+2],n=ge()[i/4+3];if(n)throw yt(r);var o=Es(e,a).slice();return K.__wbindgen_free(e,a*1),o}finally{K.__wbindgen_add_to_stack_pointer(16)}}}function Ts(t,e){const a=sn(t,e);return bs(a)}function As(t,e){throw new Error(sn(t,e))}URL=globalThis.URL;const $e=await vs({"./gif_encoder_bg.js":{__wbindgen_string_new:Ts,__wbindgen_throw:As}},$s),Cs=$e.memory,Fs=$e.__wbg_gifencoder_free,Os=$e.gifencoder_new,Ls=$e.gifencoder_add_frame,Ms=$e.gifencoder_get_result,Ss=$e.__wbindgen_add_to_stack_pointer,Ps=$e.__wbindgen_malloc,ks=$e.__wbindgen_free,un=Object.freeze(Object.defineProperty({__proto__:null,__wbg_gifencoder_free:Fs,__wbindgen_add_to_stack_pointer:Ss,__wbindgen_free:ks,__wbindgen_malloc:Ps,gifencoder_add_frame:Ls,gifencoder_get_result:Ms,gifencoder_new:Os,memory:Cs},Symbol.toStringTag,{value:"Module"}));an(un);class js{constructor(e){N(this,"loadingUrl",null);N(this,"url",null);N(this,"texture",null);N(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const a=await(await fetch(e)).blob(),r=await createImageBitmap(a);if(this.loadingUrl!==e)return;const{gl:n}=this;this.texture&&n.deleteTexture(this.texture);const o=n.createTexture();if(!o)throw new Error("Failed to create texture");n.activeTexture(n.TEXTURE0+this.unit),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),this.texture=o,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}class cn{constructor(e,a){N(this,"texture",null);N(this,"framebuffer");N(this,"width",null);N(this,"height",null);this.gl=e,this.unit=a;const r=e.createFramebuffer();if(!r)throw new Error("Failed to create framebuffer");this.framebuffer=r}bindAsInput(){return this.gl.activeTexture(this.gl.TEXTURE0+this.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.unit}bindAsOutput(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer)}setSize(e,a){if(!(e===this.width&&a===this.height)){if(this.texture!==null&&this.gl.deleteTexture(this.texture),this.texture=this.gl.createTexture(),!this.texture)throw new Error("Failed to create texture");if(this.width=e,this.height=a,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,a,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)!==this.gl.FRAMEBUFFER_COMPLETE)throw new Error("Failed to attach to framebuffer");this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}}destroy(){this.texture&&this.gl.deleteTexture(this.texture),this.gl.deleteFramebuffer(this.framebuffer)}}const re={a_position:0,a_texCoords:1,a_normal:2},ve=`#version 300 es

layout(location = ${re.a_position}) in vec2 a_position;
layout(location = ${re.a_texCoords}) in vec2 a_texCoords;

out vec2 v_texCoords;

void main() {
  gl_Position = vec4(a_position, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
`,ot=`vec3 getColor(vec2 offset, sampler2D image, vec2 texCoords) {
  vec2 coords = texCoords + offset / vec2(textureSize(image, 0));
  float inRange = float(coords.x >= 0.0 && coords.x <= 1.0 && coords.y >= 0.0 && coords.y <= 1.0);
  return texture(image, coords).rgb * inRange;
}

vec3 kernalMultiply(mat3 kernel, sampler2D image, vec2 texCoords) {
  vec3 result = vec3(0.0, 0.0, 0.0);

  result += kernel[0][0] * getColor(vec2(-1.0,  1.0), image, texCoords);
  result += kernel[0][1] * getColor(vec2(-1.0,  0.0), image, texCoords);
  result += kernel[0][2] * getColor(vec2(-1.0, -1.0), image, texCoords);
  result += kernel[1][0] * getColor(vec2( 0.0,  1.0), image, texCoords);
  result += kernel[1][1] * getColor(vec2( 0.0,  0.0), image, texCoords);
  result += kernel[1][2] * getColor(vec2( 0.0, -1.0), image, texCoords);
  result += kernel[2][0] * getColor(vec2( 1.0,  1.0), image, texCoords);
  result += kernel[2][1] * getColor(vec2( 1.0,  0.0), image, texCoords);
  result += kernel[2][2] * getColor(vec2( 1.0, -1.0), image, texCoords);

  return result;
}`,mn=`#version 300 es

layout(location = ${re.a_position}) in vec3 a_position;
layout(location = ${re.a_texCoords}) in vec2 a_texCoords;
layout(location = ${re.a_normal}) in vec3 a_normal;

uniform mat4 u_model;
uniform mat4 u_view;
uniform mat4 u_projection;

out vec2 v_texCoords;
out vec3 v_normal;
out vec3 v_position;

void main() {
  mat4 modelView = u_view * u_model;
  v_position = vec3(modelView * vec4(a_position, 1.0));
  gl_Position = u_projection * vec4(v_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position.y *= -1.0;
  v_texCoords = a_texCoords;
  v_normal = (transpose(inverse(modelView)) * vec4(a_normal, 0)).xyz;
}`,fn=`in vec2 v_texCoords;
in vec3 v_normal;
in vec3 v_position;

struct Material {
  sampler2D diffuse;
  vec3 specular;
  float shininess;
};

struct DirectionalLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 direction;
};

struct PointLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  float attenuation1;
  float attenuation2;
};

struct SpotLight {
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  vec3 position;
  vec3 direction;
  float innerCos;
  float outerCos;
  float attenuation1;
  float attenuation2;
};

uniform Material u_material;
uniform DirectionalLight u_directionalLight;
uniform PointLight u_pointLight;
uniform SpotLight u_spotLight;

vec3 computeSpotLight(SpotLight light, vec3 normal, vec3 fragToCamera, vec3 texel) {
  float dist = length(light.position - v_position);
  float attenuation = 1.0 / (1.0 + light.attenuation1 * dist + light.attenuation2 * dist * dist);
  vec3 dir = normalize(light.position - v_position);
  float angle = dot(normalize(-light.direction), dir);
  float intensity = smoothstep(light.outerCos, light.innerCos, angle);

  float diff = max(dot(dir, normal), 0.0);

  vec3 halfVec = normalize(dir + fragToCamera);
  float spec = pow(max(dot(halfVec, normal), 0.0), u_material.shininess);

  vec3 ambient = light.ambient * texel * attenuation * intensity;
  vec3 diffuse = light.diffuse * texel * diff * attenuation * intensity;
  vec3 specular = light.specular * u_material.specular * spec * attenuation * intensity;

  return ambient + diffuse + specular;
}

vec3 computeDirectionalLight(DirectionalLight directionalLight, vec3 normal, vec3 fragToCamera, vec3 texel) {
  return computeSpotLight(SpotLight(
    directionalLight.ambient,
    directionalLight.diffuse,
    directionalLight.specular,
    -directionalLight.direction + v_position,
    directionalLight.direction,
    // disable intensity
    -2.0, -3.0,
    // disable attenuation
    0.0, 0.0
  ), normal, fragToCamera, texel);
}

vec3 computePointLight(PointLight pointLight, vec3 normal, vec3 fragToCamera, vec3 texel) {
  return computeSpotLight(SpotLight(
    pointLight.ambient,
    pointLight.diffuse,
    pointLight.specular,
    pointLight.position,
    -pointLight.position + v_position,
    // disable intensity
    -2.0, -3.0,
    pointLight.attenuation1,
    pointLight.attenuation2
  ), normal, fragToCamera, texel);
}
`,pn={default:{vertex:mn,fragment:`#version 300 es
precision highp float;

${fn}

out vec4 outColor;

void main() {
  vec3 texel = texture(u_material.diffuse, v_texCoords).xyz;
  // front facing is actually the back face since we flipped y-axis in the vertex shader
  vec3 normal = normalize(v_normal) * (1.0 - 2.0 * float(gl_FrontFacing));
  vec3 fragToCamera = normalize(-v_position);

  vec3 color = vec3(0.0);
  color += computeDirectionalLight(u_directionalLight, normal, fragToCamera, texel);
  color += computePointLight(u_pointLight, normal, fragToCamera, texel);
  color += computeSpotLight(u_spotLight, normal, fragToCamera, texel);

  outColor = vec4(color, 1.0);
}
    `},wiggling:{vertex:mn,fragment:`#version 300 es
precision highp float;

${fn}

uniform float u_time;
uniform float u_amplitude;
uniform float u_frequency;

out vec4 outColor;

void main() {
  vec2 texCoords = v_texCoords + vec2(sin((v_texCoords.y * u_frequency + u_time) * radians(360.0)) * u_amplitude, 0.0);
  vec3 texel = texture(u_material.diffuse, texCoords).xyz;
  // front facing is actually the back face since we flipped y-axis in the vertex shader
  vec3 normal = normalize(v_normal) * (1.0 - 2.0 * float(gl_FrontFacing));
  vec3 fragToCamera = normalize(-v_position);

  vec3 color = vec3(0.0);
  color += computeDirectionalLight(u_directionalLight, normal, fragToCamera, texel);
  color += computePointLight(u_pointLight, normal, fragToCamera, texel);
  color += computeSpotLight(u_spotLight, normal, fragToCamera, texel);

  outColor = vec4(color, float(texCoords.x >= 0.0 && texCoords.x <= 1.0));
}
    `},invert:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = vec4(1.0 - texture(u_image, v_texCoords).rgb, 1.0);
}
    `},kernel:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel;

out vec4 outColor;

${ot}

void main() {
  vec3 color = kernalMultiply(u_kernel, u_image, v_texCoords);
  outColor = vec4(color, 1.0);
}
    `},gradient2:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel1;
uniform mat3 u_kernel2;

out vec4 outColor;

${ot}

void main() {
  vec3 color1 = kernalMultiply(u_kernel1, u_image, v_texCoords);
  vec3 color2 = kernalMultiply(u_kernel2, u_image, v_texCoords);
  outColor = vec4(
    length(vec2(color1.r, color2.r)),
    length(vec2(color1.g, color2.g)),
    length(vec2(color1.b, color2.b)),
    1.0);
}
    `},gradient8:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_kernel[8];

out vec4 outColor;

${ot}

void main() {
  vec3 result = vec3(0.0);
  for (int i = 0; i < 8; ++i) {
    result = max(result, kernalMultiply(u_kernel[i], u_image, v_texCoords));
  }
  outColor = vec4(result, 1.0);
}
    `},contrast:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_contrast;

out vec4 outColor;

void main() {
  outColor = vec4(texture(u_image, v_texCoords).rgb, 1.0);
  outColor.rgb = (outColor.rgb - 0.5) * u_contrast + 0.5;
}
    `},bloom:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_luminance;

out vec4 outColor;

${ot}

void main() {
  vec3 sum = vec3(0.0);

  vec2 offsets[8] = vec2[](
    vec2(-1, -1),
    vec2(-1,  0),
    vec2(-1,  1),
    vec2( 0, -1),
    vec2( 0,  1),
    vec2( 1, -1),
    vec2( 1,  0),
    vec2( 1,  1)
  );

  for (int i = 0; i < 8; ++i) {
    vec3 color = getColor(offsets[i], u_image, v_texCoords);
    float luminance = dot(color, vec3(1.0/3.0));
    if (luminance >= u_luminance) {
      sum += color;
    }
  }

  vec3 result = texture(u_image, v_texCoords).rgb + sum / 8.0;
  outColor = vec4(result, 1.0);
}
    `},mix:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform mat3 u_weights;

out vec4 outColor;

void main() {
  outColor = vec4(u_weights * texture(u_image, v_texCoords).rgb, 1.0);
}
    `},vignette:{vertex:ve,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
uniform sampler2D u_image;
uniform float u_inner;
uniform float u_outer;

out vec4 outColor;

void main() {
  float dist = length(v_texCoords - vec2(0.5, 0.5));
  float factor = 1.0 - smoothstep(u_inner, u_outer, dist);
  outColor = vec4(factor * texture(u_image, v_texCoords).rgb, 1.0);
}
    `}};class Rs{constructor(e){N(this,"programs",{});this.gl=e}createProgram(e){let a=this.programs[e];return a||(a=this.programs[e]={program:Us(this.gl,pn[e].vertex,pn[e].fragment),uniformLocations:{}}),a}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function xt(t,e,a){for(const[r,n]of Object.entries(a)){r in e.uniformLocations||(e.uniformLocations[r]=t.getUniformLocation(e.program,r));const o=e.uniformLocations[r];["u_image","u_material.diffuse"].includes(r)&&typeof n=="number"?t.uniform1i(o,n):Array.isArray(n)?n.length===2?t.uniform2fv(o,n):n.length===3?t.uniform3fv(o,n):n.length===4?t.uniform4fv(o,n):n.length===9?t.uniformMatrix3fv(o,!1,n):n.length===16&&t.uniformMatrix4fv(o,!1,n):typeof n=="number"?t.uniform1f(o,n):typeof n=="boolean"&&t.uniform1i(o,n?1:0)}}function Us(t,e,a){const r=gn(t,t.VERTEX_SHADER,e);let n;try{n=gn(t,t.FRAGMENT_SHADER,a)}catch(s){throw t.deleteShader(r),s}const o=t.createProgram();if(o===null)throw t.deleteShader(n),t.deleteShader(r),new Error("Failed to create program");if(t.attachShader(o,r),t.attachShader(o,n),t.linkProgram(o),t.detachShader(o,n),t.detachShader(o,r),t.deleteShader(n),t.deleteShader(r),!t.getProgramParameter(o,t.LINK_STATUS)){const s=t.getProgramInfoLog(o);throw t.deleteProgram(o),new Error(`Failed to link program: ${s}`)}return o}function gn(t,e,a){const r=t.createShader(e);if(r===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(r,a),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const n=t.getShaderInfoLog(r);throw t.deleteShader(r),new Error(`Failed to compile shader: ${n}`)}return r}function Ds(t,e,a,r){r.effects.length>0?r.renderTextures[0].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT);let n,o;for(const s of a){n!==s.program&&(t.useProgram(s.program.program),n=s.program),o!==s.geometry&&(t.bindVertexArray(s.geometry.vao),o=s.geometry);const i=s.getUniforms(e);xt(t,s.program,i),t.drawArrays(s.geometry.drawMode,0,s.geometry.drawCount)}if(r.effects.length!==0){t.bindVertexArray(r.quad.vao);for(let s=0;s<r.effects.length;++s){const{program:i,uniforms:l}=r.effects[s],u=s%2,c=1-u;s<r.effects.length-1?r.renderTextures[c].bindAsOutput():t.bindFramebuffer(t.FRAMEBUFFER,null),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(i.program);const p=r.renderTextures[u].bindAsInput();xt(t,i,{u_image:p,...l}),t.drawArrays(r.quad.drawMode,0,r.quad.drawCount)}}}function Is(t,e){const a=t.createVertexArray();if(a===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(a),new Error("Failed to create buffer");return t.bindVertexArray(a),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(re.a_position),t.vertexAttribPointer(re.a_position,3,t.FLOAT,!1,8*4,0),t.enableVertexAttribArray(re.a_texCoords),t.vertexAttribPointer(re.a_texCoords,2,t.FLOAT,!1,8*4,3*4),t.enableVertexAttribArray(re.a_normal),t.vertexAttribPointer(re.a_normal,3,t.FLOAT,!1,8*4,5*4),t.bindVertexArray(null),{vao:a,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const qs={full:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],sudoku:[-3,-3,0,-1,2,0,0,1,3,-3,0,2,2,0,0,1,-3,3,0,-1,-1,0,0,1,3,3,0,2,-1,0,0,1],tower:[-1,-3,0,0,2,0,0,1,1,-3,0,1,2,0,0,1,-1,3,0,0,-1,0,0,1,1,3,0,1,-1,0,0,1],topHalf:[-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],bottomHalf:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1],leftHalf:[-1,-1,0,0,1,0,0,1,0,-1,0,.5,1,0,0,1,-1,1,0,0,0,0,0,1,0,1,0,.5,0,0,0,1],rightHalf:[0,-1,0,.5,1,0,0,1,1,-1,0,1,1,0,0,1,0,1,0,.5,0,0,0,1,1,1,0,1,0,0,0,1],quad:[-1,-1,0,0,0,0,0,1,1,-1,0,1,0,0,0,1,-1,1,0,0,1,0,0,1,1,1,0,1,1,0,0,1]};class Bs{constructor(e){N(this,"geometries",{});this.gl=e}createGeometry(e){let a=this.geometries[e];return a||(a=this.geometries[e]=Is(this.gl,qs[e])),a}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}const Xs=["grayscale","sepia","boxBlur","guassian","sharpen1","sharpen2","emboss","laplacian1","laplacian2","prewitt","sobel","kirsch","darken","lighten","highContrast","bloom","invert","grb","rbg","bgr","gbr","brg","0gb","r0b","rg0","vignette"],dn={grayscale:{program:"mix",uniforms:{u_weights:[.2126,.2126,.2126,.7152,.7152,.7152,.0722,.0722,.0722]}},sepia:{program:"mix",uniforms:{u_weights:[.393,.349,.272,.769,.686,.534,.189,.168,.131]}},boxBlur:{program:"kernel",uniforms:{u_kernel:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]}},guassian:{program:"kernel",uniforms:{u_kernel:[1/16,2/16,1/16,2/16,4/16,2/16,1/16,2/16,1/16]}},sharpen1:{program:"kernel",uniforms:{u_kernel:[-.0023,-.0432,-.0023,-.0432,1.182,-.0432,-.0023,-.0432,-.0023]}},sharpen2:{program:"kernel",uniforms:{u_kernel:[-1/9,-1/9,-1/9,-1/9,17/9,-1/9,-1/9,-1/9,-1/9]}},emboss:{program:"kernel",uniforms:{u_kernel:[-2,-1,0,-1,1,1,0,1,2]}},laplacian1:{program:"kernel",uniforms:{u_kernel:[0,-1,0,-1,4,-1,0,-1,0]}},laplacian2:{program:"kernel",uniforms:{u_kernel:[-1,-1,-1,-1,8,-1,-1,-1,-1]}},prewitt:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,1,0,-1,1,0,-1],u_kernel2:[1,1,1,0,0,0,-1,-1,-1]}},sobel:{program:"gradient2",uniforms:{u_kernel1:[1,0,-1,2,0,-2,1,0,-1],u_kernel2:[1,2,1,0,0,0,-1,-2,-1]}},kirsch:{program:"gradient8",uniforms:{"u_kernel[0]":[5,5,5,-3,0,-3,-3,-3,-3],"u_kernel[1]":[-3,5,5,-3,0,5,-3,-3,-3],"u_kernel[2]":[-3,-3,5,-3,0,5,-3,-3,5],"u_kernel[3]":[-3,-3,-3,-3,0,5,-3,5,5],"u_kernel[4]":[-3,-3,-3,-3,0,-3,5,5,5],"u_kernel[5]":[-3,-3,-3,5,0,-3,5,5,-3],"u_kernel[6]":[5,-3,-3,5,0,-3,5,-3,-3],"u_kernel[7]":[5,5,-3,5,0,-3,-3,-3,-3]}},darken:{program:"mix",uniforms:{u_kernel:[.5,0,0,0,.5,0,0,0,.5]}},lighten:{program:"kernel",uniforms:{u_kernel:[2,0,0,0,2,0,0,0,2]}},highContrast:{program:"contrast",uniforms:{u_contrast:2}},bloom:{program:"bloom",uniforms:{u_luminance:.6}},invert:{program:"invert",uniforms:{}},grb:{program:"mix",uniforms:{u_weights:[0,1,0,1,0,0,0,0,1]}},rbg:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,1,0,1,0]}},bgr:{program:"mix",uniforms:{u_weights:[0,0,1,0,1,0,1,0,0]}},gbr:{program:"mix",uniforms:{u_weights:[0,0,1,1,0,0,0,1,0]}},brg:{program:"mix",uniforms:{u_weights:[0,1,0,0,0,1,1,0,0]}},"0gb":{program:"mix",uniforms:{u_weights:[0,0,0,0,1,0,0,0,1]}},r0b:{program:"mix",uniforms:{u_weights:[1,0,0,0,0,0,0,0,1]}},rg0:{program:"mix",uniforms:{u_weights:[1,0,0,0,1,0,0,0,0]}},vignette:{program:"vignette",uniforms:{u_inner:.4,u_outer:.6}}};function hn(t,e){return e.map(a=>({program:t.createProgram(dn[a].program),uniforms:dn[a].uniforms}))}an(un);class zs{constructor(e){N(this,"gl");N(this,"programFactory");N(this,"geometryFactory");N(this,"texture");N(this,"renderTextures");N(this,"quad");N(this,"queue",[]);N(this,"animationFrame",null);this.canvas=e;const a=e.getContext("webgl2");if(!a)throw new Error("webgl2 is not supported");this.gl=a,this.programFactory=new Rs(this.gl),this.geometryFactory=new Bs(this.gl),this.texture=new js(this.gl),this.renderTextures=[new cn(this.gl,1),new cn(this.gl,2)],this.quad=this.geometryFactory.createGeometry("quad")}animate(e,a){return new Promise((r,n)=>{const{width:o,height:s,delayMs:i,quality:l}=e.output,u=at.new(o,s,i,l);this.queue.push({type:"gif",request:e,resolve:r,reject:n,frame:0,sprites:Ht(this.programFactory,this.geometryFactory,e.animation),effects:hn(this.programFactory,e.effects.filter(c=>c.enabled).map(c=>c.type)),callback:a,encoder:u}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,a){return new Promise((r,n)=>{this.queue.push({type:"frame",request:e,resolve:r,reject:n,frame:a,sprites:Ht(this.programFactory,this.geometryFactory,e.animation),effects:hn(this.programFactory,e.effects.filter(o=>o.enabled).map(o=>o.type))}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let v=0;v<this.queue.length-1;++v)this.queue[v].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:a,resolve:r,reject:n,sprites:o,effects:s,frame:i}=this.queue[0],{image:l,output:u,camera:c,projection:p,material:h,directionalLight:m,pointLight:d,spotLight:f}=a;if(e==="frame"||e==="gif"&&this.queue[0].frame===0){await this.texture.loadImage(l.url);const{width:v,height:w,clear:x}=u;this.renderTextures.forEach(U=>U.setSize(v,w)),this.canvas.width=v,this.canvas.height=w,this.gl.viewport(0,0,v,w),this.gl.clearColor(...x,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.activeTexture(this.gl.TEXTURE0+this.texture.unit),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture.texture);const g=W();Dn(g,c.position,c.lookAt,c.up);const b=W();p.perspective?In(b,p.left,p.right,p.bottom,p.top,p.near,p.far):qn(b,p.left,p.right,p.bottom,p.top,p.near,p.far);const B={u_view:g,u_projection:b,"u_material.diffuse":this.texture.unit,"u_material.specular":h.specular,"u_material.shininess":h.shininess,"u_directionalLight.ambient":m.ambient,"u_directionalLight.diffuse":m.diffuse,"u_directionalLight.specular":m.specular,"u_directionalLight.direction":m.direction,"u_pointLight.ambient":d.ambient,"u_pointLight.diffuse":d.diffuse,"u_pointLight.specular":d.specular,"u_pointLight.position":d.position,"u_pointLight.attenuation1":d.attenuation1,"u_pointLight.attenuation2":d.attenuation2,"u_spotLight.ambient":f.ambient,"u_spotLight.diffuse":f.diffuse,"u_spotLight.specular":f.specular,"u_spotLight.position":f.position,"u_spotLight.direction":f.direction,"u_spotLight.innerCos":Math.cos(Ye(f.innerDegrees)),"u_spotLight.outerCos":Math.cos(Ye(f.outerDegrees)),"u_spotLight.attenuation1":f.attenuation1,"u_spotLight.attenuation2":f.attenuation2};for(const U of hs(o.map(Q=>Q.program)))this.gl.useProgram(U.program),xt(this.gl,U,B)}if(Ds(this.gl,i/a.output.totalFrames,o,{renderTextures:this.renderTextures,quad:this.quad,effects:s}),e==="frame")r(),this.queue.shift(),this.animationFrame=null;else{const{encoder:v,callback:w}=this.queue[0];w(i);const x=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,x),v.add_frame(new Uint8Array(x.buffer)),i===u.totalFrames-1){const g=v.get_result(),b=new FileReader;b.onload=()=>{if(b.onload=null,b.onerror=null,!b.result){n(new Error("Failed to read the bytes"));return}const B="data:image/gif;base64,"+b.result.split(",",2)[1];r({dataUri:B})},b.onerror=()=>{b.onload=null,b.onerror=null,n(new Error("Failed to read the bytes"))},b.readAsDataURL(new Blob([g])),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.renderTextures.forEach(e=>e.destroy()),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const de=function(){const{subscribe:t,update:e}=pt({animations:ht,current:ht[0]}),a=o=>{e(s=>s.current===o||!s.animations.find(i=>i===o)?s:{animations:s.animations,current:o})};function r(o,s){e(({animations:i,current:l})=>{const u={...l,editOptions:l.editOptions.map(c=>c===o?{...o,value:s}:c)};return{animations:i.map(c=>c===l?u:c),current:u}})}function n(){e(({animations:o,current:s})=>{const i=ht.find(l=>l.name===s.name);return{animations:o.map(l=>l===s?i:l),current:i}})}return{subscribe:t,changeCurrentAnimation:a,changeEditOptions:r,resetEditOptions:n}}(),it=function(){const{subscribe:t,update:e}=pt(Xs.map(n=>({type:n,enabled:!1})));function a(n,o){e(s=>s.map(i=>i.type===n?{type:n,enabled:o}:i))}function r(){e(n=>n.map(o=>({...o,enabled:!1})))}return{subscribe:t,change:a,reset:r}}();function _e(t){let e=!0;const{subscribe:a,update:r}=pt(void 0,s=>de.subscribe(({current:i})=>{e&&s(i.defaultOptions[t])}));function n(s){r(i=>(e=!1,{...i,...s}))}function o(){r(()=>(e=!0,ze(de).current.defaultOptions[t]))}return{subscribe:a,change:n,reset:o}}const st=_e("image"),ie=_e("output"),Pe=_e("camera"),se=_e("projection"),qe=_e("material"),Te=_e("directionalLight"),he=_e("pointLight"),ne=_e("spotLight"),wt=$u([st,ie,Pe,se,qe,Te,he,ne,de,it],([t,e,a,r,n,o,s,i,l,u])=>({image:t,output:e,camera:a,projection:r,material:n,directionalLight:o,pointLight:s,spotLight:i,animation:l.current,effects:u})),Be=function(){const t=pt({animator:null,running:!1,frame:0}),{subscribe:e,update:a}=t;function r(s){a(i=>{var l;return(l=i.animator)==null||l.destroy(),{animator:new zs(s),running:!1,frame:0}})}function n(){const{animator:s}=ze(t);return s?(a(i=>({...i,running:!0,frame:0})),s.animate(ze(wt),i=>a(l=>({...l,frame:i}))).finally(()=>{a(i=>({...i,running:!1}))})):Promise.reject("Animator has not been created")}function o(s){const{animator:i,frame:l}=ze(t);if(!i)return Promise.reject("Animator has not been created");let u;typeof s>"u"?u=l:u=s;const c=ze(wt);return u>=c.output.totalFrames&&(u=c.output.totalFrames-1),a(p=>({...p,frame:u,running:!0})),i.renderFrame(c,u).finally(()=>{a(p=>({...p,running:!1}))})}return{subscribe:e,changeCanvas:r,animate:n,renderFrame:o}}();function $n(t,{delay:e=0,duration:a=400,easing:r=ru}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:a,easing:r,css:o=>`opacity: ${o*n}`}}function vn(t){let e,a,r;const n=t[5].default,o=ou(n,t,t[4],null);return{c(){e=S("div"),o&&o.c(),this.h()},l(s){e=P(s,"DIV",{class:!0});var i=j(e);o&&o.l(i),i.forEach(_),this.h()},h(){$(e,"class","section__content svelte-v2pn2e")},m(s,i){k(s,e,i),o&&o.m(e,null),r=!0},p(s,i){o&&o.p&&(!r||i&16)&&iu(o,n,s,s[4],r?lu(n,s[4],i,null):su(s[4]),null)},i(s){r||(E(o,s),uu(()=>{a||(a=Mn(e,$n,{duration:250},!0)),a.run(1)}),r=!0)},o(s){T(o,s),a||(a=Mn(e,$n,{duration:250},!1)),a.run(0),r=!1},d(s){s&&_(e),o&&o.d(s),s&&a&&a.end()}}}function Gs(t){let e,a,r,n,o=t[0]?"-":"+",s,i,l,u,c,p,h,m,d,f,v,w,x=t[0]&&vn(t);return{c(){e=S("section"),a=S("header"),r=S("button"),n=X("["),s=X(o),i=X("]"),l=L(),u=S("h2"),c=X(t[1]),p=L(),h=S("button"),m=X("Reset"),d=L(),x&&x.c(),this.h()},l(g){e=P(g,"SECTION",{class:!0});var b=j(e);a=P(b,"HEADER",{class:!0});var B=j(a);r=P(B,"BUTTON",{class:!0,type:!0});var U=j(r);n=z(U,"["),s=z(U,o),i=z(U,"]"),U.forEach(_),l=M(B),u=P(B,"H2",{class:!0});var Q=j(u);c=z(Q,t[1]),Q.forEach(_),p=M(B),h=P(B,"BUTTON",{class:!0,type:!0});var ee=j(h);m=z(ee,"Reset"),ee.forEach(_),B.forEach(_),d=M(b),x&&x.l(b),b.forEach(_),this.h()},h(){$(r,"class","section__expand svelte-v2pn2e"),$(r,"type","button"),$(u,"class","section__heading svelte-v2pn2e"),$(h,"class","section__reset svelte-v2pn2e"),$(h,"type","button"),$(a,"class","section__header svelte-v2pn2e"),$(e,"class","section svelte-v2pn2e")},m(g,b){k(g,e,b),y(e,a),y(a,r),y(r,n),y(r,s),y(r,i),y(a,l),y(a,u),y(u,c),y(a,p),y(a,h),y(h,m),y(e,d),x&&x.m(e,null),f=!0,v||(w=[me(r,"click",t[3]),me(u,"click",t[3]),me(u,"keypress",t[3]),me(h,"click",t[6])],v=!0)},p(g,[b]){(!f||b&1)&&o!==(o=g[0]?"-":"+")&&oe(s,o),(!f||b&2)&&oe(c,g[1]),g[0]?x?(x.p(g,b),b&1&&E(x,1)):(x=vn(g),x.c(),E(x,1),x.m(e,null)):x&&(ct(),T(x,1,1,()=>{x=null}),mt())},i(g){f||(E(x),f=!0)},o(g){T(x),f=!1},d(g){g&&_(e),x&&x.d(),v=!1,au(w)}}}function Ns(t,e,a){let{$$slots:r={},$$scope:n}=e,{title:o=""}=e,{expanded:s=!0}=e;const i=Ge();function l(){a(0,s=!s)}const u=()=>i("reset");return t.$$set=c=>{"title"in c&&a(1,o=c.title),"expanded"in c&&a(0,s=c.expanded),"$$scope"in c&&a(4,n=c.$$scope)},[s,o,i,l,n,r,u]}class le extends V{constructor(e){super(),H(this,e,Ns,Gs,Y,{title:1,expanded:0})}}function Vs(t){let e,a,r,n,o,s,i,l;return{c(){e=S("label"),a=S("input"),r=L(),n=S("div"),o=S("img"),this.h()},l(u){e=P(u,"LABEL",{class:!0});var c=j(e);a=P(c,"INPUT",{class:!0,type:!0,accept:!0}),r=M(c),n=P(c,"DIV",{class:!0});var p=j(n);o=P(p,"IMG",{class:!0,src:!0,alt:!0}),p.forEach(_),c.forEach(_),this.h()},h(){$(a,"class","image__input svelte-1me35do"),$(a,"type","file"),$(a,"accept","image/*"),$(o,"class","image__preview svelte-1me35do"),Ce(o.src,s=t[0].url)||$(o,"src",s),$(o,"alt","source"),$(n,"class","image__container svelte-1me35do"),$(e,"class","image svelte-1me35do")},m(u,c){k(u,e,c),y(e,a),y(e,r),y(e,n),y(n,o),i||(l=me(a,"input",t[1]),i=!0)},p(u,c){c&1&&!Ce(o.src,s=u[0].url)&&$(o,"src",s)},d(u){u&&_(e),i=!1,l()}}}function Hs(t){let e,a;return e=new le({props:{title:"Image",expanded:!0,$$slots:{default:[Vs]},$$scope:{ctx:t}}}),e.$on("reset",st.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&5&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function Ys(t,e,a){let r;Z(t,st,o=>a(0,r=o));function n(o){var i;const s=(i=o.target.files)==null?void 0:i[0];s&&st.change({url:URL.createObjectURL(s)})}return[r,n]}class Ws extends V{constructor(e){super(),H(this,e,Ys,Hs,Y,{})}}function Js(t){let e,a,r,n,o,s;return{c(){e=S("label"),a=X(t[0]),r=L(),n=S("input"),this.h()},l(i){e=P(i,"LABEL",{class:!0});var l=j(e);a=z(l,t[0]),r=M(l),n=P(l,"INPUT",{type:!0}),l.forEach(_),this.h()},h(){$(n,"type","color"),n.value=t[1],$(e,"class","color-picker svelte-nq6a5t")},m(i,l){k(i,e,l),y(e,a),y(e,r),y(e,n),o||(s=me(n,"change",t[2]),o=!0)},p(i,[l]){l&1&&oe(a,i[0]),l&2&&(n.value=i[1])},i:ce,o:ce,d(i){i&&_(e),o=!1,s()}}}function Ks(t){return Math.floor(t*255).toString(16).padStart(2,"0")}function Qs(t){return`#${t.map(Ks).join("")}`}function Et(t){return parseInt(t,16)/255}function Zs(t){return[Et(t.slice(1,3)),Et(t.slice(3,5)),Et(t.slice(5,7))]}function el(t,e,a){let r,{label:n=""}=e,{value:o=[1,1,1]}=e;const s=Ge();function i(l){const u=l.target;a(3,o=Zs(u.value)),s("input",{value:o})}return t.$$set=l=>{"label"in l&&a(0,n=l.label),"value"in l&&a(3,o=l.value)},t.$$.update=()=>{t.$$.dirty&8&&a(1,r=Qs(o))},[n,r,i,o]}class ae extends V{constructor(e){super(),H(this,e,el,Js,Y,{label:0,value:3})}}function _n(t){let e,a,r,n,o,s;return{c(){e=S("label"),a=X(t[1]),r=L(),n=S("input"),this.h()},l(i){e=P(i,"LABEL",{class:!0});var l=j(e);a=z(l,t[1]),r=M(l),n=P(l,"INPUT",{class:!0,type:!0}),l.forEach(_),this.h()},h(){$(n,"class","slider__text-input svelte-1h0gcvd"),$(n,"type","text"),n.value=t[0],$(e,"class","slider__label svelte-1h0gcvd")},m(i,l){k(i,e,l),y(e,a),y(e,r),y(e,n),o||(s=me(n,"input",t[5]),o=!0)},p(i,l){l&2&&oe(a,i[1]),l&1&&n.value!==i[0]&&(n.value=i[0])},d(i){i&&_(e),o=!1,s()}}}function tl(t){let e,a,r,n,o=lt(t[2])+"",s,i,l,u,c,p,h=lt(t[3])+"",m,d,f,v=t[1]&&_n(t);return{c(){e=S("div"),v&&v.c(),a=L(),r=S("div"),n=S("span"),s=X(o),i=L(),l=S("div"),u=S("input"),c=L(),p=S("span"),m=X(h),this.h()},l(w){e=P(w,"DIV",{class:!0});var x=j(e);v&&v.l(x),a=M(x),r=P(x,"DIV",{class:!0});var g=j(r);n=P(g,"SPAN",{class:!0});var b=j(n);s=z(b,o),b.forEach(_),i=M(g),l=P(g,"DIV",{class:!0});var B=j(l);u=P(B,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),B.forEach(_),c=M(g),p=P(g,"SPAN",{class:!0});var U=j(p);m=z(U,h),U.forEach(_),g.forEach(_),x.forEach(_),this.h()},h(){$(n,"class","slider__range slider__range--min svelte-1h0gcvd"),$(u,"class","slider__input svelte-1h0gcvd"),$(u,"type","range"),$(u,"min",t[2]),$(u,"max",t[3]),$(u,"step",t[4]),u.value=t[0],$(l,"class","slider__input-container svelte-1h0gcvd"),$(p,"class","slider__range slider__range--max"),$(r,"class","slider__container svelte-1h0gcvd"),$(e,"class","slider")},m(w,x){k(w,e,x),v&&v.m(e,null),y(e,a),y(e,r),y(r,n),y(n,s),y(r,i),y(r,l),y(l,u),y(r,c),y(r,p),y(p,m),d||(f=me(u,"input",t[5]),d=!0)},p(w,[x]){w[1]?v?v.p(w,x):(v=_n(w),v.c(),v.m(e,a)):v&&(v.d(1),v=null),x&4&&o!==(o=lt(w[2])+"")&&oe(s,o),x&4&&$(u,"min",w[2]),x&8&&$(u,"max",w[3]),x&16&&$(u,"step",w[4]),x&1&&(u.value=w[0]),x&8&&h!==(h=lt(w[3])+"")&&oe(m,h)},i:ce,o:ce,d(w){w&&_(e),v&&v.d(),d=!1,f()}}}function lt(t){return t.toFixed(2).replace(/\.?0+$/,"")}function nl(t,e,a){const r=Ge();let{label:n=""}=e,{min:o=0}=e,{max:s=100}=e,{step:i=1}=e,{value:l=s<o?o:(s-o)/2}=e;function u(c){const p=c.target,h=parseFloat(p.value);Number.isNaN(h)||(a(0,l=h),r("input",{value:l}))}return t.$$set=c=>{"label"in c&&a(1,n=c.label),"min"in c&&a(2,o=c.min),"max"in c&&a(3,s=c.max),"step"in c&&a(4,i=c.step),"value"in c&&a(0,l=c.value)},[l,n,o,s,i,u]}class q extends V{constructor(e){super(),H(this,e,nl,tl,Y,{label:1,min:2,max:3,step:4,value:0})}}function rl(t){let e,a,r,n,o,s,i,l,u,c,p,h;return e=new q({props:{label:"width",min:1,max:1024,step:1,value:t[0].width}}),e.$on("input",t[1]),r=new q({props:{label:"height",min:1,max:1024,step:1,value:t[0].height}}),r.$on("input",t[2]),o=new q({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[0].delayMs}}),o.$on("input",t[3]),i=new q({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[0].totalFrames}}),i.$on("input",t[4]),u=new q({props:{label:"quality",min:1,max:30,step:1,value:t[0].quality}}),u.$on("input",t[5]),p=new ae({props:{label:"clear",value:t[0].clear}}),p.$on("input",t[6]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment),s=L(),A(i.$$.fragment),l=L(),A(u.$$.fragment),c=L(),A(p.$$.fragment)},l(m){C(e.$$.fragment,m),a=M(m),C(r.$$.fragment,m),n=M(m),C(o.$$.fragment,m),s=M(m),C(i.$$.fragment,m),l=M(m),C(u.$$.fragment,m),c=M(m),C(p.$$.fragment,m)},m(m,d){F(e,m,d),k(m,a,d),F(r,m,d),k(m,n,d),F(o,m,d),k(m,s,d),F(i,m,d),k(m,l,d),F(u,m,d),k(m,c,d),F(p,m,d),h=!0},p(m,d){const f={};d&1&&(f.value=m[0].width),e.$set(f);const v={};d&1&&(v.value=m[0].height),r.$set(v);const w={};d&1&&(w.value=m[0].delayMs),o.$set(w);const x={};d&1&&(x.value=m[0].totalFrames),i.$set(x);const g={};d&1&&(g.value=m[0].quality),u.$set(g);const b={};d&1&&(b.value=m[0].clear),p.$set(b)},i(m){h||(E(e.$$.fragment,m),E(r.$$.fragment,m),E(o.$$.fragment,m),E(i.$$.fragment,m),E(u.$$.fragment,m),E(p.$$.fragment,m),h=!0)},o(m){T(e.$$.fragment,m),T(r.$$.fragment,m),T(o.$$.fragment,m),T(i.$$.fragment,m),T(u.$$.fragment,m),T(p.$$.fragment,m),h=!1},d(m){O(e,m),m&&_(a),O(r,m),m&&_(n),O(o,m),m&&_(s),O(i,m),m&&_(l),O(u,m),m&&_(c),O(p,m)}}}function al(t){let e,a;return e=new le({props:{title:"Output",expanded:!0,$$slots:{default:[rl]},$$scope:{ctx:t}}}),e.$on("reset",ie.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&129&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function ol(t,e,a){let r;return Z(t,ie,n=>a(0,r=n)),[r,n=>ie.change({width:n.detail.value}),n=>ie.change({height:n.detail.value}),n=>ie.change({delayMs:n.detail.value}),n=>ie.change({totalFrames:n.detail.value}),n=>ie.change({quality:n.detail.value}),n=>ie.change({clear:n.detail.value})]}class il extends V{constructor(e){super(),H(this,e,ol,al,Y,{})}}function sl(t){let e,a,r,n,o,s;return e=new q({props:{label:`${t[0]}X`,min:-10,max:10,step:.01,value:t[1][0]}}),e.$on("input",t[3]),r=new q({props:{label:`${t[0]}Y`,min:-10,max:10,step:.01,value:t[1][1]}}),r.$on("input",t[4]),o=new q({props:{label:`${t[0]}Z`,min:-10,max:10,step:.01,value:t[1][2]}}),o.$on("input",t[5]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment)},l(i){C(e.$$.fragment,i),a=M(i),C(r.$$.fragment,i),n=M(i),C(o.$$.fragment,i)},m(i,l){F(e,i,l),k(i,a,l),F(r,i,l),k(i,n,l),F(o,i,l),s=!0},p(i,[l]){const u={};l&1&&(u.label=`${i[0]}X`),l&2&&(u.value=i[1][0]),e.$set(u);const c={};l&1&&(c.label=`${i[0]}Y`),l&2&&(c.value=i[1][1]),r.$set(c);const p={};l&1&&(p.label=`${i[0]}Z`),l&2&&(p.value=i[1][2]),o.$set(p)},i(i){s||(E(e.$$.fragment,i),E(r.$$.fragment,i),E(o.$$.fragment,i),s=!0)},o(i){T(e.$$.fragment,i),T(r.$$.fragment,i),T(o.$$.fragment,i),s=!1},d(i){O(e,i),i&&_(a),O(r,i),i&&_(n),O(o,i)}}}function ll(t,e,a){let{label:r=""}=e,{value:n=[0,0,-1]}=e;const o=Ge();function s(c,p){const h=[...n];h[c]=p,o("input",{value:h})}const i=c=>s(0,c.detail.value),l=c=>s(1,c.detail.value),u=c=>s(2,c.detail.value);return t.$$set=c=>{"label"in c&&a(0,r=c.label),"value"in c&&a(1,n=c.value)},[r,n,s,i,l,u]}class Ae extends V{constructor(e){super(),H(this,e,ll,sl,Y,{label:0,value:1})}}function ul(t){let e,a,r,n,o,s;return e=new Ae({props:{label:"position",value:t[0].position}}),e.$on("input",t[1]),r=new Ae({props:{label:"lookAt",value:t[0].lookAt}}),r.$on("input",t[2]),o=new Ae({props:{label:"up",value:t[0].up}}),o.$on("input",t[3]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment)},l(i){C(e.$$.fragment,i),a=M(i),C(r.$$.fragment,i),n=M(i),C(o.$$.fragment,i)},m(i,l){F(e,i,l),k(i,a,l),F(r,i,l),k(i,n,l),F(o,i,l),s=!0},p(i,l){const u={};l&1&&(u.value=i[0].position),e.$set(u);const c={};l&1&&(c.value=i[0].lookAt),r.$set(c);const p={};l&1&&(p.value=i[0].up),o.$set(p)},i(i){s||(E(e.$$.fragment,i),E(r.$$.fragment,i),E(o.$$.fragment,i),s=!0)},o(i){T(e.$$.fragment,i),T(r.$$.fragment,i),T(o.$$.fragment,i),s=!1},d(i){O(e,i),i&&_(a),O(r,i),i&&_(n),O(o,i)}}}function cl(t){let e,a;return e=new le({props:{title:"Camera",expanded:!1,$$slots:{default:[ul]},$$scope:{ctx:t}}}),e.$on("reset",Pe.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&17&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function ml(t,e,a){let r;return Z(t,Pe,n=>a(0,r=n)),[r,n=>Pe.change({position:n.detail.value}),n=>Pe.change({lookAt:n.detail.value}),n=>Pe.change({up:n.detail.value})]}class fl extends V{constructor(e){super(),H(this,e,ml,cl,Y,{})}}function pl(t){let e,a,r,n,o,s,i;return{c(){e=S("div"),a=X(t[1]),r=L(),n=S("label"),o=S("input"),this.h()},l(l){e=P(l,"DIV",{class:!0});var u=j(e);a=z(u,t[1]),r=M(u),n=P(u,"LABEL",{class:!0});var c=j(n);o=P(c,"INPUT",{class:!0,type:!0}),c.forEach(_),u.forEach(_),this.h()},h(){$(o,"class","toggle__checkbox svelte-1j9rfin"),$(o,"type","checkbox"),o.checked=t[0],$(n,"class","toggle__label svelte-1j9rfin"),ye(n,"toggle__label--active",t[0]),$(e,"class","toggle svelte-1j9rfin")},m(l,u){k(l,e,u),y(e,a),y(e,r),y(e,n),y(n,o),s||(i=me(o,"change",t[2]),s=!0)},p(l,[u]){u&2&&oe(a,l[1]),u&1&&(o.checked=l[0]),u&1&&ye(n,"toggle__label--active",l[0])},i:ce,o:ce,d(l){l&&_(e),s=!1,i()}}}function gl(t,e,a){const r=Ge();let{label:n=""}=e,{value:o=!1}=e;function s(i){const l=i.target;a(0,o=Boolean(l.checked)),r("change",{value:o})}return t.$$set=i=>{"label"in i&&a(1,n=i.label),"value"in i&&a(0,o=i.value)},[o,n,s]}class ut extends V{constructor(e){super(),H(this,e,gl,pl,Y,{label:1,value:0})}}function dl(t){let e,a,r,n,o,s,i,l,u,c,p,h,m,d;return e=new ut({props:{label:"perspective",value:t[0].perspective}}),e.$on("change",t[1]),r=new q({props:{label:"left",min:-10,max:10,step:.01,value:t[0].left}}),r.$on("input",t[2]),o=new q({props:{label:"right",min:-10,max:10,step:.01,value:t[0].right}}),o.$on("input",t[3]),i=new q({props:{label:"bottom",min:-10,max:10,step:.01,value:t[0].bottom}}),i.$on("input",t[4]),u=new q({props:{label:"top",min:-10,max:10,step:.01,value:t[0].top}}),u.$on("input",t[5]),p=new q({props:{label:"near",min:.01,max:10,step:.01,value:t[0].near}}),p.$on("input",t[6]),m=new q({props:{label:"far",min:.01,max:10,step:.01,value:t[0].far}}),m.$on("input",t[7]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment),s=L(),A(i.$$.fragment),l=L(),A(u.$$.fragment),c=L(),A(p.$$.fragment),h=L(),A(m.$$.fragment)},l(f){C(e.$$.fragment,f),a=M(f),C(r.$$.fragment,f),n=M(f),C(o.$$.fragment,f),s=M(f),C(i.$$.fragment,f),l=M(f),C(u.$$.fragment,f),c=M(f),C(p.$$.fragment,f),h=M(f),C(m.$$.fragment,f)},m(f,v){F(e,f,v),k(f,a,v),F(r,f,v),k(f,n,v),F(o,f,v),k(f,s,v),F(i,f,v),k(f,l,v),F(u,f,v),k(f,c,v),F(p,f,v),k(f,h,v),F(m,f,v),d=!0},p(f,v){const w={};v&1&&(w.value=f[0].perspective),e.$set(w);const x={};v&1&&(x.value=f[0].left),r.$set(x);const g={};v&1&&(g.value=f[0].right),o.$set(g);const b={};v&1&&(b.value=f[0].bottom),i.$set(b);const B={};v&1&&(B.value=f[0].top),u.$set(B);const U={};v&1&&(U.value=f[0].near),p.$set(U);const Q={};v&1&&(Q.value=f[0].far),m.$set(Q)},i(f){d||(E(e.$$.fragment,f),E(r.$$.fragment,f),E(o.$$.fragment,f),E(i.$$.fragment,f),E(u.$$.fragment,f),E(p.$$.fragment,f),E(m.$$.fragment,f),d=!0)},o(f){T(e.$$.fragment,f),T(r.$$.fragment,f),T(o.$$.fragment,f),T(i.$$.fragment,f),T(u.$$.fragment,f),T(p.$$.fragment,f),T(m.$$.fragment,f),d=!1},d(f){O(e,f),f&&_(a),O(r,f),f&&_(n),O(o,f),f&&_(s),O(i,f),f&&_(l),O(u,f),f&&_(c),O(p,f),f&&_(h),O(m,f)}}}function hl(t){let e,a;return e=new le({props:{title:"Projection",expanded:!1,$$slots:{default:[dl]},$$scope:{ctx:t}}}),e.$on("reset",se.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&257&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function $l(t,e,a){let r;return Z(t,se,n=>a(0,r=n)),[r,n=>se.change({perspective:n.detail.value}),n=>se.change({left:n.detail.value}),n=>se.change({right:n.detail.value}),n=>se.change({bottom:n.detail.value}),n=>se.change({top:n.detail.value}),n=>se.change({near:n.detail.value}),n=>se.change({far:n.detail.value})]}class vl extends V{constructor(e){super(),H(this,e,$l,hl,Y,{})}}function _l(t){let e,a,r,n;return e=new ae({props:{label:"specular",value:t[0].specular}}),e.$on("input",t[1]),r=new q({props:{label:"shininess",min:0,max:100,step:.1,value:t[0].shininess}}),r.$on("input",t[2]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment)},l(o){C(e.$$.fragment,o),a=M(o),C(r.$$.fragment,o)},m(o,s){F(e,o,s),k(o,a,s),F(r,o,s),n=!0},p(o,s){const i={};s&1&&(i.value=o[0].specular),e.$set(i);const l={};s&1&&(l.value=o[0].shininess),r.$set(l)},i(o){n||(E(e.$$.fragment,o),E(r.$$.fragment,o),n=!0)},o(o){T(e.$$.fragment,o),T(r.$$.fragment,o),n=!1},d(o){O(e,o),o&&_(a),O(r,o)}}}function bl(t){let e,a;return e=new le({props:{title:"Material",expanded:!1,$$slots:{default:[_l]},$$scope:{ctx:t}}}),e.$on("reset",qe.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&9&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function yl(t,e,a){let r;return Z(t,qe,n=>a(0,r=n)),[r,n=>qe.change({specular:n.detail.value}),n=>qe.change({shininess:n.detail.value})]}class xl extends V{constructor(e){super(),H(this,e,yl,bl,Y,{})}}function wl(t){let e,a,r,n,o,s,i,l;return e=new ae({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),r=new ae({props:{label:"diffuse",value:t[0].diffuse}}),r.$on("input",t[2]),o=new ae({props:{label:"specular",value:t[0].specular}}),o.$on("input",t[3]),i=new Ae({props:{label:"direction",value:t[0].direction}}),i.$on("input",t[4]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment),s=L(),A(i.$$.fragment)},l(u){C(e.$$.fragment,u),a=M(u),C(r.$$.fragment,u),n=M(u),C(o.$$.fragment,u),s=M(u),C(i.$$.fragment,u)},m(u,c){F(e,u,c),k(u,a,c),F(r,u,c),k(u,n,c),F(o,u,c),k(u,s,c),F(i,u,c),l=!0},p(u,c){const p={};c&1&&(p.value=u[0].ambient),e.$set(p);const h={};c&1&&(h.value=u[0].diffuse),r.$set(h);const m={};c&1&&(m.value=u[0].specular),o.$set(m);const d={};c&1&&(d.value=u[0].direction),i.$set(d)},i(u){l||(E(e.$$.fragment,u),E(r.$$.fragment,u),E(o.$$.fragment,u),E(i.$$.fragment,u),l=!0)},o(u){T(e.$$.fragment,u),T(r.$$.fragment,u),T(o.$$.fragment,u),T(i.$$.fragment,u),l=!1},d(u){O(e,u),u&&_(a),O(r,u),u&&_(n),O(o,u),u&&_(s),O(i,u)}}}function El(t){let e,a;return e=new le({props:{title:"Directional light",expanded:!1,$$slots:{default:[wl]},$$scope:{ctx:t}}}),e.$on("reset",Te.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&33&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function Tl(t,e,a){let r;return Z(t,Te,n=>a(0,r=n)),[r,n=>Te.change({ambient:n.detail.value}),n=>Te.change({diffuse:n.detail.value}),n=>Te.change({specular:n.detail.value}),n=>Te.change({direction:n.detail.value})]}class Al extends V{constructor(e){super(),H(this,e,Tl,El,Y,{})}}function Cl(t){let e,a,r,n,o,s,i,l,u,c,p,h;return e=new ae({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),r=new ae({props:{label:"diffuse",value:t[0].diffuse}}),r.$on("input",t[2]),o=new ae({props:{label:"specular",value:t[0].specular}}),o.$on("input",t[3]),i=new Ae({props:{label:"position",value:t[0].position}}),i.$on("input",t[4]),u=new q({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),u.$on("input",t[5]),p=new q({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),p.$on("input",t[6]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment),s=L(),A(i.$$.fragment),l=L(),A(u.$$.fragment),c=L(),A(p.$$.fragment)},l(m){C(e.$$.fragment,m),a=M(m),C(r.$$.fragment,m),n=M(m),C(o.$$.fragment,m),s=M(m),C(i.$$.fragment,m),l=M(m),C(u.$$.fragment,m),c=M(m),C(p.$$.fragment,m)},m(m,d){F(e,m,d),k(m,a,d),F(r,m,d),k(m,n,d),F(o,m,d),k(m,s,d),F(i,m,d),k(m,l,d),F(u,m,d),k(m,c,d),F(p,m,d),h=!0},p(m,d){const f={};d&1&&(f.value=m[0].ambient),e.$set(f);const v={};d&1&&(v.value=m[0].diffuse),r.$set(v);const w={};d&1&&(w.value=m[0].specular),o.$set(w);const x={};d&1&&(x.value=m[0].position),i.$set(x);const g={};d&1&&(g.value=m[0].attenuation1),u.$set(g);const b={};d&1&&(b.value=m[0].attenuation2),p.$set(b)},i(m){h||(E(e.$$.fragment,m),E(r.$$.fragment,m),E(o.$$.fragment,m),E(i.$$.fragment,m),E(u.$$.fragment,m),E(p.$$.fragment,m),h=!0)},o(m){T(e.$$.fragment,m),T(r.$$.fragment,m),T(o.$$.fragment,m),T(i.$$.fragment,m),T(u.$$.fragment,m),T(p.$$.fragment,m),h=!1},d(m){O(e,m),m&&_(a),O(r,m),m&&_(n),O(o,m),m&&_(s),O(i,m),m&&_(l),O(u,m),m&&_(c),O(p,m)}}}function Fl(t){let e,a;return e=new le({props:{title:"Point light",expanded:!1,$$slots:{default:[Cl]},$$scope:{ctx:t}}}),e.$on("reset",he.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&129&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function Ol(t,e,a){let r;return Z(t,he,n=>a(0,r=n)),[r,n=>he.change({ambient:n.detail.value}),n=>he.change({diffuse:n.detail.value}),n=>he.change({specular:n.detail.value}),n=>he.change({position:n.detail.value}),n=>he.change({attenuation1:n.detail.value}),n=>he.change({attenuation2:n.detail.value})]}class Ll extends V{constructor(e){super(),H(this,e,Ol,Fl,Y,{})}}function Ml(t){let e,a,r,n,o,s,i,l,u,c,p,h,m,d,f,v,w,x;return e=new ae({props:{label:"ambient",value:t[0].ambient}}),e.$on("input",t[1]),r=new ae({props:{label:"diffuse",value:t[0].diffuse}}),r.$on("input",t[2]),o=new ae({props:{label:"specular",value:t[0].specular}}),o.$on("input",t[3]),i=new Ae({props:{label:"position",value:t[0].position}}),i.$on("input",t[4]),u=new Ae({props:{label:"direction",value:t[0].direction}}),u.$on("input",t[5]),p=new q({props:{label:"innerDegrees",min:0,max:360,step:1,value:t[0].innerDegrees}}),p.$on("input",t[6]),m=new q({props:{label:"outerDegrees",min:0,max:360,step:1,value:t[0].outerDegrees}}),m.$on("input",t[7]),f=new q({props:{label:"attenuation1",min:0,max:10,step:.01,value:t[0].attenuation1}}),f.$on("input",t[8]),w=new q({props:{label:"attenuation2",min:0,max:10,step:.01,value:t[0].attenuation2}}),w.$on("input",t[9]),{c(){A(e.$$.fragment),a=L(),A(r.$$.fragment),n=L(),A(o.$$.fragment),s=L(),A(i.$$.fragment),l=L(),A(u.$$.fragment),c=L(),A(p.$$.fragment),h=L(),A(m.$$.fragment),d=L(),A(f.$$.fragment),v=L(),A(w.$$.fragment)},l(g){C(e.$$.fragment,g),a=M(g),C(r.$$.fragment,g),n=M(g),C(o.$$.fragment,g),s=M(g),C(i.$$.fragment,g),l=M(g),C(u.$$.fragment,g),c=M(g),C(p.$$.fragment,g),h=M(g),C(m.$$.fragment,g),d=M(g),C(f.$$.fragment,g),v=M(g),C(w.$$.fragment,g)},m(g,b){F(e,g,b),k(g,a,b),F(r,g,b),k(g,n,b),F(o,g,b),k(g,s,b),F(i,g,b),k(g,l,b),F(u,g,b),k(g,c,b),F(p,g,b),k(g,h,b),F(m,g,b),k(g,d,b),F(f,g,b),k(g,v,b),F(w,g,b),x=!0},p(g,b){const B={};b&1&&(B.value=g[0].ambient),e.$set(B);const U={};b&1&&(U.value=g[0].diffuse),r.$set(U);const Q={};b&1&&(Q.value=g[0].specular),o.$set(Q);const ee={};b&1&&(ee.value=g[0].position),i.$set(ee);const be={};b&1&&(be.value=g[0].direction),u.$set(be);const I={};b&1&&(I.value=g[0].innerDegrees),p.$set(I);const G={};b&1&&(G.value=g[0].outerDegrees),m.$set(G);const te={};b&1&&(te.value=g[0].attenuation1),f.$set(te);const Ln={};b&1&&(Ln.value=g[0].attenuation2),w.$set(Ln)},i(g){x||(E(e.$$.fragment,g),E(r.$$.fragment,g),E(o.$$.fragment,g),E(i.$$.fragment,g),E(u.$$.fragment,g),E(p.$$.fragment,g),E(m.$$.fragment,g),E(f.$$.fragment,g),E(w.$$.fragment,g),x=!0)},o(g){T(e.$$.fragment,g),T(r.$$.fragment,g),T(o.$$.fragment,g),T(i.$$.fragment,g),T(u.$$.fragment,g),T(p.$$.fragment,g),T(m.$$.fragment,g),T(f.$$.fragment,g),T(w.$$.fragment,g),x=!1},d(g){O(e,g),g&&_(a),O(r,g),g&&_(n),O(o,g),g&&_(s),O(i,g),g&&_(l),O(u,g),g&&_(c),O(p,g),g&&_(h),O(m,g),g&&_(d),O(f,g),g&&_(v),O(w,g)}}}function Sl(t){let e,a;return e=new le({props:{title:"Spot light",expanded:!1,$$slots:{default:[Ml]},$$scope:{ctx:t}}}),e.$on("reset",ne.reset),{c(){A(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,n){F(e,r,n),a=!0},p(r,[n]){const o={};n&1025&&(o.$$scope={dirty:n,ctx:r}),e.$set(o)},i(r){a||(E(e.$$.fragment,r),a=!0)},o(r){T(e.$$.fragment,r),a=!1},d(r){O(e,r)}}}function Pl(t,e,a){let r;return Z(t,ne,n=>a(0,r=n)),[r,n=>ne.change({ambient:n.detail.value}),n=>ne.change({diffuse:n.detail.value}),n=>ne.change({specular:n.detail.value}),n=>ne.change({position:n.detail.value}),n=>ne.change({direction:n.detail.value}),n=>ne.change({innerDegrees:n.detail.value}),n=>ne.change({outerDegrees:n.detail.value}),n=>ne.change({attenuation1:n.detail.value}),n=>ne.change({attenuation2:n.detail.value})]}class kl extends V{constructor(e){super(),H(this,e,Pl,Sl,Y,{})}}function jl(t){let e,a,r,n,o,s,i,l,u,c,p,h,m,d,f,v,w,x;return a=new Ws({}),n=new il({}),s=new fl({}),l=new vl({}),c=new xl({}),h=new Al({}),d=new Ll({}),v=new kl({}),{c(){e=S("aside"),A(a.$$.fragment),r=L(),A(n.$$.fragment),o=L(),A(s.$$.fragment),i=L(),A(l.$$.fragment),u=L(),A(c.$$.fragment),p=L(),A(h.$$.fragment),m=L(),A(d.$$.fragment),f=L(),A(v.$$.fragment),this.h()},l(g){e=P(g,"ASIDE",{class:!0});var b=j(e);C(a.$$.fragment,b),r=M(b),C(n.$$.fragment,b),o=M(b),C(s.$$.fragment,b),i=M(b),C(l.$$.fragment,b),u=M(b),C(c.$$.fragment,b),p=M(b),C(h.$$.fragment,b),m=M(b),C(d.$$.fragment,b),f=M(b),C(v.$$.fragment,b),b.forEach(_),this.h()},h(){$(e,"class",w=ue(`container ${t[0]}`)+" svelte-7v3svs")},m(g,b){k(g,e,b),F(a,e,null),y(e,r),F(n,e,null),y(e,o),F(s,e,null),y(e,i),F(l,e,null),y(e,u),F(c,e,null),y(e,p),F(h,e,null),y(e,m),F(d,e,null),y(e,f),F(v,e,null),x=!0},p(g,[b]){(!x||b&1&&w!==(w=ue(`container ${g[0]}`)+" svelte-7v3svs"))&&$(e,"class",w)},i(g){x||(E(a.$$.fragment,g),E(n.$$.fragment,g),E(s.$$.fragment,g),E(l.$$.fragment,g),E(c.$$.fragment,g),E(h.$$.fragment,g),E(d.$$.fragment,g),E(v.$$.fragment,g),x=!0)},o(g){T(a.$$.fragment,g),T(n.$$.fragment,g),T(s.$$.fragment,g),T(l.$$.fragment,g),T(c.$$.fragment,g),T(h.$$.fragment,g),T(d.$$.fragment,g),T(v.$$.fragment,g),x=!1},d(g){g&&_(e),O(a),O(n),O(s),O(l),O(c),O(h),O(d),O(v)}}}function Rl(t,e,a){let{class:r=""}=e;return t.$$set=n=>{"class"in n&&a(0,r=n.class)},[r]}class Ul extends V{constructor(e){super(),H(this,e,Rl,jl,Y,{class:0})}}function bn(t,e,a){const r=t.slice();return r[6]=e[a],r}function yn(t,e,a){const r=t.slice();return r[9]=e[a],r}function Dl(t){let e,a;function r(...n){return t[4](t[9],...n)}return e=new ut({props:{label:t[9].name,value:t[9].value}}),e.$on("change",r),{c(){A(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){F(e,n,o),a=!0},p(n,o){t=n;const s={};o&2&&(s.label=t[9].name),o&2&&(s.value=t[9].value),e.$set(s)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){O(e,n)}}}function Il(t){let e,a;function r(...n){return t[3](t[9],...n)}return e=new q({props:{label:t[9].name,min:t[9].min,max:t[9].max,step:t[9].step,value:t[9].value}}),e.$on("input",r),{c(){A(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){F(e,n,o),a=!0},p(n,o){t=n;const s={};o&2&&(s.label=t[9].name),o&2&&(s.min=t[9].min),o&2&&(s.max=t[9].max),o&2&&(s.step=t[9].step),o&2&&(s.value=t[9].value),e.$set(s)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){O(e,n)}}}function xn(t){let e,a,r,n;const o=[Il,Dl],s=[];function i(l,u){return l[9].type==="slider"?0:l[9].type==="toggle"?1:-1}return~(e=i(t))&&(a=s[e]=o[e](t)),{c(){a&&a.c(),r=ke()},l(l){a&&a.l(l),r=ke()},m(l,u){~e&&s[e].m(l,u),k(l,r,u),n=!0},p(l,u){let c=e;e=i(l),e===c?~e&&s[e].p(l,u):(a&&(ct(),T(s[c],1,1,()=>{s[c]=null}),mt()),~e?(a=s[e],a?a.p(l,u):(a=s[e]=o[e](l),a.c()),E(a,1),a.m(r.parentNode,r)):a=null)},i(l){n||(E(a),n=!0)},o(l){T(a),n=!1},d(l){~e&&s[e].d(l),l&&_(r)}}}function ql(t){let e,a,r=t[1].current.editOptions,n=[];for(let s=0;s<r.length;s+=1)n[s]=xn(yn(t,r,s));const o=s=>T(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ke()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=ke()},m(s,i){for(let l=0;l<n.length;l+=1)n[l].m(s,i);k(s,e,i),a=!0},p(s,i){if(i&2){r=s[1].current.editOptions;let l;for(l=0;l<r.length;l+=1){const u=yn(s,r,l);n[l]?(n[l].p(u,i),E(n[l],1)):(n[l]=xn(u),n[l].c(),E(n[l],1),n[l].m(e.parentNode,e))}for(ct(),l=r.length;l<n.length;l+=1)o(l);mt()}},i(s){if(!a){for(let i=0;i<r.length;i+=1)E(n[i]);a=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)T(n[i]);a=!1},d(s){Sn(n,s),s&&_(e)}}}function wn(t){let e,a;function r(...n){return t[5](t[6],...n)}return e=new ut({props:{label:t[6].type,value:t[6].enabled}}),e.$on("change",r),{c(){A(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,o){F(e,n,o),a=!0},p(n,o){t=n;const s={};o&4&&(s.label=t[6].type),o&4&&(s.value=t[6].enabled),e.$set(s)},i(n){a||(E(e.$$.fragment,n),a=!0)},o(n){T(e.$$.fragment,n),a=!1},d(n){O(e,n)}}}function Bl(t){let e,a,r=t[2],n=[];for(let s=0;s<r.length;s+=1)n[s]=wn(bn(t,r,s));const o=s=>T(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ke()},l(s){for(let i=0;i<n.length;i+=1)n[i].l(s);e=ke()},m(s,i){for(let l=0;l<n.length;l+=1)n[l].m(s,i);k(s,e,i),a=!0},p(s,i){if(i&4){r=s[2];let l;for(l=0;l<r.length;l+=1){const u=bn(s,r,l);n[l]?(n[l].p(u,i),E(n[l],1)):(n[l]=wn(u),n[l].c(),E(n[l],1),n[l].m(e.parentNode,e))}for(ct(),l=r.length;l<n.length;l+=1)o(l);mt()}},i(s){if(!a){for(let i=0;i<r.length;i+=1)E(n[i]);a=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)T(n[i]);a=!1},d(s){Sn(n,s),s&&_(e)}}}function Xl(t){let e,a,r,n,o,s;return a=new le({props:{title:t[1].current.name,expanded:!0,$$slots:{default:[ql]},$$scope:{ctx:t}}}),a.$on("reset",de.resetEditOptions),n=new le({props:{title:"Effects",expanded:!1,$$slots:{default:[Bl]},$$scope:{ctx:t}}}),n.$on("reset",it.reset),{c(){e=S("aside"),A(a.$$.fragment),r=L(),A(n.$$.fragment),this.h()},l(i){e=P(i,"ASIDE",{class:!0});var l=j(e);C(a.$$.fragment,l),r=M(l),C(n.$$.fragment,l),l.forEach(_),this.h()},h(){$(e,"class",o=ue(`container ${t[0]}`)+" svelte-7v3svs")},m(i,l){k(i,e,l),F(a,e,null),y(e,r),F(n,e,null),s=!0},p(i,[l]){const u={};l&2&&(u.title=i[1].current.name),l&4098&&(u.$$scope={dirty:l,ctx:i}),a.$set(u);const c={};l&4100&&(c.$$scope={dirty:l,ctx:i}),n.$set(c),(!s||l&1&&o!==(o=ue(`container ${i[0]}`)+" svelte-7v3svs"))&&$(e,"class",o)},i(i){s||(E(a.$$.fragment,i),E(n.$$.fragment,i),s=!0)},o(i){T(a.$$.fragment,i),T(n.$$.fragment,i),s=!1},d(i){i&&_(e),O(a),O(n)}}}function zl(t,e,a){let r,n;Z(t,de,u=>a(1,r=u)),Z(t,it,u=>a(2,n=u));let{class:o=""}=e;const s=(u,c)=>de.changeEditOptions(u,c.detail.value),i=(u,c)=>de.changeEditOptions(u,c.detail.value),l=(u,c)=>it.change(u.type,c.detail.value);return t.$$set=u=>{"class"in u&&a(0,o=u.class)},[o,r,n,s,i,l]}class Gl extends V{constructor(e){super(),H(this,e,zl,Xl,Y,{class:0})}}function En(t,e,a){const r=t.slice();return r[3]=e[a],r}function Tn(t,e){let a,r,n,o,s,i,l=e[3].name+"",u,c,p,h;function m(){return e[2](e[3])}return{key:t,first:null,c(){a=S("button"),r=S("img"),s=L(),i=S("span"),u=X(l),c=L(),this.h()},l(d){a=P(d,"BUTTON",{type:!0,class:!0});var f=j(a);r=P(f,"IMG",{class:!0,src:!0,alt:!0}),s=M(f),i=P(f,"SPAN",{});var v=j(i);u=z(v,l),v.forEach(_),c=M(f),f.forEach(_),this.h()},h(){$(r,"class","image svelte-1l1v01j"),Ce(r.src,n=`${ft}/demo-${e[3].name}.gif`)||$(r,"src",n),$(r,"alt",o=e[3].name),$(a,"type","button"),$(a,"class","option svelte-1l1v01j"),ye(a,"option--selected",e[3]===e[1].current),this.first=a},m(d,f){k(d,a,f),y(a,r),y(a,s),y(a,i),y(i,u),y(a,c),p||(h=me(a,"click",m),p=!0)},p(d,f){e=d,f&2&&!Ce(r.src,n=`${ft}/demo-${e[3].name}.gif`)&&$(r,"src",n),f&2&&o!==(o=e[3].name)&&$(r,"alt",o),f&2&&l!==(l=e[3].name+"")&&oe(u,l),f&2&&ye(a,"option--selected",e[3]===e[1].current)},d(d){d&&_(a),p=!1,h()}}}function Nl(t){let e,a=[],r=new Map,n,o=t[1].animations;const s=i=>i[3].name;for(let i=0;i<o.length;i+=1){let l=En(t,o,i),u=s(l);r.set(u,a[i]=Tn(u,l))}return{c(){e=S("aside");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=P(i,"ASIDE",{class:!0});var l=j(e);for(let u=0;u<a.length;u+=1)a[u].l(l);l.forEach(_),this.h()},h(){$(e,"class",n=ue(`container ${t[0]}`)+" svelte-1l1v01j")},m(i,l){k(i,e,l);for(let u=0;u<a.length;u+=1)a[u].m(e,null)},p(i,[l]){l&2&&(o=i[1].animations,a=cu(a,l,s,1,i,o,r,e,mu,Tn,null,En)),l&1&&n!==(n=ue(`container ${i[0]}`)+" svelte-1l1v01j")&&$(e,"class",n)},i:ce,o:ce,d(i){i&&_(e);for(let l=0;l<a.length;l+=1)a[l].d()}}}function Vl(t,e,a){let r;Z(t,de,s=>a(1,r=s));let{class:n=""}=e;const o=s=>de.changeCurrentAnimation(s);return t.$$set=s=>{"class"in s&&a(0,n=s.class)},[n,r,o]}class Hl extends V{constructor(e){super(),H(this,e,Vl,Nl,Y,{class:0})}}function An(t){t[12]=t[13].dataUri}function Cn(t){let e,a,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Jl,then:Wl,catch:Yl,value:13,error:14};return Pn(a=t[3],r),{c(){e=S("div"),r.block.c(),this.h()},l(n){e=P(n,"DIV",{class:!0});var o=j(e);r.block.l(o),o.forEach(_),this.h()},h(){$(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(n,o){k(n,e,o),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null},p(n,o){t=n,r.ctx=t,o&8&&a!==(a=t[3])&&Pn(a,r)||gu(r,t,o)},d(n){n&&_(e),r.block.d(),r.token=null,r=null}}}function Yl(t){let e,a,r=t[14]+"",n;return{c(){e=S("p"),a=X("An error has occurred: "),n=X(r),this.h()},l(o){e=P(o,"P",{class:!0});var s=j(e);a=z(s,"An error has occurred: "),n=z(s,r),s.forEach(_),this.h()},h(){$(e,"class","preview__error svelte-13qbjon")},m(o,s){k(o,e,s),y(e,a),y(e,n)},p(o,s){s&8&&r!==(r=o[14]+"")&&oe(n,r)},d(o){o&&_(e)}}}function Wl(t){An(t);let e,a,r,n,o,s,i;return{c(){e=S("div"),a=S("img"),n=L(),o=S("a"),s=X("Download"),this.h()},l(l){e=P(l,"DIV",{class:!0});var u=j(e);a=P(u,"IMG",{class:!0,src:!0,alt:!0}),u.forEach(_),n=M(l),o=P(l,"A",{class:!0,download:!0,href:!0});var c=j(o);s=z(c,"Download"),c.forEach(_),this.h()},h(){$(a,"class","preview__image svelte-13qbjon"),Ce(a.src,r=t[12])||$(a,"src",r),$(a,"alt","generated gif"),$(e,"class","preview__image-container svelte-13qbjon"),$(o,"class","preview__download-button svelte-13qbjon"),$(o,"download","jumping_peter.gif"),$(o,"href",i=t[12])},m(l,u){k(l,e,u),y(e,a),k(l,n,u),k(l,o,u),y(o,s)},p(l,u){An(l),u&8&&!Ce(a.src,r=l[12])&&$(a,"src",r),u&8&&i!==(i=l[12])&&$(o,"href",i)},d(l){l&&_(e),l&&_(n),l&&_(o)}}}function Jl(t){let e,a,r,n,o,s,i=t[4].frame+"",l,u,c=t[5].totalFrames+"",p,h,m,d,f,v;return{c(){e=S("div"),a=S("p"),r=X("Generating..."),n=L(),o=S("p"),s=X("["),l=X(i),u=X(" / "),p=X(c),h=X("]"),m=L(),d=S("progress"),this.h()},l(w){e=P(w,"DIV",{class:!0});var x=j(e);a=P(x,"P",{});var g=j(a);r=z(g,"Generating..."),g.forEach(_),n=M(x),o=P(x,"P",{});var b=j(o);s=z(b,"["),l=z(b,i),u=z(b," / "),p=z(b,c),h=z(b,"]"),b.forEach(_),m=M(x),d=P(x,"PROGRESS",{class:!0,max:!0}),j(d).forEach(_),x.forEach(_),this.h()},h(){$(d,"class","preview__progress svelte-13qbjon"),$(d,"max",f=t[5].totalFrames),d.value=v=t[4].frame,$(e,"class","preview__loading svelte-13qbjon")},m(w,x){k(w,e,x),y(e,a),y(a,r),y(e,n),y(e,o),y(o,s),y(o,l),y(o,u),y(o,p),y(o,h),y(e,m),y(e,d)},p(w,x){x&16&&i!==(i=w[4].frame+"")&&oe(l,i),x&32&&c!==(c=w[5].totalFrames+"")&&oe(p,c),x&32&&f!==(f=w[5].totalFrames)&&$(d,"max",f),x&16&&v!==(v=w[4].frame)&&(d.value=v)},d(w){w&&_(e)}}}function Kl(t){let e,a,r,n,o,s,i,l,u,c,p,h;r=new ut({props:{label:"Debug Mode",value:t[1]}}),r.$on("change",t[7]);let m=!t[1]&&t[3]&&Cn(t);return c=new q({props:{min:0,max:t[5].totalFrames-1,step:1,value:t[4].frame}}),c.$on("input",t[6]),{c(){e=S("main"),a=S("div"),A(r.$$.fragment),n=L(),m&&m.c(),o=L(),s=S("div"),i=S("div"),l=S("canvas"),u=L(),A(c.$$.fragment),this.h()},l(d){e=P(d,"MAIN",{class:!0});var f=j(e);a=P(f,"DIV",{class:!0});var v=j(a);C(r.$$.fragment,v),v.forEach(_),n=M(f),m&&m.l(f),o=M(f),s=P(f,"DIV",{class:!0});var w=j(s);i=P(w,"DIV",{class:!0});var x=j(i);l=P(x,"CANVAS",{class:!0,style:!0}),j(l).forEach(_),x.forEach(_),u=M(w),C(c.$$.fragment,w),w.forEach(_),f.forEach(_),this.h()},h(){$(a,"class","preview__debug-input svelte-13qbjon"),$(l,"class","preview__image svelte-13qbjon"),fu(l,"transform","scaleY(-1)"),$(i,"class","preview__image-container svelte-13qbjon"),$(s,"class","preview__container preview__container--debug svelte-13qbjon"),$(e,"class",p=ue(`preview ${t[0]}`)+" svelte-13qbjon"),ye(e,"preview--debug",t[1]),ye(e,"preview--no-debug",!t[1])},m(d,f){k(d,e,f),y(e,a),F(r,a,null),y(e,n),m&&m.m(e,null),y(e,o),y(e,s),y(s,i),y(i,l),t[9](l),y(s,u),F(c,s,null),h=!0},p(d,[f]){const v={};f&2&&(v.value=d[1]),r.$set(v),!d[1]&&d[3]?m?m.p(d,f):(m=Cn(d),m.c(),m.m(e,o)):m&&(m.d(1),m=null);const w={};f&32&&(w.max=d[5].totalFrames-1),f&16&&(w.value=d[4].frame),c.$set(w),(!h||f&1&&p!==(p=ue(`preview ${d[0]}`)+" svelte-13qbjon"))&&$(e,"class",p),(!h||f&3)&&ye(e,"preview--debug",d[1]),(!h||f&3)&&ye(e,"preview--no-debug",!d[1])},i(d){h||(E(r.$$.fragment,d),E(c.$$.fragment,d),h=!0)},o(d){T(r.$$.fragment,d),T(c.$$.fragment,d),h=!1},d(d){d&&_(e),O(r),m&&m.d(),t[9](null),O(c)}}}function Ql(t,e,a){let r,n,o;Z(t,wt,f=>a(8,r=f)),Z(t,Be,f=>a(4,n=f)),Z(t,ie,f=>a(5,o=f));let s,{class:i=""}=e,l=!1,u=null;function c(){Be.renderFrame().catch(f=>{throw console.error(`renderFrame failed: ${f}`),f})}function p(){a(3,u=Be.animate().catch(f=>{throw console.error(`animate failed: ${f}`),f}))}pu(()=>{Be.changeCanvas(s),p()});function h(f){Be.renderFrame(f.detail.value).catch(v=>console.error(`Animation failed: ${v}`))}function m(f){a(1,l=f.detail.value)}function d(f){du[f?"unshift":"push"](()=>{s=f,a(2,s)})}return t.$$set=f=>{"class"in f&&a(0,i=f.class)},t.$$.update=()=>{t.$$.dirty&258&&(l?c():p())},[i,l,s,u,n,o,h,m,r,d]}class Zl extends V{constructor(e){super(),H(this,e,Ql,Kl,Y,{class:0})}}function eu(t){let e,a,r,n,o,s,i,l,u,c,p,h,m,d,f,v,w,x,g,b,B,U,Q,ee,be;return document.title=e=Xe,v=new we({props:{class:"header"}}),x=new Hl({props:{class:"animations"}}),b=new Ul({props:{class:"common-options"}}),U=new Gl({props:{class:"animation-options"}}),ee=new Zl({props:{class:"preview"}}),{c(){a=S("meta"),r=S("meta"),n=S("meta"),o=S("meta"),s=S("meta"),i=S("meta"),l=S("meta"),u=S("meta"),c=S("meta"),p=S("meta"),h=S("meta"),m=S("meta"),d=L(),f=S("div"),A(v.$$.fragment),w=L(),A(x.$$.fragment),g=L(),A(b.$$.fragment),B=L(),A(U.$$.fragment),Q=L(),A(ee.$$.fragment),this.h()},l(I){const G=hu("svelte-2dqrj",document.head);a=P(G,"META",{name:!0,content:!0,class:!0}),r=P(G,"META",{name:!0,content:!0,class:!0}),n=P(G,"META",{property:!0,content:!0,class:!0}),o=P(G,"META",{property:!0,content:!0,class:!0}),s=P(G,"META",{property:!0,content:!0,class:!0}),i=P(G,"META",{property:!0,content:!0,class:!0}),l=P(G,"META",{property:!0,content:!0,class:!0}),u=P(G,"META",{property:!0,content:!0,class:!0}),c=P(G,"META",{property:!0,content:!0,class:!0}),p=P(G,"META",{property:!0,content:!0,class:!0}),h=P(G,"META",{property:!0,content:!0,class:!0}),m=P(G,"META",{property:!0,content:!0,class:!0}),G.forEach(_),d=M(I),f=P(I,"DIV",{class:!0});var te=j(f);C(v.$$.fragment,te),w=M(te),C(x.$$.fragment,te),g=M(te),C(b.$$.fragment,te),B=M(te),C(U.$$.fragment,te),Q=M(te),C(ee.$$.fragment,te),te.forEach(_),this.h()},h(){$(a,"name","title"),$(a,"content",Xe),$(a,"class","svelte-14fuh2n"),$(r,"name","description"),$(r,"content",Tt),$(r,"class","svelte-14fuh2n"),$(n,"property","og:type"),$(n,"content","website"),$(n,"class","svelte-14fuh2n"),$(o,"property","og:url"),$(o,"content",Fn),$(o,"class","svelte-14fuh2n"),$(s,"property","og:title"),$(s,"content",Xe),$(s,"class","svelte-14fuh2n"),$(i,"property","og:description"),$(i,"content",Tt),$(i,"class","svelte-14fuh2n"),$(l,"property","og:image"),$(l,"content",On),$(l,"class","svelte-14fuh2n"),$(u,"property","twitter:card"),$(u,"content","summary_large_image"),$(u,"class","svelte-14fuh2n"),$(c,"property","twitter:url"),$(c,"content",Fn),$(c,"class","svelte-14fuh2n"),$(p,"property","twitter:title"),$(p,"content",Xe),$(p,"class","svelte-14fuh2n"),$(h,"property","twitter:description"),$(h,"content",Tt),$(h,"class","svelte-14fuh2n"),$(m,"property","twitter:image"),$(m,"content",On),$(m,"class","svelte-14fuh2n"),$(f,"class","grid svelte-14fuh2n")},m(I,G){y(document.head,a),y(document.head,r),y(document.head,n),y(document.head,o),y(document.head,s),y(document.head,i),y(document.head,l),y(document.head,u),y(document.head,c),y(document.head,p),y(document.head,h),y(document.head,m),k(I,d,G),k(I,f,G),F(v,f,null),y(f,w),F(x,f,null),y(f,g),F(b,f,null),y(f,B),F(U,f,null),y(f,Q),F(ee,f,null),be=!0},p(I,[G]){(!be||G&0)&&e!==(e=Xe)&&(document.title=e)},i(I){be||(E(v.$$.fragment,I),E(x.$$.fragment,I),E(b.$$.fragment,I),E(U.$$.fragment,I),E(ee.$$.fragment,I),be=!0)},o(I){T(v.$$.fragment,I),T(x.$$.fragment,I),T(b.$$.fragment,I),T(U.$$.fragment,I),T(ee.$$.fragment,I),be=!1},d(I){_(a),_(r),_(n),_(o),_(s),_(i),_(l),_(u),_(c),_(p),_(h),_(m),I&&_(d),I&&_(f),O(v),O(x),O(b),O(U),O(ee)}}}const Xe="Jumping Peter",Tt="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",Fn="https://ksmai.github.io/jumping-peter",On="https://ksmai.github.io/jumping-peter/favicon.png";kn=class extends V{constructor(e){super(),H(this,e,null,eu,Y,{})}}})();export{vu as __tla,kn as default};
