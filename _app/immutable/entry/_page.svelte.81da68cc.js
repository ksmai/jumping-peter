var Rt=Object.defineProperty;var It=(t,e,r)=>e in t?Rt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ye=(t,e,r)=>(It(t,typeof e!="symbol"?e+"":e,r),r);import{S as Ue,i as Be,n as Re,j as F,s as q,q as ie,k as M,l as j,c as H,r as oe,g as E,m as d,J as ke,K as Se,a as le,G as _,H as Fe,L as je,M as Ne,u as Me,N as bt,y as fe,z as me,A as de,f as ae,b as se,B as pe,I as Ie,O as Pe,v as wt,d as yt,P as kt,e as et,Q as jt,R as Ct,p as Dt,o as Lt,T as tt,U as zt,w as Gt,V as Nt}from"../chunks/index.adf49e6c.js";import{b as Xe,w as Ze}from"../chunks/paths.ba484b57.js";function qt(t){let e,r,n,s,a,l,o,i,c,f,u,h,g;return{c(){e=F("header"),r=F("img"),s=q(),a=F("h1"),l=ie("Jumping Peter"),o=q(),i=F("p"),c=ie("generate gif emojis"),f=q(),u=F("a"),h=ie("Contribute"),this.h()},l(m){e=M(m,"HEADER",{class:!0});var p=j(e);r=M(p,"IMG",{class:!0,src:!0,alt:!0}),s=H(p),a=M(p,"H1",{class:!0});var b=j(a);l=oe(b,"Jumping Peter"),b.forEach(E),o=H(p),i=M(p,"P",{class:!0});var $=j(i);c=oe($,"generate gif emojis"),$.forEach(E),f=H(p),u=M(p,"A",{class:!0,href:!0,target:!0,rel:!0});var w=j(u);h=oe(w,"Contribute"),w.forEach(E),p.forEach(E),this.h()},h(){d(r,"class","logo svelte-bal6b7"),ke(r.src,n=`${Xe}/demo-jumping.gif`)||d(r,"src",n),d(r,"alt",""),d(a,"class","title svelte-bal6b7"),d(i,"class","subtitle svelte-bal6b7"),d(u,"class","contribute svelte-bal6b7"),d(u,"href","https://github.com/ksmai/jumping-peter"),d(u,"target","_blank"),d(u,"rel","noreferrer"),d(e,"class",g=Se(`header ${t[0]}`)+" svelte-bal6b7")},m(m,p){le(m,e,p),_(e,r),_(e,s),_(e,a),_(a,l),_(e,o),_(e,i),_(i,c),_(e,f),_(e,u),_(u,h)},p(m,[p]){p&1&&g!==(g=Se(`header ${m[0]}`)+" svelte-bal6b7")&&d(e,"class",g)},i:Fe,o:Fe,d(m){m&&E(e)}}}function Ht(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Xt extends Ue{constructor(e){super(),Be(this,e,Ht,qt,Re,{class:0})}}function Ge(t){return{...t,type:"slider",min:-360,max:360,step:1}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function He(t){return{...t,type:"slider",min:0,max:1,step:.01}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Je(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function nt(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Vt(t){return{...t,type:"slider",min:1,max:100,step:1}}function $t(t){return{...t,type:"toggle"}}function Wt(t){return t.reduce((e,r)=>(Object.assign(e,{[r.name]:r.value}),e),{})}function $e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function De(t,e,r){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=r,t[5]*=r,t[9]*=r,t[13]*=r}function Ve(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,l,,,o,i,,,c,f,,,u,h]=t;t[0]=a*n-l*s,t[1]=a*s+l*n,t[4]=o*n-i*s,t[5]=o*s+i*n,t[8]=c*n-f*s,t[9]=c*s+f*n,t[12]=u*n-h*s,t[13]=u*s+h*n}function _e(t,e,r){t[12]+=e,t[13]+=r}function ce(t,e,r){return t+(e-t)*r}function Et(t){return t*Math.PI/180}function Ye(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function We(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const Yt="spinning",Qt={delayMs:50,totalFrames:15},Jt=[Ge({name:"startAngle",value:0}),Ge({name:"endAngle",value:360}),rt({name:"originX",value:0}),rt({name:"originY",value:0}),$t({name:"alternates",value:!1})];function Ot(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:l,endAngle:o,originX:i,originY:c}=r;return[{program:n,geometry:s,getUniforms:u=>{const h=a?Math.min(u,1-u)*2:u,g=ce(l,o,h),m=$e();return _e(m,-i,-c),Ve(m,g),_e(m,i,c),{u_transform:m}}}]}const Zt=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ot,editOptions:Jt,frameOptions:Qt,name:Yt},Symbol.toStringTag,{value:"Module"})),Kt="expanding",er={delayMs:50,totalFrames:20},tr=[Je({name:"minScale",value:1}),Je({name:"maxScale",value:2}),$t({name:"alternates",value:!1})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:l,alternates:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const f=o?Math.min(c,1-c)*2:c,u=ce(a,l,f),h=$e();return De(h,u,u),{u_transform:h}}}]}const rr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Tt,editOptions:tr,frameOptions:er,name:Kt},Symbol.toStringTag,{value:"Module"})),ar="extreme-speed",nr={delayMs:20,totalFrames:10},sr=[nt({name:"directionX",value:-1}),nt({name:"directionY",value:0})];function At(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:a,directionY:l}=r,o=a*2,i=l*2;return[{program:n,geometry:s,getUniforms:f=>{const u=$e(),h=ce(0,o,f),g=ce(0,i,f);return _e(u,h,g),{u_transform:u}}}]}const ir=Object.freeze(Object.defineProperty({__proto__:null,createSprites:At,editOptions:sr,frameOptions:nr,name:ar},Symbol.toStringTag,{value:"Module"})),or="excited",lr={delayMs:50,totalFrames:25},cr=[Ge({name:"angle",value:15}),at({name:"startOffset",value:-.1}),at({name:"endOffset",value:.1}),Vt({name:"cycles",value:3})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:l}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const c=Et(a),f=Math.cos(c),u=Math.sin(c);return[{program:n,geometry:s,getUniforms:g=>{const m=g*2*l%1,p=Math.min(m,1-m)*2,b=ce(-o*u,-i*u,p),$=ce(o*f,i*f,p),w=$e();return Ve(w,a),_e(w,b,$),De(w,g>.5?-1:1,1),{u_transform:w}}}]}const ur=Object.freeze(Object.defineProperty({__proto__:null,createSprites:St,editOptions:cr,frameOptions:lr,name:or},Symbol.toStringTag,{value:"Module"})),fr="jumping",mr={delayMs:50,totalFrames:20},dr=[He({name:"maxOffset",value:.6}),He({name:"compressTime",value:.4}),He({name:"maxCompress",value:.3})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:l,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const f=Math.min(c,1-c)*2,u=$e(),h=f/(1-l);if(h<1){const g=(1-h*h)*a*2;_e(u,0,g)}else{const g=(1-f)/l,p=1-(1-g*g)*o;_e(u,0,1),De(u,1/p,p),_e(u,0,-1)}return{u_transform:u}}}]}const pr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:xt,editOptions:dr,frameOptions:mr,name:fr},Symbol.toStringTag,{value:"Module"})),hr="tower",vr={delayMs:40,totalFrames:20},gr=[Ge({name:"startAngle",value:20}),Ge({name:"endAngle",value:-45}),He({name:"startTime",value:.5})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("tower"),{startAngle:a,endAngle:l,startTime:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const f=$e();if(c<o){const u=c/o,h=Math.min(u,1-u)*2,g=ce(0,a,h);Ve(f,g)}else{const u=(c-o)/(1-o),h=Math.min(u,1-u)*2,g=ce(0,l,h);if(Ve(f,g),u>.5){const m=Et(g),p=Math.cos(m),b=Math.sin(m),$=(u-.5)*2,w=ce(0,-2*b,$),L=ce(0,2*p,$);_e(f,w,L)}}return{u_transform:f}}}]}const _r=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Pt,editOptions:gr,frameOptions:vr,name:hr},Symbol.toStringTag,{value:"Module"})),br="repeated",wr={delayMs:60,totalFrames:15},yr=[Je({name:"initialScale",value:.1})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),a=e.createGeometry("topHalf"),l=e.createGeometry("bottomHalf"),{initialScale:o}=r;return[{program:n,geometry:s,getUniforms:u=>{const h=$e(),g=Ye(u),m=ce(o,1,g);return De(h,m,m),{u_transform:h}}},{program:n,geometry:a,getUniforms:u=>{const h=$e(),g=Ye(u),m=ce(0,1,g);return _e(h,0,m),{u_transform:h}}},{program:n,geometry:l,getUniforms:u=>{const h=$e(),g=Ye(u),m=ce(0,-1,g);return _e(h,0,m),{u_transform:h}}}]}const $r=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ft,editOptions:yr,frameOptions:wr,name:br},Symbol.toStringTag,{value:"Module"})),Er="mirror-left",Or={delayMs:50,totalFrames:16},Tr=[];function Mt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("leftHalf");return[{program:n,geometry:s,getUniforms:o=>{const i=Math.min(o,1-o)*2,c=$e(),f=We(i),u=ce(-2,-1,f);return De(c,-1,1),_e(c,u,0),{u_transform:c}}},{program:n,geometry:s,getUniforms:o=>{const i=Math.min(o,1-o)*2,c=$e(),f=We(i),u=ce(2,1,f);return _e(c,u,0),{u_transform:c}}}]}const Ar=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Mt,editOptions:Tr,frameOptions:Or,name:Er},Symbol.toStringTag,{value:"Module"})),Sr="mirror-right",xr={delayMs:50,totalFrames:16},Pr=[];function Ut(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("rightHalf");return[{program:n,geometry:s,getUniforms:o=>{const i=$e(),c=Math.min(o,1-o)*2,f=We(c),u=ce(-2,-1,f);return _e(i,u,0),{u_transform:i}}},{program:n,geometry:s,getUniforms:o=>{const i=$e(),c=Math.min(o,1-o)*2,f=We(c),u=ce(2,1,f);return De(i,-1,1),_e(i,u,0),{u_transform:i}}}]}const Fr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ut,editOptions:Pr,frameOptions:xr,name:Sr},Symbol.toStringTag,{value:"Module"})),st=[pr,ir,Zt,ur,rr,_r,$r,Ar,Fr];function it(t,e,r){const n=Wt(r.editOptions);switch(r.name){case"spinning":return Ot(t,e,n);case"expanding":return Tt(t,e,n);case"extreme-speed":return At(t,e,n);case"excited":return St(t,e,n);case"jumping":return xt(t,e,n);case"tower":return Pt(t,e,n);case"repeated":return Ft(t,e,n);case"mirror-left":return Mt(t,e);case"mirror-right":return Ut(t,e);default:(s=>{throw new Error(`Unknown animation: ${JSON.stringify(s)}`)})(r)}}const Mr=function(){var t={},e=-1,r,n,s,a,l,o,i=12,c=5003,f,u=i,h,g=1<<i,m=[],p=[],b=c,$=0,w=!1,L,I,V,k=0,J=0,Y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,C=[],O=t.LZWEncoder=function(z,S,v,P){r=z,n=S,s=v,a=Math.max(2,P)},R=function(z,S){C[Z++]=z,Z>=254&&be(S)},ee=function(z){he(b),$=I+2,w=!0,ve(I,z)},he=function(z){for(var S=0;S<z;++S)m[S]=-1},X=t.compress=function(z,S){var v,P,te,W,ue,Q,T;for(L=z,w=!1,f=L,h=we(f),I=1<<z-1,V=I+1,$=I+2,Z=0,W=Ee(),T=0,v=b;v<65536;v*=2)++T;T=8-T,Q=b,he(Q),ve(I,S);e:for(;(te=Ee())!=e;){if(v=(te<<u)+W,P=te<<T^W,m[P]==v){W=p[P];continue}else if(m[P]>=0){ue=Q-P,P===0&&(ue=1);do if((P-=ue)<0&&(P+=Q),m[P]==v){W=p[P];continue e}while(m[P]>=0)}ve(W,S),W=te,$<g?(p[P]=$++,m[P]=v):ee(S)}ve(W,S),ve(V,S)};t.encode=function(z){z.writeByte(a),l=r*n,o=0,X(a+1,z),z.writeByte(0)};var be=function(z){Z>0&&(z.writeByte(Z),z.writeBytes(C,0,Z),Z=0)},we=function(z){return(1<<z)-1},Ee=function(){if(l===0)return e;--l;var z=s[o++];return z&255},ve=function(z,S){for(k&=Y[J],J>0?k|=z<<J:k=z,J+=f;J>=8;)R(k&255,S),k>>=8,J-=8;if(($>h||w)&&(w?(h=we(f=L),w=!1):(++f,f==u?h=g:h=we(f))),z==V){for(;J>0;)R(k&255,S),k>>=8,J-=8;be(S)}};return O.apply(this,arguments),t},Ur=function(){var t={},e=256,r=499,n=491,s=487,a=503,l=3*a,o=e-1,i=4,c=100,f=16,u=1<<f,h=10,g=10,m=u>>g,p=u<<h-g,b=e>>3,$=6,w=1<<$,L=b*w,I=30,V=10,k=1<<V,J,Y=8,Z=1<<Y,C=V+Y,O=1<<C,R,ee,he,X,be=[],we=[],Ee=[],ve=[],ne=t.NeuQuant=function(T,x,G){var U,B;for(R=T,ee=x,he=G,X=new Array(e),U=0;U<e;U++)X[U]=new Array(4),B=X[U],B[0]=B[1]=B[2]=(U<<i+8)/e,Ee[U]=u/e,we[U]=0},z=function(){for(var T=[],x=new Array(e),G=0;G<e;G++)x[X[G][3]]=G;for(var U=0,B=0;B<e;B++){var y=x[B];T[U++]=X[y][0],T[U++]=X[y][1],T[U++]=X[y][2]}return T},S=function(){var T,x,G,U,B,y,A,D;for(A=0,D=0,T=0;T<e;T++){for(B=X[T],G=T,U=B[1],x=T+1;x<e;x++)y=X[x],y[1]<U&&(G=x,U=y[1]);if(y=X[G],T!=G&&(x=y[0],y[0]=B[0],B[0]=x,x=y[1],y[1]=B[1],B[1]=x,x=y[2],y[2]=B[2],B[2]=x,x=y[3],y[3]=B[3],B[3]=x),U!=A){for(be[A]=D+T>>1,x=A+1;x<U;x++)be[x]=T;A=U,D=T}}for(be[A]=D+o>>1,x=A+1;x<256;x++)be[x]=o},v=function(){var T,x,G,U,B,y,A,D,N,re,Oe,K,ge,Ke;for(ee<l&&(he=1),J=30+(he-1)/3,K=R,ge=0,Ke=ee,Oe=ee/(3*he),re=Oe/c|0,D=k,y=L,A=y>>$,A<=1&&(A=0),T=0;T<A;T++)ve[T]=D*((A*A-T*T)*Z/(A*A));for(ee<l?N=3:ee%r!==0?N=3*r:ee%n!==0?N=3*n:ee%s!==0?N=3*s:N=3*a,T=0;T<Oe;)if(G=(K[ge+0]&255)<<i,U=(K[ge+1]&255)<<i,B=(K[ge+2]&255)<<i,x=ue(G,U,B),W(D,x,G,U,B),A!==0&&te(A,x,G,U,B),ge+=N,ge>=Ke&&(ge-=ee),T++,re===0&&(re=1),T%re===0)for(D-=D/J,y-=y/I,A=y>>$,A<=1&&(A=0),x=0;x<A;x++)ve[x]=D*((A*A-x*x)*Z/(A*A))};t.map=function(T,x,G){var U,B,y,A,D,N,re;for(D=1e3,re=-1,U=be[x],B=U-1;U<e||B>=0;)U<e&&(N=X[U],y=N[1]-x,y>=D?U=e:(U++,y<0&&(y=-y),A=N[0]-T,A<0&&(A=-A),y+=A,y<D&&(A=N[2]-G,A<0&&(A=-A),y+=A,y<D&&(D=y,re=N[3])))),B>=0&&(N=X[B],y=x-N[1],y>=D?B=-1:(B--,y<0&&(y=-y),A=N[0]-T,A<0&&(A=-A),y+=A,y<D&&(A=N[2]-G,A<0&&(A=-A),y+=A,y<D&&(D=y,re=N[3]))));return re},t.process=function(){return v(),P(),S(),z()};var P=function(){var T;for(T=0;T<e;T++)X[T][0]>>=i,X[T][1]>>=i,X[T][2]>>=i,X[T][3]=T},te=function(T,x,G,U,B){var y,A,D,N,re,Oe,K;for(D=x-T,D<-1&&(D=-1),N=x+T,N>e&&(N=e),y=x+1,A=x-1,Oe=1;y<N||A>D;){if(re=ve[Oe++],y<N){K=X[y++];try{K[0]-=re*(K[0]-G)/O,K[1]-=re*(K[1]-U)/O,K[2]-=re*(K[2]-B)/O}catch{}}if(A>D){K=X[A--];try{K[0]-=re*(K[0]-G)/O,K[1]-=re*(K[1]-U)/O,K[2]-=re*(K[2]-B)/O}catch{}}}},W=function(T,x,G,U,B){var y=X[x];y[0]-=T*(y[0]-G)/k,y[1]-=T*(y[1]-U)/k,y[2]-=T*(y[2]-B)/k},ue=function(T,x,G){var U,B,y,A,D,N,re,Oe,K,ge;for(Oe=~(1<<31),K=Oe,N=-1,re=N,U=0;U<e;U++)ge=X[U],B=ge[0]-T,B<0&&(B=-B),y=ge[1]-x,y<0&&(y=-y),B+=y,y=ge[2]-G,y<0&&(y=-y),B+=y,B<Oe&&(Oe=B,N=U),A=B-(we[U]>>f-i),A<K&&(K=A,re=U),D=Ee[U]>>g,Ee[U]-=D,we[U]+=D<<h;return Ee[N]+=m,we[N]-=p,re};return ne.apply(this,arguments),t},Br=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var S="",v=this.bin.length,P=0;P<v;P++)S+=e[this.bin[P]];return S},r.prototype.writeByte=function(S){this.bin.push(S)},r.prototype.writeUTFBytes=function(S){for(var v=S.length,P=0;P<v;P++)this.writeByte(S.charCodeAt(P))},r.prototype.writeBytes=function(S,v,P){for(var te=P||S.length,W=v||0;W<te;W++)this.writeByte(S[W])};var n={},s,a,l=null,o,i=-1,c=0,f=!1,u,h,g,m,p,b,$=[],w=7,L=-1,I=!1,V=!0,k=!1,J=10,Y="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(v){c=Math.round(v/10)},n.setDispose=function(v){v>=0&&(L=v)},n.setRepeat=function(v){v>=0&&(i=v)},n.setTransparent=function(v){l=v},n.setComment=function(v){Y=v},n.addFrame=function(v,P){if(v===null||!f||u===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?v instanceof ImageData?(h=v.data,(!sizeset||s!=v.width||a!=v.height)&&C(v.width,v.height)):v instanceof Uint8ClampedArray?v.length==s*a*4?h=v:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(h=v.getImageData(0,0,v.canvas.width,v.canvas.height).data,k||C(v.canvas.width,v.canvas.height)),ee(),O(),V&&(we(),ve(),i>=0&&Ee()),he(),Y!==""&&X(),be(),V||ve(),z(),V=!1}catch{te=!1}return te},n.download=function(v){if(u===null||I==!1)console.log("Please call start method and add frames and call finish method before calling download");else{v=v!==void 0?v.endsWith(".gif")?v:v+".gif":"download.gif";var P=document.createElement("a");P.download=v,P.href=URL.createObjectURL(new Blob([new Uint8Array(u.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!f)return!1;var v=!0;f=!1;try{u.writeByte(59),I=!0}catch{v=!1}return v};var Z=function(){o=0,h=null,g=null,m=null,b=null,I=!1,V=!0};n.setFrameRate=function(v){v!=15&&(c=Math.round(100/v))},n.setQuality=function(v){v<1&&(v=1),J=v};var C=n.setSize=function(v,P){f&&!V||(s=v,a=P,s<1&&(s=320),a<1&&(a=240),k=!0)};n.start=function(){Z();var v=!0;I=!1,u=new r;try{u.writeUTFBytes("GIF89a")}catch{v=!1}return f=v},n.cont=function(){Z();var v=!0;return I=!1,u=new r,f=v};var O=function(){var v=g.length,P=v/3;m=[];var te=new Ur(g,v,J);b=te.process();for(var W=0,ue=0;ue<P;ue++){var Q=te.map(g[W++]&255,g[W++]&255,g[W++]&255);$[Q]=!0,m[ue]=Q}g=null,p=8,w=7,l!==null&&(o=R(l))},R=function(v){if(b===null)return-1;for(var P=(v&16711680)>>16,te=(v&65280)>>8,W=v&255,ue=0,Q=256*256*256,T=b.length,x=0;x<T;){var G=P-(b[x++]&255),U=te-(b[x++]&255),B=W-(b[x]&255),y=G*G+U*U+B*B,A=x/3;$[A]&&y<Q&&(Q=y,ue=A),x++}return ue},ee=function(){var v=s,P=a;g=[];for(var te=h,W=0,ue=0;ue<P;ue++)for(var Q=0;Q<v;Q++){var T=ue*v*4+Q*4;g[W++]=te[T],g[W++]=te[T+1],g[W++]=te[T+2]}},he=function(){u.writeByte(33),u.writeByte(249),u.writeByte(4);var v,P;l===null?(v=0,P=0):(v=1,P=2),L>=0&&(P=L&7),P<<=2,u.writeByte(0|P|0|v),ne(c),u.writeByte(o),u.writeByte(0)},X=function(){u.writeByte(33),u.writeByte(254),u.writeByte(Y.length),u.writeUTFBytes(Y),u.writeByte(0)},be=function(){u.writeByte(44),ne(0),ne(0),ne(s),ne(a),V?u.writeByte(0):u.writeByte(128|w)},we=function(){ne(s),ne(a),u.writeByte(240|w),u.writeByte(0),u.writeByte(0)},Ee=function(){u.writeByte(33),u.writeByte(255),u.writeByte(11),u.writeUTFBytes("NETSCAPE2.0"),u.writeByte(3),u.writeByte(1),ne(i),u.writeByte(0)},ve=function(){u.writeBytes(b);for(var v=3*256-b.length,P=0;P<v;P++)u.writeByte(0)},ne=function(v){u.writeByte(v&255),u.writeByte(v>>8&255)},z=function(){var v=new Mr(s,a,m,p);v.encode(u)};return n.stream=function(){return u},n.setProperties=function(v,P){f=v,V=P},n};class Rr{constructor(e){ye(this,"loadingUrl",null);ye(this,"url",null);ye(this,"texture",null);ye(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const l=a.createTexture();if(!l)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,l),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=l,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const Ce={a_position:0,a_texCoords:1},ot={default:{vertex:`#version 300 es

layout(location = ${Ce.a_position}) in vec2 a_position;
layout(location = ${Ce.a_texCoords}) in vec2 a_texCoords;

uniform mat4 u_transform;

out vec2 v_texCoords;

void main() {
  vec4 pos = u_transform * vec4(a_position, 0.0, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, pos.z, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class Ir{constructor(e){ye(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:jr(this.gl,ot[e].vertex,ot[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function kr(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function jr(t,e,r){const n=lt(t,t.VERTEX_SHADER,e);let s;try{s=lt(t,t.FRAGMENT_SHADER,r)}catch(l){throw t.deleteShader(n),l}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const l=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${l}`)}return a}function lt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ct(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,l,o;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),l!==i.geometry&&(t.bindVertexArray(i.geometry.vao),l=i.geometry),o!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),o=n);const c={u_image:n.unit,...i.getUniforms(e)};kr(t,i.program,c),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}function Cr(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(Ce.a_position),t.vertexAttribPointer(Ce.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(Ce.a_texCoords),t.vertexAttribPointer(Ce.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const Dr={full:[-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0],sudoku:[-3,-3,-1,2,3,-3,2,2,-3,3,-1,-1,3,3,2,-1],tower:[-1,-3,0,2,1,-3,1,2,-1,3,0,-1,1,3,1,-1],topHalf:[-1,0,0,.5,1,0,1,.5,-1,1,0,0,1,1,1,0],bottomHalf:[-1,-1,0,1,1,-1,1,1,-1,0,0,.5,1,0,1,.5],leftHalf:[-1,-1,0,1,0,-1,.5,1,-1,1,0,0,0,1,.5,0],rightHalf:[0,-1,.5,1,1,-1,1,1,0,1,.5,0,1,1,1,0]};class Lr{constructor(e){ye(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=Cr(this.gl,Dr[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class zr{constructor(e){ye(this,"gl");ye(this,"programFactory");ye(this,"geometryFactory");ye(this,"texture");ye(this,"queue",[]);ye(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new Ir(this.gl),this.geometryFactory=new Lr(this.gl),this.texture=new Rr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new Br;if(a.setRepeat(0),a.setDelay(e.animation.frameOptions.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:it(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:it(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let o=0;o<this.queue.length-1;++o)this.queue[o].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const l=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")ct(this.gl,a/r.animation.frameOptions.totalFrames,s,this.texture,l),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:o,sprites:i,callback:c}=this.queue[0];ct(this.gl,a/r.animation.frameOptions.totalFrames,i,this.texture,l),c(a);const f=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,f),o.addFrame(f,!0),o.setTransparent(16777215),a===r.animation.frameOptions.totalFrames-1){o.finish();const u=o.stream().getData(),h="data:image/gif;base64,"+window.btoa(u);n({dataUri:h}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Te=function(){const{subscribe:t,update:e}=Ze({animations:st,current:st[0]}),r=a=>{e(l=>l.current===a||!l.animations.find(i=>i===a)?l:{animations:l.animations,current:a})};function n(a){e(({animations:l,current:o})=>{const i={...o.frameOptions,...a},c={...o,frameOptions:i};return{animations:l.map(f=>f===o?c:f),current:c}})}function s(a,l){e(({animations:o,current:i})=>{const c={...i,editOptions:i.editOptions.map(f=>f===a?{...a,value:l}:f)};return{animations:o.map(f=>f===i?c:f),current:c}})}return{subscribe:t,changeCurrentAnimation:r,changeFrameOptions:n,changeEditOptions:s}}(),Ae=function(){const t=`${Xe}/favicon.png`,{subscribe:e,update:r}=Ze({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(l=>({...l,...a}))}function s(a){r(l=>(l.url!==t&&URL.revokeObjectURL(l.url),{...l,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Le=function(){const t=Ze({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(l){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new zr(l),running:!1,frame:0}})}function s(){const{animator:l}=je(t);return l?(r(o=>({...o,running:!0,frame:0})),l.animate({image:je(Ae),animation:je(Te).current},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(l){const{animator:o,frame:i}=je(t);if(!o)return Promise.reject("Animator has not been created");let c;typeof l>"u"?c=i:c=l;const f=je(Te).current;return c>=f.frameOptions.totalFrames&&(c=f.frameOptions.totalFrames-1),r(u=>({...u,frame:c,running:!0})),o.renderFrame({image:je(Ae),animation:f},c).finally(()=>{r(u=>({...u,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ut(t){let e,r,n,s,a,l;return{c(){e=F("label"),r=ie(t[1]),n=q(),s=F("input"),this.h()},l(o){e=M(o,"LABEL",{class:!0});var i=j(e);r=oe(i,t[1]),n=H(i),s=M(i,"INPUT",{class:!0,type:!0}),i.forEach(E),this.h()},h(){d(s,"class","slider__text-input svelte-1h0gcvd"),d(s,"type","text"),s.value=t[0],d(e,"class","slider__label svelte-1h0gcvd")},m(o,i){le(o,e,i),_(e,r),_(e,n),_(e,s),a||(l=Ne(s,"input",t[5]),a=!0)},p(o,i){i&2&&Me(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&E(e),a=!1,l()}}}function Gr(t){let e,r,n,s,a=qe(t[2])+"",l,o,i,c,f,u,h=qe(t[3])+"",g,m,p,b=t[1]&&ut(t);return{c(){e=F("div"),b&&b.c(),r=q(),n=F("div"),s=F("span"),l=ie(a),o=q(),i=F("div"),c=F("input"),f=q(),u=F("span"),g=ie(h),this.h()},l($){e=M($,"DIV",{class:!0});var w=j(e);b&&b.l(w),r=H(w),n=M(w,"DIV",{class:!0});var L=j(n);s=M(L,"SPAN",{class:!0});var I=j(s);l=oe(I,a),I.forEach(E),o=H(L),i=M(L,"DIV",{class:!0});var V=j(i);c=M(V,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),V.forEach(E),f=H(L),u=M(L,"SPAN",{class:!0});var k=j(u);g=oe(k,h),k.forEach(E),L.forEach(E),w.forEach(E),this.h()},h(){d(s,"class","slider__range slider__range--min svelte-1h0gcvd"),d(c,"class","slider__input svelte-1h0gcvd"),d(c,"type","range"),d(c,"min",t[2]),d(c,"max",t[3]),d(c,"step",t[4]),c.value=t[0],d(i,"class","slider__input-container svelte-1h0gcvd"),d(u,"class","slider__range slider__range--max"),d(n,"class","slider__container svelte-1h0gcvd"),d(e,"class","slider")},m($,w){le($,e,w),b&&b.m(e,null),_(e,r),_(e,n),_(n,s),_(s,l),_(n,o),_(n,i),_(i,c),_(n,f),_(n,u),_(u,g),m||(p=Ne(c,"input",t[5]),m=!0)},p($,[w]){$[1]?b?b.p($,w):(b=ut($),b.c(),b.m(e,r)):b&&(b.d(1),b=null),w&4&&a!==(a=qe($[2])+"")&&Me(l,a),w&4&&d(c,"min",$[2]),w&8&&d(c,"max",$[3]),w&16&&d(c,"step",$[4]),w&1&&(c.value=$[0]),w&8&&h!==(h=qe($[3])+"")&&Me(g,h)},i:Fe,o:Fe,d($){$&&E(e),b&&b.d(),m=!1,p()}}}function qe(t){return t.toFixed(2).replace(/\.?0+$/,"")}function Nr(t,e,r){const n=bt();let{label:s=""}=e,{min:a=0}=e,{max:l=100}=e,{step:o=1}=e,{value:i=l<a?a:(l-a)/2}=e;function c(f){const u=f.target,h=parseFloat(u.value);Number.isNaN(h)||(r(0,i=h),n("input",{value:i}))}return t.$$set=f=>{"label"in f&&r(1,s=f.label),"min"in f&&r(2,a=f.min),"max"in f&&r(3,l=f.max),"step"in f&&r(4,o=f.step),"value"in f&&r(0,i=f.value)},[i,s,a,l,o,c]}class xe extends Ue{constructor(e){super(),Be(this,e,Nr,Gr,Re,{label:1,min:2,max:3,step:4,value:0})}}function qr(t){let e,r,n,s,a,l,o,i,c,f,u,h,g,m,p,b,$,w,L,I,V,k,J,Y,Z,C;return f=new xe({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),f.$on("input",t[4]),h=new xe({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),h.$on("input",t[5]),m=new xe({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),b=new xe({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),b.$on("input",t[7]),w=new xe({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),w.$on("input",t[8]),I=new xe({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].current.frameOptions.delayMs}}),I.$on("input",t[9]),k=new xe({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].current.frameOptions.totalFrames}}),k.$on("input",t[10]),{c(){e=F("aside"),r=F("label"),n=ie(`Select image

    `),s=F("input"),a=q(),l=F("div"),o=F("img"),c=q(),fe(f.$$.fragment),u=q(),fe(h.$$.fragment),g=q(),fe(m.$$.fragment),p=q(),fe(b.$$.fragment),$=q(),fe(w.$$.fragment),L=q(),fe(I.$$.fragment),V=q(),fe(k.$$.fragment),this.h()},l(O){e=M(O,"ASIDE",{class:!0});var R=j(e);r=M(R,"LABEL",{class:!0});var ee=j(r);n=oe(ee,`Select image

    `),s=M(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=H(ee),l=M(ee,"DIV",{class:!0});var he=j(l);o=M(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach(E),ee.forEach(E),c=H(R),me(f.$$.fragment,R),u=H(R),me(h.$$.fragment,R),g=H(R),me(m.$$.fragment,R),p=H(R),me(b.$$.fragment,R),$=H(R),me(w.$$.fragment,R),L=H(R),me(I.$$.fragment,R),V=H(R),me(k.$$.fragment,R),R.forEach(E),this.h()},h(){d(s,"class","image__input svelte-843oxz"),d(s,"type","file"),d(s,"accept","image/*"),d(o,"class","image__preview svelte-843oxz"),ke(o.src,i=t[1].url)||d(o,"src",i),d(o,"alt","source"),d(l,"class","image__container svelte-843oxz"),d(r,"class","image svelte-843oxz"),d(e,"class",J=Se(`container ${t[0]}`)+" svelte-843oxz")},m(O,R){le(O,e,R),_(e,r),_(r,n),_(r,s),_(r,a),_(r,l),_(l,o),_(e,c),de(f,e,null),_(e,u),de(h,e,null),_(e,g),de(m,e,null),_(e,p),de(b,e,null),_(e,$),de(w,e,null),_(e,L),de(I,e,null),_(e,V),de(k,e,null),Y=!0,Z||(C=Ne(s,"input",t[3]),Z=!0)},p(O,[R]){(!Y||R&2&&!ke(o.src,i=O[1].url))&&d(o,"src",i);const ee={};R&2&&(ee.value=O[1].width),f.$set(ee);const he={};R&2&&(he.value=O[1].height),h.$set(he);const X={};R&2&&(X.value=O[1].clearRed),m.$set(X);const be={};R&2&&(be.value=O[1].clearGreen),b.$set(be);const we={};R&2&&(we.value=O[1].clearBlue),w.$set(we);const Ee={};R&4&&(Ee.value=O[2].current.frameOptions.delayMs),I.$set(Ee);const ve={};R&4&&(ve.value=O[2].current.frameOptions.totalFrames),k.$set(ve),(!Y||R&1&&J!==(J=Se(`container ${O[0]}`)+" svelte-843oxz"))&&d(e,"class",J)},i(O){Y||(ae(f.$$.fragment,O),ae(h.$$.fragment,O),ae(m.$$.fragment,O),ae(b.$$.fragment,O),ae(w.$$.fragment,O),ae(I.$$.fragment,O),ae(k.$$.fragment,O),Y=!0)},o(O){se(f.$$.fragment,O),se(h.$$.fragment,O),se(m.$$.fragment,O),se(b.$$.fragment,O),se(w.$$.fragment,O),se(I.$$.fragment,O),se(k.$$.fragment,O),Y=!1},d(O){O&&E(e),pe(f),pe(h),pe(m),pe(b),pe(w),pe(I),pe(k),Z=!1,C()}}}function Hr(t,e,r){let n,s;Ie(t,Ae,m=>r(1,n=m)),Ie(t,Te,m=>r(2,s=m));let{class:a=""}=e;function l(m){var $;const b=($=m.target.files)==null?void 0:$[0];b&&Ae.changeImage(b)}const o=m=>Ae.change({width:m.detail.value}),i=m=>Ae.change({height:m.detail.value}),c=m=>Ae.change({clearRed:m.detail.value}),f=m=>Ae.change({clearGreen:m.detail.value}),u=m=>Ae.change({clearBlue:m.detail.value}),h=m=>Te.changeFrameOptions({delayMs:m.detail.value}),g=m=>Te.changeFrameOptions({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,l,o,i,c,f,u,h,g]}class Xr extends Ue{constructor(e){super(),Be(this,e,Hr,qr,Re,{class:0})}}function Vr(t){let e,r,n,s,a,l,o;return{c(){e=F("div"),r=ie(t[1]),n=q(),s=F("label"),a=F("input"),this.h()},l(i){e=M(i,"DIV",{class:!0});var c=j(e);r=oe(c,t[1]),n=H(c),s=M(c,"LABEL",{class:!0});var f=j(s);a=M(f,"INPUT",{class:!0,type:!0}),f.forEach(E),c.forEach(E),this.h()},h(){d(a,"class","toggle__checkbox svelte-1j9rfin"),d(a,"type","checkbox"),a.checked=t[0],d(s,"class","toggle__label svelte-1j9rfin"),Pe(s,"toggle__label--active",t[0]),d(e,"class","toggle svelte-1j9rfin")},m(i,c){le(i,e,c),_(e,r),_(e,n),_(e,s),_(s,a),l||(o=Ne(a,"change",t[2]),l=!0)},p(i,[c]){c&2&&Me(r,i[1]),c&1&&(a.checked=i[0]),c&1&&Pe(s,"toggle__label--active",i[0])},i:Fe,o:Fe,d(i){i&&E(e),l=!1,o()}}}function Wr(t,e,r){const n=bt();let{label:s=""}=e,{value:a=!1}=e;function l(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,l]}class Bt extends Ue{constructor(e){super(),Be(this,e,Wr,Vr,Re,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[4]=e[r],n}function Yr(t){let e,r;function n(...s){return t[3](t[4],...s)}return e=new Bt({props:{label:t[4].name,value:t[4].value}}),e.$on("change",n),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,a){de(e,s,a),r=!0},p(s,a){t=s;const l={};a&2&&(l.label=t[4].name),a&2&&(l.value=t[4].value),e.$set(l)},i(s){r||(ae(e.$$.fragment,s),r=!0)},o(s){se(e.$$.fragment,s),r=!1},d(s){pe(e,s)}}}function Qr(t){let e,r;function n(...s){return t[2](t[4],...s)}return e=new xe({props:{label:t[4].name,min:t[4].min,max:t[4].max,step:t[4].step,value:t[4].value}}),e.$on("input",n),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,a){de(e,s,a),r=!0},p(s,a){t=s;const l={};a&2&&(l.label=t[4].name),a&2&&(l.min=t[4].min),a&2&&(l.max=t[4].max),a&2&&(l.step=t[4].step),a&2&&(l.value=t[4].value),e.$set(l)},i(s){r||(ae(e.$$.fragment,s),r=!0)},o(s){se(e.$$.fragment,s),r=!1},d(s){pe(e,s)}}}function mt(t){let e,r,n,s;const a=[Qr,Yr],l=[];function o(i,c){return i[4].type==="slider"?0:i[4].type==="toggle"?1:-1}return~(e=o(t))&&(r=l[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,c){~e&&l[e].m(i,c),le(i,n,c),s=!0},p(i,c){let f=e;e=o(i),e===f?~e&&l[e].p(i,c):(r&&(wt(),se(l[f],1,1,()=>{l[f]=null}),yt()),~e?(r=l[e],r?r.p(i,c):(r=l[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&l[e].d(i),i&&E(n)}}}function Jr(t){let e,r,n,s=t[1].current.editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=mt(ft(t,s,o));const l=o=>se(a[o],1,1,()=>{a[o]=null});return{c(){e=F("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=M(o,"ASIDE",{class:!0});var i=j(e);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(E),this.h()},h(){d(e,"class",r=Se(`container ${t[0]}`)+" svelte-1solget")},m(o,i){le(o,e,i);for(let c=0;c<a.length;c+=1)a[c].m(e,null);n=!0},p(o,[i]){if(i&2){s=o[1].current.editOptions;let c;for(c=0;c<s.length;c+=1){const f=ft(o,s,c);a[c]?(a[c].p(f,i),ae(a[c],1)):(a[c]=mt(f),a[c].c(),ae(a[c],1),a[c].m(e,null))}for(wt(),c=s.length;c<a.length;c+=1)l(c);yt()}(!n||i&1&&r!==(r=Se(`container ${o[0]}`)+" svelte-1solget"))&&d(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(o){o&&E(e),kt(a,o)}}}function Zr(t,e,r){let n;Ie(t,Te,o=>r(1,n=o));let{class:s=""}=e;const a=(o,i)=>Te.changeEditOptions(o,i.detail.value),l=(o,i)=>Te.changeEditOptions(o,i.detail.value);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,l]}class Kr extends Ue{constructor(e){super(),Be(this,e,Zr,Jr,Re,{class:0})}}function dt(t,e,r){const n=t.slice();return n[3]=e[r],n}function pt(t,e){let r,n,s,a,l,o,i=e[3].name+"",c,f,u,h;function g(){return e[2](e[3])}return{key:t,first:null,c(){r=F("button"),n=F("img"),l=q(),o=F("span"),c=ie(i),f=q(),this.h()},l(m){r=M(m,"BUTTON",{type:!0,class:!0});var p=j(r);n=M(p,"IMG",{class:!0,src:!0,alt:!0}),l=H(p),o=M(p,"SPAN",{});var b=j(o);c=oe(b,i),b.forEach(E),f=H(p),p.forEach(E),this.h()},h(){d(n,"class","image svelte-1l1v01j"),ke(n.src,s=`${Xe}/demo-${e[3].name}.gif`)||d(n,"src",s),d(n,"alt",a=e[3].name),d(r,"type","button"),d(r,"class","option svelte-1l1v01j"),Pe(r,"option--selected",e[3]===e[1].current),this.first=r},m(m,p){le(m,r,p),_(r,n),_(r,l),_(r,o),_(o,c),_(r,f),u||(h=Ne(r,"click",g),u=!0)},p(m,p){e=m,p&2&&!ke(n.src,s=`${Xe}/demo-${e[3].name}.gif`)&&d(n,"src",s),p&2&&a!==(a=e[3].name)&&d(n,"alt",a),p&2&&i!==(i=e[3].name+"")&&Me(c,i),p&2&&Pe(r,"option--selected",e[3]===e[1].current)},d(m){m&&E(r),u=!1,h()}}}function ea(t){let e,r=[],n=new Map,s,a=t[1].animations;const l=o=>o[3].name;for(let o=0;o<a.length;o+=1){let i=dt(t,a,o),c=l(i);n.set(c,r[o]=pt(c,i))}return{c(){e=F("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=M(o,"ASIDE",{class:!0});var i=j(e);for(let c=0;c<r.length;c+=1)r[c].l(i);i.forEach(E),this.h()},h(){d(e,"class",s=Se(`container ${t[0]}`)+" svelte-1l1v01j")},m(o,i){le(o,e,i);for(let c=0;c<r.length;c+=1)r[c].m(e,null)},p(o,[i]){i&2&&(a=o[1].animations,r=jt(r,i,l,1,o,a,n,e,Ct,pt,null,dt)),i&1&&s!==(s=Se(`container ${o[0]}`)+" svelte-1l1v01j")&&d(e,"class",s)},i:Fe,o:Fe,d(o){o&&E(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function ta(t,e,r){let n;Ie(t,Te,l=>r(1,n=l));let{class:s=""}=e;const a=l=>Te.changeCurrentAnimation(l);return t.$$set=l=>{"class"in l&&r(0,s=l.class)},[s,n,a]}class ra extends Ue{constructor(e){super(),Be(this,e,ta,ea,Re,{class:0})}}function ht(t){t[12]=t[13].dataUri}function vt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:sa,then:na,catch:aa,value:13,error:14};return tt(r=t[4],n),{c(){e=F("div"),n.block.c(),this.h()},l(s){e=M(s,"DIV",{class:!0});var a=j(e);n.block.l(a),a.forEach(E),this.h()},h(){d(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(s,a){le(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||zt(n,t,a)},d(s){s&&E(e),n.block.d(),n.token=null,n=null}}}function aa(t){let e,r,n=t[14]+"",s;return{c(){e=F("p"),r=ie("An error has occurred: "),s=ie(n),this.h()},l(a){e=M(a,"P",{class:!0});var l=j(e);r=oe(l,"An error has occurred: "),s=oe(l,n),l.forEach(E),this.h()},h(){d(e,"class","preview__error svelte-13qbjon")},m(a,l){le(a,e,l),_(e,r),_(e,s)},p(a,l){l&16&&n!==(n=a[14]+"")&&Me(s,n)},d(a){a&&E(e)}}}function na(t){ht(t);let e,r,n,s,a,l,o;return{c(){e=F("div"),r=F("img"),s=q(),a=F("a"),l=ie("Download"),this.h()},l(i){e=M(i,"DIV",{class:!0});var c=j(e);r=M(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach(E),s=H(i),a=M(i,"A",{class:!0,download:!0,href:!0});var f=j(a);l=oe(f,"Download"),f.forEach(E),this.h()},h(){d(r,"class","preview__image svelte-13qbjon"),ke(r.src,n=t[12])||d(r,"src",n),d(r,"alt","generated gif"),d(e,"class","preview__image-container svelte-13qbjon"),d(a,"class","preview__download-button svelte-13qbjon"),d(a,"download","jumping_peter.gif"),d(a,"href",o=t[12])},m(i,c){le(i,e,c),_(e,r),le(i,s,c),le(i,a,c),_(a,l)},p(i,c){ht(i),c&16&&!ke(r.src,n=i[12])&&d(r,"src",n),c&16&&o!==(o=i[12])&&d(a,"href",o)},d(i){i&&E(e),i&&E(s),i&&E(a)}}}function sa(t){let e,r,n,s,a,l,o=t[5].frame+"",i,c,f=t[2].current.frameOptions.totalFrames+"",u,h,g,m,p,b;return{c(){e=F("div"),r=F("p"),n=ie("Generating..."),s=q(),a=F("p"),l=ie("["),i=ie(o),c=ie(" / "),u=ie(f),h=ie("]"),g=q(),m=F("progress"),this.h()},l($){e=M($,"DIV",{class:!0});var w=j(e);r=M(w,"P",{});var L=j(r);n=oe(L,"Generating..."),L.forEach(E),s=H(w),a=M(w,"P",{});var I=j(a);l=oe(I,"["),i=oe(I,o),c=oe(I," / "),u=oe(I,f),h=oe(I,"]"),I.forEach(E),g=H(w),m=M(w,"PROGRESS",{class:!0,max:!0}),j(m).forEach(E),w.forEach(E),this.h()},h(){d(m,"class","preview__progress svelte-13qbjon"),d(m,"max",p=t[2].current.frameOptions.totalFrames),m.value=b=t[5].frame,d(e,"class","preview__loading svelte-13qbjon")},m($,w){le($,e,w),_(e,r),_(r,n),_(e,s),_(e,a),_(a,l),_(a,i),_(a,c),_(a,u),_(a,h),_(e,g),_(e,m)},p($,w){w&32&&o!==(o=$[5].frame+"")&&Me(i,o),w&4&&f!==(f=$[2].current.frameOptions.totalFrames+"")&&Me(u,f),w&4&&p!==(p=$[2].current.frameOptions.totalFrames)&&d(m,"max",p),w&32&&b!==(b=$[5].frame)&&(m.value=b)},d($){$&&E(e)}}}function ia(t){let e,r,n,s,a,l,o,i,c,f,u,h;n=new Bt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let g=!t[1]&&t[4]&&vt(t);return f=new xe({props:{min:0,max:t[2].current.frameOptions.totalFrames-1,step:1,value:t[5].frame}}),f.$on("input",t[6]),{c(){e=F("main"),r=F("div"),fe(n.$$.fragment),s=q(),g&&g.c(),a=q(),l=F("div"),o=F("div"),i=F("canvas"),c=q(),fe(f.$$.fragment),this.h()},l(m){e=M(m,"MAIN",{class:!0});var p=j(e);r=M(p,"DIV",{class:!0});var b=j(r);me(n.$$.fragment,b),b.forEach(E),s=H(p),g&&g.l(p),a=H(p),l=M(p,"DIV",{class:!0});var $=j(l);o=M($,"DIV",{class:!0});var w=j(o);i=M(w,"CANVAS",{class:!0,style:!0}),j(i).forEach(E),w.forEach(E),c=H($),me(f.$$.fragment,$),$.forEach(E),p.forEach(E),this.h()},h(){d(r,"class","preview__debug-input svelte-13qbjon"),d(i,"class","preview__image svelte-13qbjon"),Dt(i,"transform","scaleY(-1)"),d(o,"class","preview__image-container svelte-13qbjon"),d(l,"class","preview__container preview__container--debug svelte-13qbjon"),d(e,"class",u=Se(`preview ${t[0]}`)+" svelte-13qbjon"),Pe(e,"preview--debug",t[1]),Pe(e,"preview--no-debug",!t[1])},m(m,p){le(m,e,p),_(e,r),de(n,r,null),_(e,s),g&&g.m(e,null),_(e,a),_(e,l),_(l,o),_(o,i),t[9](i),_(l,c),de(f,l,null),h=!0},p(m,[p]){const b={};p&2&&(b.value=m[1]),n.$set(b),!m[1]&&m[4]?g?g.p(m,p):(g=vt(m),g.c(),g.m(e,a)):g&&(g.d(1),g=null);const $={};p&4&&($.max=m[2].current.frameOptions.totalFrames-1),p&32&&($.value=m[5].frame),f.$set($),(!h||p&1&&u!==(u=Se(`preview ${m[0]}`)+" svelte-13qbjon"))&&d(e,"class",u),(!h||p&3)&&Pe(e,"preview--debug",m[1]),(!h||p&3)&&Pe(e,"preview--no-debug",!m[1])},i(m){h||(ae(n.$$.fragment,m),ae(f.$$.fragment,m),h=!0)},o(m){se(n.$$.fragment,m),se(f.$$.fragment,m),h=!1},d(m){m&&E(e),pe(n),g&&g.d(),t[9](null),pe(f)}}}function oa(t,e,r){let n,s,a;Ie(t,Te,p=>r(2,n=p)),Ie(t,Ae,p=>r(8,s=p)),Ie(t,Le,p=>r(5,a=p));let l,{class:o=""}=e,i=!1,c=null;function f(){Le.renderFrame().catch(p=>{throw console.error(`renderFrame failed: ${p}`),p})}function u(){r(4,c=Le.animate().catch(p=>{throw console.error(`animate failed: ${p}`),p}))}Lt(()=>{Le.changeCanvas(l),u()});function h(p){Le.renderFrame(p.detail.value).catch(b=>console.error(`Animation failed: ${b}`))}function g(p){r(1,i=p.detail.value)}function m(p){Gt[p?"unshift":"push"](()=>{l=p,r(3,l)})}return t.$$set=p=>{"class"in p&&r(0,o=p.class)},t.$$.update=()=>{t.$$.dirty&262&&(i?f():u())},[o,i,n,l,c,a,h,g,s,m]}class la extends Ue{constructor(e){super(),Be(this,e,oa,ia,Re,{class:0})}}function ca(t){let e,r,n,s,a,l,o,i,c,f,u,h,g,m,p,b,$,w,L,I,V,k,J,Y,Z;return document.title=e=ze,b=new Xt({props:{class:"header"}}),w=new ra({props:{class:"animations"}}),I=new Xr({props:{class:"common-options"}}),k=new Kr({props:{class:"animation-options"}}),Y=new la({props:{class:"preview"}}),{c(){r=F("meta"),n=F("meta"),s=F("meta"),a=F("meta"),l=F("meta"),o=F("meta"),i=F("meta"),c=F("meta"),f=F("meta"),u=F("meta"),h=F("meta"),g=F("meta"),m=q(),p=F("div"),fe(b.$$.fragment),$=q(),fe(w.$$.fragment),L=q(),fe(I.$$.fragment),V=q(),fe(k.$$.fragment),J=q(),fe(Y.$$.fragment),this.h()},l(C){const O=Nt("svelte-2dqrj",document.head);r=M(O,"META",{name:!0,content:!0,class:!0}),n=M(O,"META",{name:!0,content:!0,class:!0}),s=M(O,"META",{property:!0,content:!0,class:!0}),a=M(O,"META",{property:!0,content:!0,class:!0}),l=M(O,"META",{property:!0,content:!0,class:!0}),o=M(O,"META",{property:!0,content:!0,class:!0}),i=M(O,"META",{property:!0,content:!0,class:!0}),c=M(O,"META",{property:!0,content:!0,class:!0}),f=M(O,"META",{property:!0,content:!0,class:!0}),u=M(O,"META",{property:!0,content:!0,class:!0}),h=M(O,"META",{property:!0,content:!0,class:!0}),g=M(O,"META",{property:!0,content:!0,class:!0}),O.forEach(E),m=H(C),p=M(C,"DIV",{class:!0});var R=j(p);me(b.$$.fragment,R),$=H(R),me(w.$$.fragment,R),L=H(R),me(I.$$.fragment,R),V=H(R),me(k.$$.fragment,R),J=H(R),me(Y.$$.fragment,R),R.forEach(E),this.h()},h(){d(r,"name","title"),d(r,"content",ze),d(r,"class","svelte-z7ouxl"),d(n,"name","description"),d(n,"content",Qe),d(n,"class","svelte-z7ouxl"),d(s,"property","og:type"),d(s,"content","website"),d(s,"class","svelte-z7ouxl"),d(a,"property","og:url"),d(a,"content",gt),d(a,"class","svelte-z7ouxl"),d(l,"property","og:title"),d(l,"content",ze),d(l,"class","svelte-z7ouxl"),d(o,"property","og:description"),d(o,"content",Qe),d(o,"class","svelte-z7ouxl"),d(i,"property","og:image"),d(i,"content",_t),d(i,"class","svelte-z7ouxl"),d(c,"property","twitter:card"),d(c,"content","summary_large_image"),d(c,"class","svelte-z7ouxl"),d(f,"property","twitter:url"),d(f,"content",gt),d(f,"class","svelte-z7ouxl"),d(u,"property","twitter:title"),d(u,"content",ze),d(u,"class","svelte-z7ouxl"),d(h,"property","twitter:description"),d(h,"content",Qe),d(h,"class","svelte-z7ouxl"),d(g,"property","twitter:image"),d(g,"content",_t),d(g,"class","svelte-z7ouxl"),d(p,"class","grid svelte-z7ouxl")},m(C,O){_(document.head,r),_(document.head,n),_(document.head,s),_(document.head,a),_(document.head,l),_(document.head,o),_(document.head,i),_(document.head,c),_(document.head,f),_(document.head,u),_(document.head,h),_(document.head,g),le(C,m,O),le(C,p,O),de(b,p,null),_(p,$),de(w,p,null),_(p,L),de(I,p,null),_(p,V),de(k,p,null),_(p,J),de(Y,p,null),Z=!0},p(C,[O]){(!Z||O&0)&&e!==(e=ze)&&(document.title=e)},i(C){Z||(ae(b.$$.fragment,C),ae(w.$$.fragment,C),ae(I.$$.fragment,C),ae(k.$$.fragment,C),ae(Y.$$.fragment,C),Z=!0)},o(C){se(b.$$.fragment,C),se(w.$$.fragment,C),se(I.$$.fragment,C),se(k.$$.fragment,C),se(Y.$$.fragment,C),Z=!1},d(C){E(r),E(n),E(s),E(a),E(l),E(o),E(i),E(c),E(f),E(u),E(h),E(g),C&&E(m),C&&E(p),pe(b),pe(w),pe(I),pe(k),pe(Y)}}}const ze="Jumping Peter",Qe="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",gt="https://ksmai.github.io/jumping-peter",_t="https://ksmai.github.io/jumping-peter/favicon.png";class da extends Ue{constructor(e){super(),Be(this,e,null,ca,Re,{})}}export{da as default};
