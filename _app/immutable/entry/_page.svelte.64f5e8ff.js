var It=Object.defineProperty;var Ot=(t,e,r)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fe=(t,e,r)=>(Ot(t,typeof e!="symbol"?e+"":e,r),r);import{S as Fe,i as $e,n as ke,j as $,s as X,q as ae,k,l as C,c as z,r as ne,g as A,m,J as Ue,K as Ee,a as ie,G as g,H as Pe,L as xe,M as qe,u as Oe,N as wt,y as me,z as de,A as he,f as se,b as oe,B as ve,I as ye,O as Se,v as bt,d as yt,P as Bt,e as et,Q as Et,R as Rt,T as Ut,p as Ct,o as Mt,U as tt,V as Dt,w as Nt,W as Lt}from"../chunks/index.1d64faf9.js";import{b as Qe,w as Ge}from"../chunks/paths.8139ff9a.js";function jt(t){let e,r,n,s,a,c,o,i,l,u,f,w,p;return{c(){e=$("header"),r=$("img"),s=X(),a=$("h1"),c=ae("Jumping Peter"),o=X(),i=$("p"),l=ae("generate gif emojis"),u=X(),f=$("a"),w=ae("Contribute"),this.h()},l(d){e=k(d,"HEADER",{class:!0});var _=C(e);r=k(_,"IMG",{class:!0,src:!0,alt:!0}),s=z(_),a=k(_,"H1",{class:!0});var y=C(a);c=ne(y,"Jumping Peter"),y.forEach(A),o=z(_),i=k(_,"P",{class:!0});var v=C(i);l=ne(v,"generate gif emojis"),v.forEach(A),u=z(_),f=k(_,"A",{class:!0,href:!0,target:!0,rel:!0});var E=C(f);w=ne(E,"Contribute"),E.forEach(A),_.forEach(A),this.h()},h(){m(r,"class","logo svelte-1kpylo8"),Ue(r.src,n=`${Qe}/demo-jumping.gif`)||m(r,"src",n),m(r,"alt",""),m(a,"class","title svelte-1kpylo8"),m(i,"class","subtitle svelte-1kpylo8"),m(f,"class","contribute svelte-1kpylo8"),m(f,"href","https://github.com/ksmai/jumping-peter"),m(f,"target","_blank"),m(f,"rel","noreferrer"),m(e,"class",p=Ee(`header ${t[0]}`)+" svelte-1kpylo8")},m(d,_){ie(d,e,_),g(e,r),g(e,s),g(e,a),g(a,c),g(e,o),g(e,i),g(i,l),g(e,u),g(e,f),g(f,w)},p(d,[_]){_&1&&p!==(p=Ee(`header ${d[0]}`)+" svelte-1kpylo8")&&m(e,"class",p)},i:Pe,o:Pe,d(d){d&&A(e)}}}function qt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Gt extends Fe{constructor(e){super(),$e(this,e,qt,jt,ke,{class:0})}}function Je(t){return{...t,type:"slider",min:-360,max:360,step:1}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Ye(t){return{...t,type:"slider",min:0,max:1,step:.01}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function st(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Vt(t){return{...t,type:"slider",min:1,max:100,step:1}}function At(t){return{...t,type:"toggle"}}function Xt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function Ve(){return[1,0,0,1,0,0]}function Ze(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function Tt(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,c,o,i,l,u]=t;t[0]=a*n-c*s,t[1]=a*s+c*n,t[2]=o*n-i*s,t[3]=o*s+i*n,t[4]=l*n-u*s,t[5]=l*s+u*n}function Ie(t,e,r){t[4]+=e,t[5]+=r}function Xe(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Ce(t,e,r){return t+(e-t)*r}function zt(t){return t*Math.PI/180}const Wt="spinning",Yt=[Je({name:"startAngle",default:0}),Je({name:"endAngle",default:360}),rt({name:"originX",default:0}),rt({name:"originY",default:0}),At({name:"alternates",default:!1})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:c,endAngle:o,originX:i,originY:l}=r;return[{program:n,geometry:s,getUniforms:f=>{const w=a?Math.min(f,1-f)*2:f,p=Ce(c,o,w),d=Ve();return Ie(d,-i,-l),Tt(d,p),Ie(d,i,l),{u_transform:Xe(d)}}}]}const Ht=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Yt,Name:Wt,createSprites:xt},Symbol.toStringTag,{value:"Module"})),Jt="expanding",Qt=[nt({name:"minScale",default:1}),nt({name:"maxScale",default:2}),At({name:"alternates",default:!1})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternates:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=o?Math.min(l,1-l)*2:l,f=Ce(a,c,u),w=Ve();return Ze(w,f,f),{u_transform:Xe(w)}}}]}const Zt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Qt,Name:Jt,createSprites:St},Symbol.toStringTag,{value:"Module"})),Kt="extreme-speed",er=[st({name:"directionX",default:-1}),st({name:"directionY",default:0})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("nine"),{directionX:a,directionY:c}=r,o=a*2,i=c*2;return[{program:n,geometry:s,getUniforms:u=>{const f=Ve(),w=Ce(0,o,u),p=Ce(0,i,u);return Ie(f,w,p),{u_transform:Xe(f)}}}]}const tr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:er,Name:Kt,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),rr="excited",ar=[Je({name:"angle",default:15}),at({name:"startOffset",default:-.1}),at({name:"endOffset",default:.1}),Vt({name:"cycles",default:2})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:c}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const l=zt(a),u=Math.cos(l),f=Math.sin(l);return[{program:n,geometry:s,getUniforms:p=>{const d=p*2*c%1,_=Math.min(d,1-d)*2,y=Ce(-o*f,-i*f,_),v=Ce(o*u,i*u,_),E=Ve();return Tt(E,a),Ie(E,y,v),Ze(E,p>.5?-1:1,1),{u_transform:Xe(E)}}}]}const nr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ar,Name:rr,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),sr="jumping",ir=[Ye({name:"maxOffset",default:.5}),Ye({name:"compressTime",default:.4}),Ye({name:"maxCompress",default:.25})];function $t(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:c,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=Math.min(l,1-l)*2,f=Ve(),w=u/(1-c);if(w<1){const p=(1-w*w)*a*2;Ie(f,0,p)}else{const p=(1-u)/c,_=1-(1-p*p)*o;Ie(f,0,1),Ze(f,1/_,_),Ie(f,0,-1)}return{u_transform:Xe(f)}}}]}const or=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ir,Name:sr,createSprites:$t},Symbol.toStringTag,{value:"Module"})),We=[or,tr,Ht,nr,Zt].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Xt(t.EditOptions,t.Name)}));function it(t,e,r){switch(r.name){case"spinning":return xt(t,e,r);case"expanding":return St(t,e,r);case"extreme-speed":return Pt(t,e,r);case"excited":return Ft(t,e,r);case"jumping":return $t(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class lr{constructor(e){fe(this,"loadingUrl",null);fe(this,"url",null);fe(this,"texture",null);fe(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const cr=function(){var t={},e=-1,r,n,s,a,c,o,i=12,l=5003,u,f=i,w,p=1<<i,d=[],_=[],y=l,v=0,E=!1,G,U,R,B=0,V=0,J=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,M=[],N=t.LZWEncoder=function(L,S,h,F){r=L,n=S,s=h,a=Math.max(2,F)},re=function(L,S){M[Z++]=L,Z>=254&&_e(S)},ue=function(L){Ae(y),v=U+2,E=!0,pe(U,L)},Ae=function(L){for(var S=0;S<L;++S)d[S]=-1},Y=t.compress=function(L,S){var h,F,K,W,le,H,T;for(G=L,E=!1,u=G,w=we(u),U=1<<L-1,R=U+1,v=U+2,Z=0,W=Te(),T=0,h=y;h<65536;h*=2)++T;T=8-T,H=y,Ae(H),pe(U,S);e:for(;(K=Te())!=e;){if(h=(K<<f)+W,F=K<<T^W,d[F]==h){W=_[F];continue}else if(d[F]>=0){le=H-F,F===0&&(le=1);do if((F-=le)<0&&(F+=H),d[F]==h){W=_[F];continue e}while(d[F]>=0)}pe(W,S),W=K,v<p?(_[F]=v++,d[F]=h):ue(S)}pe(W,S),pe(R,S)};t.encode=function(L){L.writeByte(a),c=r*n,o=0,Y(a+1,L),L.writeByte(0)};var _e=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(M,0,Z),Z=0)},we=function(L){return(1<<L)-1},Te=function(){if(c===0)return e;--c;var L=s[o++];return L&255},pe=function(L,S){for(B&=J[V],V>0?B|=L<<V:B=L,V+=u;V>=8;)re(B&255,S),B>>=8,V-=8;if((v>w||E)&&(E?(w=we(u=G),E=!1):(++u,u==f?w=p:w=we(u))),L==R){for(;V>0;)re(B&255,S),B>>=8,V-=8;_e(S)}};return N.apply(this,arguments),t},ur=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,o=e-1,i=4,l=100,u=16,f=1<<u,w=10,p=10,d=f>>p,_=f<<w-p,y=e>>3,v=6,E=1<<v,G=y*E,U=30,R=10,B=1<<R,V,J=8,Z=1<<J,M=R+J,N=1<<M,re,ue,Ae,Y,_e=[],we=[],Te=[],pe=[],te=t.NeuQuant=function(T,P,j){var I,O;for(re=T,ue=P,Ae=j,Y=new Array(e),I=0;I<e;I++)Y[I]=new Array(4),O=Y[I],O[0]=O[1]=O[2]=(I<<i+8)/e,Te[I]=f/e,we[I]=0},L=function(){for(var T=[],P=new Array(e),j=0;j<e;j++)P[Y[j][3]]=j;for(var I=0,O=0;O<e;O++){var b=P[O];T[I++]=Y[b][0],T[I++]=Y[b][1],T[I++]=Y[b][2]}return T},S=function(){var T,P,j,I,O,b,x,D;for(x=0,D=0,T=0;T<e;T++){for(O=Y[T],j=T,I=O[1],P=T+1;P<e;P++)b=Y[P],b[1]<I&&(j=P,I=b[1]);if(b=Y[j],T!=j&&(P=b[0],b[0]=O[0],O[0]=P,P=b[1],b[1]=O[1],O[1]=P,P=b[2],b[2]=O[2],O[2]=P,P=b[3],b[3]=O[3],O[3]=P),I!=x){for(_e[x]=D+T>>1,P=x+1;P<I;P++)_e[P]=T;x=I,D=T}}for(_e[x]=D+o>>1,P=x+1;P<256;P++)_e[P]=o},h=function(){var T,P,j,I,O,b,x,D,q,ee,ge,Q,ce,Ke;for(ue<c&&(Ae=1),V=30+(Ae-1)/3,Q=re,ce=0,Ke=ue,ge=ue/(3*Ae),ee=ge/l|0,D=B,b=G,x=b>>v,x<=1&&(x=0),T=0;T<x;T++)pe[T]=D*((x*x-T*T)*Z/(x*x));for(ue<c?q=3:ue%r!==0?q=3*r:ue%n!==0?q=3*n:ue%s!==0?q=3*s:q=3*a,T=0;T<ge;)if(j=(Q[ce+0]&255)<<i,I=(Q[ce+1]&255)<<i,O=(Q[ce+2]&255)<<i,P=le(j,I,O),W(D,P,j,I,O),x!==0&&K(x,P,j,I,O),ce+=q,ce>=Ke&&(ce-=ue),T++,ee===0&&(ee=1),T%ee===0)for(D-=D/V,b-=b/U,x=b>>v,x<=1&&(x=0),P=0;P<x;P++)pe[P]=D*((x*x-P*P)*Z/(x*x))};t.map=function(T,P,j){var I,O,b,x,D,q,ee;for(D=1e3,ee=-1,I=_e[P],O=I-1;I<e||O>=0;)I<e&&(q=Y[I],b=q[1]-P,b>=D?I=e:(I++,b<0&&(b=-b),x=q[0]-T,x<0&&(x=-x),b+=x,b<D&&(x=q[2]-j,x<0&&(x=-x),b+=x,b<D&&(D=b,ee=q[3])))),O>=0&&(q=Y[O],b=P-q[1],b>=D?O=-1:(O--,b<0&&(b=-b),x=q[0]-T,x<0&&(x=-x),b+=x,b<D&&(x=q[2]-j,x<0&&(x=-x),b+=x,b<D&&(D=b,ee=q[3]))));return ee},t.process=function(){return h(),F(),S(),L()};var F=function(){var T;for(T=0;T<e;T++)Y[T][0]>>=i,Y[T][1]>>=i,Y[T][2]>>=i,Y[T][3]=T},K=function(T,P,j,I,O){var b,x,D,q,ee,ge,Q;for(D=P-T,D<-1&&(D=-1),q=P+T,q>e&&(q=e),b=P+1,x=P-1,ge=1;b<q||x>D;){if(ee=pe[ge++],b<q){Q=Y[b++];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-I)/N,Q[2]-=ee*(Q[2]-O)/N}catch{}}if(x>D){Q=Y[x--];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-I)/N,Q[2]-=ee*(Q[2]-O)/N}catch{}}}},W=function(T,P,j,I,O){var b=Y[P];b[0]-=T*(b[0]-j)/B,b[1]-=T*(b[1]-I)/B,b[2]-=T*(b[2]-O)/B},le=function(T,P,j){var I,O,b,x,D,q,ee,ge,Q,ce;for(ge=~(1<<31),Q=ge,q=-1,ee=q,I=0;I<e;I++)ce=Y[I],O=ce[0]-T,O<0&&(O=-O),b=ce[1]-P,b<0&&(b=-b),O+=b,b=ce[2]-j,b<0&&(b=-b),O+=b,O<ge&&(ge=O,q=I),x=O-(we[I]>>u-i),x<Q&&(Q=x,ee=I),D=Te[I]>>p,Te[I]-=D,we[I]+=D<<w;return Te[q]+=d,we[q]-=_,ee};return te.apply(this,arguments),t},fr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var S="",h=this.bin.length,F=0;F<h;F++)S+=e[this.bin[F]];return S},r.prototype.writeByte=function(S){this.bin.push(S)},r.prototype.writeUTFBytes=function(S){for(var h=S.length,F=0;F<h;F++)this.writeByte(S.charCodeAt(F))},r.prototype.writeBytes=function(S,h,F){for(var K=F||S.length,W=h||0;W<K;W++)this.writeByte(S[W])};var n={},s,a,c=null,o,i=-1,l=0,u=!1,f,w,p,d,_,y,v=[],E=7,G=-1,U=!1,R=!0,B=!1,V=10,J="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(h){l=Math.round(h/10)},n.setDispose=function(h){h>=0&&(G=h)},n.setRepeat=function(h){h>=0&&(i=h)},n.setTransparent=function(h){c=h},n.setComment=function(h){J=h},n.addFrame=function(h,F){if(h===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var K=!0;try{F?h instanceof ImageData?(w=h.data,(!sizeset||s!=h.width||a!=h.height)&&M(h.width,h.height)):h instanceof Uint8ClampedArray?h.length==s*a*4?w=h:(console.log("Please set the correct size: ImageData length mismatch"),K=!1):(console.log("Please provide correct input"),K=!1):(w=h.getImageData(0,0,h.canvas.width,h.canvas.height).data,B||M(h.canvas.width,h.canvas.height)),ue(),N(),R&&(we(),pe(),i>=0&&Te()),Ae(),J!==""&&Y(),_e(),R||pe(),L(),R=!1}catch{K=!1}return K},n.download=function(h){if(f===null||U==!1)console.log("Please call start method and add frames and call finish method before calling download");else{h=h!==void 0?h.endsWith(".gif")?h:h+".gif":"download.gif";var F=document.createElement("a");F.download=h,F.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),F.click()}},n.finish=function(){if(!u)return!1;var h=!0;u=!1;try{f.writeByte(59),U=!0}catch{h=!1}return h};var Z=function(){o=0,w=null,p=null,d=null,y=null,U=!1,R=!0};n.setFrameRate=function(h){h!=15&&(l=Math.round(100/h))},n.setQuality=function(h){h<1&&(h=1),V=h};var M=n.setSize=function(h,F){u&&!R||(s=h,a=F,s<1&&(s=320),a<1&&(a=240),B=!0)};n.start=function(){Z();var h=!0;U=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{h=!1}return u=h},n.cont=function(){Z();var h=!0;return U=!1,f=new r,u=h};var N=function(){var h=p.length,F=h/3;d=[];var K=new ur(p,h,V);y=K.process();for(var W=0,le=0;le<F;le++){var H=K.map(p[W++]&255,p[W++]&255,p[W++]&255);v[H]=!0,d[le]=H}p=null,_=8,E=7,c!==null&&(o=re(c))},re=function(h){if(y===null)return-1;for(var F=(h&16711680)>>16,K=(h&65280)>>8,W=h&255,le=0,H=256*256*256,T=y.length,P=0;P<T;){var j=F-(y[P++]&255),I=K-(y[P++]&255),O=W-(y[P]&255),b=j*j+I*I+O*O,x=P/3;v[x]&&b<H&&(H=b,le=x),P++}return le},ue=function(){var h=s,F=a;p=[];for(var K=w,W=0,le=0;le<F;le++)for(var H=0;H<h;H++){var T=le*h*4+H*4;p[W++]=K[T],p[W++]=K[T+1],p[W++]=K[T+2]}},Ae=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var h,F;c===null?(h=0,F=0):(h=1,F=2),G>=0&&(F=G&7),F<<=2,f.writeByte(0|F|0|h),te(l),f.writeByte(o),f.writeByte(0)},Y=function(){f.writeByte(33),f.writeByte(254),f.writeByte(J.length),f.writeUTFBytes(J),f.writeByte(0)},_e=function(){f.writeByte(44),te(0),te(0),te(s),te(a),R?f.writeByte(0):f.writeByte(128|E)},we=function(){te(s),te(a),f.writeByte(240|E),f.writeByte(0),f.writeByte(0)},Te=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),te(i),f.writeByte(0)},pe=function(){f.writeBytes(y);for(var h=3*256-y.length,F=0;F<h;F++)f.writeByte(0)},te=function(h){f.writeByte(h&255),f.writeByte(h>>8&255)},L=function(){var h=new cr(s,a,d,_);h.encode(f)};return n.stream=function(){return f},n.setProperties=function(h,F){u=h,R=F},n},be={a_position:0,a_texCoords:1},ot={default:{vertex:`#version 300 es

layout(location = ${be.a_position}) in vec2 a_position;
layout(location = ${be.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class mr{constructor(e){fe(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:hr(this.gl,ot[e].vertex,ot[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function dr(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function hr(t,e,r){const n=lt(t,t.VERTEX_SHADER,e);let s;try{s=lt(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function lt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ct(t,e,r,n){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT);let s,a,c;for(const o of r){s!==o.program&&(t.useProgram(o.program.program),s=o.program),a!==o.geometry&&(t.bindVertexArray(o.geometry.vao),a=o.geometry),c!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),c=n);const i={u_image:n.unit,...o.getUniforms(e)};dr(t,o.program,i),t.drawArrays(o.geometry.drawMode,0,o.geometry.drawCount)}}const vr={full(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(be.a_position),t.vertexAttribPointer(be.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(be.a_texCoords),t.vertexAttribPointer(be.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}},nine(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-3,-3,0,3,3,-3,3,3,-3,3,0,0,3,3,3,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(be.a_position),t.vertexAttribPointer(be.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(be.a_texCoords),t.vertexAttribPointer(be.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}};class pr{constructor(e){fe(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=vr[e](this.gl)),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class gr{constructor(e){fe(this,"gl");fe(this,"programFactory");fe(this,"geometryFactory");fe(this,"texture");fe(this,"queue",[]);fe(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new mr(this.gl),this.geometryFactory=new pr(this.gl),this.texture=new lr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new fr;if(a.setRepeat(0),a.setDelay(e.frame.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:it(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:it(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let c=0;c<this.queue.length-1;++c)this.queue[c].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];if((e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height),e==="frame")ct(this.gl,a/r.frame.totalFrames,s,this.texture),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:c,sprites:o,callback:i}=this.queue[0];ct(this.gl,a/r.frame.totalFrames,o,this.texture),i(a);const l=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,l),c.addFrame(l,!0),c.setTransparent(16777215),a===r.frame.totalFrames-1){c.finish();const u=c.stream().getData(),f="data:image/gif;base64,"+window.btoa(u);n({dataUri:f}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ne=function(){const{subscribe:t,update:e}=Ge(We[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=We.find(c=>c.name===n);return a||s})}}}(),Re=function(){const t=`${Qe}/favicon.png`,{subscribe:e,update:r}=Ge({width:64,height:64,url:t});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.url!==t&&URL.revokeObjectURL(c.url),{...c,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Le=function(){const{subscribe:t,update:e}=Ge({delayMs:50,totalFrames:20});function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),je=function(){const{subscribe:t,update:e}=Ge(void 0,n=>Ne.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),Me=function(){const t=Ge({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new gr(c),running:!1,frame:0}})}function s(){const{animator:c}=xe(t);return c?(r(o=>({...o,running:!0,frame:0})),c.animate({image:xe(Re),frame:xe(Le),animation:xe(je)},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:o,frame:i}=xe(t);if(!o)return Promise.reject("Animator has not been created");let l;typeof c>"u"?l=i:l=c;const u=xe(Le);return l>=u.totalFrames&&(l=u.totalFrames-1),r(f=>({...f,frame:l,running:!0})),o.renderFrame({image:xe(Re),frame:u,animation:xe(je)},l).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ut(t){let e,r,n,s,a,c;return{c(){e=$("label"),r=ae(t[1]),n=X(),s=$("input"),this.h()},l(o){e=k(o,"LABEL",{class:!0});var i=C(e);r=ne(i,t[1]),n=z(i),s=k(i,"INPUT",{class:!0,type:!0}),i.forEach(A),this.h()},h(){m(s,"class","slider__text-input svelte-xvphrk"),m(s,"type","text"),s.value=t[0],m(e,"class","slider__label svelte-xvphrk")},m(o,i){ie(o,e,i),g(e,r),g(e,n),g(e,s),a||(c=qe(s,"input",t[5]),a=!0)},p(o,i){i&2&&Oe(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&A(e),a=!1,c()}}}function _r(t){let e,r,n,s,a=ze(t[2])+"",c,o,i,l,u,f,w=ze(t[3])+"",p,d,_,y=t[1]&&ut(t);return{c(){e=$("div"),y&&y.c(),r=X(),n=$("div"),s=$("span"),c=ae(a),o=X(),i=$("div"),l=$("input"),u=X(),f=$("span"),p=ae(w),this.h()},l(v){e=k(v,"DIV",{class:!0});var E=C(e);y&&y.l(E),r=z(E),n=k(E,"DIV",{class:!0});var G=C(n);s=k(G,"SPAN",{class:!0});var U=C(s);c=ne(U,a),U.forEach(A),o=z(G),i=k(G,"DIV",{class:!0});var R=C(i);l=k(R,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),R.forEach(A),u=z(G),f=k(G,"SPAN",{class:!0});var B=C(f);p=ne(B,w),B.forEach(A),G.forEach(A),E.forEach(A),this.h()},h(){m(s,"class","slider__range slider__range--min svelte-xvphrk"),m(l,"class","slider__input svelte-xvphrk"),m(l,"type","range"),m(l,"min",t[2]),m(l,"max",t[3]),m(l,"step",t[4]),l.value=t[0],m(i,"class","slider__input-container svelte-xvphrk"),m(f,"class","slider__range slider__range--max svelte-xvphrk"),m(n,"class","slider__container svelte-xvphrk"),m(e,"class","slider")},m(v,E){ie(v,e,E),y&&y.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,o),g(n,i),g(i,l),g(n,u),g(n,f),g(f,p),d||(_=qe(l,"input",t[5]),d=!0)},p(v,[E]){v[1]?y?y.p(v,E):(y=ut(v),y.c(),y.m(e,r)):y&&(y.d(1),y=null),E&4&&a!==(a=ze(v[2])+"")&&Oe(c,a),E&4&&m(l,"min",v[2]),E&8&&m(l,"max",v[3]),E&16&&m(l,"step",v[4]),E&1&&(l.value=v[0]),E&8&&w!==(w=ze(v[3])+"")&&Oe(p,w)},i:Pe,o:Pe,d(v){v&&A(e),y&&y.d(),d=!1,_()}}}function ze(t){return+(Math.round(t+"e+2")+"e-2")}function wr(t,e,r){const n=wt();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:o=1}=e,{value:i=c<a?a:(c-a)/2}=e;function l(u){const f=u.target,w=parseFloat(f.value);Number.isNaN(w)||(r(0,i=w),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,c=u.max),"step"in u&&r(4,o=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,c,o,l]}class Be extends Fe{constructor(e){super(),$e(this,e,wr,_r,ke,{label:1,min:2,max:3,step:4,value:0})}}function br(t){let e,r,n,s,a,c,o,i,l,u,f,w,p,d,_,y,v,E,G,U;return u=new Be({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]("width")),w=new Be({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),w.$on("input",t[4]("height")),d=new Be({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].delayMs}}),d.$on("input",t[5]("delayMs")),y=new Be({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].totalFrames}}),y.$on("input",t[5]("totalFrames")),{c(){e=$("aside"),r=$("label"),n=ae(`Upload image

    `),s=$("input"),a=X(),c=$("div"),o=$("img"),l=X(),me(u.$$.fragment),f=X(),me(w.$$.fragment),p=X(),me(d.$$.fragment),_=X(),me(y.$$.fragment),this.h()},l(R){e=k(R,"ASIDE",{class:!0});var B=C(e);r=k(B,"LABEL",{class:!0});var V=C(r);n=ne(V,`Upload image

    `),s=k(V,"INPUT",{class:!0,type:!0,accept:!0}),a=z(V),c=k(V,"DIV",{class:!0});var J=C(c);o=k(J,"IMG",{class:!0,src:!0,alt:!0}),J.forEach(A),V.forEach(A),l=z(B),de(u.$$.fragment,B),f=z(B),de(w.$$.fragment,B),p=z(B),de(d.$$.fragment,B),_=z(B),de(y.$$.fragment,B),B.forEach(A),this.h()},h(){m(s,"class","image__input svelte-1wsjlr5"),m(s,"type","file"),m(s,"accept","image/*"),m(o,"class","image__preview svelte-1wsjlr5"),Ue(o.src,i=t[1].url)||m(o,"src",i),m(o,"alt","source"),m(c,"class","image__container svelte-1wsjlr5"),m(r,"class","image svelte-1wsjlr5"),m(e,"class",v=Ee(`container ${t[0]}`)+" svelte-1wsjlr5")},m(R,B){ie(R,e,B),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,o),g(e,l),he(u,e,null),g(e,f),he(w,e,null),g(e,p),he(d,e,null),g(e,_),he(y,e,null),E=!0,G||(U=qe(s,"input",t[3]),G=!0)},p(R,[B]){(!E||B&2&&!Ue(o.src,i=R[1].url))&&m(o,"src",i);const V={};B&2&&(V.value=R[1].width),u.$set(V);const J={};B&2&&(J.value=R[1].height),w.$set(J);const Z={};B&4&&(Z.value=R[2].delayMs),d.$set(Z);const M={};B&4&&(M.value=R[2].totalFrames),y.$set(M),(!E||B&1&&v!==(v=Ee(`container ${R[0]}`)+" svelte-1wsjlr5"))&&m(e,"class",v)},i(R){E||(se(u.$$.fragment,R),se(w.$$.fragment,R),se(d.$$.fragment,R),se(y.$$.fragment,R),E=!0)},o(R){oe(u.$$.fragment,R),oe(w.$$.fragment,R),oe(d.$$.fragment,R),oe(y.$$.fragment,R),E=!1},d(R){R&&A(e),ve(u),ve(w),ve(d),ve(y),G=!1,U()}}}function yr(t,e,r){let n,s;ye(t,Re,l=>r(1,n=l)),ye(t,Le,l=>r(2,s=l));let{class:a=""}=e;function c(l){var w;const f=(w=l.target.files)==null?void 0:w[0];f&&Re.changeImage(f)}function o(l){return function(u){Re.change({[l]:u.detail.value})}}function i(l){return function(u){Le.change({[l]:u.detail.value})}}return t.$$set=l=>{"class"in l&&r(0,a=l.class)},[a,n,s,c,o,i]}class Er extends Fe{constructor(e){super(),$e(this,e,yr,br,ke,{class:0})}}function Ar(t){let e,r,n,s,a,c,o;return{c(){e=$("div"),r=ae(t[1]),n=X(),s=$("label"),a=$("input"),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=C(e);r=ne(l,t[1]),n=z(l),s=k(l,"LABEL",{class:!0});var u=C(s);a=k(u,"INPUT",{class:!0,type:!0}),u.forEach(A),l.forEach(A),this.h()},h(){m(a,"class","toggle__checkbox svelte-1j9rfin"),m(a,"type","checkbox"),a.checked=t[0],m(s,"class","toggle__label svelte-1j9rfin"),Se(s,"toggle__label--active",t[0]),m(e,"class","toggle svelte-1j9rfin")},m(i,l){ie(i,e,l),g(e,r),g(e,n),g(e,s),g(s,a),c||(o=qe(a,"change",t[2]),c=!0)},p(i,[l]){l&2&&Oe(r,i[1]),l&1&&(a.checked=i[0]),l&1&&Se(s,"toggle__label--active",i[0])},i:Pe,o:Pe,d(i){i&&A(e),c=!1,o()}}}function Tr(t,e,r){const n=wt();let{label:s=""}=e,{value:a=!1}=e;function c(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,c]}class kt extends Fe{constructor(e){super(),$e(this,e,Tr,Ar,ke,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[5]=e[r],n}function xr(t){let e,r;return e=new kt({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){oe(e.$$.fragment,n),r=!1},d(n){ve(e,n)}}}function Sr(t){let e,r;return e=new Be({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){oe(e.$$.fragment,n),r=!1},d(n){ve(e,n)}}}function mt(t){let e,r,n,s;const a=[Sr,xr],c=[];function o(i,l){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=o(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,l){~e&&c[e].m(i,l),ie(i,n,l),s=!0},p(i,l){let u=e;e=o(i),e===u?~e&&c[e].p(i,l):(r&&(bt(),oe(c[u],1,1,()=>{c[u]=null}),yt()),~e?(r=c[e],r?r.p(i,l):(r=c[e]=a[e](i),r.c()),se(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(se(r),s=!0)},o(i){oe(r),s=!1},d(i){~e&&c[e].d(i),i&&A(n)}}}function Pr(t){let e,r,n,s=t[2].editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=mt(ft(t,s,o));const c=o=>oe(a[o],1,1,()=>{a[o]=null});return{c(){e=$("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=k(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<a.length;l+=1)a[l].l(i);i.forEach(A),this.h()},h(){m(e,"class",r=Ee(`container ${t[0]}`)+" svelte-1solget")},m(o,i){ie(o,e,i);for(let l=0;l<a.length;l+=1)a[l].m(e,null);n=!0},p(o,[i]){if(i&14){s=o[2].editOptions;let l;for(l=0;l<s.length;l+=1){const u=ft(o,s,l);a[l]?(a[l].p(u,i),se(a[l],1)):(a[l]=mt(u),a[l].c(),se(a[l],1),a[l].m(e,null))}for(bt(),l=s.length;l<a.length;l+=1)c(l);yt()}(!n||i&1&&r!==(r=Ee(`container ${o[0]}`)+" svelte-1solget"))&&m(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)se(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)oe(a[i]);n=!1},d(o){o&&A(e),Bt(a,o)}}}function Fr(t,e,r){let n,s,a;ye(t,je,i=>r(4,s=i)),ye(t,Ne,i=>r(2,a=i));let{class:c=""}=e;function o(i){return function(l){je.change({[i]:l.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,o,s]}class $r extends Fe{constructor(e){super(),$e(this,e,Fr,Pr,ke,{class:0})}}function dt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function ht(t,e){let r,n,s,a,c,o=e[4]+"",i,l,u,f;function w(){return e[3](e[4])}return{key:t,first:null,c(){r=$("button"),n=$("img"),a=X(),c=$("span"),i=ae(o),l=X(),this.h()},l(p){r=k(p,"BUTTON",{type:!0,class:!0});var d=C(r);n=k(d,"IMG",{class:!0,src:!0,alt:!0}),a=z(d),c=k(d,"SPAN",{});var _=C(c);i=ne(_,o),_.forEach(A),l=z(d),d.forEach(A),this.h()},h(){m(n,"class","image svelte-18ktnr0"),Ue(n.src,s=`${Qe}/demo-${e[4]}.gif`)||m(n,"src",s),m(n,"alt",e[4]),m(r,"type","button"),m(r,"class","option svelte-18ktnr0"),Se(r,"option--selected",e[4]===e[1].name),this.first=r},m(p,d){ie(p,r,d),g(r,n),g(r,a),g(r,c),g(c,i),g(r,l),u||(f=qe(r,"click",w),u=!0)},p(p,d){e=p,d&2&&Se(r,"option--selected",e[4]===e[1].name)},d(p){p&&A(r),u=!1,f()}}}function kr(t){let e,r=[],n=new Map,s,a=We;const c=o=>o[4];for(let o=0;o<a.length;o+=1){let i=dt(t,a,o),l=c(i);n.set(l,r[o]=ht(l,i))}return{c(){e=$("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=k(o,"ASIDE",{class:!0});var i=C(e);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach(A),this.h()},h(){m(e,"class",s=Ee(`container ${t[0]}`)+" svelte-18ktnr0")},m(o,i){ie(o,e,i);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,[i]){i&6&&(a=We,r=Rt(r,i,c,1,o,a,n,e,Ut,ht,null,dt)),i&1&&s!==(s=Ee(`container ${o[0]}`)+" svelte-18ktnr0")&&m(e,"class",s)},i:Pe,o:Pe,d(o){o&&A(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Ir(t,e,r){let n;ye(t,Ne,o=>r(1,n=o));let{class:s=""}=e;function a(o){o!==n.name&&Ne.change(o)}const c=o=>a(o);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,c]}class Or extends Fe{constructor(e){super(),$e(this,e,Ir,kr,ke,{class:0})}}function vt(t){t[14]=t[15].dataUri}function pt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Ur,then:Rr,catch:Br,value:15,error:16};return tt(r=t[4],n),{c(){e=$("div"),n.block.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach(A),this.h()},h(){m(e,"class","preview__container preview__container--no-debug svelte-4d3008")},m(s,a){ie(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||Dt(n,t,a)},d(s){s&&A(e),n.block.d(),n.token=null,n=null}}}function Br(t){let e,r,n=t[16]+"",s;return{c(){e=$("p"),r=ae("An error has occurred: "),s=ae(n),this.h()},l(a){e=k(a,"P",{class:!0});var c=C(e);r=ne(c,"An error has occurred: "),s=ne(c,n),c.forEach(A),this.h()},h(){m(e,"class","preview__error svelte-4d3008")},m(a,c){ie(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[16]+"")&&Oe(s,n)},d(a){a&&A(e)}}}function Rr(t){vt(t);let e,r,n,s,a,c,o;return{c(){e=$("div"),r=$("img"),s=X(),a=$("a"),c=ae("Download"),this.h()},l(i){e=k(i,"DIV",{class:!0});var l=C(e);r=k(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(A),s=z(i),a=k(i,"A",{class:!0,download:!0,href:!0});var u=C(a);c=ne(u,"Download"),u.forEach(A),this.h()},h(){m(r,"class","preview__image svelte-4d3008"),Ue(r.src,n=t[14])||m(r,"src",n),m(r,"alt","generated gif"),m(e,"class","preview__image-container svelte-4d3008"),m(a,"class","preview__download-button svelte-4d3008"),m(a,"download","jumping_peter.gif"),m(a,"href",o=t[14])},m(i,l){ie(i,e,l),g(e,r),ie(i,s,l),ie(i,a,l),g(a,c)},p(i,l){vt(i),l&16&&!Ue(r.src,n=i[14])&&m(r,"src",n),l&16&&o!==(o=i[14])&&m(a,"href",o)},d(i){i&&A(e),i&&A(s),i&&A(a)}}}function Ur(t){let e,r,n,s,a,c,o=t[5].frame+"",i,l,u=t[2].totalFrames+"",f,w,p,d,_,y;return{c(){e=$("div"),r=$("p"),n=ae("Generating..."),s=X(),a=$("p"),c=ae("["),i=ae(o),l=ae(" / "),f=ae(u),w=ae("]"),p=X(),d=$("progress"),this.h()},l(v){e=k(v,"DIV",{class:!0});var E=C(e);r=k(E,"P",{});var G=C(r);n=ne(G,"Generating..."),G.forEach(A),s=z(E),a=k(E,"P",{});var U=C(a);c=ne(U,"["),i=ne(U,o),l=ne(U," / "),f=ne(U,u),w=ne(U,"]"),U.forEach(A),p=z(E),d=k(E,"PROGRESS",{class:!0,max:!0}),C(d).forEach(A),E.forEach(A),this.h()},h(){m(d,"class","preview__progress svelte-4d3008"),m(d,"max",_=t[2].totalFrames),d.value=y=t[5].frame,m(e,"class","preview__loading svelte-4d3008")},m(v,E){ie(v,e,E),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,l),g(a,f),g(a,w),g(e,p),g(e,d)},p(v,E){E&32&&o!==(o=v[5].frame+"")&&Oe(i,o),E&4&&u!==(u=v[2].totalFrames+"")&&Oe(f,u),E&4&&_!==(_=v[2].totalFrames)&&m(d,"max",_),E&32&&y!==(y=v[5].frame)&&(d.value=y)},d(v){v&&A(e)}}}function Cr(t){let e,r,n,s,a,c,o,i,l,u,f,w;n=new kt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let p=!t[1]&&t[4]&&pt(t);return u=new Be({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=$("main"),r=$("div"),me(n.$$.fragment),s=X(),p&&p.c(),a=X(),c=$("div"),o=$("div"),i=$("canvas"),l=X(),me(u.$$.fragment),this.h()},l(d){e=k(d,"MAIN",{class:!0});var _=C(e);r=k(_,"DIV",{class:!0});var y=C(r);de(n.$$.fragment,y),y.forEach(A),s=z(_),p&&p.l(_),a=z(_),c=k(_,"DIV",{class:!0});var v=C(c);o=k(v,"DIV",{class:!0});var E=C(o);i=k(E,"CANVAS",{class:!0,style:!0}),C(i).forEach(A),E.forEach(A),l=z(v),de(u.$$.fragment,v),v.forEach(A),_.forEach(A),this.h()},h(){m(r,"class","preview__debug-input svelte-4d3008"),m(i,"class","preview__image svelte-4d3008"),Ct(i,"transform","scaleY(-1)"),m(o,"class","preview__image-container svelte-4d3008"),m(c,"class","preview__container preview__container--debug svelte-4d3008"),m(e,"class",f=Ee(`preview ${t[0]}`)+" svelte-4d3008"),Se(e,"preview--debug",t[1]),Se(e,"preview--no-debug",!t[1])},m(d,_){ie(d,e,_),g(e,r),he(n,r,null),g(e,s),p&&p.m(e,null),g(e,a),g(e,c),g(c,o),g(o,i),t[11](i),g(c,l),he(u,c,null),w=!0},p(d,[_]){const y={};_&2&&(y.value=d[1]),n.$set(y),!d[1]&&d[4]?p?p.p(d,_):(p=pt(d),p.c(),p.m(e,a)):p&&(p.d(1),p=null);const v={};_&4&&(v.max=d[2].totalFrames-1),_&32&&(v.value=d[5].frame),u.$set(v),(!w||_&1&&f!==(f=Ee(`preview ${d[0]}`)+" svelte-4d3008"))&&m(e,"class",f),(!w||_&3)&&Se(e,"preview--debug",d[1]),(!w||_&3)&&Se(e,"preview--no-debug",!d[1])},i(d){w||(se(n.$$.fragment,d),se(u.$$.fragment,d),w=!0)},o(d){oe(n.$$.fragment,d),oe(u.$$.fragment,d),w=!1},d(d){d&&A(e),ve(n),p&&p.d(),t[11](null),ve(u)}}}function Mr(t,e,r){let n,s,a,c,o;ye(t,Ne,v=>r(8,n=v)),ye(t,je,v=>r(9,s=v)),ye(t,Le,v=>r(2,a=v)),ye(t,Re,v=>r(10,c=v)),ye(t,Me,v=>r(5,o=v));let i,{class:l=""}=e,u=!1,f=null;function w(){Me.renderFrame().catch(v=>{throw console.error(`renderFrame failed: ${v}`),v})}function p(){r(4,f=Me.animate().catch(v=>{throw console.error(`animate failed: ${v}`),v}))}Mt(()=>{Me.changeCanvas(i),p()});function d(v){Me.renderFrame(v.detail.value).catch(E=>console.error(`Animation failed: ${E}`))}function _(v){r(1,u=v.detail.value)}function y(v){Nt[v?"unshift":"push"](()=>{i=v,r(3,i)})}return t.$$set=v=>{"class"in v&&r(0,l=v.class)},t.$$.update=()=>{t.$$.dirty&1798&&(u?w():p())},[l,u,a,i,f,o,d,_,n,s,c,y]}class Dr extends Fe{constructor(e){super(),$e(this,e,Mr,Cr,ke,{class:0})}}function Nr(t){let e,r,n,s,a,c,o,i,l,u,f,w,p,d,_,y,v,E,G,U,R,B,V,J,Z;return document.title=e=De,y=new Gt({props:{class:"header"}}),E=new Or({props:{class:"animations"}}),U=new Er({props:{class:"common-options"}}),B=new $r({props:{class:"animation-options"}}),J=new Dr({props:{class:"preview"}}),{c(){r=$("meta"),n=$("meta"),s=$("meta"),a=$("meta"),c=$("meta"),o=$("meta"),i=$("meta"),l=$("meta"),u=$("meta"),f=$("meta"),w=$("meta"),p=$("meta"),d=X(),_=$("div"),me(y.$$.fragment),v=X(),me(E.$$.fragment),G=X(),me(U.$$.fragment),R=X(),me(B.$$.fragment),V=X(),me(J.$$.fragment),this.h()},l(M){const N=Lt("svelte-2dqrj",document.head);r=k(N,"META",{name:!0,content:!0,class:!0}),n=k(N,"META",{name:!0,content:!0,class:!0}),s=k(N,"META",{property:!0,content:!0,class:!0}),a=k(N,"META",{property:!0,content:!0,class:!0}),c=k(N,"META",{property:!0,content:!0,class:!0}),o=k(N,"META",{property:!0,content:!0,class:!0}),i=k(N,"META",{property:!0,content:!0,class:!0}),l=k(N,"META",{property:!0,content:!0,class:!0}),u=k(N,"META",{property:!0,content:!0,class:!0}),f=k(N,"META",{property:!0,content:!0,class:!0}),w=k(N,"META",{property:!0,content:!0,class:!0}),p=k(N,"META",{property:!0,content:!0,class:!0}),N.forEach(A),d=z(M),_=k(M,"DIV",{class:!0});var re=C(_);de(y.$$.fragment,re),v=z(re),de(E.$$.fragment,re),G=z(re),de(U.$$.fragment,re),R=z(re),de(B.$$.fragment,re),V=z(re),de(J.$$.fragment,re),re.forEach(A),this.h()},h(){m(r,"name","title"),m(r,"content",De),m(r,"class","svelte-r12qw"),m(n,"name","description"),m(n,"content",He),m(n,"class","svelte-r12qw"),m(s,"property","og:type"),m(s,"content","website"),m(s,"class","svelte-r12qw"),m(a,"property","og:url"),m(a,"content",gt),m(a,"class","svelte-r12qw"),m(c,"property","og:title"),m(c,"content",De),m(c,"class","svelte-r12qw"),m(o,"property","og:description"),m(o,"content",He),m(o,"class","svelte-r12qw"),m(i,"property","og:image"),m(i,"content",_t),m(i,"class","svelte-r12qw"),m(l,"property","twitter:card"),m(l,"content","summary_large_image"),m(l,"class","svelte-r12qw"),m(u,"property","twitter:url"),m(u,"content",gt),m(u,"class","svelte-r12qw"),m(f,"property","twitter:title"),m(f,"content",De),m(f,"class","svelte-r12qw"),m(w,"property","twitter:description"),m(w,"content",He),m(w,"class","svelte-r12qw"),m(p,"property","twitter:image"),m(p,"content",_t),m(p,"class","svelte-r12qw"),m(_,"class","grid svelte-r12qw")},m(M,N){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,o),g(document.head,i),g(document.head,l),g(document.head,u),g(document.head,f),g(document.head,w),g(document.head,p),ie(M,d,N),ie(M,_,N),he(y,_,null),g(_,v),he(E,_,null),g(_,G),he(U,_,null),g(_,R),he(B,_,null),g(_,V),he(J,_,null),Z=!0},p(M,[N]){(!Z||N&0)&&e!==(e=De)&&(document.title=e)},i(M){Z||(se(y.$$.fragment,M),se(E.$$.fragment,M),se(U.$$.fragment,M),se(B.$$.fragment,M),se(J.$$.fragment,M),Z=!0)},o(M){oe(y.$$.fragment,M),oe(E.$$.fragment,M),oe(U.$$.fragment,M),oe(B.$$.fragment,M),oe(J.$$.fragment,M),Z=!1},d(M){A(r),A(n),A(s),A(a),A(c),A(o),A(i),A(l),A(u),A(f),A(w),A(p),M&&A(d),M&&A(_),ve(y),ve(E),ve(U),ve(B),ve(J)}}}const De="Jumping Peter",He="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",gt="https://ksmai.github.io/jumping-peter",_t="https://ksmai.github.io/jumping-peter/favicon.png";class Gr extends Fe{constructor(e){super(),$e(this,e,null,Nr,ke,{})}}export{Gr as default};
