var St=Object.defineProperty;var Ft=(t,e,r)=>e in t?St(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var oe=(t,e,r)=>(Ft(t,typeof e!="symbol"?e+"":e,r),r);import{S as Se,i as Fe,n as Pe,j as R,s as G,q as Z,k as B,l as U,c as V,r as K,g as P,m as g,J as Oe,K as we,a as re,G as b,H as xe,L as Ie,M as je,u as Be,N as dt,y as fe,z as ce,A as ue,f as ee,b as te,B as me,I as $e,O as Te,v as vt,d as pt,P as Pt,e as Ze,Q as gt,R as kt,T as Rt,p as Bt,o as It,U as Ke,V as Ct,w as Ut}from"../chunks/index.29203576.js";import{b as We,w as Ye}from"../chunks/paths.6222391a.js";function Ot(t){let e,r,n,i,a,f,l,s,o,c,u,p,m;return{c(){e=R("header"),r=R("img"),i=G(),a=R("h1"),f=Z("Jumping Peter"),l=G(),s=R("p"),o=Z("generate gif emojis"),c=G(),u=R("a"),p=Z("Contribute"),this.h()},l(v){e=B(v,"HEADER",{class:!0});var A=U(e);r=B(A,"IMG",{class:!0,src:!0,alt:!0}),i=V(A),a=B(A,"H1",{class:!0});var h=U(a);f=K(h,"Jumping Peter"),h.forEach(P),l=V(A),s=B(A,"P",{class:!0});var E=U(s);o=K(E,"generate gif emojis"),E.forEach(P),c=V(A),u=B(A,"A",{class:!0,href:!0,target:!0,rel:!0});var S=U(u);p=K(S,"Contribute"),S.forEach(P),A.forEach(P),this.h()},h(){g(r,"class","logo svelte-1kpylo8"),Oe(r.src,n=`${We}/demo-jumping.gif`)||g(r,"src",n),g(r,"alt",""),g(a,"class","title svelte-1kpylo8"),g(s,"class","subtitle svelte-1kpylo8"),g(u,"class","contribute svelte-1kpylo8"),g(u,"href","https://github.com/ksmai/jumping-peter"),g(u,"target","_blank"),g(u,"rel","noreferrer"),g(e,"class",m=we(`header ${t[0]}`)+" svelte-1kpylo8")},m(v,A){re(v,e,A),b(e,r),b(e,i),b(e,a),b(a,f),b(e,l),b(e,s),b(s,o),b(e,c),b(e,u),b(u,p)},p(v,[A]){A&1&&m!==(m=we(`header ${v[0]}`)+" svelte-1kpylo8")&&g(e,"class",m)},i:xe,o:xe,d(v){v&&P(e)}}}function Dt(t,e,r){let{class:n=""}=e;return t.$$set=i=>{"class"in i&&r(0,n=i.class)},[n]}class Mt extends Se{constructor(e){super(),Fe(this,e,Dt,Ot,Pe,{class:0})}}function Xe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function Ae(t){return{...t,type:"slider",min:0,max:1,step:.01}}function et(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function tt(t){return{...t,type:"slider",min:-1,max:1,step:1}}function _t(t){return{...t,type:"toggle"}}function Nt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}var Me=typeof Float32Array<"u"?Float32Array:Array,Lt=Math.PI/180;function ze(t){return t*Lt}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Ge(){var t=new Me(6);return Me!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function bt(t,e,r){var n=e[0],i=e[1],a=e[2],f=e[3],l=e[4],s=e[5],o=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*o,t[1]=i*c+f*o,t[2]=n*-o+a*c,t[3]=i*-o+f*c,t[4]=l,t[5]=s,t}function He(t,e,r){var n=e[0],i=e[1],a=e[2],f=e[3],l=e[4],s=e[5],o=r[0],c=r[1];return t[0]=n*o,t[1]=i*o,t[2]=a*c,t[3]=f*c,t[4]=l,t[5]=s,t}function Re(t,e,r){var n=e[0],i=e[1],a=e[2],f=e[3],l=e[4],s=e[5],o=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=f,t[4]=n*o+a*c+l,t[5]=i*o+f*c+s,t}function Qe(){var t=new Me(2);return Me!=Float32Array&&(t[0]=0,t[1]=0),t}function rt(t,e){var r=new Me(2);return r[0]=t,r[1]=e,r}function jt(t,e){return t[0]=-e[0],t[1]=-e[1],t}function wt(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t}(function(){var t=Qe();return function(e,r,n,i,a,f){var l,s;for(r||(r=2),n||(n=0),i?s=Math.min(i*r+n,e.length):s=e.length,l=n;l<s;l+=r)t[0]=e[l],t[1]=e[l+1],a(t,t,f),e[l]=t[0],e[l+1]=t[1];return e}})();const Gt="spinning",Vt=[Xe({name:"startAngle",label:"Start angle",default:0}),Xe({name:"endAngle",label:"End angle",default:360}),_t({name:"alternate",label:"Alterate",default:!1}),Ae({name:"originX",label:"Rotate origin X",default:.5}),Ae({name:"originY",label:"Rotate origin Y",default:.5})];function yt(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{alternate:a}=r;let{startAngle:f,endAngle:l,originX:s,originY:o}=r;f=ze(f),l=ze(l),s=s*2-1,o=o*2-1;const c=u=>{if(a&&u>.5)return c(1-u);const p=f+(l-f)*u*(a?2:1),m=Ge();return Re(m,m,[s,o]),bt(m,m,p),Re(m,m,[-s,-o]),{u_transform:[m[0],m[1],0,m[2],m[3],0,m[4],m[5],1]}};return[{program:n,geometry:i,getUniforms:c}]}const Xt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Vt,Name:Gt,createSprites:yt},Symbol.toStringTag,{value:"Module"})),zt="expanding",qt=[et({name:"minScale",label:"Min scale",default:1}),et({name:"maxScale",label:"Max scale",default:2}),_t({name:"alternate",label:"Alterate",default:!1})];function Et(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{minScale:a,maxScale:f,alternate:l}=r,s=o=>{if(l&&o>.5)return s(1-o);const c=a+(f-a)*o*(l?2:1),u=Ge();return He(u,u,[c,c]),{u_transform:[u[0],u[1],0,u[2],u[3],0,u[4],u[5],1]}};return[{program:n,geometry:i,getUniforms:s}]}const Yt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:qt,Name:zt,createSprites:Et},Symbol.toStringTag,{value:"Module"})),Ht="extreme-speed",Wt=[tt({name:"directionX",label:"Horizontal direction",default:-1}),tt({name:"directionY",label:"Vertical direction",default:0})];function At(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("nine");let{directionX:a,directionY:f}=r;return a*=2,f*=2,[{program:n,geometry:i,getUniforms:s=>{const o=Ge();return Re(o,o,wt(Qe(),[0,0],[a,f],s)),He(o,o,[3,3]),{u_transform:[o[0],o[1],0,o[2],o[3],0,o[4],o[5],1]}}}]}const Qt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Wt,Name:Ht,createSprites:At},Symbol.toStringTag,{value:"Module"})),Jt="excited",Zt=[Xe({name:"minAngle",label:"Min angle",default:15}),Xe({name:"maxAngle",label:"Max angle",default:25}),Ae({name:"minCenterX",label:"Min center X",default:.5}),Ae({name:"maxCenterX",label:"Max center X",default:.55}),Ae({name:"minCenterY",label:"Min center Y",default:.5}),Ae({name:"maxCenterY",label:"Max center Y",default:.55})];function xt(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full");let{minAngle:a,maxAngle:f,minCenterX:l,maxCenterX:s,minCenterY:o,maxCenterY:c}=r;return a=ze(a),f=ze(f),l=l*2-1,o=o*2-1,s=s*2-1,c=c*2-1,[{program:n,geometry:i,getUniforms:p=>{let m=a+(f-a)*Math.random();Math.random()<.5&&(m=-m);const v=wt(Qe(),[l,o],[s,c],Math.random());Math.random()<.5&&jt(v,v);const A=Math.random()<.5?rt(-1,1):rt(1,1),h=Ge();return He(h,h,A),Re(h,h,v),bt(h,h,m),{u_transform:[h[0],h[1],0,h[2],h[3],0,h[4],h[5],1]}}}]}const Kt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Zt,Name:Jt,createSprites:xt},Symbol.toStringTag,{value:"Module"})),er="jumping",tr=[Ae({name:"jumpHeight",label:"Jump height",default:.5}),Ae({name:"compressTime",label:"Compress time",default:.4}),Ae({name:"maxCompress",label:"Max compress",default:.25})];function $t(t,e,r){const n=t.createProgram("default"),i=e.createGeometry("full"),{jumpHeight:a,compressTime:f,maxCompress:l}=r,s=o=>{if(o>.5)return s(1-o);const c=Ge(),u=2*o/(1-f);if(u<1){const p=(1-u*u)*a*2;Re(c,c,[0,-p])}else{const p=(.5-o)*2/f,v=1-(1-p*p)*l;Re(c,c,[0,1]),He(c,c,[1/v,v]),Re(c,c,[0,-1])}return{u_transform:[c[0],c[1],0,c[2],c[3],0,c[4],c[5],1]}};return[{program:n,geometry:i,getUniforms:s}]}const rr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:tr,Name:er,createSprites:$t},Symbol.toStringTag,{value:"Module"})),qe=[rr,Qt,Xt,Kt,Yt].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Nt(t.EditOptions,t.Name)}));function at(t,e,r){switch(r.name){case"spinning":return yt(t,e,r);case"expanding":return Et(t,e,r);case"extreme-speed":return At(t,e,r);case"excited":return xt(t,e,r);case"jumping":return $t(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class ar{constructor(e){oe(this,"loadingUrl",null);oe(this,"url",null);oe(this,"texture",null);oe(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),i=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const f=a.createTexture();if(!f)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,f),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=f,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const nr=function(){var t={},e=-1,r,n,i,a,f,l,s=12,o=5003,c,u=s,p,m=1<<s,v=[],A=[],h=o,E=0,S=!1,q,L,I,C=0,Y=0,ie=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],ae,ve=[],pe=t.LZWEncoder=function(D,x,d,T){r=D,n=x,i=d,a=Math.max(2,T)},ke=function(D,x){ve[ae++]=D,ae>=254&&ge(x)},le=function(D){ye(h),E=L+2,S=!0,he(L,D)},ye=function(D){for(var x=0;x<D;++x)v[x]=-1},X=t.compress=function(D,x){var d,T,W,j,ne,z,w;for(q=D,S=!1,c=q,p=_e(c),L=1<<D-1,I=L+1,E=L+2,ae=0,j=Ee(),w=0,d=h;d<65536;d*=2)++w;w=8-w,z=h,ye(z),he(L,x);e:for(;(W=Ee())!=e;){if(d=(W<<u)+j,T=W<<w^j,v[T]==d){j=A[T];continue}else if(v[T]>=0){ne=z-T,T===0&&(ne=1);do if((T-=ne)<0&&(T+=z),v[T]==d){j=A[T];continue e}while(v[T]>=0)}he(j,x),j=W,E<m?(A[T]=E++,v[T]=d):le(x)}he(j,x),he(I,x)};t.encode=function(D){D.writeByte(a),f=r*n,l=0,X(a+1,D),D.writeByte(0)};var ge=function(D){ae>0&&(D.writeByte(ae),D.writeBytes(ve,0,ae),ae=0)},_e=function(D){return(1<<D)-1},Ee=function(){if(f===0)return e;--f;var D=i[l++];return D&255},he=function(D,x){for(C&=ie[Y],Y>0?C|=D<<Y:C=D,Y+=c;Y>=8;)ke(C&255,x),C>>=8,Y-=8;if((E>p||S)&&(S?(p=_e(c=q),S=!1):(++c,c==u?p=m:p=_e(c))),D==I){for(;Y>0;)ke(C&255,x),C>>=8,Y-=8;ge(x)}};return pe.apply(this,arguments),t},ir=function(){var t={},e=256,r=499,n=491,i=487,a=503,f=3*a,l=e-1,s=4,o=100,c=16,u=1<<c,p=10,m=10,v=u>>m,A=u<<p-m,h=e>>3,E=6,S=1<<E,q=h*S,L=30,I=10,C=1<<I,Y,ie=8,ae=1<<ie,ve=I+ie,pe=1<<ve,ke,le,ye,X,ge=[],_e=[],Ee=[],he=[],J=t.NeuQuant=function(w,$,M){var F,k;for(ke=w,le=$,ye=M,X=new Array(e),F=0;F<e;F++)X[F]=new Array(4),k=X[F],k[0]=k[1]=k[2]=(F<<s+8)/e,Ee[F]=u/e,_e[F]=0},D=function(){for(var w=[],$=new Array(e),M=0;M<e;M++)$[X[M][3]]=M;for(var F=0,k=0;k<e;k++){var _=$[k];w[F++]=X[_][0],w[F++]=X[_][1],w[F++]=X[_][2]}return w},x=function(){var w,$,M,F,k,_,y,O;for(y=0,O=0,w=0;w<e;w++){for(k=X[w],M=w,F=k[1],$=w+1;$<e;$++)_=X[$],_[1]<F&&(M=$,F=_[1]);if(_=X[M],w!=M&&($=_[0],_[0]=k[0],k[0]=$,$=_[1],_[1]=k[1],k[1]=$,$=_[2],_[2]=k[2],k[2]=$,$=_[3],_[3]=k[3],k[3]=$),F!=y){for(ge[y]=O+w>>1,$=y+1;$<F;$++)ge[$]=w;y=F,O=w}}for(ge[y]=O+l>>1,$=y+1;$<256;$++)ge[$]=l},d=function(){var w,$,M,F,k,_,y,O,N,Q,de,H,se,Je;for(le<f&&(ye=1),Y=30+(ye-1)/3,H=ke,se=0,Je=le,de=le/(3*ye),Q=de/o|0,O=C,_=q,y=_>>E,y<=1&&(y=0),w=0;w<y;w++)he[w]=O*((y*y-w*w)*ae/(y*y));for(le<f?N=3:le%r!==0?N=3*r:le%n!==0?N=3*n:le%i!==0?N=3*i:N=3*a,w=0;w<de;)if(M=(H[se+0]&255)<<s,F=(H[se+1]&255)<<s,k=(H[se+2]&255)<<s,$=ne(M,F,k),j(O,$,M,F,k),y!==0&&W(y,$,M,F,k),se+=N,se>=Je&&(se-=le),w++,Q===0&&(Q=1),w%Q===0)for(O-=O/Y,_-=_/L,y=_>>E,y<=1&&(y=0),$=0;$<y;$++)he[$]=O*((y*y-$*$)*ae/(y*y))};t.map=function(w,$,M){var F,k,_,y,O,N,Q;for(O=1e3,Q=-1,F=ge[$],k=F-1;F<e||k>=0;)F<e&&(N=X[F],_=N[1]-$,_>=O?F=e:(F++,_<0&&(_=-_),y=N[0]-w,y<0&&(y=-y),_+=y,_<O&&(y=N[2]-M,y<0&&(y=-y),_+=y,_<O&&(O=_,Q=N[3])))),k>=0&&(N=X[k],_=$-N[1],_>=O?k=-1:(k--,_<0&&(_=-_),y=N[0]-w,y<0&&(y=-y),_+=y,_<O&&(y=N[2]-M,y<0&&(y=-y),_+=y,_<O&&(O=_,Q=N[3]))));return Q},t.process=function(){return d(),T(),x(),D()};var T=function(){var w;for(w=0;w<e;w++)X[w][0]>>=s,X[w][1]>>=s,X[w][2]>>=s,X[w][3]=w},W=function(w,$,M,F,k){var _,y,O,N,Q,de,H;for(O=$-w,O<-1&&(O=-1),N=$+w,N>e&&(N=e),_=$+1,y=$-1,de=1;_<N||y>O;){if(Q=he[de++],_<N){H=X[_++];try{H[0]-=Q*(H[0]-M)/pe,H[1]-=Q*(H[1]-F)/pe,H[2]-=Q*(H[2]-k)/pe}catch{}}if(y>O){H=X[y--];try{H[0]-=Q*(H[0]-M)/pe,H[1]-=Q*(H[1]-F)/pe,H[2]-=Q*(H[2]-k)/pe}catch{}}}},j=function(w,$,M,F,k){var _=X[$];_[0]-=w*(_[0]-M)/C,_[1]-=w*(_[1]-F)/C,_[2]-=w*(_[2]-k)/C},ne=function(w,$,M){var F,k,_,y,O,N,Q,de,H,se;for(de=~(1<<31),H=de,N=-1,Q=N,F=0;F<e;F++)se=X[F],k=se[0]-w,k<0&&(k=-k),_=se[1]-$,_<0&&(_=-_),k+=_,_=se[2]-M,_<0&&(_=-_),k+=_,k<de&&(de=k,N=F),y=k-(_e[F]>>c-s),y<H&&(H=y,Q=F),O=Ee[F]>>m,Ee[F]-=O,_e[F]+=O<<p;return Ee[N]+=v,_e[N]-=A,Q};return J.apply(this,arguments),t},sr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var x="",d=this.bin.length,T=0;T<d;T++)x+=e[this.bin[T]];return x},r.prototype.writeByte=function(x){this.bin.push(x)},r.prototype.writeUTFBytes=function(x){for(var d=x.length,T=0;T<d;T++)this.writeByte(x.charCodeAt(T))},r.prototype.writeBytes=function(x,d,T){for(var W=T||x.length,j=d||0;j<W;j++)this.writeByte(x[j])};var n={},i,a,f=null,l,s=-1,o=0,c=!1,u,p,m,v,A,h,E=[],S=7,q=-1,L=!1,I=!0,C=!1,Y=10,ie="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(d){o=Math.round(d/10)},n.setDispose=function(d){d>=0&&(q=d)},n.setRepeat=function(d){d>=0&&(s=d)},n.setTransparent=function(d){f=d},n.setComment=function(d){ie=d},n.addFrame=function(d,T){if(d===null||!c||u===null)throw new Error("Please call start method before calling addFrame");var W=!0;try{T?d instanceof ImageData?(p=d.data,(!sizeset||i!=d.width||a!=d.height)&&ve(d.width,d.height)):d instanceof Uint8ClampedArray?d.length==i*a*4?p=d:(console.log("Please set the correct size: ImageData length mismatch"),W=!1):(console.log("Please provide correct input"),W=!1):(p=d.getImageData(0,0,d.canvas.width,d.canvas.height).data,C||ve(d.canvas.width,d.canvas.height)),le(),pe(),I&&(_e(),he(),s>=0&&Ee()),ye(),ie!==""&&X(),ge(),I||he(),D(),I=!1}catch{W=!1}return W},n.download=function(d){if(u===null||L==!1)console.log("Please call start method and add frames and call finish method before calling download");else{d=d!==void 0?d.endsWith(".gif")?d:d+".gif":"download.gif";var T=document.createElement("a");T.download=d,T.href=URL.createObjectURL(new Blob([new Uint8Array(u.bin)],{type:"image/gif"})),T.click()}},n.finish=function(){if(!c)return!1;var d=!0;c=!1;try{u.writeByte(59),L=!0}catch{d=!1}return d};var ae=function(){l=0,p=null,m=null,v=null,h=null,L=!1,I=!0};n.setFrameRate=function(d){d!=15&&(o=Math.round(100/d))},n.setQuality=function(d){d<1&&(d=1),Y=d};var ve=n.setSize=function(d,T){c&&!I||(i=d,a=T,i<1&&(i=320),a<1&&(a=240),C=!0)};n.start=function(){ae();var d=!0;L=!1,u=new r;try{u.writeUTFBytes("GIF89a")}catch{d=!1}return c=d},n.cont=function(){ae();var d=!0;return L=!1,u=new r,c=d};var pe=function(){var d=m.length,T=d/3;v=[];var W=new ir(m,d,Y);h=W.process();for(var j=0,ne=0;ne<T;ne++){var z=W.map(m[j++]&255,m[j++]&255,m[j++]&255);E[z]=!0,v[ne]=z}m=null,A=8,S=7,f!==null&&(l=ke(f))},ke=function(d){if(h===null)return-1;for(var T=(d&16711680)>>16,W=(d&65280)>>8,j=d&255,ne=0,z=256*256*256,w=h.length,$=0;$<w;){var M=T-(h[$++]&255),F=W-(h[$++]&255),k=j-(h[$]&255),_=M*M+F*F+k*k,y=$/3;E[y]&&_<z&&(z=_,ne=y),$++}return ne},le=function(){var d=i,T=a;m=[];for(var W=p,j=0,ne=0;ne<T;ne++)for(var z=0;z<d;z++){var w=ne*d*4+z*4;m[j++]=W[w],m[j++]=W[w+1],m[j++]=W[w+2]}},ye=function(){u.writeByte(33),u.writeByte(249),u.writeByte(4);var d,T;f===null?(d=0,T=0):(d=1,T=2),q>=0&&(T=q&7),T<<=2,u.writeByte(0|T|0|d),J(o),u.writeByte(l),u.writeByte(0)},X=function(){u.writeByte(33),u.writeByte(254),u.writeByte(ie.length),u.writeUTFBytes(ie),u.writeByte(0)},ge=function(){u.writeByte(44),J(0),J(0),J(i),J(a),I?u.writeByte(0):u.writeByte(128|S)},_e=function(){J(i),J(a),u.writeByte(240|S),u.writeByte(0),u.writeByte(0)},Ee=function(){u.writeByte(33),u.writeByte(255),u.writeByte(11),u.writeUTFBytes("NETSCAPE2.0"),u.writeByte(3),u.writeByte(1),J(s),u.writeByte(0)},he=function(){u.writeBytes(h);for(var d=3*256-h.length,T=0;T<d;T++)u.writeByte(0)},J=function(d){u.writeByte(d&255),u.writeByte(d>>8&255)},D=function(){var d=new nr(i,a,v,A);d.encode(u)};return n.stream=function(){return u},n.setProperties=function(d,T){c=d,I=T},n},be={a_position:0,a_texCoords:1},nt={default:{vertex:`#version 300 es

layout(location = ${be.a_position}) in vec2 a_position;
layout(location = ${be.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  gl_Position = vec4((u_transform * vec3(a_position, 1.0)).xy, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class lr{constructor(e){oe(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:fr(this.gl,nt[e].vertex,nt[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function or(t,e,r){for(const[n,i]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof i=="number"?t.uniform1i(a,i):Array.isArray(i)?i.length===2?t.uniform2fv(a,i):i.length===3?t.uniform3fv(a,i):i.length===4?t.uniform4fv(a,i):i.length===9?t.uniformMatrix3fv(a,!1,i):i.length===16&&t.uniformMatrix4fv(a,!1,i):typeof i=="number"&&t.uniform1f(a,i)}}function fr(t,e,r){const n=it(t,t.VERTEX_SHADER,e);let i;try{i=it(t,t.FRAGMENT_SHADER,r)}catch(f){throw t.deleteShader(n),f}const a=t.createProgram();if(a===null)throw t.deleteShader(i),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.detachShader(a,i),t.detachShader(a,n),t.deleteShader(i),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const f=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${f}`)}return a}function it(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${i}`)}return n}function st(t,e,r,n){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT);let i,a,f;for(const l of r){i!==l.program&&(t.useProgram(l.program.program),i=l.program),a!==l.geometry&&(t.bindVertexArray(l.geometry.vao),a=l.geometry),f!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),f=n);const s={u_image:n.unit,...l.getUniforms(e)};or(t,l.program,s),t.drawArrays(l.geometry.drawMode,0,l.geometry.drawCount)}}const cr={full(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(be.a_position),t.vertexAttribPointer(be.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(be.a_texCoords),t.vertexAttribPointer(be.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}},nine(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,0,1,-1,3,0,-1,1,0,3,1,1,3,3]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(be.a_position),t.vertexAttribPointer(be.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(be.a_texCoords),t.vertexAttribPointer(be.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}};class ur{constructor(e){oe(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=cr[e](this.gl)),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class mr{constructor(e){oe(this,"gl");oe(this,"programFactory");oe(this,"geometryFactory");oe(this,"texture");oe(this,"queue",[]);oe(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new lr(this.gl),this.geometryFactory=new ur(this.gl),this.texture=new ar(this.gl)}animate(e,r){return new Promise((n,i)=>{const a=new sr;if(a.setRepeat(0),a.setDelay(e.gif.delayMs),a.setSize(e.gif.width,e.gif.height),!a.start()){i("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:i,frame:0,sprites:at(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,i)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:i,frame:r,sprites:at(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let f=0;f<this.queue.length-1;++f)this.queue[f].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:i,frame:a}=this.queue[0];if((e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.gif.imageUrl),this.canvas.width=r.gif.width,this.canvas.height=r.gif.height),e==="frame")st(this.gl,a/r.gif.totalFrames,i,this.texture),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:f,sprites:l,callback:s}=this.queue[0];st(this.gl,a/r.gif.totalFrames,l,this.texture),s(a);const o=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,o),f.addFrame(o,!0),f.setTransparent(16777215),a===r.gif.totalFrames-1){f.finish();const c=f.stream().getData(),u="data:image/gif;base64,"+window.btoa(c);n({dataUri:u}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ne=function(){const{subscribe:t,update:e}=Ye(qe[0]);return{subscribe:t,change:n=>{e(i=>{if(n===i.name)return i;const a=qe.find(f=>f.name===n);return a||i})}}}(),Ue=function(){const t=`${We}/favicon.png`,{subscribe:e,update:r}=Ye({width:64,height:64,delayMs:50,totalFrames:20,imageUrl:t});function n(a){r(f=>({...f,...a}))}function i(a){r(f=>(f.imageUrl!==t&&URL.revokeObjectURL(f.imageUrl),{...f,imageUrl:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:i}}(),Le=function(){const{subscribe:t,update:e}=Ye(void 0,n=>Ne.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(i=>({...i,...n}))}return{subscribe:t,change:r}}(),De=function(){const t=Ye({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(f){r(l=>{var s;return(s=l.animator)==null||s.destroy(),{animator:new mr(f),running:!1,frame:0}})}function i(){const{animator:f}=Ie(t);return f?(r(l=>({...l,running:!0,frame:0})),f.animate({gif:Ie(Ue),animation:Ie(Le)},l=>r(s=>({...s,frame:l}))).finally(()=>{r(l=>({...l,running:!1}))})):Promise.reject("Animator has not been created")}function a(f){const{animator:l,frame:s}=Ie(t);if(!l)return Promise.reject("Animator has not been created");let o;typeof f>"u"?o=s:o=f;const c=Ie(Ue);return o>=c.totalFrames&&(o=c.totalFrames-1),r(u=>({...u,frame:o,running:!0})),l.renderFrame({gif:c,animation:Ie(Le)},s).finally(()=>{r(u=>({...u,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:i,renderFrame:a}}();function lt(t){let e,r,n,i,a,f;return{c(){e=R("label"),r=Z(t[1]),n=G(),i=R("input"),this.h()},l(l){e=B(l,"LABEL",{class:!0});var s=U(e);r=K(s,t[1]),n=V(s),i=B(s,"INPUT",{class:!0,type:!0}),s.forEach(P),this.h()},h(){g(i,"class","slider__text-input svelte-xvphrk"),g(i,"type","text"),i.value=t[0],g(e,"class","slider__label svelte-xvphrk")},m(l,s){re(l,e,s),b(e,r),b(e,n),b(e,i),a||(f=je(i,"input",t[5]),a=!0)},p(l,s){s&2&&Be(r,l[1]),s&1&&i.value!==l[0]&&(i.value=l[0])},d(l){l&&P(e),a=!1,f()}}}function hr(t){let e,r,n,i,a=Ve(t[2])+"",f,l,s,o,c,u,p=Ve(t[3])+"",m,v,A,h=t[1]&&lt(t);return{c(){e=R("div"),h&&h.c(),r=G(),n=R("div"),i=R("span"),f=Z(a),l=G(),s=R("div"),o=R("input"),c=G(),u=R("span"),m=Z(p),this.h()},l(E){e=B(E,"DIV",{class:!0});var S=U(e);h&&h.l(S),r=V(S),n=B(S,"DIV",{class:!0});var q=U(n);i=B(q,"SPAN",{class:!0});var L=U(i);f=K(L,a),L.forEach(P),l=V(q),s=B(q,"DIV",{class:!0});var I=U(s);o=B(I,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),I.forEach(P),c=V(q),u=B(q,"SPAN",{class:!0});var C=U(u);m=K(C,p),C.forEach(P),q.forEach(P),S.forEach(P),this.h()},h(){g(i,"class","slider__range slider__range--min svelte-xvphrk"),g(o,"class","slider__input svelte-xvphrk"),g(o,"type","range"),g(o,"min",t[2]),g(o,"max",t[3]),g(o,"step",t[4]),o.value=t[0],g(s,"class","slider__input-container svelte-xvphrk"),g(u,"class","slider__range slider__range--max svelte-xvphrk"),g(n,"class","slider__container svelte-xvphrk"),g(e,"class","slider")},m(E,S){re(E,e,S),h&&h.m(e,null),b(e,r),b(e,n),b(n,i),b(i,f),b(n,l),b(n,s),b(s,o),b(n,c),b(n,u),b(u,m),v||(A=je(o,"input",t[5]),v=!0)},p(E,[S]){E[1]?h?h.p(E,S):(h=lt(E),h.c(),h.m(e,r)):h&&(h.d(1),h=null),S&4&&a!==(a=Ve(E[2])+"")&&Be(f,a),S&4&&g(o,"min",E[2]),S&8&&g(o,"max",E[3]),S&16&&g(o,"step",E[4]),S&1&&(o.value=E[0]),S&8&&p!==(p=Ve(E[3])+"")&&Be(m,p)},i:xe,o:xe,d(E){E&&P(e),h&&h.d(),v=!1,A()}}}function Ve(t){return+(Math.round(t+"e+2")+"e-2")}function dr(t,e,r){const n=dt();let{label:i=""}=e,{min:a=0}=e,{max:f=100}=e,{step:l=1}=e,{value:s=f<a?a:(f-a)/2}=e;function o(c){const u=c.target,p=parseFloat(u.value);Number.isNaN(p)||(r(0,s=p),n("input",{value:s}))}return t.$$set=c=>{"label"in c&&r(1,i=c.label),"min"in c&&r(2,a=c.min),"max"in c&&r(3,f=c.max),"step"in c&&r(4,l=c.step),"value"in c&&r(0,s=c.value)},[s,i,a,f,l,o]}class Ce extends Se{constructor(e){super(),Fe(this,e,dr,hr,Pe,{label:1,min:2,max:3,step:4,value:0})}}function vr(t){let e,r,n,i,a,f,l,s,o,c,u,p,m,v,A,h,E,S,q,L;return c=new Ce({props:{label:"Output width",min:1,max:1024,step:1,value:t[1].width}}),c.$on("input",t[3]("width")),p=new Ce({props:{label:"Output height",min:1,max:1024,step:1,value:t[1].height}}),p.$on("input",t[3]("height")),v=new Ce({props:{label:"Delay ms",min:20,max:1e3,step:10,value:t[1].delayMs}}),v.$on("input",t[3]("delayMs")),h=new Ce({props:{label:"Total frames",min:1,max:1e3,step:1,value:t[1].totalFrames}}),h.$on("input",t[3]("totalFrames")),{c(){e=R("aside"),r=R("label"),n=Z(`Upload image

    `),i=R("input"),a=G(),f=R("div"),l=R("img"),o=G(),fe(c.$$.fragment),u=G(),fe(p.$$.fragment),m=G(),fe(v.$$.fragment),A=G(),fe(h.$$.fragment),this.h()},l(I){e=B(I,"ASIDE",{class:!0});var C=U(e);r=B(C,"LABEL",{class:!0});var Y=U(r);n=K(Y,`Upload image

    `),i=B(Y,"INPUT",{class:!0,type:!0,accept:!0}),a=V(Y),f=B(Y,"DIV",{class:!0});var ie=U(f);l=B(ie,"IMG",{class:!0,src:!0,alt:!0}),ie.forEach(P),Y.forEach(P),o=V(C),ce(c.$$.fragment,C),u=V(C),ce(p.$$.fragment,C),m=V(C),ce(v.$$.fragment,C),A=V(C),ce(h.$$.fragment,C),C.forEach(P),this.h()},h(){g(i,"class","image__input svelte-1wsjlr5"),g(i,"type","file"),g(i,"accept","image/*"),g(l,"class","image__preview svelte-1wsjlr5"),Oe(l.src,s=t[1].imageUrl)||g(l,"src",s),g(l,"alt","source"),g(f,"class","image__container svelte-1wsjlr5"),g(r,"class","image svelte-1wsjlr5"),g(e,"class",E=we(`container ${t[0]}`)+" svelte-1wsjlr5")},m(I,C){re(I,e,C),b(e,r),b(r,n),b(r,i),b(r,a),b(r,f),b(f,l),b(e,o),ue(c,e,null),b(e,u),ue(p,e,null),b(e,m),ue(v,e,null),b(e,A),ue(h,e,null),S=!0,q||(L=je(i,"input",t[2]),q=!0)},p(I,[C]){(!S||C&2&&!Oe(l.src,s=I[1].imageUrl))&&g(l,"src",s);const Y={};C&2&&(Y.value=I[1].width),c.$set(Y);const ie={};C&2&&(ie.value=I[1].height),p.$set(ie);const ae={};C&2&&(ae.value=I[1].delayMs),v.$set(ae);const ve={};C&2&&(ve.value=I[1].totalFrames),h.$set(ve),(!S||C&1&&E!==(E=we(`container ${I[0]}`)+" svelte-1wsjlr5"))&&g(e,"class",E)},i(I){S||(ee(c.$$.fragment,I),ee(p.$$.fragment,I),ee(v.$$.fragment,I),ee(h.$$.fragment,I),S=!0)},o(I){te(c.$$.fragment,I),te(p.$$.fragment,I),te(v.$$.fragment,I),te(h.$$.fragment,I),S=!1},d(I){I&&P(e),me(c),me(p),me(v),me(h),q=!1,L()}}}function pr(t,e,r){let n;$e(t,Ue,l=>r(1,n=l));let{class:i=""}=e;function a(l){var c;const o=(c=l.target.files)==null?void 0:c[0];o&&Ue.changeImage(o)}function f(l){return function(s){Ue.change({[l]:s.detail.value})}}return t.$$set=l=>{"class"in l&&r(0,i=l.class)},[i,n,a,f]}class gr extends Se{constructor(e){super(),Fe(this,e,pr,vr,Pe,{class:0})}}function _r(t){let e,r,n,i,a,f,l;return{c(){e=R("div"),r=Z(t[1]),n=G(),i=R("label"),a=R("input"),this.h()},l(s){e=B(s,"DIV",{class:!0});var o=U(e);r=K(o,t[1]),n=V(o),i=B(o,"LABEL",{class:!0});var c=U(i);a=B(c,"INPUT",{class:!0,type:!0}),c.forEach(P),o.forEach(P),this.h()},h(){g(a,"class","toggle__checkbox svelte-1j9rfin"),g(a,"type","checkbox"),a.checked=t[0],g(i,"class","toggle__label svelte-1j9rfin"),Te(i,"toggle__label--active",t[0]),g(e,"class","toggle svelte-1j9rfin")},m(s,o){re(s,e,o),b(e,r),b(e,n),b(e,i),b(i,a),f||(l=je(a,"change",t[2]),f=!0)},p(s,[o]){o&2&&Be(r,s[1]),o&1&&(a.checked=s[0]),o&1&&Te(i,"toggle__label--active",s[0])},i:xe,o:xe,d(s){s&&P(e),f=!1,l()}}}function br(t,e,r){const n=dt();let{label:i=""}=e,{value:a=!1}=e;function f(l){const s=l.target;r(0,a=Boolean(s.checked)),n("change",{value:a})}return t.$$set=l=>{"label"in l&&r(1,i=l.label),"value"in l&&r(0,a=l.value)},[a,i,f]}class Tt extends Se{constructor(e){super(),Fe(this,e,br,_r,Pe,{label:1,value:0})}}function ot(t,e,r){const n=t.slice();return n[5]=e[r],n}function wr(t){let e,r;return e=new Tt({props:{label:t[5].label,value:t[1][t[5].name]}}),e.$on("change",function(){gt(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,i){ue(e,n,i),r=!0},p(n,i){t=n;const a={};i&4&&(a.label=t[5].label),i&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ee(e.$$.fragment,n),r=!0)},o(n){te(e.$$.fragment,n),r=!1},d(n){me(e,n)}}}function yr(t){let e,r;return e=new Ce({props:{label:t[5].label,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){gt(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,i){ue(e,n,i),r=!0},p(n,i){t=n;const a={};i&4&&(a.label=t[5].label),i&4&&(a.min=t[5].min),i&4&&(a.max=t[5].max),i&4&&(a.step=t[5].step),i&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ee(e.$$.fragment,n),r=!0)},o(n){te(e.$$.fragment,n),r=!1},d(n){me(e,n)}}}function ft(t){let e,r,n,i;const a=[yr,wr],f=[];function l(s,o){return s[5].type==="slider"?0:s[5].type==="toggle"?1:-1}return~(e=l(t))&&(r=f[e]=a[e](t)),{c(){r&&r.c(),n=Ze()},l(s){r&&r.l(s),n=Ze()},m(s,o){~e&&f[e].m(s,o),re(s,n,o),i=!0},p(s,o){let c=e;e=l(s),e===c?~e&&f[e].p(s,o):(r&&(vt(),te(f[c],1,1,()=>{f[c]=null}),pt()),~e?(r=f[e],r?r.p(s,o):(r=f[e]=a[e](s),r.c()),ee(r,1),r.m(n.parentNode,n)):r=null)},i(s){i||(ee(r),i=!0)},o(s){te(r),i=!1},d(s){~e&&f[e].d(s),s&&P(n)}}}function Er(t){let e,r,n,i=t[2].editOptions,a=[];for(let l=0;l<i.length;l+=1)a[l]=ft(ot(t,i,l));const f=l=>te(a[l],1,1,()=>{a[l]=null});return{c(){e=R("aside");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=B(l,"ASIDE",{class:!0});var s=U(e);for(let o=0;o<a.length;o+=1)a[o].l(s);s.forEach(P),this.h()},h(){g(e,"class",r=we(`container ${t[0]}`)+" svelte-1solget")},m(l,s){re(l,e,s);for(let o=0;o<a.length;o+=1)a[o].m(e,null);n=!0},p(l,[s]){if(s&14){i=l[2].editOptions;let o;for(o=0;o<i.length;o+=1){const c=ot(l,i,o);a[o]?(a[o].p(c,s),ee(a[o],1)):(a[o]=ft(c),a[o].c(),ee(a[o],1),a[o].m(e,null))}for(vt(),o=i.length;o<a.length;o+=1)f(o);pt()}(!n||s&1&&r!==(r=we(`container ${l[0]}`)+" svelte-1solget"))&&g(e,"class",r)},i(l){if(!n){for(let s=0;s<i.length;s+=1)ee(a[s]);n=!0}},o(l){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)te(a[s]);n=!1},d(l){l&&P(e),Pt(a,l)}}}function Ar(t,e,r){let n,i,a;$e(t,Le,s=>r(4,i=s)),$e(t,Ne,s=>r(2,a=s));let{class:f=""}=e;function l(s){return function(o){Le.change({[s]:o.detail.value})}}return t.$$set=s=>{"class"in s&&r(0,f=s.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=i)},[f,n,a,l,i]}class xr extends Se{constructor(e){super(),Fe(this,e,Ar,Er,Pe,{class:0})}}function ct(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function ut(t,e){let r,n,i,a,f,l=e[4]+"",s,o,c,u;function p(){return e[3](e[4])}return{key:t,first:null,c(){r=R("button"),n=R("img"),a=G(),f=R("span"),s=Z(l),o=G(),this.h()},l(m){r=B(m,"BUTTON",{type:!0,class:!0});var v=U(r);n=B(v,"IMG",{class:!0,src:!0,alt:!0}),a=V(v),f=B(v,"SPAN",{});var A=U(f);s=K(A,l),A.forEach(P),o=V(v),v.forEach(P),this.h()},h(){g(n,"class","image svelte-18ktnr0"),Oe(n.src,i=`${We}/demo-${e[4]}.gif`)||g(n,"src",i),g(n,"alt",e[4]),g(r,"type","button"),g(r,"class","option svelte-18ktnr0"),Te(r,"option--selected",e[4]===e[1].name),this.first=r},m(m,v){re(m,r,v),b(r,n),b(r,a),b(r,f),b(f,s),b(r,o),c||(u=je(r,"click",p),c=!0)},p(m,v){e=m,v&2&&Te(r,"option--selected",e[4]===e[1].name)},d(m){m&&P(r),c=!1,u()}}}function $r(t){let e,r=[],n=new Map,i,a=qe;const f=l=>l[4];for(let l=0;l<a.length;l+=1){let s=ct(t,a,l),o=f(s);n.set(o,r[l]=ut(o,s))}return{c(){e=R("aside");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=B(l,"ASIDE",{class:!0});var s=U(e);for(let o=0;o<r.length;o+=1)r[o].l(s);s.forEach(P),this.h()},h(){g(e,"class",i=we(`container ${t[0]}`)+" svelte-18ktnr0")},m(l,s){re(l,e,s);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(l,[s]){s&6&&(a=qe,r=kt(r,s,f,1,l,a,n,e,Rt,ut,null,ct)),s&1&&i!==(i=we(`container ${l[0]}`)+" svelte-18ktnr0")&&g(e,"class",i)},i:xe,o:xe,d(l){l&&P(e);for(let s=0;s<r.length;s+=1)r[s].d()}}}function Tr(t,e,r){let n;$e(t,Ne,l=>r(1,n=l));let{class:i=""}=e;function a(l){l!==n.name&&Ne.change(l)}const f=l=>a(l);return t.$$set=l=>{"class"in l&&r(0,i=l.class)},[i,n,a,f]}class Sr extends Se{constructor(e){super(),Fe(this,e,Tr,$r,Pe,{class:0})}}function mt(t){t[13]=t[14].dataUri}function ht(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:kr,then:Pr,catch:Fr,value:14,error:15};return Ke(r=t[4],n),{c(){e=R("div"),n.block.c(),this.h()},l(i){e=B(i,"DIV",{class:!0});var a=U(e);n.block.l(a),a.forEach(P),this.h()},h(){g(e,"class","preview__container preview__container--no-debug svelte-4d3008")},m(i,a){re(i,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(i,a){t=i,n.ctx=t,a&16&&r!==(r=t[4])&&Ke(r,n)||Ct(n,t,a)},d(i){i&&P(e),n.block.d(),n.token=null,n=null}}}function Fr(t){let e,r,n=t[15]+"",i;return{c(){e=R("p"),r=Z("An error has occurred: "),i=Z(n),this.h()},l(a){e=B(a,"P",{class:!0});var f=U(e);r=K(f,"An error has occurred: "),i=K(f,n),f.forEach(P),this.h()},h(){g(e,"class","preview__error svelte-4d3008")},m(a,f){re(a,e,f),b(e,r),b(e,i)},p(a,f){f&16&&n!==(n=a[15]+"")&&Be(i,n)},d(a){a&&P(e)}}}function Pr(t){mt(t);let e,r,n,i,a,f,l;return{c(){e=R("div"),r=R("img"),i=G(),a=R("a"),f=Z("Download"),this.h()},l(s){e=B(s,"DIV",{class:!0});var o=U(e);r=B(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach(P),i=V(s),a=B(s,"A",{class:!0,download:!0,href:!0});var c=U(a);f=K(c,"Download"),c.forEach(P),this.h()},h(){g(r,"class","preview__image svelte-4d3008"),Oe(r.src,n=t[13])||g(r,"src",n),g(r,"alt","generated gif"),g(e,"class","preview__image-container svelte-4d3008"),g(a,"class","preview__download-button svelte-4d3008"),g(a,"download","jumping_peter.gif"),g(a,"href",l=t[13])},m(s,o){re(s,e,o),b(e,r),re(s,i,o),re(s,a,o),b(a,f)},p(s,o){mt(s),o&16&&!Oe(r.src,n=s[13])&&g(r,"src",n),o&16&&l!==(l=s[13])&&g(a,"href",l)},d(s){s&&P(e),s&&P(i),s&&P(a)}}}function kr(t){let e,r,n,i,a,f,l=t[5].frame+"",s,o,c=t[2].totalFrames+"",u,p,m,v,A,h;return{c(){e=R("div"),r=R("p"),n=Z("Generating..."),i=G(),a=R("p"),f=Z("["),s=Z(l),o=Z(" / "),u=Z(c),p=Z("]"),m=G(),v=R("progress"),this.h()},l(E){e=B(E,"DIV",{class:!0});var S=U(e);r=B(S,"P",{});var q=U(r);n=K(q,"Generating..."),q.forEach(P),i=V(S),a=B(S,"P",{});var L=U(a);f=K(L,"["),s=K(L,l),o=K(L," / "),u=K(L,c),p=K(L,"]"),L.forEach(P),m=V(S),v=B(S,"PROGRESS",{class:!0,max:!0}),U(v).forEach(P),S.forEach(P),this.h()},h(){g(v,"class","preview__progress svelte-4d3008"),g(v,"max",A=t[2].totalFrames),v.value=h=t[5].frame,g(e,"class","preview__loading svelte-4d3008")},m(E,S){re(E,e,S),b(e,r),b(r,n),b(e,i),b(e,a),b(a,f),b(a,s),b(a,o),b(a,u),b(a,p),b(e,m),b(e,v)},p(E,S){S&32&&l!==(l=E[5].frame+"")&&Be(s,l),S&4&&c!==(c=E[2].totalFrames+"")&&Be(u,c),S&4&&A!==(A=E[2].totalFrames)&&g(v,"max",A),S&32&&h!==(h=E[5].frame)&&(v.value=h)},d(E){E&&P(e)}}}function Rr(t){let e,r,n,i,a,f,l,s,o,c,u,p;n=new Tt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let m=!t[1]&&t[4]&&ht(t);return c=new Ce({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),c.$on("input",t[6]),{c(){e=R("main"),r=R("div"),fe(n.$$.fragment),i=G(),m&&m.c(),a=G(),f=R("div"),l=R("div"),s=R("canvas"),o=G(),fe(c.$$.fragment),this.h()},l(v){e=B(v,"MAIN",{class:!0});var A=U(e);r=B(A,"DIV",{class:!0});var h=U(r);ce(n.$$.fragment,h),h.forEach(P),i=V(A),m&&m.l(A),a=V(A),f=B(A,"DIV",{class:!0});var E=U(f);l=B(E,"DIV",{class:!0});var S=U(l);s=B(S,"CANVAS",{class:!0,style:!0}),U(s).forEach(P),S.forEach(P),o=V(E),ce(c.$$.fragment,E),E.forEach(P),A.forEach(P),this.h()},h(){g(r,"class","preview__debug-input svelte-4d3008"),g(s,"class","preview__image svelte-4d3008"),Bt(s,"transform","scaleY(-1)"),g(l,"class","preview__image-container svelte-4d3008"),g(f,"class","preview__container preview__container--debug svelte-4d3008"),g(e,"class",u=we(`preview ${t[0]}`)+" svelte-4d3008"),Te(e,"preview--debug",t[1]),Te(e,"preview--no-debug",!t[1])},m(v,A){re(v,e,A),b(e,r),ue(n,r,null),b(e,i),m&&m.m(e,null),b(e,a),b(e,f),b(f,l),b(l,s),t[10](s),b(f,o),ue(c,f,null),p=!0},p(v,[A]){const h={};A&2&&(h.value=v[1]),n.$set(h),!v[1]&&v[4]?m?m.p(v,A):(m=ht(v),m.c(),m.m(e,a)):m&&(m.d(1),m=null);const E={};A&4&&(E.max=v[2].totalFrames-1),A&32&&(E.value=v[5].frame),c.$set(E),(!p||A&1&&u!==(u=we(`preview ${v[0]}`)+" svelte-4d3008"))&&g(e,"class",u),(!p||A&3)&&Te(e,"preview--debug",v[1]),(!p||A&3)&&Te(e,"preview--no-debug",!v[1])},i(v){p||(ee(n.$$.fragment,v),ee(c.$$.fragment,v),p=!0)},o(v){te(n.$$.fragment,v),te(c.$$.fragment,v),p=!1},d(v){v&&P(e),me(n),m&&m.d(),t[10](null),me(c)}}}function Br(t,e,r){let n,i,a,f;$e(t,Ne,h=>r(8,n=h)),$e(t,Le,h=>r(9,i=h)),$e(t,Ue,h=>r(2,a=h)),$e(t,De,h=>r(5,f=h));let l,{class:s=""}=e,o=!1,c=null;function u(){De.renderFrame().catch(h=>{throw console.error(`renderFrame failed: ${h}`),h})}function p(){r(4,c=De.animate().catch(h=>{throw console.error(`animate failed: ${h}`),h}))}It(()=>{De.changeCanvas(l),p()});function m(h){De.renderFrame(h.detail.value).catch(E=>console.error(`Animation failed: ${E}`))}function v(h){r(1,o=h.detail.value)}function A(h){Ut[h?"unshift":"push"](()=>{l=h,r(3,l)})}return t.$$set=h=>{"class"in h&&r(0,s=h.class)},t.$$.update=()=>{t.$$.dirty&774&&(o?u():p())},[s,o,a,l,c,f,m,v,n,i,A]}class Ir extends Se{constructor(e){super(),Fe(this,e,Br,Rr,Pe,{class:0})}}function Cr(t){let e,r,n,i,a,f,l,s,o,c,u;return r=new Mt({props:{class:"header"}}),i=new Sr({props:{class:"animations"}}),f=new gr({props:{class:"gif-options"}}),s=new xr({props:{class:"animation-options"}}),c=new Ir({props:{class:"preview"}}),{c(){e=R("div"),fe(r.$$.fragment),n=G(),fe(i.$$.fragment),a=G(),fe(f.$$.fragment),l=G(),fe(s.$$.fragment),o=G(),fe(c.$$.fragment),this.h()},l(p){e=B(p,"DIV",{class:!0});var m=U(e);ce(r.$$.fragment,m),n=V(m),ce(i.$$.fragment,m),a=V(m),ce(f.$$.fragment,m),l=V(m),ce(s.$$.fragment,m),o=V(m),ce(c.$$.fragment,m),m.forEach(P),this.h()},h(){g(e,"class","grid svelte-vglu9v")},m(p,m){re(p,e,m),ue(r,e,null),b(e,n),ue(i,e,null),b(e,a),ue(f,e,null),b(e,l),ue(s,e,null),b(e,o),ue(c,e,null),u=!0},p:xe,i(p){u||(ee(r.$$.fragment,p),ee(i.$$.fragment,p),ee(f.$$.fragment,p),ee(s.$$.fragment,p),ee(c.$$.fragment,p),u=!0)},o(p){te(r.$$.fragment,p),te(i.$$.fragment,p),te(f.$$.fragment,p),te(s.$$.fragment,p),te(c.$$.fragment,p),u=!1},d(p){p&&P(e),me(r),me(i),me(f),me(s),me(c)}}}class Mr extends Se{constructor(e){super(),Fe(this,e,null,Cr,Pe,{})}}export{Mr as default};
