var kt=Object.defineProperty;var It=(t,e,r)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fe=(t,e,r)=>(It(t,typeof e!="symbol"?e+"":e,r),r);import{S as Se,i as Pe,n as Oe,j as P,s as X,q as ae,k as O,l as U,c as z,r as ne,g as A,m,J as Me,K as Ee,a as ie,G as g,H as $e,L as xe,M as qe,u as Ie,N as wt,y as me,z as de,A as he,f as se,b as oe,B as pe,I as ye,O as Fe,v as bt,d as yt,P as Bt,e as et,Q as Et,R as Rt,T as Mt,p as Ut,o as Ct,U as tt,V as Dt,w as Nt,W as Lt}from"../chunks/index.1d64faf9.js";import{b as Qe,w as Ge}from"../chunks/paths.37e3224d.js";function jt(t){let e,r,n,s,a,c,o,i,l,u,f,w,v;return{c(){e=P("header"),r=P("img"),s=X(),a=P("h1"),c=ae("Jumping Peter"),o=X(),i=P("p"),l=ae("generate gif emojis"),u=X(),f=P("a"),w=ae("Contribute"),this.h()},l(d){e=O(d,"HEADER",{class:!0});var _=U(e);r=O(_,"IMG",{class:!0,src:!0,alt:!0}),s=z(_),a=O(_,"H1",{class:!0});var y=U(a);c=ne(y,"Jumping Peter"),y.forEach(A),o=z(_),i=O(_,"P",{class:!0});var p=U(i);l=ne(p,"generate gif emojis"),p.forEach(A),u=z(_),f=O(_,"A",{class:!0,href:!0,target:!0,rel:!0});var E=U(f);w=ne(E,"Contribute"),E.forEach(A),_.forEach(A),this.h()},h(){m(r,"class","logo svelte-1kpylo8"),Me(r.src,n=`${Qe}/demo-jumping.gif`)||m(r,"src",n),m(r,"alt",""),m(a,"class","title svelte-1kpylo8"),m(i,"class","subtitle svelte-1kpylo8"),m(f,"class","contribute svelte-1kpylo8"),m(f,"href","https://github.com/ksmai/jumping-peter"),m(f,"target","_blank"),m(f,"rel","noreferrer"),m(e,"class",v=Ee(`header ${t[0]}`)+" svelte-1kpylo8")},m(d,_){ie(d,e,_),g(e,r),g(e,s),g(e,a),g(a,c),g(e,o),g(e,i),g(i,l),g(e,u),g(e,f),g(f,w)},p(d,[_]){_&1&&v!==(v=Ee(`header ${d[0]}`)+" svelte-1kpylo8")&&m(e,"class",v)},i:$e,o:$e,d(d){d&&A(e)}}}function qt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class Gt extends Se{constructor(e){super(),Pe(this,e,qt,jt,Oe,{class:0})}}function Je(t){return{...t,type:"slider",min:-360,max:360,step:1}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Ye(t){return{...t,type:"slider",min:0,max:1,step:.01}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function st(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Vt(t){return{...t,type:"slider",min:1,max:100,step:1}}function At(t){return{...t,type:"toggle"}}function Xt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function Ve(){return[1,0,0,1,0,0]}function Ze(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function Tt(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,c,o,i,l,u]=t;t[0]=a*n-c*s,t[1]=a*s+c*n,t[2]=o*n-i*s,t[3]=o*s+i*n,t[4]=l*n-u*s,t[5]=l*s+u*n}function ke(t,e,r){t[4]+=e,t[5]+=r}function Xe(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Ue(t,e,r){return t+(e-t)*r}function zt(t){return t*Math.PI/180}const Wt="spinning",Yt={delayMs:50,totalFrames:15},Ht=[Je({name:"startAngle",default:0}),Je({name:"endAngle",default:360}),rt({name:"originX",default:0}),rt({name:"originY",default:0}),At({name:"alternates",default:!1})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:c,endAngle:o,originX:i,originY:l}=r;return[{program:n,geometry:s,getUniforms:f=>{const w=a?Math.min(f,1-f)*2:f,v=Ue(c,o,w),d=Ve();return ke(d,-i,-l),Tt(d,v),ke(d,i,l),{u_transform:Xe(d)}}}]}const Jt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Ht,FrameOptions:Yt,Name:Wt,createSprites:xt},Symbol.toStringTag,{value:"Module"})),Qt="expanding",Zt={delayMs:50,totalFrames:20},Kt=[nt({name:"minScale",default:1}),nt({name:"maxScale",default:2}),At({name:"alternates",default:!1})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternates:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=o?Math.min(l,1-l)*2:l,f=Ue(a,c,u),w=Ve();return Ze(w,f,f),{u_transform:Xe(w)}}}]}const er=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Kt,FrameOptions:Zt,Name:Qt,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),tr="extreme-speed",rr={delayMs:20,totalFrames:10},ar=[st({name:"directionX",default:-1}),st({name:"directionY",default:0})];function $t(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("nine"),{directionX:a,directionY:c}=r,o=a*2,i=c*2;return[{program:n,geometry:s,getUniforms:u=>{const f=Ve(),w=Ue(0,o,u),v=Ue(0,i,u);return ke(f,w,v),{u_transform:Xe(f)}}}]}const nr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ar,FrameOptions:rr,Name:tr,createSprites:$t},Symbol.toStringTag,{value:"Module"})),sr="excited",ir={delayMs:50,totalFrames:25},or=[Je({name:"angle",default:15}),at({name:"startOffset",default:-.1}),at({name:"endOffset",default:.1}),Vt({name:"cycles",default:3})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:c}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const l=zt(a),u=Math.cos(l),f=Math.sin(l);return[{program:n,geometry:s,getUniforms:v=>{const d=v*2*c%1,_=Math.min(d,1-d)*2,y=Ue(-o*f,-i*f,_),p=Ue(o*u,i*u,_),E=Ve();return Tt(E,a),ke(E,y,p),Ze(E,v>.5?-1:1,1),{u_transform:Xe(E)}}}]}const lr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:or,FrameOptions:ir,Name:sr,createSprites:St},Symbol.toStringTag,{value:"Module"})),cr="jumping",ur={delayMs:50,totalFrames:20},fr=[Ye({name:"maxOffset",default:.6}),Ye({name:"compressTime",default:.4}),Ye({name:"maxCompress",default:.3})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:c,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:l=>{const u=Math.min(l,1-l)*2,f=Ve(),w=u/(1-c);if(w<1){const v=(1-w*w)*a*2;ke(f,0,v)}else{const v=(1-u)/c,_=1-(1-v*v)*o;ke(f,0,1),Ze(f,1/_,_),ke(f,0,-1)}return{u_transform:Xe(f)}}}]}const mr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:fr,FrameOptions:ur,Name:cr,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),We=[mr,nr,Jt,lr,er].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Xt(t.EditOptions,t.Name),defaultFrameOptions:t.FrameOptions}));function it(t,e,r){switch(r.name){case"spinning":return xt(t,e,r);case"expanding":return Ft(t,e,r);case"extreme-speed":return $t(t,e,r);case"excited":return St(t,e,r);case"jumping":return Pt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class dr{constructor(e){fe(this,"loadingUrl",null);fe(this,"url",null);fe(this,"texture",null);fe(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const hr=function(){var t={},e=-1,r,n,s,a,c,o,i=12,l=5003,u,f=i,w,v=1<<i,d=[],_=[],y=l,p=0,E=!1,G,M,R,B=0,V=0,J=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,C=[],N=t.LZWEncoder=function(L,F,h,S){r=L,n=F,s=h,a=Math.max(2,S)},re=function(L,F){C[Z++]=L,Z>=254&&_e(F)},ue=function(L){Ae(y),p=M+2,E=!0,ve(M,L)},Ae=function(L){for(var F=0;F<L;++F)d[F]=-1},Y=t.compress=function(L,F){var h,S,K,W,le,H,T;for(G=L,E=!1,u=G,w=we(u),M=1<<L-1,R=M+1,p=M+2,Z=0,W=Te(),T=0,h=y;h<65536;h*=2)++T;T=8-T,H=y,Ae(H),ve(M,F);e:for(;(K=Te())!=e;){if(h=(K<<f)+W,S=K<<T^W,d[S]==h){W=_[S];continue}else if(d[S]>=0){le=H-S,S===0&&(le=1);do if((S-=le)<0&&(S+=H),d[S]==h){W=_[S];continue e}while(d[S]>=0)}ve(W,F),W=K,p<v?(_[S]=p++,d[S]=h):ue(F)}ve(W,F),ve(R,F)};t.encode=function(L){L.writeByte(a),c=r*n,o=0,Y(a+1,L),L.writeByte(0)};var _e=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(C,0,Z),Z=0)},we=function(L){return(1<<L)-1},Te=function(){if(c===0)return e;--c;var L=s[o++];return L&255},ve=function(L,F){for(B&=J[V],V>0?B|=L<<V:B=L,V+=u;V>=8;)re(B&255,F),B>>=8,V-=8;if((p>w||E)&&(E?(w=we(u=G),E=!1):(++u,u==f?w=v:w=we(u))),L==R){for(;V>0;)re(B&255,F),B>>=8,V-=8;_e(F)}};return N.apply(this,arguments),t},pr=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,o=e-1,i=4,l=100,u=16,f=1<<u,w=10,v=10,d=f>>v,_=f<<w-v,y=e>>3,p=6,E=1<<p,G=y*E,M=30,R=10,B=1<<R,V,J=8,Z=1<<J,C=R+J,N=1<<C,re,ue,Ae,Y,_e=[],we=[],Te=[],ve=[],te=t.NeuQuant=function(T,$,j){var k,I;for(re=T,ue=$,Ae=j,Y=new Array(e),k=0;k<e;k++)Y[k]=new Array(4),I=Y[k],I[0]=I[1]=I[2]=(k<<i+8)/e,Te[k]=f/e,we[k]=0},L=function(){for(var T=[],$=new Array(e),j=0;j<e;j++)$[Y[j][3]]=j;for(var k=0,I=0;I<e;I++){var b=$[I];T[k++]=Y[b][0],T[k++]=Y[b][1],T[k++]=Y[b][2]}return T},F=function(){var T,$,j,k,I,b,x,D;for(x=0,D=0,T=0;T<e;T++){for(I=Y[T],j=T,k=I[1],$=T+1;$<e;$++)b=Y[$],b[1]<k&&(j=$,k=b[1]);if(b=Y[j],T!=j&&($=b[0],b[0]=I[0],I[0]=$,$=b[1],b[1]=I[1],I[1]=$,$=b[2],b[2]=I[2],I[2]=$,$=b[3],b[3]=I[3],I[3]=$),k!=x){for(_e[x]=D+T>>1,$=x+1;$<k;$++)_e[$]=T;x=k,D=T}}for(_e[x]=D+o>>1,$=x+1;$<256;$++)_e[$]=o},h=function(){var T,$,j,k,I,b,x,D,q,ee,ge,Q,ce,Ke;for(ue<c&&(Ae=1),V=30+(Ae-1)/3,Q=re,ce=0,Ke=ue,ge=ue/(3*Ae),ee=ge/l|0,D=B,b=G,x=b>>p,x<=1&&(x=0),T=0;T<x;T++)ve[T]=D*((x*x-T*T)*Z/(x*x));for(ue<c?q=3:ue%r!==0?q=3*r:ue%n!==0?q=3*n:ue%s!==0?q=3*s:q=3*a,T=0;T<ge;)if(j=(Q[ce+0]&255)<<i,k=(Q[ce+1]&255)<<i,I=(Q[ce+2]&255)<<i,$=le(j,k,I),W(D,$,j,k,I),x!==0&&K(x,$,j,k,I),ce+=q,ce>=Ke&&(ce-=ue),T++,ee===0&&(ee=1),T%ee===0)for(D-=D/V,b-=b/M,x=b>>p,x<=1&&(x=0),$=0;$<x;$++)ve[$]=D*((x*x-$*$)*Z/(x*x))};t.map=function(T,$,j){var k,I,b,x,D,q,ee;for(D=1e3,ee=-1,k=_e[$],I=k-1;k<e||I>=0;)k<e&&(q=Y[k],b=q[1]-$,b>=D?k=e:(k++,b<0&&(b=-b),x=q[0]-T,x<0&&(x=-x),b+=x,b<D&&(x=q[2]-j,x<0&&(x=-x),b+=x,b<D&&(D=b,ee=q[3])))),I>=0&&(q=Y[I],b=$-q[1],b>=D?I=-1:(I--,b<0&&(b=-b),x=q[0]-T,x<0&&(x=-x),b+=x,b<D&&(x=q[2]-j,x<0&&(x=-x),b+=x,b<D&&(D=b,ee=q[3]))));return ee},t.process=function(){return h(),S(),F(),L()};var S=function(){var T;for(T=0;T<e;T++)Y[T][0]>>=i,Y[T][1]>>=i,Y[T][2]>>=i,Y[T][3]=T},K=function(T,$,j,k,I){var b,x,D,q,ee,ge,Q;for(D=$-T,D<-1&&(D=-1),q=$+T,q>e&&(q=e),b=$+1,x=$-1,ge=1;b<q||x>D;){if(ee=ve[ge++],b<q){Q=Y[b++];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-k)/N,Q[2]-=ee*(Q[2]-I)/N}catch{}}if(x>D){Q=Y[x--];try{Q[0]-=ee*(Q[0]-j)/N,Q[1]-=ee*(Q[1]-k)/N,Q[2]-=ee*(Q[2]-I)/N}catch{}}}},W=function(T,$,j,k,I){var b=Y[$];b[0]-=T*(b[0]-j)/B,b[1]-=T*(b[1]-k)/B,b[2]-=T*(b[2]-I)/B},le=function(T,$,j){var k,I,b,x,D,q,ee,ge,Q,ce;for(ge=~(1<<31),Q=ge,q=-1,ee=q,k=0;k<e;k++)ce=Y[k],I=ce[0]-T,I<0&&(I=-I),b=ce[1]-$,b<0&&(b=-b),I+=b,b=ce[2]-j,b<0&&(b=-b),I+=b,I<ge&&(ge=I,q=k),x=I-(we[k]>>u-i),x<Q&&(Q=x,ee=k),D=Te[k]>>v,Te[k]-=D,we[k]+=D<<w;return Te[q]+=d,we[q]-=_,ee};return te.apply(this,arguments),t},vr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var F="",h=this.bin.length,S=0;S<h;S++)F+=e[this.bin[S]];return F},r.prototype.writeByte=function(F){this.bin.push(F)},r.prototype.writeUTFBytes=function(F){for(var h=F.length,S=0;S<h;S++)this.writeByte(F.charCodeAt(S))},r.prototype.writeBytes=function(F,h,S){for(var K=S||F.length,W=h||0;W<K;W++)this.writeByte(F[W])};var n={},s,a,c=null,o,i=-1,l=0,u=!1,f,w,v,d,_,y,p=[],E=7,G=-1,M=!1,R=!0,B=!1,V=10,J="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(h){l=Math.round(h/10)},n.setDispose=function(h){h>=0&&(G=h)},n.setRepeat=function(h){h>=0&&(i=h)},n.setTransparent=function(h){c=h},n.setComment=function(h){J=h},n.addFrame=function(h,S){if(h===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var K=!0;try{S?h instanceof ImageData?(w=h.data,(!sizeset||s!=h.width||a!=h.height)&&C(h.width,h.height)):h instanceof Uint8ClampedArray?h.length==s*a*4?w=h:(console.log("Please set the correct size: ImageData length mismatch"),K=!1):(console.log("Please provide correct input"),K=!1):(w=h.getImageData(0,0,h.canvas.width,h.canvas.height).data,B||C(h.canvas.width,h.canvas.height)),ue(),N(),R&&(we(),ve(),i>=0&&Te()),Ae(),J!==""&&Y(),_e(),R||ve(),L(),R=!1}catch{K=!1}return K},n.download=function(h){if(f===null||M==!1)console.log("Please call start method and add frames and call finish method before calling download");else{h=h!==void 0?h.endsWith(".gif")?h:h+".gif":"download.gif";var S=document.createElement("a");S.download=h,S.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),S.click()}},n.finish=function(){if(!u)return!1;var h=!0;u=!1;try{f.writeByte(59),M=!0}catch{h=!1}return h};var Z=function(){o=0,w=null,v=null,d=null,y=null,M=!1,R=!0};n.setFrameRate=function(h){h!=15&&(l=Math.round(100/h))},n.setQuality=function(h){h<1&&(h=1),V=h};var C=n.setSize=function(h,S){u&&!R||(s=h,a=S,s<1&&(s=320),a<1&&(a=240),B=!0)};n.start=function(){Z();var h=!0;M=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{h=!1}return u=h},n.cont=function(){Z();var h=!0;return M=!1,f=new r,u=h};var N=function(){var h=v.length,S=h/3;d=[];var K=new pr(v,h,V);y=K.process();for(var W=0,le=0;le<S;le++){var H=K.map(v[W++]&255,v[W++]&255,v[W++]&255);p[H]=!0,d[le]=H}v=null,_=8,E=7,c!==null&&(o=re(c))},re=function(h){if(y===null)return-1;for(var S=(h&16711680)>>16,K=(h&65280)>>8,W=h&255,le=0,H=256*256*256,T=y.length,$=0;$<T;){var j=S-(y[$++]&255),k=K-(y[$++]&255),I=W-(y[$]&255),b=j*j+k*k+I*I,x=$/3;p[x]&&b<H&&(H=b,le=x),$++}return le},ue=function(){var h=s,S=a;v=[];for(var K=w,W=0,le=0;le<S;le++)for(var H=0;H<h;H++){var T=le*h*4+H*4;v[W++]=K[T],v[W++]=K[T+1],v[W++]=K[T+2]}},Ae=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var h,S;c===null?(h=0,S=0):(h=1,S=2),G>=0&&(S=G&7),S<<=2,f.writeByte(0|S|0|h),te(l),f.writeByte(o),f.writeByte(0)},Y=function(){f.writeByte(33),f.writeByte(254),f.writeByte(J.length),f.writeUTFBytes(J),f.writeByte(0)},_e=function(){f.writeByte(44),te(0),te(0),te(s),te(a),R?f.writeByte(0):f.writeByte(128|E)},we=function(){te(s),te(a),f.writeByte(240|E),f.writeByte(0),f.writeByte(0)},Te=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),te(i),f.writeByte(0)},ve=function(){f.writeBytes(y);for(var h=3*256-y.length,S=0;S<h;S++)f.writeByte(0)},te=function(h){f.writeByte(h&255),f.writeByte(h>>8&255)},L=function(){var h=new hr(s,a,d,_);h.encode(f)};return n.stream=function(){return f},n.setProperties=function(h,S){u=h,R=S},n},be={a_position:0,a_texCoords:1},ot={default:{vertex:`#version 300 es

layout(location = ${be.a_position}) in vec2 a_position;
layout(location = ${be.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class gr{constructor(e){fe(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:wr(this.gl,ot[e].vertex,ot[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function _r(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function wr(t,e,r){const n=lt(t,t.VERTEX_SHADER,e);let s;try{s=lt(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function lt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ct(t,e,r,n){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT);let s,a,c;for(const o of r){s!==o.program&&(t.useProgram(o.program.program),s=o.program),a!==o.geometry&&(t.bindVertexArray(o.geometry.vao),a=o.geometry),c!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),c=n);const i={u_image:n.unit,...o.getUniforms(e)};_r(t,o.program,i),t.drawArrays(o.geometry.drawMode,0,o.geometry.drawCount)}}const br={full(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(be.a_position),t.vertexAttribPointer(be.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(be.a_texCoords),t.vertexAttribPointer(be.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}},nine(t){const e=t.createVertexArray();if(e===null)throw new Error("Failed to create vertex array");const r=t.createBuffer();if(!r)throw t.deleteVertexArray(e),new Error("Failed to create buffer");t.bindVertexArray(e),t.bindBuffer(t.ARRAY_BUFFER,r);const n=new Float32Array([-3,-3,0,3,3,-3,3,3,-3,3,0,0,3,3,3,0]);return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),t.enableVertexAttribArray(be.a_position),t.vertexAttribPointer(be.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(be.a_texCoords),t.vertexAttribPointer(be.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:e,vbo:r,drawMode:t.TRIANGLE_STRIP,drawCount:4}}};class yr{constructor(e){fe(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=br[e](this.gl)),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class Er{constructor(e){fe(this,"gl");fe(this,"programFactory");fe(this,"geometryFactory");fe(this,"texture");fe(this,"queue",[]);fe(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new gr(this.gl),this.geometryFactory=new yr(this.gl),this.texture=new dr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new vr;if(a.setRepeat(0),a.setDelay(e.frame.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:it(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:it(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let c=0;c<this.queue.length-1;++c)this.queue[c].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];if((e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height),e==="frame")ct(this.gl,a/r.frame.totalFrames,s,this.texture),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:c,sprites:o,callback:i}=this.queue[0];ct(this.gl,a/r.frame.totalFrames,o,this.texture),i(a);const l=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,l),c.addFrame(l,!0),c.setTransparent(16777215),a===r.frame.totalFrames-1){c.finish();const u=c.stream().getData(),f="data:image/gif;base64,"+window.btoa(u);n({dataUri:f}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ce=function(){const{subscribe:t,update:e}=Ge(We[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=We.find(c=>c.name===n);return a||s})}}}(),Re=function(){const t=`${Qe}/favicon.png`,{subscribe:e,update:r}=Ge({width:64,height:64,url:t});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.url!==t&&URL.revokeObjectURL(c.url),{...c,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Le=function(){const{subscribe:t,update:e}=Ge(void 0,n=>Ce.subscribe(a=>{n(a.defaultFrameOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),je=function(){const{subscribe:t,update:e}=Ge(void 0,n=>Ce.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),De=function(){const t=Ge({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new Er(c),running:!1,frame:0}})}function s(){const{animator:c}=xe(t);return c?(r(o=>({...o,running:!0,frame:0})),c.animate({image:xe(Re),frame:xe(Le),animation:xe(je)},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:o,frame:i}=xe(t);if(!o)return Promise.reject("Animator has not been created");let l;typeof c>"u"?l=i:l=c;const u=xe(Le);return l>=u.totalFrames&&(l=u.totalFrames-1),r(f=>({...f,frame:l,running:!0})),o.renderFrame({image:xe(Re),frame:u,animation:xe(je)},l).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ut(t){let e,r,n,s,a,c;return{c(){e=P("label"),r=ae(t[1]),n=X(),s=P("input"),this.h()},l(o){e=O(o,"LABEL",{class:!0});var i=U(e);r=ne(i,t[1]),n=z(i),s=O(i,"INPUT",{class:!0,type:!0}),i.forEach(A),this.h()},h(){m(s,"class","slider__text-input svelte-xvphrk"),m(s,"type","text"),s.value=t[0],m(e,"class","slider__label svelte-xvphrk")},m(o,i){ie(o,e,i),g(e,r),g(e,n),g(e,s),a||(c=qe(s,"input",t[5]),a=!0)},p(o,i){i&2&&Ie(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&A(e),a=!1,c()}}}function Ar(t){let e,r,n,s,a=ze(t[2])+"",c,o,i,l,u,f,w=ze(t[3])+"",v,d,_,y=t[1]&&ut(t);return{c(){e=P("div"),y&&y.c(),r=X(),n=P("div"),s=P("span"),c=ae(a),o=X(),i=P("div"),l=P("input"),u=X(),f=P("span"),v=ae(w),this.h()},l(p){e=O(p,"DIV",{class:!0});var E=U(e);y&&y.l(E),r=z(E),n=O(E,"DIV",{class:!0});var G=U(n);s=O(G,"SPAN",{class:!0});var M=U(s);c=ne(M,a),M.forEach(A),o=z(G),i=O(G,"DIV",{class:!0});var R=U(i);l=O(R,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),R.forEach(A),u=z(G),f=O(G,"SPAN",{class:!0});var B=U(f);v=ne(B,w),B.forEach(A),G.forEach(A),E.forEach(A),this.h()},h(){m(s,"class","slider__range slider__range--min svelte-xvphrk"),m(l,"class","slider__input svelte-xvphrk"),m(l,"type","range"),m(l,"min",t[2]),m(l,"max",t[3]),m(l,"step",t[4]),l.value=t[0],m(i,"class","slider__input-container svelte-xvphrk"),m(f,"class","slider__range slider__range--max svelte-xvphrk"),m(n,"class","slider__container svelte-xvphrk"),m(e,"class","slider")},m(p,E){ie(p,e,E),y&&y.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,o),g(n,i),g(i,l),g(n,u),g(n,f),g(f,v),d||(_=qe(l,"input",t[5]),d=!0)},p(p,[E]){p[1]?y?y.p(p,E):(y=ut(p),y.c(),y.m(e,r)):y&&(y.d(1),y=null),E&4&&a!==(a=ze(p[2])+"")&&Ie(c,a),E&4&&m(l,"min",p[2]),E&8&&m(l,"max",p[3]),E&16&&m(l,"step",p[4]),E&1&&(l.value=p[0]),E&8&&w!==(w=ze(p[3])+"")&&Ie(v,w)},i:$e,o:$e,d(p){p&&A(e),y&&y.d(),d=!1,_()}}}function ze(t){return+(Math.round(t+"e+2")+"e-2")}function Tr(t,e,r){const n=wt();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:o=1}=e,{value:i=c<a?a:(c-a)/2}=e;function l(u){const f=u.target,w=parseFloat(f.value);Number.isNaN(w)||(r(0,i=w),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,c=u.max),"step"in u&&r(4,o=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,c,o,l]}class Be extends Se{constructor(e){super(),Pe(this,e,Tr,Ar,Oe,{label:1,min:2,max:3,step:4,value:0})}}function xr(t){let e,r,n,s,a,c,o,i,l,u,f,w,v,d,_,y,p,E,G,M;return u=new Be({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]("width")),w=new Be({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),w.$on("input",t[4]("height")),d=new Be({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].delayMs}}),d.$on("input",t[5]("delayMs")),y=new Be({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].totalFrames}}),y.$on("input",t[5]("totalFrames")),{c(){e=P("aside"),r=P("label"),n=ae(`Upload image

    `),s=P("input"),a=X(),c=P("div"),o=P("img"),l=X(),me(u.$$.fragment),f=X(),me(w.$$.fragment),v=X(),me(d.$$.fragment),_=X(),me(y.$$.fragment),this.h()},l(R){e=O(R,"ASIDE",{class:!0});var B=U(e);r=O(B,"LABEL",{class:!0});var V=U(r);n=ne(V,`Upload image

    `),s=O(V,"INPUT",{class:!0,type:!0,accept:!0}),a=z(V),c=O(V,"DIV",{class:!0});var J=U(c);o=O(J,"IMG",{class:!0,src:!0,alt:!0}),J.forEach(A),V.forEach(A),l=z(B),de(u.$$.fragment,B),f=z(B),de(w.$$.fragment,B),v=z(B),de(d.$$.fragment,B),_=z(B),de(y.$$.fragment,B),B.forEach(A),this.h()},h(){m(s,"class","image__input svelte-1wsjlr5"),m(s,"type","file"),m(s,"accept","image/*"),m(o,"class","image__preview svelte-1wsjlr5"),Me(o.src,i=t[1].url)||m(o,"src",i),m(o,"alt","source"),m(c,"class","image__container svelte-1wsjlr5"),m(r,"class","image svelte-1wsjlr5"),m(e,"class",p=Ee(`container ${t[0]}`)+" svelte-1wsjlr5")},m(R,B){ie(R,e,B),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,o),g(e,l),he(u,e,null),g(e,f),he(w,e,null),g(e,v),he(d,e,null),g(e,_),he(y,e,null),E=!0,G||(M=qe(s,"input",t[3]),G=!0)},p(R,[B]){(!E||B&2&&!Me(o.src,i=R[1].url))&&m(o,"src",i);const V={};B&2&&(V.value=R[1].width),u.$set(V);const J={};B&2&&(J.value=R[1].height),w.$set(J);const Z={};B&4&&(Z.value=R[2].delayMs),d.$set(Z);const C={};B&4&&(C.value=R[2].totalFrames),y.$set(C),(!E||B&1&&p!==(p=Ee(`container ${R[0]}`)+" svelte-1wsjlr5"))&&m(e,"class",p)},i(R){E||(se(u.$$.fragment,R),se(w.$$.fragment,R),se(d.$$.fragment,R),se(y.$$.fragment,R),E=!0)},o(R){oe(u.$$.fragment,R),oe(w.$$.fragment,R),oe(d.$$.fragment,R),oe(y.$$.fragment,R),E=!1},d(R){R&&A(e),pe(u),pe(w),pe(d),pe(y),G=!1,M()}}}function Fr(t,e,r){let n,s;ye(t,Re,l=>r(1,n=l)),ye(t,Le,l=>r(2,s=l));let{class:a=""}=e;function c(l){var w;const f=(w=l.target.files)==null?void 0:w[0];f&&Re.changeImage(f)}function o(l){return function(u){Re.change({[l]:u.detail.value})}}function i(l){return function(u){Le.change({[l]:u.detail.value})}}return t.$$set=l=>{"class"in l&&r(0,a=l.class)},[a,n,s,c,o,i]}class $r extends Se{constructor(e){super(),Pe(this,e,Fr,xr,Oe,{class:0})}}function Sr(t){let e,r,n,s,a,c,o;return{c(){e=P("div"),r=ae(t[1]),n=X(),s=P("label"),a=P("input"),this.h()},l(i){e=O(i,"DIV",{class:!0});var l=U(e);r=ne(l,t[1]),n=z(l),s=O(l,"LABEL",{class:!0});var u=U(s);a=O(u,"INPUT",{class:!0,type:!0}),u.forEach(A),l.forEach(A),this.h()},h(){m(a,"class","toggle__checkbox svelte-1j9rfin"),m(a,"type","checkbox"),a.checked=t[0],m(s,"class","toggle__label svelte-1j9rfin"),Fe(s,"toggle__label--active",t[0]),m(e,"class","toggle svelte-1j9rfin")},m(i,l){ie(i,e,l),g(e,r),g(e,n),g(e,s),g(s,a),c||(o=qe(a,"change",t[2]),c=!0)},p(i,[l]){l&2&&Ie(r,i[1]),l&1&&(a.checked=i[0]),l&1&&Fe(s,"toggle__label--active",i[0])},i:$e,o:$e,d(i){i&&A(e),c=!1,o()}}}function Pr(t,e,r){const n=wt();let{label:s=""}=e,{value:a=!1}=e;function c(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,c]}class Ot extends Se{constructor(e){super(),Pe(this,e,Pr,Sr,Oe,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[5]=e[r],n}function Or(t){let e,r;return e=new Ot({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){oe(e.$$.fragment,n),r=!1},d(n){pe(e,n)}}}function kr(t){let e,r;return e=new Be({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){me(e.$$.fragment)},l(n){de(e.$$.fragment,n)},m(n,s){he(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(se(e.$$.fragment,n),r=!0)},o(n){oe(e.$$.fragment,n),r=!1},d(n){pe(e,n)}}}function mt(t){let e,r,n,s;const a=[kr,Or],c=[];function o(i,l){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=o(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,l){~e&&c[e].m(i,l),ie(i,n,l),s=!0},p(i,l){let u=e;e=o(i),e===u?~e&&c[e].p(i,l):(r&&(bt(),oe(c[u],1,1,()=>{c[u]=null}),yt()),~e?(r=c[e],r?r.p(i,l):(r=c[e]=a[e](i),r.c()),se(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(se(r),s=!0)},o(i){oe(r),s=!1},d(i){~e&&c[e].d(i),i&&A(n)}}}function Ir(t){let e,r,n,s=t[2].editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=mt(ft(t,s,o));const c=o=>oe(a[o],1,1,()=>{a[o]=null});return{c(){e=P("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=O(o,"ASIDE",{class:!0});var i=U(e);for(let l=0;l<a.length;l+=1)a[l].l(i);i.forEach(A),this.h()},h(){m(e,"class",r=Ee(`container ${t[0]}`)+" svelte-1solget")},m(o,i){ie(o,e,i);for(let l=0;l<a.length;l+=1)a[l].m(e,null);n=!0},p(o,[i]){if(i&14){s=o[2].editOptions;let l;for(l=0;l<s.length;l+=1){const u=ft(o,s,l);a[l]?(a[l].p(u,i),se(a[l],1)):(a[l]=mt(u),a[l].c(),se(a[l],1),a[l].m(e,null))}for(bt(),l=s.length;l<a.length;l+=1)c(l);yt()}(!n||i&1&&r!==(r=Ee(`container ${o[0]}`)+" svelte-1solget"))&&m(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)se(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)oe(a[i]);n=!1},d(o){o&&A(e),Bt(a,o)}}}function Br(t,e,r){let n,s,a;ye(t,je,i=>r(4,s=i)),ye(t,Ce,i=>r(2,a=i));let{class:c=""}=e;function o(i){return function(l){je.change({[i]:l.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,o,s]}class Rr extends Se{constructor(e){super(),Pe(this,e,Br,Ir,Oe,{class:0})}}function dt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function ht(t,e){let r,n,s,a,c,o=e[4]+"",i,l,u,f;function w(){return e[3](e[4])}return{key:t,first:null,c(){r=P("button"),n=P("img"),a=X(),c=P("span"),i=ae(o),l=X(),this.h()},l(v){r=O(v,"BUTTON",{type:!0,class:!0});var d=U(r);n=O(d,"IMG",{class:!0,src:!0,alt:!0}),a=z(d),c=O(d,"SPAN",{});var _=U(c);i=ne(_,o),_.forEach(A),l=z(d),d.forEach(A),this.h()},h(){m(n,"class","image svelte-18ktnr0"),Me(n.src,s=`${Qe}/demo-${e[4]}.gif`)||m(n,"src",s),m(n,"alt",e[4]),m(r,"type","button"),m(r,"class","option svelte-18ktnr0"),Fe(r,"option--selected",e[4]===e[1].name),this.first=r},m(v,d){ie(v,r,d),g(r,n),g(r,a),g(r,c),g(c,i),g(r,l),u||(f=qe(r,"click",w),u=!0)},p(v,d){e=v,d&2&&Fe(r,"option--selected",e[4]===e[1].name)},d(v){v&&A(r),u=!1,f()}}}function Mr(t){let e,r=[],n=new Map,s,a=We;const c=o=>o[4];for(let o=0;o<a.length;o+=1){let i=dt(t,a,o),l=c(i);n.set(l,r[o]=ht(l,i))}return{c(){e=P("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=O(o,"ASIDE",{class:!0});var i=U(e);for(let l=0;l<r.length;l+=1)r[l].l(i);i.forEach(A),this.h()},h(){m(e,"class",s=Ee(`container ${t[0]}`)+" svelte-18ktnr0")},m(o,i){ie(o,e,i);for(let l=0;l<r.length;l+=1)r[l].m(e,null)},p(o,[i]){i&6&&(a=We,r=Rt(r,i,c,1,o,a,n,e,Mt,ht,null,dt)),i&1&&s!==(s=Ee(`container ${o[0]}`)+" svelte-18ktnr0")&&m(e,"class",s)},i:$e,o:$e,d(o){o&&A(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Ur(t,e,r){let n;ye(t,Ce,o=>r(1,n=o));let{class:s=""}=e;function a(o){o!==n.name&&Ce.change(o)}const c=o=>a(o);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,c]}class Cr extends Se{constructor(e){super(),Pe(this,e,Ur,Mr,Oe,{class:0})}}function pt(t){t[14]=t[15].dataUri}function vt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:Lr,then:Nr,catch:Dr,value:15,error:16};return tt(r=t[4],n),{c(){e=P("div"),n.block.c(),this.h()},l(s){e=O(s,"DIV",{class:!0});var a=U(e);n.block.l(a),a.forEach(A),this.h()},h(){m(e,"class","preview__container preview__container--no-debug svelte-4d3008")},m(s,a){ie(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||Dt(n,t,a)},d(s){s&&A(e),n.block.d(),n.token=null,n=null}}}function Dr(t){let e,r,n=t[16]+"",s;return{c(){e=P("p"),r=ae("An error has occurred: "),s=ae(n),this.h()},l(a){e=O(a,"P",{class:!0});var c=U(e);r=ne(c,"An error has occurred: "),s=ne(c,n),c.forEach(A),this.h()},h(){m(e,"class","preview__error svelte-4d3008")},m(a,c){ie(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[16]+"")&&Ie(s,n)},d(a){a&&A(e)}}}function Nr(t){pt(t);let e,r,n,s,a,c,o;return{c(){e=P("div"),r=P("img"),s=X(),a=P("a"),c=ae("Download"),this.h()},l(i){e=O(i,"DIV",{class:!0});var l=U(e);r=O(l,"IMG",{class:!0,src:!0,alt:!0}),l.forEach(A),s=z(i),a=O(i,"A",{class:!0,download:!0,href:!0});var u=U(a);c=ne(u,"Download"),u.forEach(A),this.h()},h(){m(r,"class","preview__image svelte-4d3008"),Me(r.src,n=t[14])||m(r,"src",n),m(r,"alt","generated gif"),m(e,"class","preview__image-container svelte-4d3008"),m(a,"class","preview__download-button svelte-4d3008"),m(a,"download","jumping_peter.gif"),m(a,"href",o=t[14])},m(i,l){ie(i,e,l),g(e,r),ie(i,s,l),ie(i,a,l),g(a,c)},p(i,l){pt(i),l&16&&!Me(r.src,n=i[14])&&m(r,"src",n),l&16&&o!==(o=i[14])&&m(a,"href",o)},d(i){i&&A(e),i&&A(s),i&&A(a)}}}function Lr(t){let e,r,n,s,a,c,o=t[5].frame+"",i,l,u=t[2].totalFrames+"",f,w,v,d,_,y;return{c(){e=P("div"),r=P("p"),n=ae("Generating..."),s=X(),a=P("p"),c=ae("["),i=ae(o),l=ae(" / "),f=ae(u),w=ae("]"),v=X(),d=P("progress"),this.h()},l(p){e=O(p,"DIV",{class:!0});var E=U(e);r=O(E,"P",{});var G=U(r);n=ne(G,"Generating..."),G.forEach(A),s=z(E),a=O(E,"P",{});var M=U(a);c=ne(M,"["),i=ne(M,o),l=ne(M," / "),f=ne(M,u),w=ne(M,"]"),M.forEach(A),v=z(E),d=O(E,"PROGRESS",{class:!0,max:!0}),U(d).forEach(A),E.forEach(A),this.h()},h(){m(d,"class","preview__progress svelte-4d3008"),m(d,"max",_=t[2].totalFrames),d.value=y=t[5].frame,m(e,"class","preview__loading svelte-4d3008")},m(p,E){ie(p,e,E),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,l),g(a,f),g(a,w),g(e,v),g(e,d)},p(p,E){E&32&&o!==(o=p[5].frame+"")&&Ie(i,o),E&4&&u!==(u=p[2].totalFrames+"")&&Ie(f,u),E&4&&_!==(_=p[2].totalFrames)&&m(d,"max",_),E&32&&y!==(y=p[5].frame)&&(d.value=y)},d(p){p&&A(e)}}}function jr(t){let e,r,n,s,a,c,o,i,l,u,f,w;n=new Ot({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let v=!t[1]&&t[4]&&vt(t);return u=new Be({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=P("main"),r=P("div"),me(n.$$.fragment),s=X(),v&&v.c(),a=X(),c=P("div"),o=P("div"),i=P("canvas"),l=X(),me(u.$$.fragment),this.h()},l(d){e=O(d,"MAIN",{class:!0});var _=U(e);r=O(_,"DIV",{class:!0});var y=U(r);de(n.$$.fragment,y),y.forEach(A),s=z(_),v&&v.l(_),a=z(_),c=O(_,"DIV",{class:!0});var p=U(c);o=O(p,"DIV",{class:!0});var E=U(o);i=O(E,"CANVAS",{class:!0,style:!0}),U(i).forEach(A),E.forEach(A),l=z(p),de(u.$$.fragment,p),p.forEach(A),_.forEach(A),this.h()},h(){m(r,"class","preview__debug-input svelte-4d3008"),m(i,"class","preview__image svelte-4d3008"),Ut(i,"transform","scaleY(-1)"),m(o,"class","preview__image-container svelte-4d3008"),m(c,"class","preview__container preview__container--debug svelte-4d3008"),m(e,"class",f=Ee(`preview ${t[0]}`)+" svelte-4d3008"),Fe(e,"preview--debug",t[1]),Fe(e,"preview--no-debug",!t[1])},m(d,_){ie(d,e,_),g(e,r),he(n,r,null),g(e,s),v&&v.m(e,null),g(e,a),g(e,c),g(c,o),g(o,i),t[11](i),g(c,l),he(u,c,null),w=!0},p(d,[_]){const y={};_&2&&(y.value=d[1]),n.$set(y),!d[1]&&d[4]?v?v.p(d,_):(v=vt(d),v.c(),v.m(e,a)):v&&(v.d(1),v=null);const p={};_&4&&(p.max=d[2].totalFrames-1),_&32&&(p.value=d[5].frame),u.$set(p),(!w||_&1&&f!==(f=Ee(`preview ${d[0]}`)+" svelte-4d3008"))&&m(e,"class",f),(!w||_&3)&&Fe(e,"preview--debug",d[1]),(!w||_&3)&&Fe(e,"preview--no-debug",!d[1])},i(d){w||(se(n.$$.fragment,d),se(u.$$.fragment,d),w=!0)},o(d){oe(n.$$.fragment,d),oe(u.$$.fragment,d),w=!1},d(d){d&&A(e),pe(n),v&&v.d(),t[11](null),pe(u)}}}function qr(t,e,r){let n,s,a,c,o;ye(t,Ce,p=>r(8,n=p)),ye(t,je,p=>r(9,s=p)),ye(t,Le,p=>r(2,a=p)),ye(t,Re,p=>r(10,c=p)),ye(t,De,p=>r(5,o=p));let i,{class:l=""}=e,u=!1,f=null;function w(){De.renderFrame().catch(p=>{throw console.error(`renderFrame failed: ${p}`),p})}function v(){r(4,f=De.animate().catch(p=>{throw console.error(`animate failed: ${p}`),p}))}Ct(()=>{De.changeCanvas(i),v()});function d(p){De.renderFrame(p.detail.value).catch(E=>console.error(`Animation failed: ${E}`))}function _(p){r(1,u=p.detail.value)}function y(p){Nt[p?"unshift":"push"](()=>{i=p,r(3,i)})}return t.$$set=p=>{"class"in p&&r(0,l=p.class)},t.$$.update=()=>{t.$$.dirty&1798&&(u?w():v())},[l,u,a,i,f,o,d,_,n,s,c,y]}class Gr extends Se{constructor(e){super(),Pe(this,e,qr,jr,Oe,{class:0})}}function Vr(t){let e,r,n,s,a,c,o,i,l,u,f,w,v,d,_,y,p,E,G,M,R,B,V,J,Z;return document.title=e=Ne,y=new Gt({props:{class:"header"}}),E=new Cr({props:{class:"animations"}}),M=new $r({props:{class:"common-options"}}),B=new Rr({props:{class:"animation-options"}}),J=new Gr({props:{class:"preview"}}),{c(){r=P("meta"),n=P("meta"),s=P("meta"),a=P("meta"),c=P("meta"),o=P("meta"),i=P("meta"),l=P("meta"),u=P("meta"),f=P("meta"),w=P("meta"),v=P("meta"),d=X(),_=P("div"),me(y.$$.fragment),p=X(),me(E.$$.fragment),G=X(),me(M.$$.fragment),R=X(),me(B.$$.fragment),V=X(),me(J.$$.fragment),this.h()},l(C){const N=Lt("svelte-2dqrj",document.head);r=O(N,"META",{name:!0,content:!0,class:!0}),n=O(N,"META",{name:!0,content:!0,class:!0}),s=O(N,"META",{property:!0,content:!0,class:!0}),a=O(N,"META",{property:!0,content:!0,class:!0}),c=O(N,"META",{property:!0,content:!0,class:!0}),o=O(N,"META",{property:!0,content:!0,class:!0}),i=O(N,"META",{property:!0,content:!0,class:!0}),l=O(N,"META",{property:!0,content:!0,class:!0}),u=O(N,"META",{property:!0,content:!0,class:!0}),f=O(N,"META",{property:!0,content:!0,class:!0}),w=O(N,"META",{property:!0,content:!0,class:!0}),v=O(N,"META",{property:!0,content:!0,class:!0}),N.forEach(A),d=z(C),_=O(C,"DIV",{class:!0});var re=U(_);de(y.$$.fragment,re),p=z(re),de(E.$$.fragment,re),G=z(re),de(M.$$.fragment,re),R=z(re),de(B.$$.fragment,re),V=z(re),de(J.$$.fragment,re),re.forEach(A),this.h()},h(){m(r,"name","title"),m(r,"content",Ne),m(r,"class","svelte-r12qw"),m(n,"name","description"),m(n,"content",He),m(n,"class","svelte-r12qw"),m(s,"property","og:type"),m(s,"content","website"),m(s,"class","svelte-r12qw"),m(a,"property","og:url"),m(a,"content",gt),m(a,"class","svelte-r12qw"),m(c,"property","og:title"),m(c,"content",Ne),m(c,"class","svelte-r12qw"),m(o,"property","og:description"),m(o,"content",He),m(o,"class","svelte-r12qw"),m(i,"property","og:image"),m(i,"content",_t),m(i,"class","svelte-r12qw"),m(l,"property","twitter:card"),m(l,"content","summary_large_image"),m(l,"class","svelte-r12qw"),m(u,"property","twitter:url"),m(u,"content",gt),m(u,"class","svelte-r12qw"),m(f,"property","twitter:title"),m(f,"content",Ne),m(f,"class","svelte-r12qw"),m(w,"property","twitter:description"),m(w,"content",He),m(w,"class","svelte-r12qw"),m(v,"property","twitter:image"),m(v,"content",_t),m(v,"class","svelte-r12qw"),m(_,"class","grid svelte-r12qw")},m(C,N){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,o),g(document.head,i),g(document.head,l),g(document.head,u),g(document.head,f),g(document.head,w),g(document.head,v),ie(C,d,N),ie(C,_,N),he(y,_,null),g(_,p),he(E,_,null),g(_,G),he(M,_,null),g(_,R),he(B,_,null),g(_,V),he(J,_,null),Z=!0},p(C,[N]){(!Z||N&0)&&e!==(e=Ne)&&(document.title=e)},i(C){Z||(se(y.$$.fragment,C),se(E.$$.fragment,C),se(M.$$.fragment,C),se(B.$$.fragment,C),se(J.$$.fragment,C),Z=!0)},o(C){oe(y.$$.fragment,C),oe(E.$$.fragment,C),oe(M.$$.fragment,C),oe(B.$$.fragment,C),oe(J.$$.fragment,C),Z=!1},d(C){A(r),A(n),A(s),A(a),A(c),A(o),A(i),A(l),A(u),A(f),A(w),A(v),C&&A(d),C&&A(_),pe(y),pe(E),pe(M),pe(B),pe(J)}}}const Ne="Jumping Peter",He="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",gt="https://ksmai.github.io/jumping-peter",_t="https://ksmai.github.io/jumping-peter/favicon.png";class Yr extends Se{constructor(e){super(),Pe(this,e,null,Vr,Oe,{})}}export{Yr as default};
