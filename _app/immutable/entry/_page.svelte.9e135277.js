var Gt=Object.defineProperty;var Nt=(t,e,r)=>e in t?Gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var $e=(t,e,r)=>(Nt(t,typeof e!="symbol"?e+"":e,r),r);import{S as Ie,i as ke,n as Re,j as M,s as X,q as oe,k as F,l as C,c as q,r as le,g as E,m as p,J as Ce,K as xe,a as ce,G as _,H as Ue,L as De,M as Xe,u as Be,N as At,y as fe,z as me,A as de,f as ae,b as se,B as pe,I as je,O as Fe,v as Tt,d as xt,P as Xt,e as rt,Q as qt,R as Ht,p as Yt,o as Vt,T as at,U as Wt,w as Qt,V as Jt}from"../chunks/index.adf49e6c.js";import{b as Ye,w as Ke}from"../chunks/paths.6b41b10e.js";function Zt(t){let e,r,n,s,a,l,o,i,c,u,f,v,h;return{c(){e=M("header"),r=M("img"),s=X(),a=M("h1"),l=oe("Jumping Peter"),o=X(),i=M("p"),c=oe("generate gif emojis"),u=X(),f=M("a"),v=oe("Contribute"),this.h()},l(m){e=F(m,"HEADER",{class:!0});var d=C(e);r=F(d,"IMG",{class:!0,src:!0,alt:!0}),s=q(d),a=F(d,"H1",{class:!0});var b=C(a);l=le(b,"Jumping Peter"),b.forEach(E),o=q(d),i=F(d,"P",{class:!0});var y=C(i);c=le(y,"generate gif emojis"),y.forEach(E),u=q(d),f=F(d,"A",{class:!0,href:!0,target:!0,rel:!0});var w=C(f);v=le(w,"Contribute"),w.forEach(E),d.forEach(E),this.h()},h(){p(r,"class","logo svelte-bal6b7"),Ce(r.src,n=`${Ye}/demo-jumping.gif`)||p(r,"src",n),p(r,"alt",""),p(a,"class","title svelte-bal6b7"),p(i,"class","subtitle svelte-bal6b7"),p(f,"class","contribute svelte-bal6b7"),p(f,"href","https://github.com/ksmai/jumping-peter"),p(f,"target","_blank"),p(f,"rel","noreferrer"),p(e,"class",h=xe(`header ${t[0]}`)+" svelte-bal6b7")},m(m,d){ce(m,e,d),_(e,r),_(e,s),_(e,a),_(a,l),_(e,o),_(e,i),_(i,c),_(e,u),_(e,f),_(f,v)},p(m,[d]){d&1&&h!==(h=xe(`header ${m[0]}`)+" svelte-bal6b7")&&p(e,"class",h)},i:Ue,o:Ue,d(m){m&&E(e)}}}function Kt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class er extends Ie{constructor(e){super(),ke(this,e,Kt,Zt,Re,{class:0})}}function Ne(t){return{...t,type:"slider",min:-360,max:360,step:1}}function Ve(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Me(t){return{...t,type:"slider",min:0,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function Ze(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function st(t){return{...t,type:"slider",min:-1,max:1,step:1}}function tr(t){return{...t,type:"slider",min:1,max:100,step:1}}function rr(t){return{...t,type:"slider",min:1,max:5,step:1}}function qe(t){return{...t,type:"toggle"}}function ar(t){return t.reduce((e,r)=>(Object.assign(e,{[r.name]:r.value}),e),{})}function ge(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ze(t,e,r){t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=r,t[5]*=r,t[9]*=r,t[13]*=r}function _e(t,e,r){St(t,e,r,0)}function St(t,e,r,n){t[12]+=e,t[13]+=r,t[14]+=n}function We(t,e){Pt(t,e,[0,0,1])}function Pt(t,e,r){const n=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);if(n===0)return;const s=r[0]/n,a=r[1]/n,l=r[2]/n,o=e/180*Math.PI,i=Math.cos(o),c=Math.sin(o),u=[(1-i)*s*s+i,(1-i)*s*a+c*l,(1-i)*s*l-c*a,0,(1-i)*s*a-c*l,(1-i)*a*a+i,(1-i)*a*l-c*s,0,(1-i)*s*l+c*a,(1-i)*a*l-c*s,(1-i)*l*l+i,0,0,0,0,1];et(t,u)}function nr(t,e,r){St(t,-e[0],-e[1],-e[2]);const n=[e[0]-r[0],e[1]-r[1],e[2]-r[2]];it(n);const s=ot([0,1,0],n);it(s);const a=ot(n,s),l=[s[0],a[0],n[0],0,s[1],a[1],n[1],0,s[2],a[2],n[2],0,0,0,0,1];et(t,l)}function sr(t,e,r,n,s,a,l){const o=[2*a/(r-e),0,0,0,0,2*a/(s-n),0,0,(r+e)/(r-e),(s+n)/(s-n),-(l+a)/(l-a),-1,0,0,-2*l*a/(l-a),0];et(t,o)}function et(t,e){const r=t.slice();for(let n=0;n<=3;++n)for(let s=0;s<=3;++s){const a=4*n+s;t[a]=0;for(let l=0;l<=3;++l)t[a]+=e[4*l+s]*r[4*n+l]}}function it(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e)}function ot(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ie(t,e,r){return t+(e-t)*r}function Mt(t){return t*Math.PI/180}function lt(t){const e=new Float32Array([t]),[r]=new Int32Array(e.buffer);let n=Math.abs(r)|0;return n=(n>>16^n)*73244475,n=(n>>16^n)*73244475,n=n>>16^n,n/(Math.pow(2,31)-1)}function ir(t){return e=>1-Math.pow(1-e,t)}function or(t){const e=Math.pow(2,t-1);return r=>r<.5?e*Math.pow(r,t):1-Math.pow(2*(1-r),t)/2}const Qe=ir(3);function ct(t){return 1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2)}const lr="spinning",cr={delayMs:50,totalFrames:15},ur=[Ne({name:"startAngle",value:0}),Ne({name:"endAngle",value:360}),Ve({name:"originX",value:0}),Ve({name:"originY",value:0}),qe({name:"alternates",value:!1})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:l,endAngle:o,originX:i,originY:c}=r;return[{program:n,geometry:s,getUniforms:f=>{const v=a?Math.min(f,1-f)*2:f,h=ie(l,o,v),m=ge();return _e(m,-i,-c),We(m,h),_e(m,i,c),{u_world:m}}}]}const fr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ft,editOptions:ur,frameOptions:cr,name:lr},Symbol.toStringTag,{value:"Module"})),mr="expanding",dr={delayMs:50,totalFrames:20},pr=[Ze({name:"minScale",value:1}),Ze({name:"maxScale",value:2}),qe({name:"alternates",value:!1})];function Ut(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:l,alternates:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const u=o?Math.min(c,1-c)*2:c,f=ie(a,l,u),v=ge();return ze(v,f,f),{u_world:v}}}]}const hr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ut,editOptions:pr,frameOptions:dr,name:mr},Symbol.toStringTag,{value:"Module"})),vr="extreme-speed",gr={delayMs:20,totalFrames:10},_r=[st({name:"directionX",value:-1}),st({name:"directionY",value:0})];function Bt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:a,directionY:l}=r,o=a*2,i=l*2;return[{program:n,geometry:s,getUniforms:u=>{const f=ge(),v=ie(0,o,u),h=ie(0,i,u);return _e(f,v,h),{u_world:f}}}]}const br=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Bt,editOptions:_r,frameOptions:gr,name:vr},Symbol.toStringTag,{value:"Module"})),wr="excited",yr={delayMs:50,totalFrames:25},$r=[Ne({name:"angle",value:15}),nt({name:"startOffset",value:-.1}),nt({name:"endOffset",value:.1}),tr({name:"cycles",value:3})];function It(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:l}=r;let{startOffset:o,endOffset:i}=r;o*=2,i*=2;const c=Mt(a),u=Math.cos(c),f=Math.sin(c);return[{program:n,geometry:s,getUniforms:h=>{const m=h*2*l%1,d=Math.min(m,1-m)*2,b=ie(-o*f,-i*f,d),y=ie(o*u,i*u,d),w=ge();return We(w,a),_e(w,b,y),ze(w,h>.5?-1:1,1),{u_world:w}}}]}const Er=Object.freeze(Object.defineProperty({__proto__:null,createSprites:It,editOptions:$r,frameOptions:yr,name:wr},Symbol.toStringTag,{value:"Module"})),Or="jumping",Ar={delayMs:50,totalFrames:20},Tr=[Me({name:"maxOffset",value:.6}),Me({name:"compressTime",value:.4}),Me({name:"maxCompress",value:.3})];function kt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:l,maxCompress:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const u=Math.min(c,1-c)*2,f=ge(),v=u/(1-l);if(v<1){const h=(1-v*v)*a*2;_e(f,0,h)}else{const h=(1-u)/l,d=1-(1-h*h)*o;_e(f,0,1),ze(f,1/d,d),_e(f,0,-1)}return{u_world:f}}}]}const xr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:kt,editOptions:Tr,frameOptions:Ar,name:Or},Symbol.toStringTag,{value:"Module"})),Sr="tower",Pr={delayMs:40,totalFrames:20},Mr=[Ne({name:"startAngle",value:20}),Ne({name:"endAngle",value:-45}),Me({name:"startTime",value:.5})];function Rt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("tower"),{startAngle:a,endAngle:l,startTime:o}=r;return[{program:n,geometry:s,getUniforms:c=>{const u=ge();if(c<o){const f=c/o,v=Math.min(f,1-f)*2,h=ie(0,a,v);We(u,h)}else{const f=(c-o)/(1-o),v=Math.min(f,1-f)*2,h=ie(0,l,v);if(We(u,h),f>.5){const m=Mt(h),d=Math.cos(m),b=Math.sin(m),y=(f-.5)*2,w=ie(0,-2*b,y),j=ie(0,2*d,y);_e(u,w,j)}}return{u_world:u}}}]}const Fr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Rt,editOptions:Mr,frameOptions:Pr,name:Sr},Symbol.toStringTag,{value:"Module"})),Ur="repeated",Br={delayMs:60,totalFrames:15},Ir=[Ze({name:"initialScale",value:.1}),qe({name:"horizontal",value:!1})];function jt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{initialScale:a,horizontal:l}=r,o=l?{geometry:e.createGeometry("leftHalf"),endX:-1,endY:0}:{geometry:e.createGeometry("topHalf"),endX:0,endY:1},i=l?{geometry:e.createGeometry("rightHalf"),endX:1,endY:0}:{geometry:e.createGeometry("bottomHalf"),endX:0,endY:-1},c=v=>{const h=ge(),m=Qe(v),d=ie(a,1,m);return ze(h,d,d),{u_world:h}},u=v=>{const h=ge(),m=Qe(v),d=ie(0,o.endX,m),b=ie(0,o.endY,m);return _e(h,d,b),{u_world:h}},f=v=>{const h=ge(),m=Qe(v),d=ie(0,i.endX,m),b=ie(0,i.endY,m);return _e(h,d,b),{u_world:h}};return[{program:n,geometry:s,getUniforms:c},{program:n,geometry:o.geometry,getUniforms:u},{program:n,geometry:i.geometry,getUniforms:f}]}const kr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:jt,editOptions:Ir,frameOptions:Br,name:Ur},Symbol.toStringTag,{value:"Module"})),Rr="mirror",jr={delayMs:50,totalFrames:16},Cr=[qe({name:"rightHalf",value:!1})];function Ct(t,e,r){const n=t.createProgram("default"),{rightHalf:s}=r,a=e.createGeometry(s?"rightHalf":"leftHalf");return[{program:n,geometry:a,getUniforms:i=>{const c=Math.min(i,1-i)*2,u=ge(),f=ct(c),v=ie(-2,-1,f);return s||ze(u,-1,1),_e(u,v,0),{u_world:u}}},{program:n,geometry:a,getUniforms:i=>{const c=Math.min(i,1-i)*2,u=ge(),f=ct(c),v=ie(2,1,f);return s&&ze(u,-1,1),_e(u,v,0),{u_world:u}}}]}const Dr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Ct,editOptions:Cr,frameOptions:jr,name:Rr},Symbol.toStringTag,{value:"Module"})),zr="panic",Lr={delayMs:30,totalFrames:16},Gr=[Me({name:"maxOffsetX",value:.15}),Me({name:"maxOffsetY",value:.15})];function Dt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffsetX:a,maxOffsetY:l}=r;return[{program:n,geometry:s,getUniforms:i=>{const c=lt(i+.123),u=lt(i*2+1),f=ie(-a,a,c),v=ie(-l,l,u),h=ge();return _e(h,f,v),{u_world:h}}}]}const Nr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:Dt,editOptions:Gr,frameOptions:Lr,name:zr},Symbol.toStringTag,{value:"Module"})),Xr="rotating",qr={delayMs:50,totalFrames:20},Hr=[Me({name:"axisX",value:0}),Me({name:"axisY",value:1}),Me({name:"axisZ",value:0}),Ve({name:"originX",value:0}),Ve({name:"originY",value:0}),rr({name:"easing",value:1}),qe({name:"alternates",value:!1})];function zt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{axisX:a,axisY:l,axisZ:o,originX:i,originY:c,easing:u,alternates:f}=r,v=[a,l,o],h=or(u);return[{program:n,geometry:s,getUniforms:d=>{const b=f?Math.min(d,1-d)*2:d,y=h(b),w=ie(0,360,y),j=ge();_e(j,-i,-c),Pt(j,w,v),_e(j,i,c);const k=ge();return nr(k,[0,0,5],[0,0,0]),sr(k,-.2,.2,-.2,.2,1,9),{u_world:j,u_viewProjection:k,u_directionalLighting:!0,u_lightDirection:[0,0,-1]}}}]}const Yr=Object.freeze(Object.defineProperty({__proto__:null,createSprites:zt,editOptions:Hr,frameOptions:qr,name:Xr},Symbol.toStringTag,{value:"Module"})),ut=[xr,br,fr,Er,hr,Fr,kr,Dr,Nr,Yr];function ft(t,e,r){const n=ar(r.editOptions);switch(r.name){case"spinning":return Ft(t,e,n);case"expanding":return Ut(t,e,n);case"extreme-speed":return Bt(t,e,n);case"excited":return It(t,e,n);case"jumping":return kt(t,e,n);case"tower":return Rt(t,e,n);case"repeated":return jt(t,e,n);case"mirror":return Ct(t,e,n);case"panic":return Dt(t,e,n);case"rotating":return zt(t,e,n);default:(s=>{throw new Error(`Unknown animation: ${JSON.stringify(s)}`)})(r)}}const Vr=function(){var t={},e=-1,r,n,s,a,l,o,i=12,c=5003,u,f=i,v,h=1<<i,m=[],d=[],b=c,y=0,w=!1,j,k,Y,R=0,J=0,W=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,D=[],O=t.LZWEncoder=function(L,x,g,P){r=L,n=x,s=g,a=Math.max(2,P)},I=function(L,x){D[Z++]=L,Z>=254&&we(x)},ee=function(L){he(b),y=k+2,w=!0,ve(k,L)},he=function(L){for(var x=0;x<L;++x)m[x]=-1},H=t.compress=function(L,x){var g,P,te,V,ue,Q,A;for(j=L,w=!1,u=j,v=ye(u),k=1<<L-1,Y=k+1,y=k+2,Z=0,V=Ee(),A=0,g=b;g<65536;g*=2)++A;A=8-A,Q=b,he(Q),ve(k,x);e:for(;(te=Ee())!=e;){if(g=(te<<f)+V,P=te<<A^V,m[P]==g){V=d[P];continue}else if(m[P]>=0){ue=Q-P,P===0&&(ue=1);do if((P-=ue)<0&&(P+=Q),m[P]==g){V=d[P];continue e}while(m[P]>=0)}ve(V,x),V=te,y<h?(d[P]=y++,m[P]=g):ee(x)}ve(V,x),ve(Y,x)};t.encode=function(L){L.writeByte(a),l=r*n,o=0,H(a+1,L),L.writeByte(0)};var we=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(D,0,Z),Z=0)},ye=function(L){return(1<<L)-1},Ee=function(){if(l===0)return e;--l;var L=s[o++];return L&255},ve=function(L,x){for(R&=W[J],J>0?R|=L<<J:R=L,J+=u;J>=8;)I(R&255,x),R>>=8,J-=8;if((y>v||w)&&(w?(v=ye(u=j),w=!1):(++u,u==f?v=h:v=ye(u))),L==Y){for(;J>0;)I(R&255,x),R>>=8,J-=8;we(x)}};return O.apply(this,arguments),t},Wr=function(){var t={},e=256,r=499,n=491,s=487,a=503,l=3*a,o=e-1,i=4,c=100,u=16,f=1<<u,v=10,h=10,m=f>>h,d=f<<v-h,b=e>>3,y=6,w=1<<y,j=b*w,k=30,Y=10,R=1<<Y,J,W=8,Z=1<<W,D=Y+W,O=1<<D,I,ee,he,H,we=[],ye=[],Ee=[],ve=[],ne=t.NeuQuant=function(A,S,G){var U,B;for(I=A,ee=S,he=G,H=new Array(e),U=0;U<e;U++)H[U]=new Array(4),B=H[U],B[0]=B[1]=B[2]=(U<<i+8)/e,Ee[U]=f/e,ye[U]=0},L=function(){for(var A=[],S=new Array(e),G=0;G<e;G++)S[H[G][3]]=G;for(var U=0,B=0;B<e;B++){var $=S[B];A[U++]=H[$][0],A[U++]=H[$][1],A[U++]=H[$][2]}return A},x=function(){var A,S,G,U,B,$,T,z;for(T=0,z=0,A=0;A<e;A++){for(B=H[A],G=A,U=B[1],S=A+1;S<e;S++)$=H[S],$[1]<U&&(G=S,U=$[1]);if($=H[G],A!=G&&(S=$[0],$[0]=B[0],B[0]=S,S=$[1],$[1]=B[1],B[1]=S,S=$[2],$[2]=B[2],B[2]=S,S=$[3],$[3]=B[3],B[3]=S),U!=T){for(we[T]=z+A>>1,S=T+1;S<U;S++)we[S]=A;T=U,z=A}}for(we[T]=z+o>>1,S=T+1;S<256;S++)we[S]=o},g=function(){var A,S,G,U,B,$,T,z,N,re,Oe,K,be,tt;for(ee<l&&(he=1),J=30+(he-1)/3,K=I,be=0,tt=ee,Oe=ee/(3*he),re=Oe/c|0,z=R,$=j,T=$>>y,T<=1&&(T=0),A=0;A<T;A++)ve[A]=z*((T*T-A*A)*Z/(T*T));for(ee<l?N=3:ee%r!==0?N=3*r:ee%n!==0?N=3*n:ee%s!==0?N=3*s:N=3*a,A=0;A<Oe;)if(G=(K[be+0]&255)<<i,U=(K[be+1]&255)<<i,B=(K[be+2]&255)<<i,S=ue(G,U,B),V(z,S,G,U,B),T!==0&&te(T,S,G,U,B),be+=N,be>=tt&&(be-=ee),A++,re===0&&(re=1),A%re===0)for(z-=z/J,$-=$/k,T=$>>y,T<=1&&(T=0),S=0;S<T;S++)ve[S]=z*((T*T-S*S)*Z/(T*T))};t.map=function(A,S,G){var U,B,$,T,z,N,re;for(z=1e3,re=-1,U=we[S],B=U-1;U<e||B>=0;)U<e&&(N=H[U],$=N[1]-S,$>=z?U=e:(U++,$<0&&($=-$),T=N[0]-A,T<0&&(T=-T),$+=T,$<z&&(T=N[2]-G,T<0&&(T=-T),$+=T,$<z&&(z=$,re=N[3])))),B>=0&&(N=H[B],$=S-N[1],$>=z?B=-1:(B--,$<0&&($=-$),T=N[0]-A,T<0&&(T=-T),$+=T,$<z&&(T=N[2]-G,T<0&&(T=-T),$+=T,$<z&&(z=$,re=N[3]))));return re},t.process=function(){return g(),P(),x(),L()};var P=function(){var A;for(A=0;A<e;A++)H[A][0]>>=i,H[A][1]>>=i,H[A][2]>>=i,H[A][3]=A},te=function(A,S,G,U,B){var $,T,z,N,re,Oe,K;for(z=S-A,z<-1&&(z=-1),N=S+A,N>e&&(N=e),$=S+1,T=S-1,Oe=1;$<N||T>z;){if(re=ve[Oe++],$<N){K=H[$++];try{K[0]-=re*(K[0]-G)/O,K[1]-=re*(K[1]-U)/O,K[2]-=re*(K[2]-B)/O}catch{}}if(T>z){K=H[T--];try{K[0]-=re*(K[0]-G)/O,K[1]-=re*(K[1]-U)/O,K[2]-=re*(K[2]-B)/O}catch{}}}},V=function(A,S,G,U,B){var $=H[S];$[0]-=A*($[0]-G)/R,$[1]-=A*($[1]-U)/R,$[2]-=A*($[2]-B)/R},ue=function(A,S,G){var U,B,$,T,z,N,re,Oe,K,be;for(Oe=~(1<<31),K=Oe,N=-1,re=N,U=0;U<e;U++)be=H[U],B=be[0]-A,B<0&&(B=-B),$=be[1]-S,$<0&&($=-$),B+=$,$=be[2]-G,$<0&&($=-$),B+=$,B<Oe&&(Oe=B,N=U),T=B-(ye[U]>>u-i),T<K&&(K=T,re=U),z=Ee[U]>>h,Ee[U]-=z,ye[U]+=z<<v;return Ee[N]+=m,ye[N]-=d,re};return ne.apply(this,arguments),t},Qr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var x="",g=this.bin.length,P=0;P<g;P++)x+=e[this.bin[P]];return x},r.prototype.writeByte=function(x){this.bin.push(x)},r.prototype.writeUTFBytes=function(x){for(var g=x.length,P=0;P<g;P++)this.writeByte(x.charCodeAt(P))},r.prototype.writeBytes=function(x,g,P){for(var te=P||x.length,V=g||0;V<te;V++)this.writeByte(x[V])};var n={},s,a,l=null,o,i=-1,c=0,u=!1,f,v,h,m,d,b,y=[],w=7,j=-1,k=!1,Y=!0,R=!1,J=10,W="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(g){c=Math.round(g/10)},n.setDispose=function(g){g>=0&&(j=g)},n.setRepeat=function(g){g>=0&&(i=g)},n.setTransparent=function(g){l=g},n.setComment=function(g){W=g},n.addFrame=function(g,P){if(g===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?g instanceof ImageData?(v=g.data,(!sizeset||s!=g.width||a!=g.height)&&D(g.width,g.height)):g instanceof Uint8ClampedArray?g.length==s*a*4?v=g:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(v=g.getImageData(0,0,g.canvas.width,g.canvas.height).data,R||D(g.canvas.width,g.canvas.height)),ee(),O(),Y&&(ye(),ve(),i>=0&&Ee()),he(),W!==""&&H(),we(),Y||ve(),L(),Y=!1}catch{te=!1}return te},n.download=function(g){if(f===null||k==!1)console.log("Please call start method and add frames and call finish method before calling download");else{g=g!==void 0?g.endsWith(".gif")?g:g+".gif":"download.gif";var P=document.createElement("a");P.download=g,P.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!u)return!1;var g=!0;u=!1;try{f.writeByte(59),k=!0}catch{g=!1}return g};var Z=function(){o=0,v=null,h=null,m=null,b=null,k=!1,Y=!0};n.setFrameRate=function(g){g!=15&&(c=Math.round(100/g))},n.setQuality=function(g){g<1&&(g=1),J=g};var D=n.setSize=function(g,P){u&&!Y||(s=g,a=P,s<1&&(s=320),a<1&&(a=240),R=!0)};n.start=function(){Z();var g=!0;k=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{g=!1}return u=g},n.cont=function(){Z();var g=!0;return k=!1,f=new r,u=g};var O=function(){var g=h.length,P=g/3;m=[];var te=new Wr(h,g,J);b=te.process();for(var V=0,ue=0;ue<P;ue++){var Q=te.map(h[V++]&255,h[V++]&255,h[V++]&255);y[Q]=!0,m[ue]=Q}h=null,d=8,w=7,l!==null&&(o=I(l))},I=function(g){if(b===null)return-1;for(var P=(g&16711680)>>16,te=(g&65280)>>8,V=g&255,ue=0,Q=256*256*256,A=b.length,S=0;S<A;){var G=P-(b[S++]&255),U=te-(b[S++]&255),B=V-(b[S]&255),$=G*G+U*U+B*B,T=S/3;y[T]&&$<Q&&(Q=$,ue=T),S++}return ue},ee=function(){var g=s,P=a;h=[];for(var te=v,V=0,ue=0;ue<P;ue++)for(var Q=0;Q<g;Q++){var A=ue*g*4+Q*4;h[V++]=te[A],h[V++]=te[A+1],h[V++]=te[A+2]}},he=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var g,P;l===null?(g=0,P=0):(g=1,P=2),j>=0&&(P=j&7),P<<=2,f.writeByte(0|P|0|g),ne(c),f.writeByte(o),f.writeByte(0)},H=function(){f.writeByte(33),f.writeByte(254),f.writeByte(W.length),f.writeUTFBytes(W),f.writeByte(0)},we=function(){f.writeByte(44),ne(0),ne(0),ne(s),ne(a),Y?f.writeByte(0):f.writeByte(128|w)},ye=function(){ne(s),ne(a),f.writeByte(240|w),f.writeByte(0),f.writeByte(0)},Ee=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),ne(i),f.writeByte(0)},ve=function(){f.writeBytes(b);for(var g=3*256-b.length,P=0;P<g;P++)f.writeByte(0)},ne=function(g){f.writeByte(g&255),f.writeByte(g>>8&255)},L=function(){var g=new Vr(s,a,m,d);g.encode(f)};return n.stream=function(){return f},n.setProperties=function(g,P){u=g,Y=P},n};class Jr{constructor(e){$e(this,"loadingUrl",null);$e(this,"url",null);$e(this,"texture",null);$e(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const l=a.createTexture();if(!l)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,l),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=l,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const Pe={a_position:0,a_texCoords:1,a_normal:2},mt={default:{vertex:`#version 300 es

layout(location = ${Pe.a_position}) in vec3 a_position;
layout(location = ${Pe.a_texCoords}) in vec2 a_texCoords;
layout(location = ${Pe.a_normal}) in vec3 a_normal;

uniform mat4 u_world;
uniform mat4 u_viewProjection;

out vec2 v_texCoords;
out vec3 v_normal;

void main() {
  vec4 pos = u_viewProjection * u_world * vec4(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, pos.z, pos.w);
  v_texCoords = a_texCoords;
  v_normal = (transpose(inverse(u_world)) * vec4(a_normal, 0)).xyz;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;
in vec3 v_normal;

uniform sampler2D u_image;
uniform bool u_directionalLighting;
uniform vec3 u_lightDirection;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);

  if (u_directionalLighting) {
    outColor.rgb *= dot(normalize(v_normal), u_lightDirection);

    // since y is flipped in the vertex shader, front face becomes back face
    if (!gl_FrontFacing) {
      outColor.rgb *= -1.0;
    }
  }
}
    `}};class Zr{constructor(e){$e(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:ea(this.gl,mt[e].vertex,mt[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function Kr(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"?t.uniform1f(a,s):typeof s=="boolean"&&t.uniform1i(a,s?1:0)}}function ea(t,e,r){const n=dt(t,t.VERTEX_SHADER,e);let s;try{s=dt(t,t.FRAGMENT_SHADER,r)}catch(l){throw t.deleteShader(n),l}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const l=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${l}`)}return a}function dt(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}const pt=ge();function ht(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,l,o;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),l!==i.geometry&&(t.bindVertexArray(i.geometry.vao),l=i.geometry),o!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),o=n);const c={u_image:n.unit,u_world:pt,u_viewProjection:pt,u_directionalLighting:!1,...i.getUniforms(e)};Kr(t,i.program,c),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}function ta(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(Pe.a_position),t.vertexAttribPointer(Pe.a_position,3,t.FLOAT,!1,8*4,0),t.enableVertexAttribArray(Pe.a_texCoords),t.vertexAttribPointer(Pe.a_texCoords,2,t.FLOAT,!1,8*4,3*4),t.enableVertexAttribArray(Pe.a_normal),t.vertexAttribPointer(Pe.a_normal,3,t.FLOAT,!1,8*4,5*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const ra={full:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],sudoku:[-3,-3,0,-1,2,0,0,1,3,-3,0,2,2,0,0,1,-3,3,0,-1,-1,0,0,1,3,3,0,2,-1,0,0,1],tower:[-1,-3,0,0,2,0,0,1,1,-3,0,1,2,0,0,1,-1,3,0,0,-1,0,0,1,1,3,0,1,-1,0,0,1],topHalf:[-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1],bottomHalf:[-1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,0,0,0,.5,0,0,1,1,0,0,1,.5,0,0,1],leftHalf:[-1,-1,0,0,1,0,0,1,0,-1,0,.5,1,0,0,1,-1,1,0,0,0,0,0,1,0,1,0,.5,0,0,0,1],rightHalf:[0,-1,0,.5,1,0,0,1,1,-1,0,1,1,0,0,1,0,1,0,.5,0,0,0,1,1,1,0,1,0,0,0,1]};class aa{constructor(e){$e(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=ta(this.gl,ra[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class na{constructor(e){$e(this,"gl");$e(this,"programFactory");$e(this,"geometryFactory");$e(this,"texture");$e(this,"queue",[]);$e(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new Zr(this.gl),this.geometryFactory=new aa(this.gl),this.texture=new Jr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new Qr;if(a.setRepeat(0),a.setDelay(e.animation.frameOptions.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:ft(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:ft(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let o=0;o<this.queue.length-1;++o)this.queue[o].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const l=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")ht(this.gl,a/r.animation.frameOptions.totalFrames,s,this.texture,l),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:o,sprites:i,callback:c}=this.queue[0];ht(this.gl,a/r.animation.frameOptions.totalFrames,i,this.texture,l),c(a);const u=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,u),o.addFrame(u,!0),o.setTransparent(16777215),a===r.animation.frameOptions.totalFrames-1){o.finish();const f=o.stream().getData(),v="data:image/gif;base64,"+window.btoa(f);n({dataUri:v}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const Ae=function(){const{subscribe:t,update:e}=Ke({animations:ut,current:ut[0]}),r=a=>{e(l=>l.current===a||!l.animations.find(i=>i===a)?l:{animations:l.animations,current:a})};function n(a){e(({animations:l,current:o})=>{const i={...o.frameOptions,...a},c={...o,frameOptions:i};return{animations:l.map(u=>u===o?c:u),current:c}})}function s(a,l){e(({animations:o,current:i})=>{const c={...i,editOptions:i.editOptions.map(u=>u===a?{...a,value:l}:u)};return{animations:o.map(u=>u===i?c:u),current:c}})}return{subscribe:t,changeCurrentAnimation:r,changeFrameOptions:n,changeEditOptions:s}}(),Te=function(){const t=`${Ye}/favicon.png`,{subscribe:e,update:r}=Ke({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(l=>({...l,...a}))}function s(a){r(l=>(l.url!==t&&URL.revokeObjectURL(l.url),{...l,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Le=function(){const t=Ke({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(l){r(o=>{var i;return(i=o.animator)==null||i.destroy(),{animator:new na(l),running:!1,frame:0}})}function s(){const{animator:l}=De(t);return l?(r(o=>({...o,running:!0,frame:0})),l.animate({image:De(Te),animation:De(Ae).current},o=>r(i=>({...i,frame:o}))).finally(()=>{r(o=>({...o,running:!1}))})):Promise.reject("Animator has not been created")}function a(l){const{animator:o,frame:i}=De(t);if(!o)return Promise.reject("Animator has not been created");let c;typeof l>"u"?c=i:c=l;const u=De(Ae).current;return c>=u.frameOptions.totalFrames&&(c=u.frameOptions.totalFrames-1),r(f=>({...f,frame:c,running:!0})),o.renderFrame({image:De(Te),animation:u},c).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function vt(t){let e,r,n,s,a,l;return{c(){e=M("label"),r=oe(t[1]),n=X(),s=M("input"),this.h()},l(o){e=F(o,"LABEL",{class:!0});var i=C(e);r=le(i,t[1]),n=q(i),s=F(i,"INPUT",{class:!0,type:!0}),i.forEach(E),this.h()},h(){p(s,"class","slider__text-input svelte-1h0gcvd"),p(s,"type","text"),s.value=t[0],p(e,"class","slider__label svelte-1h0gcvd")},m(o,i){ce(o,e,i),_(e,r),_(e,n),_(e,s),a||(l=Xe(s,"input",t[5]),a=!0)},p(o,i){i&2&&Be(r,o[1]),i&1&&s.value!==o[0]&&(s.value=o[0])},d(o){o&&E(e),a=!1,l()}}}function sa(t){let e,r,n,s,a=He(t[2])+"",l,o,i,c,u,f,v=He(t[3])+"",h,m,d,b=t[1]&&vt(t);return{c(){e=M("div"),b&&b.c(),r=X(),n=M("div"),s=M("span"),l=oe(a),o=X(),i=M("div"),c=M("input"),u=X(),f=M("span"),h=oe(v),this.h()},l(y){e=F(y,"DIV",{class:!0});var w=C(e);b&&b.l(w),r=q(w),n=F(w,"DIV",{class:!0});var j=C(n);s=F(j,"SPAN",{class:!0});var k=C(s);l=le(k,a),k.forEach(E),o=q(j),i=F(j,"DIV",{class:!0});var Y=C(i);c=F(Y,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),Y.forEach(E),u=q(j),f=F(j,"SPAN",{class:!0});var R=C(f);h=le(R,v),R.forEach(E),j.forEach(E),w.forEach(E),this.h()},h(){p(s,"class","slider__range slider__range--min svelte-1h0gcvd"),p(c,"class","slider__input svelte-1h0gcvd"),p(c,"type","range"),p(c,"min",t[2]),p(c,"max",t[3]),p(c,"step",t[4]),c.value=t[0],p(i,"class","slider__input-container svelte-1h0gcvd"),p(f,"class","slider__range slider__range--max"),p(n,"class","slider__container svelte-1h0gcvd"),p(e,"class","slider")},m(y,w){ce(y,e,w),b&&b.m(e,null),_(e,r),_(e,n),_(n,s),_(s,l),_(n,o),_(n,i),_(i,c),_(n,u),_(n,f),_(f,h),m||(d=Xe(c,"input",t[5]),m=!0)},p(y,[w]){y[1]?b?b.p(y,w):(b=vt(y),b.c(),b.m(e,r)):b&&(b.d(1),b=null),w&4&&a!==(a=He(y[2])+"")&&Be(l,a),w&4&&p(c,"min",y[2]),w&8&&p(c,"max",y[3]),w&16&&p(c,"step",y[4]),w&1&&(c.value=y[0]),w&8&&v!==(v=He(y[3])+"")&&Be(h,v)},i:Ue,o:Ue,d(y){y&&E(e),b&&b.d(),m=!1,d()}}}function He(t){return t.toFixed(2).replace(/\.?0+$/,"")}function ia(t,e,r){const n=At();let{label:s=""}=e,{min:a=0}=e,{max:l=100}=e,{step:o=1}=e,{value:i=l<a?a:(l-a)/2}=e;function c(u){const f=u.target,v=parseFloat(f.value);Number.isNaN(v)||(r(0,i=v),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,l=u.max),"step"in u&&r(4,o=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,l,o,c]}class Se extends Ie{constructor(e){super(),ke(this,e,ia,sa,Re,{label:1,min:2,max:3,step:4,value:0})}}function oa(t){let e,r,n,s,a,l,o,i,c,u,f,v,h,m,d,b,y,w,j,k,Y,R,J,W,Z,D;return u=new Se({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]),v=new Se({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),v.$on("input",t[5]),m=new Se({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),b=new Se({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),b.$on("input",t[7]),w=new Se({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),w.$on("input",t[8]),k=new Se({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].current.frameOptions.delayMs}}),k.$on("input",t[9]),R=new Se({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].current.frameOptions.totalFrames}}),R.$on("input",t[10]),{c(){e=M("aside"),r=M("label"),n=oe(`Select image

    `),s=M("input"),a=X(),l=M("div"),o=M("img"),c=X(),fe(u.$$.fragment),f=X(),fe(v.$$.fragment),h=X(),fe(m.$$.fragment),d=X(),fe(b.$$.fragment),y=X(),fe(w.$$.fragment),j=X(),fe(k.$$.fragment),Y=X(),fe(R.$$.fragment),this.h()},l(O){e=F(O,"ASIDE",{class:!0});var I=C(e);r=F(I,"LABEL",{class:!0});var ee=C(r);n=le(ee,`Select image

    `),s=F(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=q(ee),l=F(ee,"DIV",{class:!0});var he=C(l);o=F(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach(E),ee.forEach(E),c=q(I),me(u.$$.fragment,I),f=q(I),me(v.$$.fragment,I),h=q(I),me(m.$$.fragment,I),d=q(I),me(b.$$.fragment,I),y=q(I),me(w.$$.fragment,I),j=q(I),me(k.$$.fragment,I),Y=q(I),me(R.$$.fragment,I),I.forEach(E),this.h()},h(){p(s,"class","image__input svelte-843oxz"),p(s,"type","file"),p(s,"accept","image/*"),p(o,"class","image__preview svelte-843oxz"),Ce(o.src,i=t[1].url)||p(o,"src",i),p(o,"alt","source"),p(l,"class","image__container svelte-843oxz"),p(r,"class","image svelte-843oxz"),p(e,"class",J=xe(`container ${t[0]}`)+" svelte-843oxz")},m(O,I){ce(O,e,I),_(e,r),_(r,n),_(r,s),_(r,a),_(r,l),_(l,o),_(e,c),de(u,e,null),_(e,f),de(v,e,null),_(e,h),de(m,e,null),_(e,d),de(b,e,null),_(e,y),de(w,e,null),_(e,j),de(k,e,null),_(e,Y),de(R,e,null),W=!0,Z||(D=Xe(s,"input",t[3]),Z=!0)},p(O,[I]){(!W||I&2&&!Ce(o.src,i=O[1].url))&&p(o,"src",i);const ee={};I&2&&(ee.value=O[1].width),u.$set(ee);const he={};I&2&&(he.value=O[1].height),v.$set(he);const H={};I&2&&(H.value=O[1].clearRed),m.$set(H);const we={};I&2&&(we.value=O[1].clearGreen),b.$set(we);const ye={};I&2&&(ye.value=O[1].clearBlue),w.$set(ye);const Ee={};I&4&&(Ee.value=O[2].current.frameOptions.delayMs),k.$set(Ee);const ve={};I&4&&(ve.value=O[2].current.frameOptions.totalFrames),R.$set(ve),(!W||I&1&&J!==(J=xe(`container ${O[0]}`)+" svelte-843oxz"))&&p(e,"class",J)},i(O){W||(ae(u.$$.fragment,O),ae(v.$$.fragment,O),ae(m.$$.fragment,O),ae(b.$$.fragment,O),ae(w.$$.fragment,O),ae(k.$$.fragment,O),ae(R.$$.fragment,O),W=!0)},o(O){se(u.$$.fragment,O),se(v.$$.fragment,O),se(m.$$.fragment,O),se(b.$$.fragment,O),se(w.$$.fragment,O),se(k.$$.fragment,O),se(R.$$.fragment,O),W=!1},d(O){O&&E(e),pe(u),pe(v),pe(m),pe(b),pe(w),pe(k),pe(R),Z=!1,D()}}}function la(t,e,r){let n,s;je(t,Te,m=>r(1,n=m)),je(t,Ae,m=>r(2,s=m));let{class:a=""}=e;function l(m){var y;const b=(y=m.target.files)==null?void 0:y[0];b&&Te.changeImage(b)}const o=m=>Te.change({width:m.detail.value}),i=m=>Te.change({height:m.detail.value}),c=m=>Te.change({clearRed:m.detail.value}),u=m=>Te.change({clearGreen:m.detail.value}),f=m=>Te.change({clearBlue:m.detail.value}),v=m=>Ae.changeFrameOptions({delayMs:m.detail.value}),h=m=>Ae.changeFrameOptions({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,l,o,i,c,u,f,v,h]}class ca extends Ie{constructor(e){super(),ke(this,e,la,oa,Re,{class:0})}}function ua(t){let e,r,n,s,a,l,o;return{c(){e=M("div"),r=oe(t[1]),n=X(),s=M("label"),a=M("input"),this.h()},l(i){e=F(i,"DIV",{class:!0});var c=C(e);r=le(c,t[1]),n=q(c),s=F(c,"LABEL",{class:!0});var u=C(s);a=F(u,"INPUT",{class:!0,type:!0}),u.forEach(E),c.forEach(E),this.h()},h(){p(a,"class","toggle__checkbox svelte-1j9rfin"),p(a,"type","checkbox"),a.checked=t[0],p(s,"class","toggle__label svelte-1j9rfin"),Fe(s,"toggle__label--active",t[0]),p(e,"class","toggle svelte-1j9rfin")},m(i,c){ce(i,e,c),_(e,r),_(e,n),_(e,s),_(s,a),l||(o=Xe(a,"change",t[2]),l=!0)},p(i,[c]){c&2&&Be(r,i[1]),c&1&&(a.checked=i[0]),c&1&&Fe(s,"toggle__label--active",i[0])},i:Ue,o:Ue,d(i){i&&E(e),l=!1,o()}}}function fa(t,e,r){const n=At();let{label:s=""}=e,{value:a=!1}=e;function l(o){const i=o.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=o=>{"label"in o&&r(1,s=o.label),"value"in o&&r(0,a=o.value)},[a,s,l]}class Lt extends Ie{constructor(e){super(),ke(this,e,fa,ua,Re,{label:1,value:0})}}function gt(t,e,r){const n=t.slice();return n[4]=e[r],n}function ma(t){let e,r;function n(...s){return t[3](t[4],...s)}return e=new Lt({props:{label:t[4].name,value:t[4].value}}),e.$on("change",n),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,a){de(e,s,a),r=!0},p(s,a){t=s;const l={};a&2&&(l.label=t[4].name),a&2&&(l.value=t[4].value),e.$set(l)},i(s){r||(ae(e.$$.fragment,s),r=!0)},o(s){se(e.$$.fragment,s),r=!1},d(s){pe(e,s)}}}function da(t){let e,r;function n(...s){return t[2](t[4],...s)}return e=new Se({props:{label:t[4].name,min:t[4].min,max:t[4].max,step:t[4].step,value:t[4].value}}),e.$on("input",n),{c(){fe(e.$$.fragment)},l(s){me(e.$$.fragment,s)},m(s,a){de(e,s,a),r=!0},p(s,a){t=s;const l={};a&2&&(l.label=t[4].name),a&2&&(l.min=t[4].min),a&2&&(l.max=t[4].max),a&2&&(l.step=t[4].step),a&2&&(l.value=t[4].value),e.$set(l)},i(s){r||(ae(e.$$.fragment,s),r=!0)},o(s){se(e.$$.fragment,s),r=!1},d(s){pe(e,s)}}}function _t(t){let e,r,n,s;const a=[da,ma],l=[];function o(i,c){return i[4].type==="slider"?0:i[4].type==="toggle"?1:-1}return~(e=o(t))&&(r=l[e]=a[e](t)),{c(){r&&r.c(),n=rt()},l(i){r&&r.l(i),n=rt()},m(i,c){~e&&l[e].m(i,c),ce(i,n,c),s=!0},p(i,c){let u=e;e=o(i),e===u?~e&&l[e].p(i,c):(r&&(Tt(),se(l[u],1,1,()=>{l[u]=null}),xt()),~e?(r=l[e],r?r.p(i,c):(r=l[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&l[e].d(i),i&&E(n)}}}function pa(t){let e,r,n,s=t[1].current.editOptions,a=[];for(let o=0;o<s.length;o+=1)a[o]=_t(gt(t,s,o));const l=o=>se(a[o],1,1,()=>{a[o]=null});return{c(){e=M("aside");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=F(o,"ASIDE",{class:!0});var i=C(e);for(let c=0;c<a.length;c+=1)a[c].l(i);i.forEach(E),this.h()},h(){p(e,"class",r=xe(`container ${t[0]}`)+" svelte-1solget")},m(o,i){ce(o,e,i);for(let c=0;c<a.length;c+=1)a[c].m(e,null);n=!0},p(o,[i]){if(i&2){s=o[1].current.editOptions;let c;for(c=0;c<s.length;c+=1){const u=gt(o,s,c);a[c]?(a[c].p(u,i),ae(a[c],1)):(a[c]=_t(u),a[c].c(),ae(a[c],1),a[c].m(e,null))}for(Tt(),c=s.length;c<a.length;c+=1)l(c);xt()}(!n||i&1&&r!==(r=xe(`container ${o[0]}`)+" svelte-1solget"))&&p(e,"class",r)},i(o){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(o){o&&E(e),Xt(a,o)}}}function ha(t,e,r){let n;je(t,Ae,o=>r(1,n=o));let{class:s=""}=e;const a=(o,i)=>Ae.changeEditOptions(o,i.detail.value),l=(o,i)=>Ae.changeEditOptions(o,i.detail.value);return t.$$set=o=>{"class"in o&&r(0,s=o.class)},[s,n,a,l]}class va extends Ie{constructor(e){super(),ke(this,e,ha,pa,Re,{class:0})}}function bt(t,e,r){const n=t.slice();return n[3]=e[r],n}function wt(t,e){let r,n,s,a,l,o,i=e[3].name+"",c,u,f,v;function h(){return e[2](e[3])}return{key:t,first:null,c(){r=M("button"),n=M("img"),l=X(),o=M("span"),c=oe(i),u=X(),this.h()},l(m){r=F(m,"BUTTON",{type:!0,class:!0});var d=C(r);n=F(d,"IMG",{class:!0,src:!0,alt:!0}),l=q(d),o=F(d,"SPAN",{});var b=C(o);c=le(b,i),b.forEach(E),u=q(d),d.forEach(E),this.h()},h(){p(n,"class","image svelte-1l1v01j"),Ce(n.src,s=`${Ye}/demo-${e[3].name}.gif`)||p(n,"src",s),p(n,"alt",a=e[3].name),p(r,"type","button"),p(r,"class","option svelte-1l1v01j"),Fe(r,"option--selected",e[3]===e[1].current),this.first=r},m(m,d){ce(m,r,d),_(r,n),_(r,l),_(r,o),_(o,c),_(r,u),f||(v=Xe(r,"click",h),f=!0)},p(m,d){e=m,d&2&&!Ce(n.src,s=`${Ye}/demo-${e[3].name}.gif`)&&p(n,"src",s),d&2&&a!==(a=e[3].name)&&p(n,"alt",a),d&2&&i!==(i=e[3].name+"")&&Be(c,i),d&2&&Fe(r,"option--selected",e[3]===e[1].current)},d(m){m&&E(r),f=!1,v()}}}function ga(t){let e,r=[],n=new Map,s,a=t[1].animations;const l=o=>o[3].name;for(let o=0;o<a.length;o+=1){let i=bt(t,a,o),c=l(i);n.set(c,r[o]=wt(c,i))}return{c(){e=M("aside");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=F(o,"ASIDE",{class:!0});var i=C(e);for(let c=0;c<r.length;c+=1)r[c].l(i);i.forEach(E),this.h()},h(){p(e,"class",s=xe(`container ${t[0]}`)+" svelte-1l1v01j")},m(o,i){ce(o,e,i);for(let c=0;c<r.length;c+=1)r[c].m(e,null)},p(o,[i]){i&2&&(a=o[1].animations,r=qt(r,i,l,1,o,a,n,e,Ht,wt,null,bt)),i&1&&s!==(s=xe(`container ${o[0]}`)+" svelte-1l1v01j")&&p(e,"class",s)},i:Ue,o:Ue,d(o){o&&E(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function _a(t,e,r){let n;je(t,Ae,l=>r(1,n=l));let{class:s=""}=e;const a=l=>Ae.changeCurrentAnimation(l);return t.$$set=l=>{"class"in l&&r(0,s=l.class)},[s,n,a]}class ba extends Ie{constructor(e){super(),ke(this,e,_a,ga,Re,{class:0})}}function yt(t){t[12]=t[13].dataUri}function $t(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:$a,then:ya,catch:wa,value:13,error:14};return at(r=t[4],n),{c(){e=M("div"),n.block.c(),this.h()},l(s){e=F(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach(E),this.h()},h(){p(e,"class","preview__container preview__container--no-debug svelte-13qbjon")},m(s,a){ce(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&at(r,n)||Wt(n,t,a)},d(s){s&&E(e),n.block.d(),n.token=null,n=null}}}function wa(t){let e,r,n=t[14]+"",s;return{c(){e=M("p"),r=oe("An error has occurred: "),s=oe(n),this.h()},l(a){e=F(a,"P",{class:!0});var l=C(e);r=le(l,"An error has occurred: "),s=le(l,n),l.forEach(E),this.h()},h(){p(e,"class","preview__error svelte-13qbjon")},m(a,l){ce(a,e,l),_(e,r),_(e,s)},p(a,l){l&16&&n!==(n=a[14]+"")&&Be(s,n)},d(a){a&&E(e)}}}function ya(t){yt(t);let e,r,n,s,a,l,o;return{c(){e=M("div"),r=M("img"),s=X(),a=M("a"),l=oe("Download"),this.h()},l(i){e=F(i,"DIV",{class:!0});var c=C(e);r=F(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach(E),s=q(i),a=F(i,"A",{class:!0,download:!0,href:!0});var u=C(a);l=le(u,"Download"),u.forEach(E),this.h()},h(){p(r,"class","preview__image svelte-13qbjon"),Ce(r.src,n=t[12])||p(r,"src",n),p(r,"alt","generated gif"),p(e,"class","preview__image-container svelte-13qbjon"),p(a,"class","preview__download-button svelte-13qbjon"),p(a,"download","jumping_peter.gif"),p(a,"href",o=t[12])},m(i,c){ce(i,e,c),_(e,r),ce(i,s,c),ce(i,a,c),_(a,l)},p(i,c){yt(i),c&16&&!Ce(r.src,n=i[12])&&p(r,"src",n),c&16&&o!==(o=i[12])&&p(a,"href",o)},d(i){i&&E(e),i&&E(s),i&&E(a)}}}function $a(t){let e,r,n,s,a,l,o=t[5].frame+"",i,c,u=t[2].current.frameOptions.totalFrames+"",f,v,h,m,d,b;return{c(){e=M("div"),r=M("p"),n=oe("Generating..."),s=X(),a=M("p"),l=oe("["),i=oe(o),c=oe(" / "),f=oe(u),v=oe("]"),h=X(),m=M("progress"),this.h()},l(y){e=F(y,"DIV",{class:!0});var w=C(e);r=F(w,"P",{});var j=C(r);n=le(j,"Generating..."),j.forEach(E),s=q(w),a=F(w,"P",{});var k=C(a);l=le(k,"["),i=le(k,o),c=le(k," / "),f=le(k,u),v=le(k,"]"),k.forEach(E),h=q(w),m=F(w,"PROGRESS",{class:!0,max:!0}),C(m).forEach(E),w.forEach(E),this.h()},h(){p(m,"class","preview__progress svelte-13qbjon"),p(m,"max",d=t[2].current.frameOptions.totalFrames),m.value=b=t[5].frame,p(e,"class","preview__loading svelte-13qbjon")},m(y,w){ce(y,e,w),_(e,r),_(r,n),_(e,s),_(e,a),_(a,l),_(a,i),_(a,c),_(a,f),_(a,v),_(e,h),_(e,m)},p(y,w){w&32&&o!==(o=y[5].frame+"")&&Be(i,o),w&4&&u!==(u=y[2].current.frameOptions.totalFrames+"")&&Be(f,u),w&4&&d!==(d=y[2].current.frameOptions.totalFrames)&&p(m,"max",d),w&32&&b!==(b=y[5].frame)&&(m.value=b)},d(y){y&&E(e)}}}function Ea(t){let e,r,n,s,a,l,o,i,c,u,f,v;n=new Lt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let h=!t[1]&&t[4]&&$t(t);return u=new Se({props:{min:0,max:t[2].current.frameOptions.totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=M("main"),r=M("div"),fe(n.$$.fragment),s=X(),h&&h.c(),a=X(),l=M("div"),o=M("div"),i=M("canvas"),c=X(),fe(u.$$.fragment),this.h()},l(m){e=F(m,"MAIN",{class:!0});var d=C(e);r=F(d,"DIV",{class:!0});var b=C(r);me(n.$$.fragment,b),b.forEach(E),s=q(d),h&&h.l(d),a=q(d),l=F(d,"DIV",{class:!0});var y=C(l);o=F(y,"DIV",{class:!0});var w=C(o);i=F(w,"CANVAS",{class:!0,style:!0}),C(i).forEach(E),w.forEach(E),c=q(y),me(u.$$.fragment,y),y.forEach(E),d.forEach(E),this.h()},h(){p(r,"class","preview__debug-input svelte-13qbjon"),p(i,"class","preview__image svelte-13qbjon"),Yt(i,"transform","scaleY(-1)"),p(o,"class","preview__image-container svelte-13qbjon"),p(l,"class","preview__container preview__container--debug svelte-13qbjon"),p(e,"class",f=xe(`preview ${t[0]}`)+" svelte-13qbjon"),Fe(e,"preview--debug",t[1]),Fe(e,"preview--no-debug",!t[1])},m(m,d){ce(m,e,d),_(e,r),de(n,r,null),_(e,s),h&&h.m(e,null),_(e,a),_(e,l),_(l,o),_(o,i),t[9](i),_(l,c),de(u,l,null),v=!0},p(m,[d]){const b={};d&2&&(b.value=m[1]),n.$set(b),!m[1]&&m[4]?h?h.p(m,d):(h=$t(m),h.c(),h.m(e,a)):h&&(h.d(1),h=null);const y={};d&4&&(y.max=m[2].current.frameOptions.totalFrames-1),d&32&&(y.value=m[5].frame),u.$set(y),(!v||d&1&&f!==(f=xe(`preview ${m[0]}`)+" svelte-13qbjon"))&&p(e,"class",f),(!v||d&3)&&Fe(e,"preview--debug",m[1]),(!v||d&3)&&Fe(e,"preview--no-debug",!m[1])},i(m){v||(ae(n.$$.fragment,m),ae(u.$$.fragment,m),v=!0)},o(m){se(n.$$.fragment,m),se(u.$$.fragment,m),v=!1},d(m){m&&E(e),pe(n),h&&h.d(),t[9](null),pe(u)}}}function Oa(t,e,r){let n,s,a;je(t,Ae,d=>r(2,n=d)),je(t,Te,d=>r(8,s=d)),je(t,Le,d=>r(5,a=d));let l,{class:o=""}=e,i=!1,c=null;function u(){Le.renderFrame().catch(d=>{throw console.error(`renderFrame failed: ${d}`),d})}function f(){r(4,c=Le.animate().catch(d=>{throw console.error(`animate failed: ${d}`),d}))}Vt(()=>{Le.changeCanvas(l),f()});function v(d){Le.renderFrame(d.detail.value).catch(b=>console.error(`Animation failed: ${b}`))}function h(d){r(1,i=d.detail.value)}function m(d){Qt[d?"unshift":"push"](()=>{l=d,r(3,l)})}return t.$$set=d=>{"class"in d&&r(0,o=d.class)},t.$$.update=()=>{t.$$.dirty&262&&(i?u():f())},[o,i,n,l,c,a,v,h,s,m]}class Aa extends Ie{constructor(e){super(),ke(this,e,Oa,Ea,Re,{class:0})}}function Ta(t){let e,r,n,s,a,l,o,i,c,u,f,v,h,m,d,b,y,w,j,k,Y,R,J,W,Z;return document.title=e=Ge,b=new er({props:{class:"header"}}),w=new ba({props:{class:"animations"}}),k=new ca({props:{class:"common-options"}}),R=new va({props:{class:"animation-options"}}),W=new Aa({props:{class:"preview"}}),{c(){r=M("meta"),n=M("meta"),s=M("meta"),a=M("meta"),l=M("meta"),o=M("meta"),i=M("meta"),c=M("meta"),u=M("meta"),f=M("meta"),v=M("meta"),h=M("meta"),m=X(),d=M("div"),fe(b.$$.fragment),y=X(),fe(w.$$.fragment),j=X(),fe(k.$$.fragment),Y=X(),fe(R.$$.fragment),J=X(),fe(W.$$.fragment),this.h()},l(D){const O=Jt("svelte-2dqrj",document.head);r=F(O,"META",{name:!0,content:!0,class:!0}),n=F(O,"META",{name:!0,content:!0,class:!0}),s=F(O,"META",{property:!0,content:!0,class:!0}),a=F(O,"META",{property:!0,content:!0,class:!0}),l=F(O,"META",{property:!0,content:!0,class:!0}),o=F(O,"META",{property:!0,content:!0,class:!0}),i=F(O,"META",{property:!0,content:!0,class:!0}),c=F(O,"META",{property:!0,content:!0,class:!0}),u=F(O,"META",{property:!0,content:!0,class:!0}),f=F(O,"META",{property:!0,content:!0,class:!0}),v=F(O,"META",{property:!0,content:!0,class:!0}),h=F(O,"META",{property:!0,content:!0,class:!0}),O.forEach(E),m=q(D),d=F(D,"DIV",{class:!0});var I=C(d);me(b.$$.fragment,I),y=q(I),me(w.$$.fragment,I),j=q(I),me(k.$$.fragment,I),Y=q(I),me(R.$$.fragment,I),J=q(I),me(W.$$.fragment,I),I.forEach(E),this.h()},h(){p(r,"name","title"),p(r,"content",Ge),p(r,"class","svelte-z7ouxl"),p(n,"name","description"),p(n,"content",Je),p(n,"class","svelte-z7ouxl"),p(s,"property","og:type"),p(s,"content","website"),p(s,"class","svelte-z7ouxl"),p(a,"property","og:url"),p(a,"content",Et),p(a,"class","svelte-z7ouxl"),p(l,"property","og:title"),p(l,"content",Ge),p(l,"class","svelte-z7ouxl"),p(o,"property","og:description"),p(o,"content",Je),p(o,"class","svelte-z7ouxl"),p(i,"property","og:image"),p(i,"content",Ot),p(i,"class","svelte-z7ouxl"),p(c,"property","twitter:card"),p(c,"content","summary_large_image"),p(c,"class","svelte-z7ouxl"),p(u,"property","twitter:url"),p(u,"content",Et),p(u,"class","svelte-z7ouxl"),p(f,"property","twitter:title"),p(f,"content",Ge),p(f,"class","svelte-z7ouxl"),p(v,"property","twitter:description"),p(v,"content",Je),p(v,"class","svelte-z7ouxl"),p(h,"property","twitter:image"),p(h,"content",Ot),p(h,"class","svelte-z7ouxl"),p(d,"class","grid svelte-z7ouxl")},m(D,O){_(document.head,r),_(document.head,n),_(document.head,s),_(document.head,a),_(document.head,l),_(document.head,o),_(document.head,i),_(document.head,c),_(document.head,u),_(document.head,f),_(document.head,v),_(document.head,h),ce(D,m,O),ce(D,d,O),de(b,d,null),_(d,y),de(w,d,null),_(d,j),de(k,d,null),_(d,Y),de(R,d,null),_(d,J),de(W,d,null),Z=!0},p(D,[O]){(!Z||O&0)&&e!==(e=Ge)&&(document.title=e)},i(D){Z||(ae(b.$$.fragment,D),ae(w.$$.fragment,D),ae(k.$$.fragment,D),ae(R.$$.fragment,D),ae(W.$$.fragment,D),Z=!0)},o(D){se(b.$$.fragment,D),se(w.$$.fragment,D),se(k.$$.fragment,D),se(R.$$.fragment,D),se(W.$$.fragment,D),Z=!1},d(D){E(r),E(n),E(s),E(a),E(l),E(o),E(i),E(c),E(u),E(f),E(v),E(h),D&&E(m),D&&E(d),pe(b),pe(w),pe(k),pe(R),pe(W)}}}const Ge="Jumping Peter",Je="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",Et="https://ksmai.github.io/jumping-peter",Ot="https://ksmai.github.io/jumping-peter/favicon.png";class Ma extends Ie{constructor(e){super(),ke(this,e,null,Ta,Re,{})}}export{Ma as default};
