var Ot=Object.defineProperty;var Bt=(t,e,r)=>e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var we=(t,e,r)=>(Bt(t,typeof e!="symbol"?e+"":e,r),r);import{S as Pe,i as ke,n as Oe,j as k,s as q,q as ie,k as O,l as C,c as V,r as le,g as $,m as d,J as Ue,K as Ae,a as oe,G as g,H as Se,L as Fe,M as Ge,u as Ie,N as wt,y as ue,z as fe,A as me,f as ae,b as se,B as de,I as $e,O as xe,v as bt,d as yt,P as It,e as et,Q as Et,R as Rt,T as Mt,p as Ut,o as Ct,U as tt,V as Dt,w as Nt,W as Lt}from"../chunks/index.1d64faf9.js";import{b as Je,w as qe}from"../chunks/paths.97a47401.js";function jt(t){let e,r,n,s,a,c,l,i,o,u,f,w,v;return{c(){e=k("header"),r=k("img"),s=q(),a=k("h1"),c=ie("Jumping Peter"),l=q(),i=k("p"),o=ie("generate gif emojis"),u=q(),f=k("a"),w=ie("Contribute"),this.h()},l(m){e=O(m,"HEADER",{class:!0});var _=C(e);r=O(_,"IMG",{class:!0,src:!0,alt:!0}),s=V(_),a=O(_,"H1",{class:!0});var b=C(a);c=le(b,"Jumping Peter"),b.forEach($),l=V(_),i=O(_,"P",{class:!0});var p=C(i);o=le(p,"generate gif emojis"),p.forEach($),u=V(_),f=O(_,"A",{class:!0,href:!0,target:!0,rel:!0});var y=C(f);w=le(y,"Contribute"),y.forEach($),_.forEach($),this.h()},h(){d(r,"class","logo svelte-1kpylo8"),Ue(r.src,n=`${Je}/demo-jumping.gif`)||d(r,"src",n),d(r,"alt",""),d(a,"class","title svelte-1kpylo8"),d(i,"class","subtitle svelte-1kpylo8"),d(f,"class","contribute svelte-1kpylo8"),d(f,"href","https://github.com/ksmai/jumping-peter"),d(f,"target","_blank"),d(f,"rel","noreferrer"),d(e,"class",v=Ae(`header ${t[0]}`)+" svelte-1kpylo8")},m(m,_){oe(m,e,_),g(e,r),g(e,s),g(e,a),g(a,c),g(e,l),g(e,i),g(i,o),g(e,u),g(e,f),g(f,w)},p(m,[_]){_&1&&v!==(v=Ae(`header ${m[0]}`)+" svelte-1kpylo8")&&d(e,"class",v)},i:Se,o:Se,d(m){m&&$(e)}}}function Gt(t,e,r){let{class:n=""}=e;return t.$$set=s=>{"class"in s&&r(0,n=s.class)},[n]}class qt extends Pe{constructor(e){super(),ke(this,e,Gt,jt,Oe,{class:0})}}function Qe(t){return{...t,type:"slider",min:-360,max:360,step:1}}function rt(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function He(t){return{...t,type:"slider",min:0,max:1,step:.01}}function at(t){return{...t,type:"slider",min:-1,max:1,step:.01}}function nt(t){return{...t,type:"slider",min:.1,max:5,step:.1}}function st(t){return{...t,type:"slider",min:-1,max:1,step:1}}function Vt(t){return{...t,type:"slider",min:1,max:100,step:1}}function $t(t){return{...t,type:"toggle"}}function Xt(t,e){const r={name:e};for(const n of t)!n||typeof n!="object"||!("name"in n)||typeof n.name!="string"||!("default"in n)||typeof n.default>"u"||(r[n.name]=n.default);return r}function Ve(){return[1,0,0,1,0,0]}function Ze(t,e,r){t[0]*=e,t[2]*=e,t[4]*=e,t[1]*=r,t[3]*=r,t[5]*=r}function At(t,e){const r=e/180*Math.PI,n=Math.cos(r),s=Math.sin(r),[a,c,l,i,o,u]=t;t[0]=a*n-c*s,t[1]=a*s+c*n,t[2]=l*n-i*s,t[3]=l*s+i*n,t[4]=o*n-u*s,t[5]=o*s+u*n}function Be(t,e,r){t[4]+=e,t[5]+=r}function Xe(t){return[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]}function Ce(t,e,r){return t+(e-t)*r}function zt(t){return t*Math.PI/180}const Wt="spinning",Ht={delayMs:50,totalFrames:15},Yt=[Qe({name:"startAngle",default:0}),Qe({name:"endAngle",default:360}),rt({name:"originX",default:0}),rt({name:"originY",default:0}),$t({name:"alternates",default:!1})];function Tt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{alternates:a,startAngle:c,endAngle:l,originX:i,originY:o}=r;return[{program:n,geometry:s,getUniforms:f=>{const w=a?Math.min(f,1-f)*2:f,v=Ce(c,l,w),m=Ve();return Be(m,-i,-o),At(m,v),Be(m,i,o),{u_transform:Xe(m)}}}]}const Qt=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Yt,FrameOptions:Ht,Name:Wt,createSprites:Tt},Symbol.toStringTag,{value:"Module"})),Jt="expanding",Zt={delayMs:50,totalFrames:20},Kt=[nt({name:"minScale",default:1}),nt({name:"maxScale",default:2}),$t({name:"alternates",default:!1})];function Ft(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{minScale:a,maxScale:c,alternates:l}=r;return[{program:n,geometry:s,getUniforms:o=>{const u=l?Math.min(o,1-o)*2:o,f=Ce(a,c,u),w=Ve();return Ze(w,f,f),{u_transform:Xe(w)}}}]}const er=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:Kt,FrameOptions:Zt,Name:Jt,createSprites:Ft},Symbol.toStringTag,{value:"Module"})),tr="extreme-speed",rr={delayMs:20,totalFrames:10},ar=[st({name:"directionX",default:-1}),st({name:"directionY",default:0})];function xt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("sudoku"),{directionX:a,directionY:c}=r,l=a*2,i=c*2;return[{program:n,geometry:s,getUniforms:u=>{const f=Ve(),w=Ce(0,l,u),v=Ce(0,i,u);return Be(f,w,v),{u_transform:Xe(f)}}}]}const nr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:ar,FrameOptions:rr,Name:tr,createSprites:xt},Symbol.toStringTag,{value:"Module"})),sr="excited",ir={delayMs:50,totalFrames:25},lr=[Qe({name:"angle",default:15}),at({name:"startOffset",default:-.1}),at({name:"endOffset",default:.1}),Vt({name:"cycles",default:3})];function St(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{angle:a,cycles:c}=r;let{startOffset:l,endOffset:i}=r;l*=2,i*=2;const o=zt(a),u=Math.cos(o),f=Math.sin(o);return[{program:n,geometry:s,getUniforms:v=>{const m=v*2*c%1,_=Math.min(m,1-m)*2,b=Ce(-l*f,-i*f,_),p=Ce(l*u,i*u,_),y=Ve();return At(y,a),Be(y,b,p),Ze(y,v>.5?-1:1,1),{u_transform:Xe(y)}}}]}const or=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:lr,FrameOptions:ir,Name:sr,createSprites:St},Symbol.toStringTag,{value:"Module"})),cr="jumping",ur={delayMs:50,totalFrames:20},fr=[He({name:"maxOffset",default:.6}),He({name:"compressTime",default:.4}),He({name:"maxCompress",default:.3})];function Pt(t,e,r){const n=t.createProgram("default"),s=e.createGeometry("full"),{maxOffset:a,compressTime:c,maxCompress:l}=r;return[{program:n,geometry:s,getUniforms:o=>{const u=Math.min(o,1-o)*2,f=Ve(),w=u/(1-c);if(w<1){const v=(1-w*w)*a*2;Be(f,0,v)}else{const v=(1-u)/c,_=1-(1-v*v)*l;Be(f,0,1),Ze(f,1/_,_),Be(f,0,-1)}return{u_transform:Xe(f)}}}]}const mr=Object.freeze(Object.defineProperty({__proto__:null,EditOptions:fr,FrameOptions:ur,Name:cr,createSprites:Pt},Symbol.toStringTag,{value:"Module"})),We=[mr,nr,Qt,or,er].map(t=>({name:t.Name,editOptions:t.EditOptions,defaultRenderOptions:Xt(t.EditOptions,t.Name),defaultFrameOptions:t.FrameOptions}));function it(t,e,r){switch(r.name){case"spinning":return Tt(t,e,r);case"expanding":return Ft(t,e,r);case"extreme-speed":return xt(t,e,r);case"excited":return St(t,e,r);case"jumping":return Pt(t,e,r);default:(n=>{throw new Error(`Unknown animation options: ${JSON.stringify(n)}`)})(r)}}class dr{constructor(e){we(this,"loadingUrl",null);we(this,"url",null);we(this,"texture",null);we(this,"unit",0);this.gl=e}async loadImage(e){if(e===this.url)return;this.loadingUrl=e;const n=await(await fetch(e)).blob(),s=await createImageBitmap(n);if(this.loadingUrl!==e)return;const{gl:a}=this;this.texture&&a.deleteTexture(this.texture);const c=a.createTexture();if(!c)throw new Error("Failed to create texture");a.activeTexture(a.TEXTURE0+this.unit),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),this.texture=c,this.url=e}destroy(){this.texture&&this.gl.deleteTexture(this.texture)}}const hr=function(){var t={},e=-1,r,n,s,a,c,l,i=12,o=5003,u,f=i,w,v=1<<i,m=[],_=[],b=o,p=0,y=!1,X,M,W,U=0,J=0,Y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Z,D=[],A=t.LZWEncoder=function(L,x,h,P){r=L,n=x,s=h,a=Math.max(2,P)},R=function(L,x){D[Z++]=L,Z>=254&&ge(x)},ee=function(L){he(b),p=M+2,y=!0,pe(M,L)},he=function(L){for(var x=0;x<L;++x)m[x]=-1},z=t.compress=function(L,x){var h,P,te,H,ce,Q,T;for(X=L,y=!1,u=X,w=_e(u),M=1<<L-1,W=M+1,p=M+2,Z=0,H=be(),T=0,h=b;h<65536;h*=2)++T;T=8-T,Q=b,he(Q),pe(M,x);e:for(;(te=be())!=e;){if(h=(te<<f)+H,P=te<<T^H,m[P]==h){H=_[P];continue}else if(m[P]>=0){ce=Q-P,P===0&&(ce=1);do if((P-=ce)<0&&(P+=Q),m[P]==h){H=_[P];continue e}while(m[P]>=0)}pe(H,x),H=te,p<v?(_[P]=p++,m[P]=h):ee(x)}pe(H,x),pe(W,x)};t.encode=function(L){L.writeByte(a),c=r*n,l=0,z(a+1,L),L.writeByte(0)};var ge=function(L){Z>0&&(L.writeByte(Z),L.writeBytes(D,0,Z),Z=0)},_e=function(L){return(1<<L)-1},be=function(){if(c===0)return e;--c;var L=s[l++];return L&255},pe=function(L,x){for(U&=Y[J],J>0?U|=L<<J:U=L,J+=u;J>=8;)R(U&255,x),U>>=8,J-=8;if((p>w||y)&&(y?(w=_e(u=X),y=!1):(++u,u==f?w=v:w=_e(u))),L==W){for(;J>0;)R(U&255,x),U>>=8,J-=8;ge(x)}};return A.apply(this,arguments),t},pr=function(){var t={},e=256,r=499,n=491,s=487,a=503,c=3*a,l=e-1,i=4,o=100,u=16,f=1<<u,w=10,v=10,m=f>>v,_=f<<w-v,b=e>>3,p=6,y=1<<p,X=b*y,M=30,W=10,U=1<<W,J,Y=8,Z=1<<Y,D=W+Y,A=1<<D,R,ee,he,z,ge=[],_e=[],be=[],pe=[],ne=t.NeuQuant=function(T,S,j){var B,I;for(R=T,ee=S,he=j,z=new Array(e),B=0;B<e;B++)z[B]=new Array(4),I=z[B],I[0]=I[1]=I[2]=(B<<i+8)/e,be[B]=f/e,_e[B]=0},L=function(){for(var T=[],S=new Array(e),j=0;j<e;j++)S[z[j][3]]=j;for(var B=0,I=0;I<e;I++){var E=S[I];T[B++]=z[E][0],T[B++]=z[E][1],T[B++]=z[E][2]}return T},x=function(){var T,S,j,B,I,E,F,N;for(F=0,N=0,T=0;T<e;T++){for(I=z[T],j=T,B=I[1],S=T+1;S<e;S++)E=z[S],E[1]<B&&(j=S,B=E[1]);if(E=z[j],T!=j&&(S=E[0],E[0]=I[0],I[0]=S,S=E[1],E[1]=I[1],I[1]=S,S=E[2],E[2]=I[2],I[2]=S,S=E[3],E[3]=I[3],I[3]=S),B!=F){for(ge[F]=N+T>>1,S=F+1;S<B;S++)ge[S]=T;F=B,N=T}}for(ge[F]=N+l>>1,S=F+1;S<256;S++)ge[S]=l},h=function(){var T,S,j,B,I,E,F,N,G,re,ye,K,ve,Ke;for(ee<c&&(he=1),J=30+(he-1)/3,K=R,ve=0,Ke=ee,ye=ee/(3*he),re=ye/o|0,N=U,E=X,F=E>>p,F<=1&&(F=0),T=0;T<F;T++)pe[T]=N*((F*F-T*T)*Z/(F*F));for(ee<c?G=3:ee%r!==0?G=3*r:ee%n!==0?G=3*n:ee%s!==0?G=3*s:G=3*a,T=0;T<ye;)if(j=(K[ve+0]&255)<<i,B=(K[ve+1]&255)<<i,I=(K[ve+2]&255)<<i,S=ce(j,B,I),H(N,S,j,B,I),F!==0&&te(F,S,j,B,I),ve+=G,ve>=Ke&&(ve-=ee),T++,re===0&&(re=1),T%re===0)for(N-=N/J,E-=E/M,F=E>>p,F<=1&&(F=0),S=0;S<F;S++)pe[S]=N*((F*F-S*S)*Z/(F*F))};t.map=function(T,S,j){var B,I,E,F,N,G,re;for(N=1e3,re=-1,B=ge[S],I=B-1;B<e||I>=0;)B<e&&(G=z[B],E=G[1]-S,E>=N?B=e:(B++,E<0&&(E=-E),F=G[0]-T,F<0&&(F=-F),E+=F,E<N&&(F=G[2]-j,F<0&&(F=-F),E+=F,E<N&&(N=E,re=G[3])))),I>=0&&(G=z[I],E=S-G[1],E>=N?I=-1:(I--,E<0&&(E=-E),F=G[0]-T,F<0&&(F=-F),E+=F,E<N&&(F=G[2]-j,F<0&&(F=-F),E+=F,E<N&&(N=E,re=G[3]))));return re},t.process=function(){return h(),P(),x(),L()};var P=function(){var T;for(T=0;T<e;T++)z[T][0]>>=i,z[T][1]>>=i,z[T][2]>>=i,z[T][3]=T},te=function(T,S,j,B,I){var E,F,N,G,re,ye,K;for(N=S-T,N<-1&&(N=-1),G=S+T,G>e&&(G=e),E=S+1,F=S-1,ye=1;E<G||F>N;){if(re=pe[ye++],E<G){K=z[E++];try{K[0]-=re*(K[0]-j)/A,K[1]-=re*(K[1]-B)/A,K[2]-=re*(K[2]-I)/A}catch{}}if(F>N){K=z[F--];try{K[0]-=re*(K[0]-j)/A,K[1]-=re*(K[1]-B)/A,K[2]-=re*(K[2]-I)/A}catch{}}}},H=function(T,S,j,B,I){var E=z[S];E[0]-=T*(E[0]-j)/U,E[1]-=T*(E[1]-B)/U,E[2]-=T*(E[2]-I)/U},ce=function(T,S,j){var B,I,E,F,N,G,re,ye,K,ve;for(ye=~(1<<31),K=ye,G=-1,re=G,B=0;B<e;B++)ve=z[B],I=ve[0]-T,I<0&&(I=-I),E=ve[1]-S,E<0&&(E=-E),I+=E,E=ve[2]-j,E<0&&(E=-E),I+=E,I<ye&&(ye=I,G=B),F=I-(_e[B]>>u-i),F<K&&(K=F,re=B),N=be[B]>>v,be[B]-=N,_e[B]+=N<<w;return be[G]+=m,_e[G]-=_,re};return ne.apply(this,arguments),t},vr=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function r(){this.bin=[]}r.prototype.getData=function(){for(var x="",h=this.bin.length,P=0;P<h;P++)x+=e[this.bin[P]];return x},r.prototype.writeByte=function(x){this.bin.push(x)},r.prototype.writeUTFBytes=function(x){for(var h=x.length,P=0;P<h;P++)this.writeByte(x.charCodeAt(P))},r.prototype.writeBytes=function(x,h,P){for(var te=P||x.length,H=h||0;H<te;H++)this.writeByte(x[H])};var n={},s,a,c=null,l,i=-1,o=0,u=!1,f,w,v,m,_,b,p=[],y=7,X=-1,M=!1,W=!0,U=!1,J=10,Y="Generated by jsgif (https://github.com/antimatter15/jsgif/)";n.setDelay=function(h){o=Math.round(h/10)},n.setDispose=function(h){h>=0&&(X=h)},n.setRepeat=function(h){h>=0&&(i=h)},n.setTransparent=function(h){c=h},n.setComment=function(h){Y=h},n.addFrame=function(h,P){if(h===null||!u||f===null)throw new Error("Please call start method before calling addFrame");var te=!0;try{P?h instanceof ImageData?(w=h.data,(!sizeset||s!=h.width||a!=h.height)&&D(h.width,h.height)):h instanceof Uint8ClampedArray?h.length==s*a*4?w=h:(console.log("Please set the correct size: ImageData length mismatch"),te=!1):(console.log("Please provide correct input"),te=!1):(w=h.getImageData(0,0,h.canvas.width,h.canvas.height).data,U||D(h.canvas.width,h.canvas.height)),ee(),A(),W&&(_e(),pe(),i>=0&&be()),he(),Y!==""&&z(),ge(),W||pe(),L(),W=!1}catch{te=!1}return te},n.download=function(h){if(f===null||M==!1)console.log("Please call start method and add frames and call finish method before calling download");else{h=h!==void 0?h.endsWith(".gif")?h:h+".gif":"download.gif";var P=document.createElement("a");P.download=h,P.href=URL.createObjectURL(new Blob([new Uint8Array(f.bin)],{type:"image/gif"})),P.click()}},n.finish=function(){if(!u)return!1;var h=!0;u=!1;try{f.writeByte(59),M=!0}catch{h=!1}return h};var Z=function(){l=0,w=null,v=null,m=null,b=null,M=!1,W=!0};n.setFrameRate=function(h){h!=15&&(o=Math.round(100/h))},n.setQuality=function(h){h<1&&(h=1),J=h};var D=n.setSize=function(h,P){u&&!W||(s=h,a=P,s<1&&(s=320),a<1&&(a=240),U=!0)};n.start=function(){Z();var h=!0;M=!1,f=new r;try{f.writeUTFBytes("GIF89a")}catch{h=!1}return u=h},n.cont=function(){Z();var h=!0;return M=!1,f=new r,u=h};var A=function(){var h=v.length,P=h/3;m=[];var te=new pr(v,h,J);b=te.process();for(var H=0,ce=0;ce<P;ce++){var Q=te.map(v[H++]&255,v[H++]&255,v[H++]&255);p[Q]=!0,m[ce]=Q}v=null,_=8,y=7,c!==null&&(l=R(c))},R=function(h){if(b===null)return-1;for(var P=(h&16711680)>>16,te=(h&65280)>>8,H=h&255,ce=0,Q=256*256*256,T=b.length,S=0;S<T;){var j=P-(b[S++]&255),B=te-(b[S++]&255),I=H-(b[S]&255),E=j*j+B*B+I*I,F=S/3;p[F]&&E<Q&&(Q=E,ce=F),S++}return ce},ee=function(){var h=s,P=a;v=[];for(var te=w,H=0,ce=0;ce<P;ce++)for(var Q=0;Q<h;Q++){var T=ce*h*4+Q*4;v[H++]=te[T],v[H++]=te[T+1],v[H++]=te[T+2]}},he=function(){f.writeByte(33),f.writeByte(249),f.writeByte(4);var h,P;c===null?(h=0,P=0):(h=1,P=2),X>=0&&(P=X&7),P<<=2,f.writeByte(0|P|0|h),ne(o),f.writeByte(l),f.writeByte(0)},z=function(){f.writeByte(33),f.writeByte(254),f.writeByte(Y.length),f.writeUTFBytes(Y),f.writeByte(0)},ge=function(){f.writeByte(44),ne(0),ne(0),ne(s),ne(a),W?f.writeByte(0):f.writeByte(128|y)},_e=function(){ne(s),ne(a),f.writeByte(240|y),f.writeByte(0),f.writeByte(0)},be=function(){f.writeByte(33),f.writeByte(255),f.writeByte(11),f.writeUTFBytes("NETSCAPE2.0"),f.writeByte(3),f.writeByte(1),ne(i),f.writeByte(0)},pe=function(){f.writeBytes(b);for(var h=3*256-b.length,P=0;P<h;P++)f.writeByte(0)},ne=function(h){f.writeByte(h&255),f.writeByte(h>>8&255)},L=function(){var h=new hr(s,a,m,_);h.encode(f)};return n.stream=function(){return f},n.setProperties=function(h,P){u=h,W=P},n},Re={a_position:0,a_texCoords:1},lt={default:{vertex:`#version 300 es

layout(location = ${Re.a_position}) in vec2 a_position;
layout(location = ${Re.a_texCoords}) in vec2 a_texCoords;

uniform mat3 u_transform;

out vec2 v_texCoords;

void main() {
  vec3 pos = u_transform * vec3(a_position, 1.0);
  // flip y coordinate because readPixels() will invert the image again
  gl_Position = vec4(pos.x, -pos.y, 0.0, 1.0);
  v_texCoords = a_texCoords;
}
    `,fragment:`#version 300 es
precision highp float;

in vec2 v_texCoords;

uniform sampler2D u_image;

out vec4 outColor;

void main() {
  outColor = texture(u_image, v_texCoords);
}
    `}};class gr{constructor(e){we(this,"programs",{});this.gl=e}createProgram(e){let r=this.programs[e];return r||(r=this.programs[e]={program:wr(this.gl,lt[e].vertex,lt[e].fragment),uniformLocations:{}}),r}destroy(){for(const e of Object.values(this.programs))this.gl.deleteProgram(e.program)}}function _r(t,e,r){for(const[n,s]of Object.entries(r)){n in e.uniformLocations||(e.uniformLocations[n]=t.getUniformLocation(e.program,n));const a=e.uniformLocations[n];n==="u_image"&&typeof s=="number"?t.uniform1i(a,s):Array.isArray(s)?s.length===2?t.uniform2fv(a,s):s.length===3?t.uniform3fv(a,s):s.length===4?t.uniform4fv(a,s):s.length===9?t.uniformMatrix3fv(a,!1,s):s.length===16&&t.uniformMatrix4fv(a,!1,s):typeof s=="number"&&t.uniform1f(a,s)}}function wr(t,e,r){const n=ot(t,t.VERTEX_SHADER,e);let s;try{s=ot(t,t.FRAGMENT_SHADER,r)}catch(c){throw t.deleteShader(n),c}const a=t.createProgram();if(a===null)throw t.deleteShader(s),t.deleteShader(n),new Error("Failed to create program");if(t.attachShader(a,n),t.attachShader(a,s),t.linkProgram(a),t.detachShader(a,s),t.detachShader(a,n),t.deleteShader(s),t.deleteShader(n),!t.getProgramParameter(a,t.LINK_STATUS)){const c=t.getProgramInfoLog(a);throw t.deleteProgram(a),new Error(`Failed to link program: ${c}`)}return a}function ot(t,e,r){const n=t.createShader(e);if(n===null)throw new Error(`Failed to create shader: ${e}`);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){const s=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error(`Failed to compile shader: ${s}`)}return n}function ct(t,e,r,n,s){t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(...s),t.clear(t.COLOR_BUFFER_BIT);let a,c,l;for(const i of r){a!==i.program&&(t.useProgram(i.program.program),a=i.program),c!==i.geometry&&(t.bindVertexArray(i.geometry.vao),c=i.geometry),l!==n&&(t.activeTexture(t.TEXTURE0+n.unit),t.bindTexture(t.TEXTURE_2D,n.texture),l=n);const o={u_image:n.unit,...i.getUniforms(e)};_r(t,i.program,o),t.drawArrays(i.geometry.drawMode,0,i.geometry.drawCount)}}function br(t,e){const r=t.createVertexArray();if(r===null)throw new Error("Failed to create vertex array");const n=t.createBuffer();if(!n)throw t.deleteVertexArray(r),new Error("Failed to create buffer");return t.bindVertexArray(r),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.enableVertexAttribArray(Re.a_position),t.vertexAttribPointer(Re.a_position,2,t.FLOAT,!1,4*4,0),t.enableVertexAttribArray(Re.a_texCoords),t.vertexAttribPointer(Re.a_texCoords,2,t.FLOAT,!1,4*4,2*4),t.bindVertexArray(null),{vao:r,vbo:n,drawMode:t.TRIANGLE_STRIP,drawCount:4}}const yr={full:[-1,-1,0,1,1,-1,1,1,-1,1,0,0,1,1,1,0],sudoku:[-3,-3,0,3,3,-3,3,3,-3,3,0,0,3,3,3,0]};class Er{constructor(e){we(this,"geometries",{});this.gl=e}createGeometry(e){let r=this.geometries[e];return r||(r=this.geometries[e]=br(this.gl,yr[e])),r}destroy(){for(const e of Object.values(this.geometries))this.gl.deleteVertexArray(e.vao),this.gl.deleteBuffer(e.vbo)}}class $r{constructor(e){we(this,"gl");we(this,"programFactory");we(this,"geometryFactory");we(this,"texture");we(this,"queue",[]);we(this,"animationFrame",null);this.canvas=e;const r=e.getContext("webgl2");if(!r)throw new Error("webgl2 is not supported");this.gl=r,this.programFactory=new gr(this.gl),this.geometryFactory=new Er(this.gl),this.texture=new dr(this.gl)}animate(e,r){return new Promise((n,s)=>{const a=new vr;if(a.setRepeat(0),a.setDelay(e.frame.delayMs),a.setSize(e.image.width,e.image.height),!a.start()){s("Failed to start gif encoder");return}this.queue.push({type:"gif",request:e,resolve:n,reject:s,frame:0,sprites:it(this.programFactory,this.geometryFactory,e.animation),callback:r,encoder:a}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}renderFrame(e,r){return new Promise((n,s)=>{this.queue.push({type:"frame",request:e,resolve:n,reject:s,frame:r,sprites:it(this.programFactory,this.geometryFactory,e.animation)}),this.animationFrame===null&&(this.animationFrame=requestAnimationFrame(()=>this.processLoop()))})}async processLoop(){if(this.queue.length===0){this.animationFrame=null;return}if(this.queue.length>1){for(let l=0;l<this.queue.length-1;++l)this.queue[l].reject(new Error("Request cancelled"));this.queue.splice(0,this.queue.length-1)}const{type:e,request:r,resolve:n,sprites:s,frame:a}=this.queue[0];(e==="frame"||e==="gif"&&this.queue[0].frame===0)&&(await this.texture.loadImage(r.image.url),this.canvas.width=r.image.width,this.canvas.height=r.image.height);const c=[r.image.clearRed,r.image.clearGreen,r.image.clearBlue,1];if(e==="frame")ct(this.gl,a/r.frame.totalFrames,s,this.texture,c),n(),this.queue.shift(),this.animationFrame=null;else{const{encoder:l,sprites:i,callback:o}=this.queue[0];ct(this.gl,a/r.frame.totalFrames,i,this.texture,c),o(a);const u=new Uint8ClampedArray(this.gl.drawingBufferWidth*this.gl.drawingBufferHeight*4);if(this.gl.readPixels(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,this.gl.RGBA,this.gl.UNSIGNED_BYTE,u),l.addFrame(u,!0),l.setTransparent(16777215),a===r.frame.totalFrames-1){l.finish();const f=l.stream().getData(),w="data:image/gif;base64,"+window.btoa(f);n({dataUri:w}),this.queue.shift(),this.animationFrame=null}else this.queue[0].frame+=1,this.animationFrame=requestAnimationFrame(()=>this.processLoop())}}destroy(){this.programFactory.destroy(),this.geometryFactory.destroy(),this.texture.destroy(),this.animationFrame!==null&&window.cancelAnimationFrame(this.animationFrame)}}const De=function(){const{subscribe:t,update:e}=qe(We[0]);return{subscribe:t,change:n=>{e(s=>{if(n===s.name)return s;const a=We.find(c=>c.name===n);return a||s})}}}(),Ee=function(){const t=`${Je}/favicon.png`,{subscribe:e,update:r}=qe({width:64,height:64,url:t,clearRed:1,clearBlue:1,clearGreen:1});function n(a){r(c=>({...c,...a}))}function s(a){r(c=>(c.url!==t&&URL.revokeObjectURL(c.url),{...c,url:URL.createObjectURL(a)}))}return{subscribe:e,change:n,changeImage:s}}(),Me=function(){const{subscribe:t,update:e}=qe(void 0,n=>De.subscribe(a=>{n(a.defaultFrameOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),je=function(){const{subscribe:t,update:e}=qe(void 0,n=>De.subscribe(a=>{n(a.defaultRenderOptions)}));function r(n){e(s=>({...s,...n}))}return{subscribe:t,change:r}}(),Ne=function(){const t=qe({animator:null,running:!1,frame:0}),{subscribe:e,update:r}=t;function n(c){r(l=>{var i;return(i=l.animator)==null||i.destroy(),{animator:new $r(c),running:!1,frame:0}})}function s(){const{animator:c}=Fe(t);return c?(r(l=>({...l,running:!0,frame:0})),c.animate({image:Fe(Ee),frame:Fe(Me),animation:Fe(je)},l=>r(i=>({...i,frame:l}))).finally(()=>{r(l=>({...l,running:!1}))})):Promise.reject("Animator has not been created")}function a(c){const{animator:l,frame:i}=Fe(t);if(!l)return Promise.reject("Animator has not been created");let o;typeof c>"u"?o=i:o=c;const u=Fe(Me);return o>=u.totalFrames&&(o=u.totalFrames-1),r(f=>({...f,frame:o,running:!0})),l.renderFrame({image:Fe(Ee),frame:u,animation:Fe(je)},o).finally(()=>{r(f=>({...f,running:!1}))})}return{subscribe:e,changeCanvas:n,animate:s,renderFrame:a}}();function ut(t){let e,r,n,s,a,c;return{c(){e=k("label"),r=ie(t[1]),n=q(),s=k("input"),this.h()},l(l){e=O(l,"LABEL",{class:!0});var i=C(e);r=le(i,t[1]),n=V(i),s=O(i,"INPUT",{class:!0,type:!0}),i.forEach($),this.h()},h(){d(s,"class","slider__text-input svelte-xvphrk"),d(s,"type","text"),s.value=t[0],d(e,"class","slider__label svelte-xvphrk")},m(l,i){oe(l,e,i),g(e,r),g(e,n),g(e,s),a||(c=Ge(s,"input",t[5]),a=!0)},p(l,i){i&2&&Ie(r,l[1]),i&1&&s.value!==l[0]&&(s.value=l[0])},d(l){l&&$(e),a=!1,c()}}}function Ar(t){let e,r,n,s,a=ze(t[2])+"",c,l,i,o,u,f,w=ze(t[3])+"",v,m,_,b=t[1]&&ut(t);return{c(){e=k("div"),b&&b.c(),r=q(),n=k("div"),s=k("span"),c=ie(a),l=q(),i=k("div"),o=k("input"),u=q(),f=k("span"),v=ie(w),this.h()},l(p){e=O(p,"DIV",{class:!0});var y=C(e);b&&b.l(y),r=V(y),n=O(y,"DIV",{class:!0});var X=C(n);s=O(X,"SPAN",{class:!0});var M=C(s);c=le(M,a),M.forEach($),l=V(X),i=O(X,"DIV",{class:!0});var W=C(i);o=O(W,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),W.forEach($),u=V(X),f=O(X,"SPAN",{class:!0});var U=C(f);v=le(U,w),U.forEach($),X.forEach($),y.forEach($),this.h()},h(){d(s,"class","slider__range slider__range--min svelte-xvphrk"),d(o,"class","slider__input svelte-xvphrk"),d(o,"type","range"),d(o,"min",t[2]),d(o,"max",t[3]),d(o,"step",t[4]),o.value=t[0],d(i,"class","slider__input-container svelte-xvphrk"),d(f,"class","slider__range slider__range--max svelte-xvphrk"),d(n,"class","slider__container svelte-xvphrk"),d(e,"class","slider")},m(p,y){oe(p,e,y),b&&b.m(e,null),g(e,r),g(e,n),g(n,s),g(s,c),g(n,l),g(n,i),g(i,o),g(n,u),g(n,f),g(f,v),m||(_=Ge(o,"input",t[5]),m=!0)},p(p,[y]){p[1]?b?b.p(p,y):(b=ut(p),b.c(),b.m(e,r)):b&&(b.d(1),b=null),y&4&&a!==(a=ze(p[2])+"")&&Ie(c,a),y&4&&d(o,"min",p[2]),y&8&&d(o,"max",p[3]),y&16&&d(o,"step",p[4]),y&1&&(o.value=p[0]),y&8&&w!==(w=ze(p[3])+"")&&Ie(v,w)},i:Se,o:Se,d(p){p&&$(e),b&&b.d(),m=!1,_()}}}function ze(t){return t.toFixed(2).replace(/\.?0+$/,"")}function Tr(t,e,r){const n=wt();let{label:s=""}=e,{min:a=0}=e,{max:c=100}=e,{step:l=1}=e,{value:i=c<a?a:(c-a)/2}=e;function o(u){const f=u.target,w=parseFloat(f.value);Number.isNaN(w)||(r(0,i=w),n("input",{value:i}))}return t.$$set=u=>{"label"in u&&r(1,s=u.label),"min"in u&&r(2,a=u.min),"max"in u&&r(3,c=u.max),"step"in u&&r(4,l=u.step),"value"in u&&r(0,i=u.value)},[i,s,a,c,l,o]}class Te extends Pe{constructor(e){super(),ke(this,e,Tr,Ar,Oe,{label:1,min:2,max:3,step:4,value:0})}}function Fr(t){let e,r,n,s,a,c,l,i,o,u,f,w,v,m,_,b,p,y,X,M,W,U,J,Y,Z,D;return u=new Te({props:{label:"width",min:1,max:1024,step:1,value:t[1].width}}),u.$on("input",t[4]),w=new Te({props:{label:"height",min:1,max:1024,step:1,value:t[1].height}}),w.$on("input",t[5]),m=new Te({props:{label:"clearRed",min:0,max:1,step:.01,value:t[1].clearRed}}),m.$on("input",t[6]),b=new Te({props:{label:"clearGreen",min:0,max:1,step:.01,value:t[1].clearGreen}}),b.$on("input",t[7]),y=new Te({props:{label:"clearBlue",min:0,max:1,step:.01,value:t[1].clearBlue}}),y.$on("input",t[8]),M=new Te({props:{label:"delayMs",min:20,max:1e3,step:10,value:t[2].delayMs}}),M.$on("input",t[9]),U=new Te({props:{label:"totalFrames",min:1,max:1e3,step:1,value:t[2].totalFrames}}),U.$on("input",t[10]),{c(){e=k("aside"),r=k("label"),n=ie(`Upload image

    `),s=k("input"),a=q(),c=k("div"),l=k("img"),o=q(),ue(u.$$.fragment),f=q(),ue(w.$$.fragment),v=q(),ue(m.$$.fragment),_=q(),ue(b.$$.fragment),p=q(),ue(y.$$.fragment),X=q(),ue(M.$$.fragment),W=q(),ue(U.$$.fragment),this.h()},l(A){e=O(A,"ASIDE",{class:!0});var R=C(e);r=O(R,"LABEL",{class:!0});var ee=C(r);n=le(ee,`Upload image

    `),s=O(ee,"INPUT",{class:!0,type:!0,accept:!0}),a=V(ee),c=O(ee,"DIV",{class:!0});var he=C(c);l=O(he,"IMG",{class:!0,src:!0,alt:!0}),he.forEach($),ee.forEach($),o=V(R),fe(u.$$.fragment,R),f=V(R),fe(w.$$.fragment,R),v=V(R),fe(m.$$.fragment,R),_=V(R),fe(b.$$.fragment,R),p=V(R),fe(y.$$.fragment,R),X=V(R),fe(M.$$.fragment,R),W=V(R),fe(U.$$.fragment,R),R.forEach($),this.h()},h(){d(s,"class","image__input svelte-1wsjlr5"),d(s,"type","file"),d(s,"accept","image/*"),d(l,"class","image__preview svelte-1wsjlr5"),Ue(l.src,i=t[1].url)||d(l,"src",i),d(l,"alt","source"),d(c,"class","image__container svelte-1wsjlr5"),d(r,"class","image svelte-1wsjlr5"),d(e,"class",J=Ae(`container ${t[0]}`)+" svelte-1wsjlr5")},m(A,R){oe(A,e,R),g(e,r),g(r,n),g(r,s),g(r,a),g(r,c),g(c,l),g(e,o),me(u,e,null),g(e,f),me(w,e,null),g(e,v),me(m,e,null),g(e,_),me(b,e,null),g(e,p),me(y,e,null),g(e,X),me(M,e,null),g(e,W),me(U,e,null),Y=!0,Z||(D=Ge(s,"input",t[3]),Z=!0)},p(A,[R]){(!Y||R&2&&!Ue(l.src,i=A[1].url))&&d(l,"src",i);const ee={};R&2&&(ee.value=A[1].width),u.$set(ee);const he={};R&2&&(he.value=A[1].height),w.$set(he);const z={};R&2&&(z.value=A[1].clearRed),m.$set(z);const ge={};R&2&&(ge.value=A[1].clearGreen),b.$set(ge);const _e={};R&2&&(_e.value=A[1].clearBlue),y.$set(_e);const be={};R&4&&(be.value=A[2].delayMs),M.$set(be);const pe={};R&4&&(pe.value=A[2].totalFrames),U.$set(pe),(!Y||R&1&&J!==(J=Ae(`container ${A[0]}`)+" svelte-1wsjlr5"))&&d(e,"class",J)},i(A){Y||(ae(u.$$.fragment,A),ae(w.$$.fragment,A),ae(m.$$.fragment,A),ae(b.$$.fragment,A),ae(y.$$.fragment,A),ae(M.$$.fragment,A),ae(U.$$.fragment,A),Y=!0)},o(A){se(u.$$.fragment,A),se(w.$$.fragment,A),se(m.$$.fragment,A),se(b.$$.fragment,A),se(y.$$.fragment,A),se(M.$$.fragment,A),se(U.$$.fragment,A),Y=!1},d(A){A&&$(e),de(u),de(w),de(m),de(b),de(y),de(M),de(U),Z=!1,D()}}}function xr(t,e,r){let n,s;$e(t,Ee,m=>r(1,n=m)),$e(t,Me,m=>r(2,s=m));let{class:a=""}=e;function c(m){var p;const b=(p=m.target.files)==null?void 0:p[0];b&&Ee.changeImage(b)}const l=m=>Ee.change({width:m.detail.value}),i=m=>Ee.change({height:m.detail.value}),o=m=>Ee.change({clearRed:m.detail.value}),u=m=>Ee.change({clearGreen:m.detail.value}),f=m=>Ee.change({clearBlue:m.detail.value}),w=m=>Me.change({delayMs:m.detail.value}),v=m=>Me.change({totalFrames:m.detail.value});return t.$$set=m=>{"class"in m&&r(0,a=m.class)},[a,n,s,c,l,i,o,u,f,w,v]}class Sr extends Pe{constructor(e){super(),ke(this,e,xr,Fr,Oe,{class:0})}}function Pr(t){let e,r,n,s,a,c,l;return{c(){e=k("div"),r=ie(t[1]),n=q(),s=k("label"),a=k("input"),this.h()},l(i){e=O(i,"DIV",{class:!0});var o=C(e);r=le(o,t[1]),n=V(o),s=O(o,"LABEL",{class:!0});var u=C(s);a=O(u,"INPUT",{class:!0,type:!0}),u.forEach($),o.forEach($),this.h()},h(){d(a,"class","toggle__checkbox svelte-1j9rfin"),d(a,"type","checkbox"),a.checked=t[0],d(s,"class","toggle__label svelte-1j9rfin"),xe(s,"toggle__label--active",t[0]),d(e,"class","toggle svelte-1j9rfin")},m(i,o){oe(i,e,o),g(e,r),g(e,n),g(e,s),g(s,a),c||(l=Ge(a,"change",t[2]),c=!0)},p(i,[o]){o&2&&Ie(r,i[1]),o&1&&(a.checked=i[0]),o&1&&xe(s,"toggle__label--active",i[0])},i:Se,o:Se,d(i){i&&$(e),c=!1,l()}}}function kr(t,e,r){const n=wt();let{label:s=""}=e,{value:a=!1}=e;function c(l){const i=l.target;r(0,a=Boolean(i.checked)),n("change",{value:a})}return t.$$set=l=>{"label"in l&&r(1,s=l.label),"value"in l&&r(0,a=l.value)},[a,s,c]}class kt extends Pe{constructor(e){super(),ke(this,e,kr,Pr,Oe,{label:1,value:0})}}function ft(t,e,r){const n=t.slice();return n[5]=e[r],n}function Or(t){let e,r;return e=new kt({props:{label:t[5].name,value:t[1][t[5].name]}}),e.$on("change",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function Br(t){let e,r;return e=new Te({props:{label:t[5].name,min:t[5].min,max:t[5].max,step:t[5].step,value:t[1][t[5].name]}}),e.$on("input",function(){Et(t[3](t[5].name))&&t[3](t[5].name).apply(this,arguments)}),{c(){ue(e.$$.fragment)},l(n){fe(e.$$.fragment,n)},m(n,s){me(e,n,s),r=!0},p(n,s){t=n;const a={};s&4&&(a.label=t[5].name),s&4&&(a.min=t[5].min),s&4&&(a.max=t[5].max),s&4&&(a.step=t[5].step),s&6&&(a.value=t[1][t[5].name]),e.$set(a)},i(n){r||(ae(e.$$.fragment,n),r=!0)},o(n){se(e.$$.fragment,n),r=!1},d(n){de(e,n)}}}function mt(t){let e,r,n,s;const a=[Br,Or],c=[];function l(i,o){return i[5].type==="slider"?0:i[5].type==="toggle"?1:-1}return~(e=l(t))&&(r=c[e]=a[e](t)),{c(){r&&r.c(),n=et()},l(i){r&&r.l(i),n=et()},m(i,o){~e&&c[e].m(i,o),oe(i,n,o),s=!0},p(i,o){let u=e;e=l(i),e===u?~e&&c[e].p(i,o):(r&&(bt(),se(c[u],1,1,()=>{c[u]=null}),yt()),~e?(r=c[e],r?r.p(i,o):(r=c[e]=a[e](i),r.c()),ae(r,1),r.m(n.parentNode,n)):r=null)},i(i){s||(ae(r),s=!0)},o(i){se(r),s=!1},d(i){~e&&c[e].d(i),i&&$(n)}}}function Ir(t){let e,r,n,s=t[2].editOptions,a=[];for(let l=0;l<s.length;l+=1)a[l]=mt(ft(t,s,l));const c=l=>se(a[l],1,1,()=>{a[l]=null});return{c(){e=k("aside");for(let l=0;l<a.length;l+=1)a[l].c();this.h()},l(l){e=O(l,"ASIDE",{class:!0});var i=C(e);for(let o=0;o<a.length;o+=1)a[o].l(i);i.forEach($),this.h()},h(){d(e,"class",r=Ae(`container ${t[0]}`)+" svelte-1solget")},m(l,i){oe(l,e,i);for(let o=0;o<a.length;o+=1)a[o].m(e,null);n=!0},p(l,[i]){if(i&14){s=l[2].editOptions;let o;for(o=0;o<s.length;o+=1){const u=ft(l,s,o);a[o]?(a[o].p(u,i),ae(a[o],1)):(a[o]=mt(u),a[o].c(),ae(a[o],1),a[o].m(e,null))}for(bt(),o=s.length;o<a.length;o+=1)c(o);yt()}(!n||i&1&&r!==(r=Ae(`container ${l[0]}`)+" svelte-1solget"))&&d(e,"class",r)},i(l){if(!n){for(let i=0;i<s.length;i+=1)ae(a[i]);n=!0}},o(l){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)se(a[i]);n=!1},d(l){l&&$(e),It(a,l)}}}function Rr(t,e,r){let n,s,a;$e(t,je,i=>r(4,s=i)),$e(t,De,i=>r(2,a=i));let{class:c=""}=e;function l(i){return function(o){je.change({[i]:o.detail.value})}}return t.$$set=i=>{"class"in i&&r(0,c=i.class)},t.$$.update=()=>{t.$$.dirty&16&&r(1,n=s)},[c,n,a,l,s]}class Mr extends Pe{constructor(e){super(),ke(this,e,Rr,Ir,Oe,{class:0})}}function dt(t,e,r){const n=t.slice();return n[4]=e[r].name,n}function ht(t,e){let r,n,s,a,c,l=e[4]+"",i,o,u,f;function w(){return e[3](e[4])}return{key:t,first:null,c(){r=k("button"),n=k("img"),a=q(),c=k("span"),i=ie(l),o=q(),this.h()},l(v){r=O(v,"BUTTON",{type:!0,class:!0});var m=C(r);n=O(m,"IMG",{class:!0,src:!0,alt:!0}),a=V(m),c=O(m,"SPAN",{});var _=C(c);i=le(_,l),_.forEach($),o=V(m),m.forEach($),this.h()},h(){d(n,"class","image svelte-18ktnr0"),Ue(n.src,s=`${Je}/demo-${e[4]}.gif`)||d(n,"src",s),d(n,"alt",e[4]),d(r,"type","button"),d(r,"class","option svelte-18ktnr0"),xe(r,"option--selected",e[4]===e[1].name),this.first=r},m(v,m){oe(v,r,m),g(r,n),g(r,a),g(r,c),g(c,i),g(r,o),u||(f=Ge(r,"click",w),u=!0)},p(v,m){e=v,m&2&&xe(r,"option--selected",e[4]===e[1].name)},d(v){v&&$(r),u=!1,f()}}}function Ur(t){let e,r=[],n=new Map,s,a=We;const c=l=>l[4];for(let l=0;l<a.length;l+=1){let i=dt(t,a,l),o=c(i);n.set(o,r[l]=ht(o,i))}return{c(){e=k("aside");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=O(l,"ASIDE",{class:!0});var i=C(e);for(let o=0;o<r.length;o+=1)r[o].l(i);i.forEach($),this.h()},h(){d(e,"class",s=Ae(`container ${t[0]}`)+" svelte-18ktnr0")},m(l,i){oe(l,e,i);for(let o=0;o<r.length;o+=1)r[o].m(e,null)},p(l,[i]){i&6&&(a=We,r=Rt(r,i,c,1,l,a,n,e,Mt,ht,null,dt)),i&1&&s!==(s=Ae(`container ${l[0]}`)+" svelte-18ktnr0")&&d(e,"class",s)},i:Se,o:Se,d(l){l&&$(e);for(let i=0;i<r.length;i+=1)r[i].d()}}}function Cr(t,e,r){let n;$e(t,De,l=>r(1,n=l));let{class:s=""}=e;function a(l){l!==n.name&&De.change(l)}const c=l=>a(l);return t.$$set=l=>{"class"in l&&r(0,s=l.class)},[s,n,a,c]}class Dr extends Pe{constructor(e){super(),ke(this,e,Cr,Ur,Oe,{class:0})}}function pt(t){t[14]=t[15].dataUri}function vt(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!0,pending:jr,then:Lr,catch:Nr,value:15,error:16};return tt(r=t[4],n),{c(){e=k("div"),n.block.c(),this.h()},l(s){e=O(s,"DIV",{class:!0});var a=C(e);n.block.l(a),a.forEach($),this.h()},h(){d(e,"class","preview__container preview__container--no-debug svelte-3l21ea")},m(s,a){oe(s,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(s,a){t=s,n.ctx=t,a&16&&r!==(r=t[4])&&tt(r,n)||Dt(n,t,a)},d(s){s&&$(e),n.block.d(),n.token=null,n=null}}}function Nr(t){let e,r,n=t[16]+"",s;return{c(){e=k("p"),r=ie("An error has occurred: "),s=ie(n),this.h()},l(a){e=O(a,"P",{class:!0});var c=C(e);r=le(c,"An error has occurred: "),s=le(c,n),c.forEach($),this.h()},h(){d(e,"class","preview__error svelte-3l21ea")},m(a,c){oe(a,e,c),g(e,r),g(e,s)},p(a,c){c&16&&n!==(n=a[16]+"")&&Ie(s,n)},d(a){a&&$(e)}}}function Lr(t){pt(t);let e,r,n,s,a,c,l;return{c(){e=k("div"),r=k("img"),s=q(),a=k("a"),c=ie("Download"),this.h()},l(i){e=O(i,"DIV",{class:!0});var o=C(e);r=O(o,"IMG",{class:!0,src:!0,alt:!0}),o.forEach($),s=V(i),a=O(i,"A",{class:!0,download:!0,href:!0});var u=C(a);c=le(u,"Download"),u.forEach($),this.h()},h(){d(r,"class","preview__image svelte-3l21ea"),Ue(r.src,n=t[14])||d(r,"src",n),d(r,"alt","generated gif"),d(e,"class","preview__image-container svelte-3l21ea"),d(a,"class","preview__download-button svelte-3l21ea"),d(a,"download","jumping_peter.gif"),d(a,"href",l=t[14])},m(i,o){oe(i,e,o),g(e,r),oe(i,s,o),oe(i,a,o),g(a,c)},p(i,o){pt(i),o&16&&!Ue(r.src,n=i[14])&&d(r,"src",n),o&16&&l!==(l=i[14])&&d(a,"href",l)},d(i){i&&$(e),i&&$(s),i&&$(a)}}}function jr(t){let e,r,n,s,a,c,l=t[5].frame+"",i,o,u=t[2].totalFrames+"",f,w,v,m,_,b;return{c(){e=k("div"),r=k("p"),n=ie("Generating..."),s=q(),a=k("p"),c=ie("["),i=ie(l),o=ie(" / "),f=ie(u),w=ie("]"),v=q(),m=k("progress"),this.h()},l(p){e=O(p,"DIV",{class:!0});var y=C(e);r=O(y,"P",{});var X=C(r);n=le(X,"Generating..."),X.forEach($),s=V(y),a=O(y,"P",{});var M=C(a);c=le(M,"["),i=le(M,l),o=le(M," / "),f=le(M,u),w=le(M,"]"),M.forEach($),v=V(y),m=O(y,"PROGRESS",{class:!0,max:!0}),C(m).forEach($),y.forEach($),this.h()},h(){d(m,"class","preview__progress svelte-3l21ea"),d(m,"max",_=t[2].totalFrames),m.value=b=t[5].frame,d(e,"class","preview__loading svelte-3l21ea")},m(p,y){oe(p,e,y),g(e,r),g(r,n),g(e,s),g(e,a),g(a,c),g(a,i),g(a,o),g(a,f),g(a,w),g(e,v),g(e,m)},p(p,y){y&32&&l!==(l=p[5].frame+"")&&Ie(i,l),y&4&&u!==(u=p[2].totalFrames+"")&&Ie(f,u),y&4&&_!==(_=p[2].totalFrames)&&d(m,"max",_),y&32&&b!==(b=p[5].frame)&&(m.value=b)},d(p){p&&$(e)}}}function Gr(t){let e,r,n,s,a,c,l,i,o,u,f,w;n=new kt({props:{label:"Debug Mode",value:t[1]}}),n.$on("change",t[7]);let v=!t[1]&&t[4]&&vt(t);return u=new Te({props:{min:0,max:t[2].totalFrames-1,step:1,value:t[5].frame}}),u.$on("input",t[6]),{c(){e=k("main"),r=k("div"),ue(n.$$.fragment),s=q(),v&&v.c(),a=q(),c=k("div"),l=k("div"),i=k("canvas"),o=q(),ue(u.$$.fragment),this.h()},l(m){e=O(m,"MAIN",{class:!0});var _=C(e);r=O(_,"DIV",{class:!0});var b=C(r);fe(n.$$.fragment,b),b.forEach($),s=V(_),v&&v.l(_),a=V(_),c=O(_,"DIV",{class:!0});var p=C(c);l=O(p,"DIV",{class:!0});var y=C(l);i=O(y,"CANVAS",{class:!0,style:!0}),C(i).forEach($),y.forEach($),o=V(p),fe(u.$$.fragment,p),p.forEach($),_.forEach($),this.h()},h(){d(r,"class","preview__debug-input svelte-3l21ea"),d(i,"class","preview__image svelte-3l21ea"),Ut(i,"transform","scaleY(-1)"),d(l,"class","preview__image-container svelte-3l21ea"),d(c,"class","preview__container preview__container--debug svelte-3l21ea"),d(e,"class",f=Ae(`preview ${t[0]}`)+" svelte-3l21ea"),xe(e,"preview--debug",t[1]),xe(e,"preview--no-debug",!t[1])},m(m,_){oe(m,e,_),g(e,r),me(n,r,null),g(e,s),v&&v.m(e,null),g(e,a),g(e,c),g(c,l),g(l,i),t[11](i),g(c,o),me(u,c,null),w=!0},p(m,[_]){const b={};_&2&&(b.value=m[1]),n.$set(b),!m[1]&&m[4]?v?v.p(m,_):(v=vt(m),v.c(),v.m(e,a)):v&&(v.d(1),v=null);const p={};_&4&&(p.max=m[2].totalFrames-1),_&32&&(p.value=m[5].frame),u.$set(p),(!w||_&1&&f!==(f=Ae(`preview ${m[0]}`)+" svelte-3l21ea"))&&d(e,"class",f),(!w||_&3)&&xe(e,"preview--debug",m[1]),(!w||_&3)&&xe(e,"preview--no-debug",!m[1])},i(m){w||(ae(n.$$.fragment,m),ae(u.$$.fragment,m),w=!0)},o(m){se(n.$$.fragment,m),se(u.$$.fragment,m),w=!1},d(m){m&&$(e),de(n),v&&v.d(),t[11](null),de(u)}}}function qr(t,e,r){let n,s,a,c,l;$e(t,De,p=>r(8,n=p)),$e(t,je,p=>r(9,s=p)),$e(t,Me,p=>r(2,a=p)),$e(t,Ee,p=>r(10,c=p)),$e(t,Ne,p=>r(5,l=p));let i,{class:o=""}=e,u=!1,f=null;function w(){Ne.renderFrame().catch(p=>{throw console.error(`renderFrame failed: ${p}`),p})}function v(){r(4,f=Ne.animate().catch(p=>{throw console.error(`animate failed: ${p}`),p}))}Ct(()=>{Ne.changeCanvas(i),v()});function m(p){Ne.renderFrame(p.detail.value).catch(y=>console.error(`Animation failed: ${y}`))}function _(p){r(1,u=p.detail.value)}function b(p){Nt[p?"unshift":"push"](()=>{i=p,r(3,i)})}return t.$$set=p=>{"class"in p&&r(0,o=p.class)},t.$$.update=()=>{t.$$.dirty&1798&&(u?w():v())},[o,u,a,i,f,l,m,_,n,s,c,b]}class Vr extends Pe{constructor(e){super(),ke(this,e,qr,Gr,Oe,{class:0})}}function Xr(t){let e,r,n,s,a,c,l,i,o,u,f,w,v,m,_,b,p,y,X,M,W,U,J,Y,Z;return document.title=e=Le,b=new qt({props:{class:"header"}}),y=new Dr({props:{class:"animations"}}),M=new Sr({props:{class:"common-options"}}),U=new Mr({props:{class:"animation-options"}}),Y=new Vr({props:{class:"preview"}}),{c(){r=k("meta"),n=k("meta"),s=k("meta"),a=k("meta"),c=k("meta"),l=k("meta"),i=k("meta"),o=k("meta"),u=k("meta"),f=k("meta"),w=k("meta"),v=k("meta"),m=q(),_=k("div"),ue(b.$$.fragment),p=q(),ue(y.$$.fragment),X=q(),ue(M.$$.fragment),W=q(),ue(U.$$.fragment),J=q(),ue(Y.$$.fragment),this.h()},l(D){const A=Lt("svelte-2dqrj",document.head);r=O(A,"META",{name:!0,content:!0,class:!0}),n=O(A,"META",{name:!0,content:!0,class:!0}),s=O(A,"META",{property:!0,content:!0,class:!0}),a=O(A,"META",{property:!0,content:!0,class:!0}),c=O(A,"META",{property:!0,content:!0,class:!0}),l=O(A,"META",{property:!0,content:!0,class:!0}),i=O(A,"META",{property:!0,content:!0,class:!0}),o=O(A,"META",{property:!0,content:!0,class:!0}),u=O(A,"META",{property:!0,content:!0,class:!0}),f=O(A,"META",{property:!0,content:!0,class:!0}),w=O(A,"META",{property:!0,content:!0,class:!0}),v=O(A,"META",{property:!0,content:!0,class:!0}),A.forEach($),m=V(D),_=O(D,"DIV",{class:!0});var R=C(_);fe(b.$$.fragment,R),p=V(R),fe(y.$$.fragment,R),X=V(R),fe(M.$$.fragment,R),W=V(R),fe(U.$$.fragment,R),J=V(R),fe(Y.$$.fragment,R),R.forEach($),this.h()},h(){d(r,"name","title"),d(r,"content",Le),d(r,"class","svelte-r12qw"),d(n,"name","description"),d(n,"content",Ye),d(n,"class","svelte-r12qw"),d(s,"property","og:type"),d(s,"content","website"),d(s,"class","svelte-r12qw"),d(a,"property","og:url"),d(a,"content",gt),d(a,"class","svelte-r12qw"),d(c,"property","og:title"),d(c,"content",Le),d(c,"class","svelte-r12qw"),d(l,"property","og:description"),d(l,"content",Ye),d(l,"class","svelte-r12qw"),d(i,"property","og:image"),d(i,"content",_t),d(i,"class","svelte-r12qw"),d(o,"property","twitter:card"),d(o,"content","summary_large_image"),d(o,"class","svelte-r12qw"),d(u,"property","twitter:url"),d(u,"content",gt),d(u,"class","svelte-r12qw"),d(f,"property","twitter:title"),d(f,"content",Le),d(f,"class","svelte-r12qw"),d(w,"property","twitter:description"),d(w,"content",Ye),d(w,"class","svelte-r12qw"),d(v,"property","twitter:image"),d(v,"content",_t),d(v,"class","svelte-r12qw"),d(_,"class","grid svelte-r12qw")},m(D,A){g(document.head,r),g(document.head,n),g(document.head,s),g(document.head,a),g(document.head,c),g(document.head,l),g(document.head,i),g(document.head,o),g(document.head,u),g(document.head,f),g(document.head,w),g(document.head,v),oe(D,m,A),oe(D,_,A),me(b,_,null),g(_,p),me(y,_,null),g(_,X),me(M,_,null),g(_,W),me(U,_,null),g(_,J),me(Y,_,null),Z=!0},p(D,[A]){(!Z||A&0)&&e!==(e=Le)&&(document.title=e)},i(D){Z||(ae(b.$$.fragment,D),ae(y.$$.fragment,D),ae(M.$$.fragment,D),ae(U.$$.fragment,D),ae(Y.$$.fragment,D),Z=!0)},o(D){se(b.$$.fragment,D),se(y.$$.fragment,D),se(M.$$.fragment,D),se(U.$$.fragment,D),se(Y.$$.fragment,D),Z=!1},d(D){$(r),$(n),$(s),$(a),$(c),$(l),$(i),$(o),$(u),$(f),$(w),$(v),D&&$(m),D&&$(_),de(b),de(y),de(M),de(U),de(Y)}}}const Le="Jumping Peter",Ye="With Jumping Peter you can generate custom GIF emojis from images, with dozens of pre-built animations and effects",gt="https://ksmai.github.io/jumping-peter",_t="https://ksmai.github.io/jumping-peter/favicon.png";class Yr extends Pe{constructor(e){super(),ke(this,e,null,Xr,Oe,{})}}export{Yr as default};
